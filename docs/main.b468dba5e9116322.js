"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[179],{459:(x,k,$)=>{function F(e){return"function"==typeof e}function X(e){const r=e(n=>{Error.call(n),n.stack=(new Error).stack});return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}const K=X(e=>function(r){e(this),this.message=r?`${r.length} errors occurred during unsubscription:\n${r.map((n,s)=>`${s+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=r});function O(e,t){if(e){const r=e.indexOf(t);0<=r&&e.splice(r,1)}}class A{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:r}=this;if(r)if(this._parentage=null,Array.isArray(r))for(const o of r)o.remove(this);else r.remove(this);const{initialTeardown:n}=this;if(F(n))try{n()}catch(o){t=o instanceof K?o.errors:[o]}const{_finalizers:s}=this;if(s){this._finalizers=null;for(const o of s)try{C(o)}catch(a){t=t??[],a instanceof K?t=[...t,...a.errors]:t.push(a)}}if(t)throw new K(t)}}add(t){var r;if(t&&t!==this)if(this.closed)C(t);else{if(t instanceof A){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(r=this._finalizers)&&void 0!==r?r:[]).push(t)}}_hasParent(t){const{_parentage:r}=this;return r===t||Array.isArray(r)&&r.includes(t)}_addParent(t){const{_parentage:r}=this;this._parentage=Array.isArray(r)?(r.push(t),r):r?[r,t]:t}_removeParent(t){const{_parentage:r}=this;r===t?this._parentage=null:Array.isArray(r)&&O(r,t)}remove(t){const{_finalizers:r}=this;r&&O(r,t),t instanceof A&&t._removeParent(this)}}A.EMPTY=(()=>{const e=new A;return e.closed=!0,e})();const M=A.EMPTY;function f(e){return e instanceof A||e&&"closed"in e&&F(e.remove)&&F(e.add)&&F(e.unsubscribe)}function C(e){F(e)?e():e.unsubscribe()}const _={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},v={setTimeout(e,t,...r){const{delegate:n}=v;return n?.setTimeout?n.setTimeout(e,t,...r):setTimeout(e,t,...r)},clearTimeout(e){const{delegate:t}=v;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function p(e){v.setTimeout(()=>{const{onUnhandledError:t}=_;if(!t)throw e;t(e)})}function m(){}const b=Z("C",void 0,void 0);function Z(e,t,r){return{kind:e,value:t,error:r}}let I=null;function B(e){if(_.useDeprecatedSynchronousErrorHandling){const t=!I;if(t&&(I={errorThrown:!1,error:null}),e(),t){const{errorThrown:r,error:n}=I;if(I=null,r)throw n}}else e()}class z extends A{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,f(t)&&t.add(this)):this.destination=Pe}static create(t,r,n){return new ee(t,r,n)}next(t){this.isStopped?ie(function S(e){return Z("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?ie(function P(e){return Z("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?ie(b,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const G=Function.prototype.bind;function J(e,t){return G.call(e,t)}class W{constructor(t){this.partialObserver=t}next(t){const{partialObserver:r}=this;if(r.next)try{r.next(t)}catch(n){ae(n)}}error(t){const{partialObserver:r}=this;if(r.error)try{r.error(t)}catch(n){ae(n)}else ae(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(r){ae(r)}}}class ee extends z{constructor(t,r,n){let s;if(super(),F(t)||!t)s={next:t??void 0,error:r??void 0,complete:n??void 0};else{let o;this&&_.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),s={next:t.next&&J(t.next,o),error:t.error&&J(t.error,o),complete:t.complete&&J(t.complete,o)}):s=t}this.destination=new W(s)}}function ae(e){_.useDeprecatedSynchronousErrorHandling?function j(e){_.useDeprecatedSynchronousErrorHandling&&I&&(I.errorThrown=!0,I.error=e)}(e):p(e)}function ie(e,t){const{onStoppedNotification:r}=_;r&&v.setTimeout(()=>r(e,t))}const Pe={closed:!0,next:m,error:function ue(e){throw e},complete:m},xe="function"==typeof Symbol&&Symbol.observable||"@@observable";function me(e){return e}function Ae(e){return 0===e.length?me:1===e.length?e[0]:function(r){return e.reduce((n,s)=>s(n),r)}}let Ne=(()=>{class e{constructor(r){r&&(this._subscribe=r)}lift(r){const n=new e;return n.source=this,n.operator=r,n}subscribe(r,n,s){const o=function Lt(e){return e&&e instanceof z||function wt(e){return e&&F(e.next)&&F(e.error)&&F(e.complete)}(e)&&f(e)}(r)?r:new ee(r,n,s);return B(()=>{const{operator:a,source:l}=this;o.add(a?a.call(o,l):l?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(r){try{return this._subscribe(r)}catch(n){r.error(n)}}forEach(r,n){return new(n=ct(n))((s,o)=>{const a=new ee({next:l=>{try{r(l)}catch(u){o(u),a.unsubscribe()}},error:o,complete:s});this.subscribe(a)})}_subscribe(r){var n;return null===(n=this.source)||void 0===n?void 0:n.subscribe(r)}[xe](){return this}pipe(...r){return Ae(r)(this)}toPromise(r){return new(r=ct(r))((n,s)=>{let o;this.subscribe(a=>o=a,a=>s(a),()=>n(o))})}}return e.create=t=>new e(t),e})();function ct(e){var t;return null!==(t=e??_.Promise)&&void 0!==t?t:Promise}const yi=X(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Pt=(()=>{class e extends Ne{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(r){const n=new qt(this,this);return n.operator=r,n}_throwIfClosed(){if(this.closed)throw new yi}next(r){B(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const n of this.currentObservers)n.next(r)}})}error(r){B(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=r;const{observers:n}=this;for(;n.length;)n.shift().error(r)}})}complete(){B(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:r}=this;for(;r.length;)r.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var r;return(null===(r=this.observers)||void 0===r?void 0:r.length)>0}_trySubscribe(r){return this._throwIfClosed(),super._trySubscribe(r)}_subscribe(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)}_innerSubscribe(r){const{hasError:n,isStopped:s,observers:o}=this;return n||s?M:(this.currentObservers=null,o.push(r),new A(()=>{this.currentObservers=null,O(o,r)}))}_checkFinalizedStatuses(r){const{hasError:n,thrownError:s,isStopped:o}=this;n?r.error(s):o&&r.complete()}asObservable(){const r=new Ne;return r.source=this,r}}return e.create=(t,r)=>new qt(t,r),e})();class qt extends Pt{constructor(t,r){super(),this.destination=t,this.source=r}next(t){var r,n;null===(n=null===(r=this.destination)||void 0===r?void 0:r.next)||void 0===n||n.call(r,t)}error(t){var r,n;null===(n=null===(r=this.destination)||void 0===r?void 0:r.error)||void 0===n||n.call(r,t)}complete(){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===r||r.call(t)}_subscribe(t){var r,n;return null!==(n=null===(r=this.source)||void 0===r?void 0:r.subscribe(t))&&void 0!==n?n:M}}function $t(e){return F(e?.lift)}function mt(e){return t=>{if($t(t))return t.lift(function(r){try{return e(r,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function bt(e,t,r,n,s){return new En(e,t,r,n,s)}class En extends z{constructor(t,r,n,s,o,a){super(t),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=r?function(l){try{r(l)}catch(u){t.error(u)}}:super._next,this._error=s?function(l){try{s(l)}catch(u){t.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:r}=this;super.unsubscribe(),!r&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function dt(e,t){return mt((r,n)=>{let s=0;r.subscribe(bt(n,o=>{n.next(e.call(t,o,s++))}))})}function Se(e){return this instanceof Se?(this.v=e,this):new Se(e)}function Mt(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function Be(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=e[o]&&function(a){return new Promise(function(l,u){!function s(o,a,l,u){Promise.resolve(u).then(function(c){o({value:c,done:l})},a)}(l,u,(a=e[o](a)).done,a.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const Zn=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function $r(e){return F(e?.then)}function Jr(e){return F(e[xe])}function $a(e){return Symbol.asyncIterator&&F(e?.[Symbol.asyncIterator])}function Cc(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const si=function bc(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Wr(e){return F(e?.[si])}function Dn(e){return function Ue(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,n=r.apply(e,t||[]),o=[];return s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s;function a(y){n[y]&&(s[y]=function(E){return new Promise(function(w,T){o.push([y,E,w,T])>1||l(y,E)})})}function l(y,E){try{!function u(y){y.value instanceof Se?Promise.resolve(y.value.v).then(c,h):g(o[0][2],y)}(n[y](E))}catch(w){g(o[0][3],w)}}function c(y){l("next",y)}function h(y){l("throw",y)}function g(y,E){y(E),o.shift(),o.length&&l(o[0][0],o[0][1])}}(this,arguments,function*(){const r=e.getReader();try{for(;;){const{value:n,done:s}=yield Se(r.read());if(s)return yield Se(void 0);yield yield Se(n)}}finally{r.releaseLock()}})}function Ci(e){return F(e?.getReader)}function ji(e){if(e instanceof Ne)return e;if(null!=e){if(Jr(e))return function yo(e){return new Ne(t=>{const r=e[xe]();if(F(r.subscribe))return r.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(Zn(e))return function lr(e){return new Ne(t=>{for(let r=0;r<e.length&&!t.closed;r++)t.next(e[r]);t.complete()})}(e);if($r(e))return function Kr(e){return new Ne(t=>{e.then(r=>{t.closed||(t.next(r),t.complete())},r=>t.error(r)).then(null,p)})}(e);if($a(e))return Co(e);if(Wr(e))return function un(e){return new Ne(t=>{for(const r of e)if(t.next(r),t.closed)return;t.complete()})}(e);if(Ci(e))return function qr(e){return Co(Dn(e))}(e)}throw Cc(e)}function Co(e){return new Ne(t=>{(function bo(e,t){var r,n,s,o;return function mo(e,t,r,n){return new(r||(r=Promise))(function(o,a){function l(h){try{c(n.next(h))}catch(g){a(g)}}function u(h){try{c(n.throw(h))}catch(g){a(g)}}function c(h){h.done?o(h.value):function s(o){return o instanceof r?o:new r(function(a){a(o)})}(h.value).then(l,u)}c((n=n.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){try{for(r=Mt(e);!(n=yield r.next()).done;)if(t.next(n.value),t.closed)return}catch(a){s={error:a}}finally{try{n&&!n.done&&(o=r.return)&&(yield o.call(r))}finally{if(s)throw s.error}}t.complete()})})(e,t).catch(r=>t.error(r))})}function Jt(e,t,r,n=0,s=!1){const o=t.schedule(function(){r(),s?e.add(this.schedule(null,n)):this.unsubscribe()},n);if(e.add(o),!s)return o}function ai(e,t,r=1/0){return F(t)?ai((n,s)=>dt((o,a)=>t(n,o,s,a))(ji(e(n,s))),r):("number"==typeof t&&(r=t),mt((n,s)=>function Xb(e,t,r,n,s,o,a,l){const u=[];let c=0,h=0,g=!1;const y=()=>{g&&!u.length&&!c&&t.complete()},E=T=>c<n?w(T):u.push(T),w=T=>{o&&t.next(T),c++;let N=!1;ji(r(T,h++)).subscribe(bt(t,L=>{s?.(L),o?E(L):t.next(L)},()=>{N=!0},void 0,()=>{if(N)try{for(c--;u.length&&c<n;){const L=u.shift();a?Jt(t,a,()=>w(L)):w(L)}y()}catch(L){t.error(L)}}))};return e.subscribe(bt(t,E,()=>{g=!0,y()})),()=>{l?.()}}(n,s,e,r)))}function Qr(e=1/0){return ai(me,e)}const wn=new Ne(e=>e.complete());function Ec(e){return e[e.length-1]}function Eo(e){return function Gb(e){return e&&F(e.schedule)}(Ec(e))?e.pop():void 0}function Ip(e,t=0){return mt((r,n)=>{r.subscribe(bt(n,s=>Jt(n,e,()=>n.next(s),t),()=>Jt(n,e,()=>n.complete(),t),s=>Jt(n,e,()=>n.error(s),t)))})}function Np(e,t=0){return mt((r,n)=>{n.add(e.schedule(()=>r.subscribe(n),t))})}function Rp(e,t){if(!e)throw new Error("Iterable cannot be null");return new Ne(r=>{Jt(r,t,()=>{const n=e[Symbol.asyncIterator]();Jt(r,t,()=>{n.next().then(s=>{s.done?r.complete():r.next(s.value)})},0,!0)})})}function li(e,t){return t?function tE(e,t){if(null!=e){if(Jr(e))return function Wb(e,t){return ji(e).pipe(Np(t),Ip(t))}(e,t);if(Zn(e))return function qb(e,t){return new Ne(r=>{let n=0;return t.schedule(function(){n===e.length?r.complete():(r.next(e[n++]),r.closed||this.schedule())})})}(e,t);if($r(e))return function Kb(e,t){return ji(e).pipe(Np(t),Ip(t))}(e,t);if($a(e))return Rp(e,t);if(Wr(e))return function Qb(e,t){return new Ne(r=>{let n;return Jt(r,t,()=>{n=e[si](),Jt(r,t,()=>{let s,o;try{({value:s,done:o}=n.next())}catch(a){return void r.error(a)}o?r.complete():r.next(s)},0,!0)}),()=>F(n?.return)&&n.return()})}(e,t);if(Ci(e))return function eE(e,t){return Rp(Dn(e),t)}(e,t)}throw Cc(e)}(e,t):ji(e)}class Ji extends Pt{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const r=super._subscribe(t);return!r.closed&&t.next(this._value),r}getValue(){const{hasError:t,thrownError:r,_value:n}=this;if(t)throw r;return this._throwIfClosed(),n}next(t){super.next(this._value=t)}}function qe(...e){return li(e,Eo(e))}function Lp(e={}){const{connector:t=(()=>new Pt),resetOnError:r=!0,resetOnComplete:n=!0,resetOnRefCountZero:s=!0}=e;return o=>{let a,l,u,c=0,h=!1,g=!1;const y=()=>{l?.unsubscribe(),l=void 0},E=()=>{y(),a=u=void 0,h=g=!1},w=()=>{const T=a;E(),T?.unsubscribe()};return mt((T,N)=>{c++,!g&&!h&&y();const L=u=u??t();N.add(()=>{c--,0===c&&!g&&!h&&(l=Pc(w,s))}),L.subscribe(N),!a&&c>0&&(a=new ee({next:R=>L.next(R),error:R=>{g=!0,y(),l=Pc(E,r,R),L.error(R)},complete:()=>{h=!0,y(),l=Pc(E,n),L.complete()}}),ji(T).subscribe(a))})(o)}}function Pc(e,t,...r){if(!0===t)return void e();if(!1===t)return;const n=new ee({next:()=>{n.unsubscribe(),e()}});return ji(t(...r)).subscribe(n)}function Mn(e,t){return mt((r,n)=>{let s=null,o=0,a=!1;const l=()=>a&&!s&&n.complete();r.subscribe(bt(n,u=>{s?.unsubscribe();let c=0;const h=o++;ji(e(u,h)).subscribe(s=bt(n,g=>n.next(t?t(u,g,h,c++):g),()=>{s=null,l()}))},()=>{a=!0,l()}))})}function rE(e,t){return e===t}function Zt(e){for(let t in e)if(e[t]===Zt)return t;throw Error("Could not find renamed property on target object.")}function ei(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(ei).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const r=t.indexOf("\n");return-1===r?t:t.substring(0,r)}function Zc(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const sE=Zt({__forward_ref__:Zt});function Dc(e){return e.__forward_ref__=Dc,e.toString=function(){return ei(this())},e}function Ke(e){return wc(e)?e():e}function wc(e){return"function"==typeof e&&e.hasOwnProperty(sE)&&e.__forward_ref__===Dc}function Mc(e){return e&&!!e.\u0275providers}class Ze extends Error{constructor(t,r){super(function Wa(e,t){return`NG0${Math.abs(e)}${t?": "+t:""}`}(t,r)),this.code=t}}function Et(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():function tt(e){return"string"==typeof e?e:null==e?"":String(e)}(e)}function Sc(e,t){throw new Ze(-201,!1)}function Wi(e,t){null==e&&function $e(e,t,r,n){throw new Error(`ASSERTION ERROR: ${e}`+(null==n?"":` [Expected=> ${r} ${n} ${t} <=Actual]`))}(t,e,null,"!=")}function ze(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function ur(e){return{providers:e.providers||[],imports:e.imports||[]}}function Ka(e){return Bp(e,Qa)||Bp(e,Fp)}function Bp(e,t){return e.hasOwnProperty(t)?e[t]:null}function qa(e){return e&&(e.hasOwnProperty(Oc)||e.hasOwnProperty(fE))?e[Oc]:null}const Qa=Zt({\u0275prov:Zt}),Oc=Zt({\u0275inj:Zt}),Fp=Zt({ngInjectableDef:Zt}),fE=Zt({ngInjectorDef:Zt});var ut=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(ut||{});let xc;function Ai(e){const t=xc;return xc=e,t}function Up(e,t,r){const n=Ka(e);return n&&"root"==n.providedIn?void 0===n.value?n.value=n.factory():n.value:r&ut.Optional?null:void 0!==t?t:void Sc(ei(e))}const xt=globalThis,Po={},Rc="__NG_DI_FLAG__",el="ngTempTokenPath",mE=/\n/gm,Vp="__source";let es;function cr(e){const t=es;return es=e,t}function yE(e,t=ut.Default){if(void 0===es)throw new Ze(-203,!1);return null===es?Up(e,void 0,t):es.get(e,t&ut.Optional?null:void 0,t)}function He(e,t=ut.Default){return(function jp(){return xc}()||yE)(Ke(e),t)}function Ie(e,t=ut.Default){return He(e,tl(t))}function tl(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Lc(e){const t=[];for(let r=0;r<e.length;r++){const n=Ke(e[r]);if(Array.isArray(n)){if(0===n.length)throw new Ze(900,!1);let s,o=ut.Default;for(let a=0;a<n.length;a++){const l=n[a],u=CE(l);"number"==typeof u?-1===u?s=l.token:o|=u:s=l}t.push(He(s,o))}else t.push(He(n))}return t}function Zo(e,t){return e[Rc]=t,e.prototype[Rc]=t,e}function CE(e){return e[Rc]}function Un(e){return{toString:e}.toString()}var il=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(il||{}),cn=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(cn||{});const Sn={},_t=[],nl=Zt({\u0275cmp:Zt}),kc=Zt({\u0275dir:Zt}),Bc=Zt({\u0275pipe:Zt}),Xp=Zt({\u0275mod:Zt}),Yn=Zt({\u0275fac:Zt}),Do=Zt({__NG_ELEMENT_ID__:Zt}),zp=Zt({__NG_ENV_ID__:Zt});function Gp(e,t,r){let n=e.length;for(;;){const s=e.indexOf(t,r);if(-1===s)return s;if(0===s||e.charCodeAt(s-1)<=32){const o=t.length;if(s+o===n||e.charCodeAt(s+o)<=32)return s}r=s+1}}function Fc(e,t,r){let n=0;for(;n<r.length;){const s=r[n];if("number"==typeof s){if(0!==s)break;n++;const o=r[n++],a=r[n++],l=r[n++];e.setAttribute(t,a,l,o)}else{const o=s,a=r[++n];Jp(o)?e.setProperty(t,o,a):e.setAttribute(t,o,a),n++}}return n}function $p(e){return 3===e||4===e||6===e}function Jp(e){return 64===e.charCodeAt(0)}function wo(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let r=-1;for(let n=0;n<t.length;n++){const s=t[n];"number"==typeof s?r=s:0===r||Wp(e,r,s,null,-1===r||2===r?t[++n]:null)}}return e}function Wp(e,t,r,n,s){let o=0,a=e.length;if(-1===t)a=-1;else for(;o<e.length;){const l=e[o++];if("number"==typeof l){if(l===t){a=-1;break}if(l>t){a=o-1;break}}}for(;o<e.length;){const l=e[o];if("number"==typeof l)break;if(l===r){if(null===n)return void(null!==s&&(e[o+1]=s));if(n===e[o+1])return void(e[o+2]=s)}o++,null!==n&&o++,null!==s&&o++}-1!==a&&(e.splice(a,0,t),o=a+1),e.splice(o++,0,r),null!==n&&e.splice(o++,0,n),null!==s&&e.splice(o++,0,s)}const Kp="ng-template";function PE(e,t,r){let n=0,s=!0;for(;n<e.length;){let o=e[n++];if("string"==typeof o&&s){const a=e[n++];if(r&&"class"===o&&-1!==Gp(a.toLowerCase(),t,0))return!0}else{if(1===o){for(;n<e.length&&"string"==typeof(o=e[n++]);)if(o.toLowerCase()===t)return!0;return!1}"number"==typeof o&&(s=!1)}}return!1}function qp(e){return 4===e.type&&e.value!==Kp}function ZE(e,t,r){return t===(4!==e.type||r?e.value:Kp)}function DE(e,t,r){let n=4;const s=e.attrs||[],o=function SE(e){for(let t=0;t<e.length;t++)if($p(e[t]))return t;return e.length}(s);let a=!1;for(let l=0;l<t.length;l++){const u=t[l];if("number"!=typeof u){if(!a)if(4&n){if(n=2|1&n,""!==u&&!ZE(e,u,r)||""===u&&1===t.length){if(hn(n))return!1;a=!0}}else{const c=8&n?u:t[++l];if(8&n&&null!==e.attrs){if(!PE(e.attrs,c,r)){if(hn(n))return!1;a=!0}continue}const g=wE(8&n?"class":u,s,qp(e),r);if(-1===g){if(hn(n))return!1;a=!0;continue}if(""!==c){let y;y=g>o?"":s[g+1].toLowerCase();const E=8&n?y:null;if(E&&-1!==Gp(E,c,0)||2&n&&c!==y){if(hn(n))return!1;a=!0}}}}else{if(!a&&!hn(n)&&!hn(u))return!1;if(a&&hn(u))continue;a=!1,n=u|1&n}}return hn(n)||a}function hn(e){return 0==(1&e)}function wE(e,t,r,n){if(null===t)return-1;let s=0;if(n||!r){let o=!1;for(;s<t.length;){const a=t[s];if(a===e)return s;if(3===a||6===a)o=!0;else{if(1===a||2===a){let l=t[++s];for(;"string"==typeof l;)l=t[++s];continue}if(4===a)break;if(0===a){s+=4;continue}}s+=o?1:2}return-1}return function OE(e,t){let r=e.indexOf(4);if(r>-1)for(r++;r<e.length;){const n=e[r];if("number"==typeof n)return-1;if(n===t)return r;r++}return-1}(t,e)}function Qp(e,t,r=!1){for(let n=0;n<t.length;n++)if(DE(e,t[n],r))return!0;return!1}function e0(e,t){return e?":not("+t.trim()+")":t}function TE(e){let t=e[0],r=1,n=2,s="",o=!1;for(;r<e.length;){let a=e[r];if("string"==typeof a)if(2&n){const l=e[++r];s+="["+a+(l.length>0?'="'+l+'"':"")+"]"}else 8&n?s+="."+a:4&n&&(s+=" "+a);else""!==s&&!hn(a)&&(t+=e0(o,s),s=""),n=a,o=o||!hn(n);r++}return""!==s&&(t+=e0(o,s)),t}function ts(e){return Un(()=>{const t=n0(e),r={...t,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===il.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||cn.Emulated,styles:e.styles||_t,_:null,schemas:e.schemas||null,tView:null,id:""};r0(r);const n=e.dependencies;return r.directiveDefs=rl(n,!1),r.pipeDefs=rl(n,!0),r.id=function FE(e){let t=0;const r=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(const s of r)t=Math.imul(31,t)+s.charCodeAt(0)<<0;return t+=2147483648,"c"+t}(r),r})}function RE(e){return pt(e)||ui(e)}function LE(e){return null!==e}function Mr(e){return Un(()=>({type:e.type,bootstrap:e.bootstrap||_t,declarations:e.declarations||_t,imports:e.imports||_t,exports:e.exports||_t,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function t0(e,t){if(null==e)return Sn;const r={};for(const n in e)if(e.hasOwnProperty(n)){let s=e[n],o=s;Array.isArray(s)&&(o=s[1],s=s[0]),r[s]=n,t&&(t[s]=o)}return r}function fi(e){return Un(()=>{const t=n0(e);return r0(t),t})}function pt(e){return e[nl]||null}function ui(e){return e[kc]||null}function bi(e){return e[Bc]||null}function Yi(e,t){const r=e[Xp]||null;if(!r&&!0===t)throw new Error(`Type ${ei(e)} does not have '\u0275mod' property.`);return r}function n0(e){const t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||Sn,exportAs:e.exportAs||null,standalone:!0===e.standalone,signals:!0===e.signals,selectors:e.selectors||_t,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:t0(e.inputs,t),outputs:t0(e.outputs)}}function r0(e){e.features?.forEach(t=>t(e))}function rl(e,t){if(!e)return null;const r=t?bi:RE;return()=>("function"==typeof e?e():e).map(n=>r(n)).filter(LE)}const Yt=0,Me=1,rt=2,kt=3,dn=4,Mo=5,pi=6,ns=7,Ht=8,hr=9,rs=10,it=11,So=12,s0=13,ss=14,Xt=15,Oo=16,os=17,On=18,xo=19,o0=20,dr=21,Vn=22,To=23,Ao=24,ht=25,Uc=1,a0=2,xn=7,as=9,ci=11;function Ni(e){return Array.isArray(e)&&"object"==typeof e[Uc]}function Ei(e){return Array.isArray(e)&&!0===e[Uc]}function Yc(e){return 0!=(4&e.flags)}function Sr(e){return e.componentOffset>-1}function ol(e){return 1==(1&e.flags)}function fn(e){return!!e.template}function Vc(e){return 0!=(512&e[rt])}function Or(e,t){return e.hasOwnProperty(Yn)?e[Yn]:null}let hi=null,al=!1;function Ki(e){const t=hi;return hi=e,t}const ll={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function d0(e){if(!No(e)||e.dirty){if(!e.producerMustRecompute(e)&&!g0(e))return void(e.dirty=!1);e.producerRecomputeValue(e),e.dirty=!1}}function p0(e){e.dirty=!0,function f0(e){if(void 0===e.liveConsumerNode)return;const t=al;al=!0;try{for(const r of e.liveConsumerNode)r.dirty||p0(r)}finally{al=t}}(e),e.consumerMarkedDirty?.(e)}function ul(e){return e&&(e.nextProducerIndex=0),Ki(e)}function cl(e,t){if(Ki(t),e&&void 0!==e.producerNode&&void 0!==e.producerIndexOfThis&&void 0!==e.producerLastReadVersion){if(No(e))for(let r=e.nextProducerIndex;r<e.producerNode.length;r++)hl(e.producerNode[r],e.producerIndexOfThis[r]);for(let r=e.nextProducerIndex;r<e.producerNode.length;r++)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function g0(e){ls(e);for(let t=0;t<e.producerNode.length;t++){const r=e.producerNode[t],n=e.producerLastReadVersion[t];if(n!==r.version||(d0(r),n!==r.version))return!0}return!1}function m0(e){if(ls(e),No(e))for(let t=0;t<e.producerNode.length;t++)hl(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function hl(e,t){if(function v0(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}(e),ls(e),1===e.liveConsumerNode.length)for(let n=0;n<e.producerNode.length;n++)hl(e.producerNode[n],e.producerIndexOfThis[n]);const r=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[r],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[r],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){const n=e.liveConsumerIndexOfThis[t],s=e.liveConsumerNode[t];ls(s),s.producerIndexOfThis[n]=t}}function No(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function ls(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}let y0=null;const P0=()=>{},KE={...ll,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:e=>{e.schedule(e.ref)},hasRun:!1,cleanupFn:P0};class qE{constructor(t,r,n){this.previousValue=t,this.currentValue=r,this.firstChange=n}isFirstChange(){return this.firstChange}}function pr(){return Z0}function Z0(e){return e.type.prototype.ngOnChanges&&(e.setInput=e2),QE}function QE(){const e=w0(this),t=e?.current;if(t){const r=e.previous;if(r===Sn)e.previous=t;else for(let n in t)r[n]=t[n];e.current=null,this.ngOnChanges(t)}}function e2(e,t,r,n){const s=this.declaredInputs[r],o=w0(e)||function t2(e,t){return e[D0]=t}(e,{previous:Sn,current:null}),a=o.current||(o.current={}),l=o.previous,u=l[s];a[s]=new qE(u&&u.currentValue,t,l===Sn),e[n]=t}pr.ngInherit=!0;const D0="__ngSimpleChanges__";function w0(e){return e[D0]||null}const Tn=function(e,t,r){};function Tt(e){for(;Array.isArray(e);)e=e[Yt];return e}function Ri(e,t){return Tt(t[e.index])}function O0(e,t){return e.data[t]}function Vi(e,t){const r=t[e];return Ni(r)?r:r[Yt]}function gr(e,t){return null==t?null:e[t]}function x0(e){e[os]=0}function a2(e){1024&e[rt]||(e[rt]|=1024,A0(e,1))}function T0(e){1024&e[rt]&&(e[rt]&=-1025,A0(e,-1))}function A0(e,t){let r=e[kt];if(null===r)return;r[Mo]+=t;let n=r;for(r=r[kt];null!==r&&(1===t&&1===n[Mo]||-1===t&&0===n[Mo]);)r[Mo]+=t,n=r,r=r[kt]}const Je={lFrame:V0(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function R0(){return Je.bindingsEnabled}function _e(){return Je.lFrame.lView}function gt(){return Je.lFrame.tView}function di(){let e=L0();for(;null!==e&&64===e.type;)e=e.parent;return e}function L0(){return Je.lFrame.currentTNode}function An(e,t){const r=Je.lFrame;r.currentTNode=e,r.isParent=t}function Kc(){return Je.lFrame.isParent}function b2(e,t){const r=Je.lFrame;r.bindingIndex=r.bindingRootIndex=e,Qc(t)}function Qc(e){Je.lFrame.currentDirectiveIndex=e}function th(e){Je.lFrame.currentQueryIndex=e}function P2(e){const t=e[Me];return 2===t.type?t.declTNode:1===t.type?e[pi]:null}function U0(e,t,r){if(r&ut.SkipSelf){let s=t,o=e;for(;!(s=s.parent,null!==s||r&ut.Host||(s=P2(o),null===s||(o=o[ss],10&s.type))););if(null===s)return!1;t=s,e=o}const n=Je.lFrame=Y0();return n.currentTNode=t,n.lView=e,!0}function ih(e){const t=Y0(),r=e[Me];Je.lFrame=t,t.currentTNode=r.firstChild,t.lView=e,t.tView=r,t.contextLView=e,t.bindingIndex=r.bindingStartIndex,t.inI18n=!1}function Y0(){const e=Je.lFrame,t=null===e?null:e.child;return null===t?V0(e):t}function V0(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function H0(){const e=Je.lFrame;return Je.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const X0=H0;function nh(){const e=H0();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Zi(){return Je.lFrame.selectedIndex}function xr(e){Je.lFrame.selectedIndex=e}let G0=!0;function pl(){return G0}function mr(e){G0=e}function gl(e,t){for(let r=t.directiveStart,n=t.directiveEnd;r<n;r++){const o=e.data[r].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:l,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:h}=o;a&&(e.contentHooks??=[]).push(-r,a),l&&((e.contentHooks??=[]).push(r,l),(e.contentCheckHooks??=[]).push(r,l)),u&&(e.viewHooks??=[]).push(-r,u),c&&((e.viewHooks??=[]).push(r,c),(e.viewCheckHooks??=[]).push(r,c)),null!=h&&(e.destroyHooks??=[]).push(r,h)}}function ml(e,t,r){$0(e,t,3,r)}function _l(e,t,r,n){(3&e[rt])===r&&$0(e,t,r,n)}function rh(e,t){let r=e[rt];(3&r)===t&&(r&=8191,r+=1,e[rt]=r)}function $0(e,t,r,n){const o=n??-1,a=t.length-1;let l=0;for(let u=void 0!==n?65535&e[os]:0;u<a;u++)if("number"==typeof t[u+1]){if(l=t[u],null!=n&&l>=n)break}else t[u]<0&&(e[os]+=65536),(l<o||-1==o)&&(T2(e,r,t,u),e[os]=(4294901760&e[os])+u+2),u++}function J0(e,t){Tn(4,e,t);const r=Ki(null);try{t.call(e)}finally{Ki(r),Tn(5,e,t)}}function T2(e,t,r,n){const s=r[n]<0,o=r[n+1],l=e[s?-r[n]:r[n]];s?e[rt]>>13<e[os]>>16&&(3&e[rt])===t&&(e[rt]+=8192,J0(l,o)):J0(l,o)}const ds=-1;class Lo{constructor(t,r,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=r,this.injectImpl=n}}function oh(e){return e!==ds}function ko(e){return 32767&e}function Bo(e,t){let r=function R2(e){return e>>16}(e),n=t;for(;r>0;)n=n[ss],r--;return n}let ah=!0;function vl(e){const t=ah;return ah=e,t}const W0=255,K0=5;let L2=0;const In={};function yl(e,t){const r=q0(e,t);if(-1!==r)return r;const n=t[Me];n.firstCreatePass&&(e.injectorIndex=t.length,lh(n.data,e),lh(t,null),lh(n.blueprint,null));const s=Cl(e,t),o=e.injectorIndex;if(oh(s)){const a=ko(s),l=Bo(s,t),u=l[Me].data;for(let c=0;c<8;c++)t[o+c]=l[a+c]|u[a+c]}return t[o+8]=s,o}function lh(e,t){e.push(0,0,0,0,0,0,0,0,t)}function q0(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Cl(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let r=0,n=null,s=t;for(;null!==s;){if(n=og(s),null===n)return ds;if(r++,s=s[ss],-1!==n.injectorIndex)return n.injectorIndex|r<<16}return ds}function uh(e,t,r){!function k2(e,t,r){let n;"string"==typeof r?n=r.charCodeAt(0)||0:r.hasOwnProperty(Do)&&(n=r[Do]),null==n&&(n=r[Do]=L2++);const s=n&W0;t.data[e+(s>>K0)]|=1<<s}(e,t,r)}function Q0(e,t,r){if(r&ut.Optional||void 0!==e)return e;Sc()}function eg(e,t,r,n){if(r&ut.Optional&&void 0===n&&(n=null),!(r&(ut.Self|ut.Host))){const s=e[hr],o=Ai(void 0);try{return s?s.get(t,n,r&ut.Optional):Up(t,n,r&ut.Optional)}finally{Ai(o)}}return Q0(n,0,r)}function tg(e,t,r,n=ut.Default,s){if(null!==e){if(2048&t[rt]&&!(n&ut.Self)){const a=function V2(e,t,r,n,s){let o=e,a=t;for(;null!==o&&null!==a&&2048&a[rt]&&!(512&a[rt]);){const l=ig(o,a,r,n|ut.Self,In);if(l!==In)return l;let u=o.parent;if(!u){const c=a[o0];if(c){const h=c.get(r,In,n);if(h!==In)return h}u=og(a),a=a[ss]}o=u}return s}(e,t,r,n,In);if(a!==In)return a}const o=ig(e,t,r,n,In);if(o!==In)return o}return eg(t,r,n,s)}function ig(e,t,r,n,s){const o=function j2(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(Do)?e[Do]:void 0;return"number"==typeof t?t>=0?t&W0:Y2:t}(r);if("function"==typeof o){if(!U0(t,e,n))return n&ut.Host?Q0(s,0,n):eg(t,r,n,s);try{let a;if(a=o(n),null!=a||n&ut.Optional)return a;Sc()}finally{X0()}}else if("number"==typeof o){let a=null,l=q0(e,t),u=ds,c=n&ut.Host?t[Xt][pi]:null;for((-1===l||n&ut.SkipSelf)&&(u=-1===l?Cl(e,t):t[l+8],u!==ds&&rg(n,!1)?(a=t[Me],l=ko(u),t=Bo(u,t)):l=-1);-1!==l;){const h=t[Me];if(ng(o,l,h.data)){const g=F2(l,t,r,a,n,c);if(g!==In)return g}u=t[l+8],u!==ds&&rg(n,t[Me].data[l+8]===c)&&ng(o,l,t)?(a=h,l=ko(u),t=Bo(u,t)):l=-1}}return s}function F2(e,t,r,n,s,o){const a=t[Me],l=a.data[e+8],h=function bl(e,t,r,n,s){const o=e.providerIndexes,a=t.data,l=1048575&o,u=e.directiveStart,h=o>>20,y=s?l+h:e.directiveEnd;for(let E=n?l:l+h;E<y;E++){const w=a[E];if(E<u&&r===w||E>=u&&w.type===r)return E}if(s){const E=a[u];if(E&&fn(E)&&E.type===r)return u}return null}(l,a,r,null==n?Sr(l)&&ah:n!=a&&0!=(3&l.type),s&ut.Host&&o===l);return null!==h?Tr(t,a,h,l):In}function Tr(e,t,r,n){let s=e[r];const o=t.data;if(function A2(e){return e instanceof Lo}(s)){const a=s;a.resolving&&function oE(e,t){const r=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new Ze(-200,`Circular dependency in DI detected for ${e}${r}`)}(Et(o[r]));const l=vl(a.canSeeViewProviders);a.resolving=!0;const c=a.injectImpl?Ai(a.injectImpl):null;U0(e,n,ut.Default);try{s=e[r]=a.factory(void 0,o,e,n),t.firstCreatePass&&r>=n.directiveStart&&function x2(e,t,r){const{ngOnChanges:n,ngOnInit:s,ngDoCheck:o}=t.type.prototype;if(n){const a=Z0(t);(r.preOrderHooks??=[]).push(e,a),(r.preOrderCheckHooks??=[]).push(e,a)}s&&(r.preOrderHooks??=[]).push(0-e,s),o&&((r.preOrderHooks??=[]).push(e,o),(r.preOrderCheckHooks??=[]).push(e,o))}(r,o[r],t)}finally{null!==c&&Ai(c),vl(l),a.resolving=!1,X0()}}return s}function ng(e,t,r){return!!(r[t+(e>>K0)]&1<<e)}function rg(e,t){return!(e&ut.Self||e&ut.Host&&t)}class Di{constructor(t,r){this._tNode=t,this._lView=r}get(t,r,n){return tg(this._tNode,this._lView,t,tl(n),r)}}function Y2(){return new Di(di(),_e())}function ch(e){return wc(e)?()=>{const t=ch(Ke(e));return t&&t()}:Or(e)}function og(e){const t=e[Me],r=t.type;return 2===r?t.declTNode:1===r?e[pi]:null}const ps="__parameters__";function ms(e,t,r){return Un(()=>{const n=function hh(e){return function(...r){if(e){const n=e(...r);for(const s in n)this[s]=n[s]}}}(t);function s(...o){if(this instanceof s)return n.apply(this,o),this;const a=new s(...o);return l.annotation=a,l;function l(u,c,h){const g=u.hasOwnProperty(ps)?u[ps]:Object.defineProperty(u,ps,{value:[]})[ps];for(;g.length<=h;)g.push(null);return(g[h]=g[h]||[]).push(a),u}}return r&&(s.prototype=Object.create(r.prototype)),s.prototype.ngMetadataName=e,s.annotationCls=s,s})}function vs(e,t){e.forEach(r=>Array.isArray(r)?vs(r,t):t(r))}function lg(e,t,r){t>=e.length?e.push(r):e.splice(t,0,r)}function Pl(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}const Dl=Zo(ms("Optional"),8),wl=Zo(ms("SkipSelf"),4);function Tl(e){return 128==(128&e.flags)}var _r=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(_r||{});const _h=new Map;let CP=0;const yh="__ngContext__";function gi(e,t){Ni(t)?(e[yh]=t[xo],function EP(e){_h.set(e[xo],e)}(t)):e[yh]=t}let Ch;function bh(e,t){return Ch(e,t)}function Ho(e){const t=e[kt];return Ei(t)?t[kt]:t}function Og(e){return Tg(e[So])}function xg(e){return Tg(e[dn])}function Tg(e){for(;null!==e&&!Ei(e);)e=e[dn];return e}function Es(e,t,r,n,s){if(null!=n){let o,a=!1;Ei(n)?o=n:Ni(n)&&(a=!0,n=n[Yt]);const l=Tt(n);0===e&&null!==r?null==s?Rg(t,r,l):Ar(t,r,l,s||null,!0):1===e&&null!==r?Ar(t,r,l,s||null,!0):2===e?function Bl(e,t,r){const n=Ll(e,t);n&&function UP(e,t,r,n){e.removeChild(t,r,n)}(e,n,t,r)}(t,l,a):3===e&&t.destroyNode(l),null!=o&&function HP(e,t,r,n,s){const o=r[xn];o!==Tt(r)&&Es(t,e,n,o,s);for(let l=ci;l<r.length;l++){const u=r[l];zo(u[Me],u,e,t,n,o)}}(t,e,o,r,s)}}function Nl(e,t,r){return e.createElement(t,r)}function Ig(e,t){const r=e[as],n=r.indexOf(t);T0(t),r.splice(n,1)}function Rl(e,t){if(e.length<=ci)return;const r=ci+t,n=e[r];if(n){const s=n[Oo];null!==s&&s!==e&&Ig(s,n),t>0&&(e[r-1][dn]=n[dn]);const o=Pl(e,ci+t);!function IP(e,t){zo(e,t,t[it],2,null,null),t[Yt]=null,t[pi]=null}(n[Me],n);const a=o[On];null!==a&&a.detachView(o[Me]),n[kt]=null,n[dn]=null,n[rt]&=-129}return n}function Ph(e,t){if(!(256&t[rt])){const r=t[it];t[To]&&m0(t[To]),t[Ao]&&m0(t[Ao]),r.destroyNode&&zo(e,t,r,3,null,null),function LP(e){let t=e[So];if(!t)return Zh(e[Me],e);for(;t;){let r=null;if(Ni(t))r=t[So];else{const n=t[ci];n&&(r=n)}if(!r){for(;t&&!t[dn]&&t!==e;)Ni(t)&&Zh(t[Me],t),t=t[kt];null===t&&(t=e),Ni(t)&&Zh(t[Me],t),r=t&&t[dn]}t=r}}(t)}}function Zh(e,t){if(!(256&t[rt])){t[rt]&=-129,t[rt]|=256,function jP(e,t){let r;if(null!=e&&null!=(r=e.destroyHooks))for(let n=0;n<r.length;n+=2){const s=t[r[n]];if(!(s instanceof Lo)){const o=r[n+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){const l=s[o[a]],u=o[a+1];Tn(4,l,u);try{u.call(l)}finally{Tn(5,l,u)}}else{Tn(4,s,o);try{o.call(s)}finally{Tn(5,s,o)}}}}}(e,t),function FP(e,t){const r=e.cleanup,n=t[ns];if(null!==r)for(let o=0;o<r.length-1;o+=2)if("string"==typeof r[o]){const a=r[o+3];a>=0?n[a]():n[-a].unsubscribe(),o+=2}else r[o].call(n[r[o+1]]);null!==n&&(t[ns]=null);const s=t[dr];if(null!==s){t[dr]=null;for(let o=0;o<s.length;o++)(0,s[o])()}}(e,t),1===t[Me].type&&t[it].destroy();const r=t[Oo];if(null!==r&&Ei(t[kt])){r!==t[kt]&&Ig(r,t);const n=t[On];null!==n&&n.detachView(e)}!function PP(e){_h.delete(e[xo])}(t)}}function Dh(e,t,r){return function Ng(e,t,r){let n=t;for(;null!==n&&40&n.type;)n=(t=n).parent;if(null===n)return r[Yt];{const{componentOffset:s}=n;if(s>-1){const{encapsulation:o}=e.data[n.directiveStart+s];if(o===cn.None||o===cn.Emulated)return null}return Ri(n,r)}}(e,t.parent,r)}function Ar(e,t,r,n,s){e.insertBefore(t,r,n,s)}function Rg(e,t,r){e.appendChild(t,r)}function Lg(e,t,r,n,s){null!==n?Ar(e,t,r,n,s):Rg(e,t,r)}function Ll(e,t){return e.parentNode(t)}let wh,xh,Fg=function Bg(e,t,r){return 40&e.type?Ri(e,r):null};function kl(e,t,r,n){const s=Dh(e,n,t),o=t[it],l=function kg(e,t,r){return Fg(e,t,r)}(n.parent||t[pi],n,t);if(null!=s)if(Array.isArray(r))for(let u=0;u<r.length;u++)Lg(o,s,r[u],l,!1);else Lg(o,s,r,l,!1);void 0!==wh&&wh(o,n,t,r,s)}function Xo(e,t){if(null!==t){const r=t.type;if(3&r)return Ri(t,e);if(4&r)return Mh(-1,e[t.index]);if(8&r){const n=t.child;if(null!==n)return Xo(e,n);{const s=e[t.index];return Ei(s)?Mh(-1,s):Tt(s)}}if(32&r)return bh(t,e)()||Tt(e[t.index]);{const n=Ug(e,t);return null!==n?Array.isArray(n)?n[0]:Xo(Ho(e[Xt]),n):Xo(e,t.next)}}return null}function Ug(e,t){return null!==t?e[Xt][pi].projection[t.projection]:null}function Mh(e,t){const r=ci+e+1;if(r<t.length){const n=t[r],s=n[Me].firstChild;if(null!==s)return Xo(n,s)}return t[xn]}function Sh(e,t,r,n,s,o,a){for(;null!=r;){const l=n[r.index],u=r.type;if(a&&0===t&&(l&&gi(Tt(l),n),r.flags|=2),32!=(32&r.flags))if(8&u)Sh(e,t,r.child,n,s,o,!1),Es(t,e,s,l,o);else if(32&u){const c=bh(r,n);let h;for(;h=c();)Es(t,e,s,h,o);Es(t,e,s,l,o)}else 16&u?Vg(e,t,n,r,s,o):Es(t,e,s,l,o);r=a?r.projectionNext:r.next}}function zo(e,t,r,n,s,o){Sh(r,n,e.firstChild,t,s,o,!1)}function Vg(e,t,r,n,s,o){const a=r[Xt],u=a[pi].projection[n.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++)Es(t,e,s,u[c],o);else{let c=u;const h=a[kt];Tl(n)&&(c.flags|=128),Sh(e,t,c,h,s,o,!0)}}function Hg(e,t,r){""===r?e.removeAttribute(t,"class"):e.setAttribute(t,"class",r)}function Xg(e,t,r){const{mergedAttrs:n,classes:s,styles:o}=r;null!==n&&Fc(e,t,n),null!==s&&Hg(e,t,s),null!==o&&function zP(e,t,r){e.setAttribute(t,"style",r)}(e,t,o)}class Ye{constructor(t,r){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof r?this.__NG_ELEMENT_ID__=r:void 0!==r&&(this.\u0275prov=ze({token:this,providedIn:r.providedIn||"root",factory:r.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Wo=new Ye("ENVIRONMENT_INITIALIZER"),sm=new Ye("INJECTOR",-1),om=new Ye("INJECTOR_DEF_TYPES");class Lh{get(t,r=Po){if(r===Po){const n=new Error(`NullInjectorError: No provider for ${ei(t)}!`);throw n.name="NullInjectorError",n}return r}}function yZ(...e){return{\u0275providers:lm(0,e),\u0275fromNgModule:!0}}function lm(e,...t){const r=[],n=new Set;let s;const o=a=>{r.push(a)};return vs(t,a=>{const l=a;Yl(l,o,[],n)&&(s||=[],s.push(l))}),void 0!==s&&um(s,o),r}function um(e,t){for(let r=0;r<e.length;r++){const{ngModule:n,providers:s}=e[r];kh(s,o=>{t(o,n)})}}function Yl(e,t,r,n){if(!(e=Ke(e)))return!1;let s=null,o=qa(e);const a=!o&&pt(e);if(o||a){if(a&&!a.standalone)return!1;s=e}else{const u=e.ngModule;if(o=qa(u),!o)return!1;s=u}const l=n.has(s);if(a){if(l)return!1;if(n.add(s),a.dependencies){const u="function"==typeof a.dependencies?a.dependencies():a.dependencies;for(const c of u)Yl(c,t,r,n)}}else{if(!o)return!1;{if(null!=o.imports&&!l){let c;n.add(s);try{vs(o.imports,h=>{Yl(h,t,r,n)&&(c||=[],c.push(h))})}finally{}void 0!==c&&um(c,t)}if(!l){const c=Or(s)||(()=>new s);t({provide:s,useFactory:c,deps:_t},s),t({provide:om,useValue:s,multi:!0},s),t({provide:Wo,useValue:()=>He(s),multi:!0},s)}const u=o.providers;if(null!=u&&!l){const c=e;kh(u,h=>{t(h,c)})}}}return s!==e&&void 0!==e.providers}function kh(e,t){for(let r of e)Mc(r)&&(r=r.\u0275providers),Array.isArray(r)?kh(r,t):t(r)}const CZ=Zt({provide:String,useValue:Zt});function Bh(e){return null!==e&&"object"==typeof e&&CZ in e}function Ir(e){return"function"==typeof e}const Fh=new Ye("Set Injector scope."),Vl={},EZ={};let jh;function Hl(){return void 0===jh&&(jh=new Lh),jh}class Qi{}class Xl extends Qi{get destroyed(){return this._destroyed}constructor(t,r,n,s){super(),this.parent=r,this.source=n,this.scopes=s,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Yh(t,a=>this.processProvider(a)),this.records.set(sm,ws(void 0,this)),s.has("environment")&&this.records.set(Qi,ws(void 0,this));const o=this.records.get(Fh);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(om.multi,_t,ut.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();const r=cr(this),n=Ai(void 0);try{return t()}finally{cr(r),Ai(n)}}get(t,r=Po,n=ut.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(zp))return t[zp](this);n=tl(n);const o=cr(this),a=Ai(void 0);try{if(!(n&ut.SkipSelf)){let u=this.records.get(t);if(void 0===u){const c=function MZ(e){return"function"==typeof e||"object"==typeof e&&e instanceof Ye}(t)&&Ka(t);u=c&&this.injectableDefInScope(c)?ws(Uh(t),Vl):null,this.records.set(t,u)}if(null!=u)return this.hydrate(t,u)}return(n&ut.Self?Hl():this.parent).get(t,r=n&ut.Optional&&r===Po?null:r)}catch(l){if("NullInjectorError"===l.name){if((l[el]=l[el]||[]).unshift(ei(t)),o)throw l;return function bE(e,t,r,n){const s=e[el];throw t[Vp]&&s.unshift(t[Vp]),e.message=function EE(e,t,r,n=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let s=ei(t);if(Array.isArray(t))s=t.map(ei).join(" -> ");else if("object"==typeof t){let o=[];for(let a in t)if(t.hasOwnProperty(a)){let l=t[a];o.push(a+":"+("string"==typeof l?JSON.stringify(l):ei(l)))}s=`{${o.join(", ")}}`}return`${r}${n?"("+n+")":""}[${s}]: ${e.replace(mE,"\n  ")}`}("\n"+e.message,s,r,n),e.ngTokenPath=s,e[el]=null,e}(l,t,"R3InjectorError",this.source)}throw l}finally{Ai(a),cr(o)}}resolveInjectorInitializers(){const t=cr(this),r=Ai(void 0);try{const s=this.get(Wo.multi,_t,ut.Self);for(const o of s)o()}finally{cr(t),Ai(r)}}toString(){const t=[],r=this.records;for(const n of r.keys())t.push(ei(n));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ze(205,!1)}processProvider(t){let r=Ir(t=Ke(t))?t:Ke(t&&t.provide);const n=function ZZ(e){return Bh(e)?ws(void 0,e.useValue):ws(function dm(e,t,r){let n;if(Ir(e)){const s=Ke(e);return Or(s)||Uh(s)}if(Bh(e))n=()=>Ke(e.useValue);else if(function hm(e){return!(!e||!e.useFactory)}(e))n=()=>e.useFactory(...Lc(e.deps||[]));else if(function cm(e){return!(!e||!e.useExisting)}(e))n=()=>He(Ke(e.useExisting));else{const s=Ke(e&&(e.useClass||e.provide));if(!function DZ(e){return!!e.deps}(e))return Or(s)||Uh(s);n=()=>new s(...Lc(e.deps))}return n}(e),Vl)}(t);if(Ir(t)||!0!==t.multi)this.records.get(r);else{let s=this.records.get(r);s||(s=ws(void 0,Vl,!0),s.factory=()=>Lc(s.multi),this.records.set(r,s)),r=t,s.multi.push(t)}this.records.set(r,n)}hydrate(t,r){return r.value===Vl&&(r.value=EZ,r.value=r.factory()),"object"==typeof r.value&&r.value&&function wZ(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(r.value)&&this._ngOnDestroyHooks.add(r.value),r.value}injectableDefInScope(t){if(!t.providedIn)return!1;const r=Ke(t.providedIn);return"string"==typeof r?"any"===r||this.scopes.has(r):this.injectorDefTypes.has(r)}removeOnDestroy(t){const r=this._onDestroyHooks.indexOf(t);-1!==r&&this._onDestroyHooks.splice(r,1)}}function Uh(e){const t=Ka(e),r=null!==t?t.factory:Or(e);if(null!==r)return r;if(e instanceof Ye)throw new Ze(204,!1);if(e instanceof Function)return function PZ(e){const t=e.length;if(t>0)throw function Uo(e,t){const r=[];for(let n=0;n<e;n++)r.push(t);return r}(t,"?"),new Ze(204,!1);const r=function dE(e){return e&&(e[Qa]||e[Fp])||null}(e);return null!==r?()=>r.factory(e):()=>new e}(e);throw new Ze(204,!1)}function ws(e,t,r=!1){return{factory:e,value:t,multi:r?[]:void 0}}function Yh(e,t){for(const r of e)Array.isArray(r)?Yh(r,t):r&&Mc(r)?Yh(r.\u0275providers,t):t(r)}const zl=new Ye("AppId",{providedIn:"root",factory:()=>SZ}),SZ="ng",fm=new Ye("Platform Initializer"),Ms=new Ye("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),pm=new Ye("CSP nonce",{providedIn:"root",factory:()=>function Zs(){if(void 0!==xh)return xh;if(typeof document<"u")return document;throw new Ze(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let gm=(e,t,r)=>null;function Wh(e,t,r=!1){return gm(e,t,r)}class BZ{}class vm{}class jZ{resolveComponentFactory(t){throw function FZ(e){const t=Error(`No component factory found for ${ei(e)}.`);return t.ngComponent=e,t}(t)}}let ql=(()=>{class t{}return t.NULL=new jZ,t})();function UZ(){return xs(di(),_e())}function xs(e,t){return new Gn(Ri(e,t))}let Gn=(()=>{class t{constructor(n){this.nativeElement=n}}return t.__NG_ELEMENT_ID__=UZ,t})();class Cm{}let Ql=(()=>{class t{constructor(){this.destroyNode=null}}return t.__NG_ELEMENT_ID__=()=>function VZ(){const e=_e(),r=Vi(di().index,e);return(Ni(r)?r:e)[it]}(),t})(),HZ=(()=>{var e;class t{}return(e=t).\u0275prov=ze({token:e,providedIn:"root",factory:()=>null}),t})();class eu{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const XZ=new eu("16.2.5"),Qh={};function Zm(e,t=null,r=null,n){const s=Dm(e,t,r,n);return s.resolveInjectorInitializers(),s}function Dm(e,t=null,r=null,n,s=new Set){const o=[r||_t,yZ(e)];return n=n||("object"==typeof e?void 0:ei(e)),new Xl(o,t||Hl(),n||null,s)}let en=(()=>{var e;class t{static create(n,s){if(Array.isArray(n))return Zm({name:""},s,n,"");{const o=n.name??"";return Zm({name:o},n.parent,n.providers,o)}}}return(e=t).THROW_IF_NOT_FOUND=Po,e.NULL=new Lh,e.\u0275prov=ze({token:e,providedIn:"any",factory:()=>He(sm)}),e.__NG_ELEMENT_ID__=-1,t})();function td(e){return e.ngOriginalError}class $n{constructor(){this._console=console}handleError(t){const r=this._findOriginalError(t);this._console.error("ERROR",t),r&&this._console.error("ORIGINAL ERROR",r)}_findOriginalError(t){let r=t&&td(t);for(;r&&td(r);)r=td(r);return r||null}}function nd(e){return t=>{setTimeout(e,void 0,t)}}const wi=class qZ extends Pt{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,r,n){let s=t,o=r||(()=>null),a=n;if(t&&"object"==typeof t){const u=t;s=u.next?.bind(u),o=u.error?.bind(u),a=u.complete?.bind(u)}this.__isAsync&&(o=nd(o),s&&(s=nd(s)),a&&(a=nd(a)));const l=super.subscribe({next:s,error:o,complete:a});return t instanceof A&&t.add(l),l}};function Mm(...e){}class At{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new wi(!1),this.onMicrotaskEmpty=new wi(!1),this.onStable=new wi(!1),this.onError=new wi(!1),typeof Zone>"u")throw new Ze(908,!1);Zone.assertZonePatched();const s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!n&&r,s.shouldCoalesceRunChangeDetection=n,s.lastRequestAnimationFrameId=-1,s.nativeRequestAnimationFrame=function QZ(){const e="function"==typeof xt.requestAnimationFrame;let t=xt[e?"requestAnimationFrame":"setTimeout"],r=xt[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&r){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const s=r[Zone.__symbol__("OriginalDelegate")];s&&(r=s)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function iD(e){const t=()=>{!function tD(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(xt,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,sd(e),e.isCheckStableRunning=!0,rd(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),sd(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(r,n,s,o,a,l)=>{if(function rD(e){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0].data?.__ignore_ng_zone__}(l))return r.invokeTask(s,o,a,l);try{return Sm(e),r.invokeTask(s,o,a,l)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||e.shouldCoalesceRunChangeDetection)&&t(),Om(e)}},onInvoke:(r,n,s,o,a,l,u)=>{try{return Sm(e),r.invoke(s,o,a,l,u)}finally{e.shouldCoalesceRunChangeDetection&&t(),Om(e)}},onHasTask:(r,n,s,o)=>{r.hasTask(s,o),n===s&&("microTask"==o.change?(e._hasPendingMicrotasks=o.microTask,sd(e),rd(e)):"macroTask"==o.change&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,n,s,o)=>(r.handleError(s,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}(s)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!At.isInAngularZone())throw new Ze(909,!1)}static assertNotInAngularZone(){if(At.isInAngularZone())throw new Ze(909,!1)}run(t,r,n){return this._inner.run(t,r,n)}runTask(t,r,n,s){const o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+s,t,eD,Mm,Mm);try{return o.runTask(a,r,n)}finally{o.cancelTask(a)}}runGuarded(t,r,n){return this._inner.runGuarded(t,r,n)}runOutsideAngular(t){return this._outer.run(t)}}const eD={};function rd(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function sd(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Sm(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Om(e){e._nesting--,rd(e)}class nD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new wi,this.onMicrotaskEmpty=new wi,this.onStable=new wi,this.onError=new wi}run(t,r,n){return t.apply(r,n)}runGuarded(t,r,n){return t.apply(r,n)}runOutsideAngular(t){return t()}runTask(t,r,n,s){return t.apply(r,n)}}const xm=new Ye("",{providedIn:"root",factory:Tm});function Tm(){const e=Ie(At);let t=!0;return function iE(...e){const t=Eo(e),r=function Jb(e,t){return"number"==typeof Ec(e)?e.pop():t}(e,1/0),n=e;return n.length?1===n.length?ji(n[0]):Qr(r)(li(n,t)):wn}(new Ne(s=>{t=e.isStable&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks,e.runOutsideAngular(()=>{s.next(t),s.complete()})}),new Ne(s=>{let o;e.runOutsideAngular(()=>{o=e.onStable.subscribe(()=>{At.assertNotInAngularZone(),queueMicrotask(()=>{!t&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks&&(t=!0,s.next(!0))})})});const a=e.onUnstable.subscribe(()=>{At.assertInAngularZone(),t&&(t=!1,e.runOutsideAngular(()=>{s.next(!1)}))});return()=>{o.unsubscribe(),a.unsubscribe()}}).pipe(Lp()))}function Jn(e){return e instanceof Function?e():e}let od=(()=>{var e;class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}}return(e=t).\u0275prov=ze({token:e,providedIn:"root",factory:()=>new e}),t})();function Qo(e){for(;e;){e[rt]|=64;const t=Ho(e);if(Vc(e)&&!t)return e;e=t}return null}const Lm=new Ye("",{providedIn:"root",factory:()=>!1});let iu=null;function jm(e,t){return e[t]??Vm()}function Um(e,t){const r=Vm();r.producerNode?.length&&(e[t]=iu,r.lView=e,iu=Ym())}const pD={...ll,consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Qo(e.lView)},lView:null};function Ym(){return Object.create(pD)}function Vm(){return iu??=Ym(),iu}const nt={};function tn(e){Hm(gt(),_e(),Zi()+e,!1)}function Hm(e,t,r,n){if(!n)if(3==(3&t[rt])){const o=e.preOrderCheckHooks;null!==o&&ml(t,o,r)}else{const o=e.preOrderHooks;null!==o&&_l(t,o,0,r)}xr(r)}function Xe(e,t=ut.Default){const r=_e();return null===r?He(e,t):tg(di(),r,Ke(e),t)}function nu(e,t,r,n,s,o,a,l,u,c,h){const g=t.blueprint.slice();return g[Yt]=s,g[rt]=140|n,(null!==c||e&&2048&e[rt])&&(g[rt]|=2048),x0(g),g[kt]=g[ss]=e,g[Ht]=r,g[rs]=a||e&&e[rs],g[it]=l||e&&e[it],g[hr]=u||e&&e[hr]||null,g[pi]=o,g[xo]=function bP(){return CP++}(),g[Vn]=h,g[o0]=c,g[Xt]=2==t.type?e[Xt]:g,g}function Is(e,t,r,n,s){let o=e.data[t];if(null===o)o=function ad(e,t,r,n,s){const o=L0(),a=Kc(),u=e.data[t]=function ED(e,t,r,n,s,o){let a=t?t.injectorIndex:-1,l=0;return function cs(){return null!==Je.skipHydrationRootTNode}()&&(l|=128),{type:r,index:n,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:l,providerIndexes:0,value:s,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,a?o:o&&o.parent,r,t,n,s);return null===e.firstChild&&(e.firstChild=u),null!==o&&(a?null==o.child&&null!==u.parent&&(o.child=u):null===o.next&&(o.next=u,u.prev=o)),u}(e,t,r,n,s),function C2(){return Je.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=r,o.value=n,o.attrs=s;const a=function Ro(){const e=Je.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();o.injectorIndex=null===a?-1:a.injectorIndex}return An(o,!0),o}function ea(e,t,r,n){if(0===r)return-1;const s=t.length;for(let o=0;o<r;o++)t.push(n),e.blueprint.push(n),e.data.push(null);return s}function zm(e,t,r,n,s){const o=jm(t,To),a=Zi(),l=2&n;try{xr(-1),l&&t.length>ht&&Hm(e,t,ht,!1),Tn(l?2:0,s);const c=l?o:null,h=ul(c);try{null!==c&&(c.dirty=!1),r(n,s)}finally{cl(c,h)}}finally{l&&null===t[To]&&Um(t,To),xr(a),Tn(l?3:1,s)}}function ld(e,t,r){if(Yc(t)){const n=Ki(null);try{const o=t.directiveEnd;for(let a=t.directiveStart;a<o;a++){const l=e.data[a];l.contentQueries&&l.contentQueries(1,r[a],a)}}finally{Ki(n)}}}function ud(e,t,r){R0()&&(function OD(e,t,r,n){const s=r.directiveStart,o=r.directiveEnd;Sr(r)&&function LD(e,t,r){const n=Ri(t,e),s=Gm(r);let a=16;r.signals?a=4096:r.onPush&&(a=64);const l=ru(e,nu(e,s,null,a,n,t,null,e[rs].rendererFactory.createRenderer(n,r),null,null,null));e[t.index]=l}(t,r,e.data[s+r.componentOffset]),e.firstCreatePass||yl(r,t),gi(n,t);const a=r.initialInputs;for(let l=s;l<o;l++){const u=e.data[l],c=Tr(t,e,l,r);gi(c,t),null!==a&&kD(0,l-s,c,u,0,a),fn(u)&&(Vi(r.index,t)[Ht]=Tr(t,e,l,r))}}(e,t,r,Ri(r,t)),64==(64&r.flags)&&qm(e,t,r))}function cd(e,t,r=Ri){const n=t.localNames;if(null!==n){let s=t.index+1;for(let o=0;o<n.length;o+=2){const a=n[o+1],l=-1===a?r(t,e):e[a];e[s++]=l}}}function Gm(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=hd(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function hd(e,t,r,n,s,o,a,l,u,c,h){const g=ht+n,y=g+s,E=function mD(e,t){const r=[];for(let n=0;n<t;n++)r.push(n<e?null:nt);return r}(g,y),w="function"==typeof c?c():c;return E[Me]={type:e,blueprint:E,template:r,queries:null,viewQuery:l,declTNode:t,data:E.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:u,consts:w,incompleteFirstPass:!1,ssrId:h}}let $m=e=>null;function Jm(e,t,r,n){for(let s in e)if(e.hasOwnProperty(s)){r=null===r?{}:r;const o=e[s];null===n?Wm(r,t,s,o):n.hasOwnProperty(s)&&Wm(r,t,n[s],o)}return r}function Wm(e,t,r,n){e.hasOwnProperty(r)?e[r].push(t,n):e[r]=[t,n]}function dd(e,t,r,n){if(R0()){const s=null===n?null:{"":-1},o=function TD(e,t){const r=e.directiveRegistry;let n=null,s=null;if(r)for(let o=0;o<r.length;o++){const a=r[o];if(Qp(t,a.selectors,!1))if(n||(n=[]),fn(a))if(null!==a.findHostDirectiveDefs){const l=[];s=s||new Map,a.findHostDirectiveDefs(a,l,s),n.unshift(...l,a),fd(e,t,l.length)}else n.unshift(a),fd(e,t,0);else s=s||new Map,a.findHostDirectiveDefs?.(a,n,s),n.push(a)}return null===n?null:[n,s]}(e,r);let a,l;null===o?a=l=null:[a,l]=o,null!==a&&Km(e,t,r,a,s,l),s&&function AD(e,t,r){if(t){const n=e.localNames=[];for(let s=0;s<t.length;s+=2){const o=r[t[s+1]];if(null==o)throw new Ze(-301,!1);n.push(t[s],o)}}}(r,n,s)}r.mergedAttrs=wo(r.mergedAttrs,r.attrs)}function Km(e,t,r,n,s,o){for(let c=0;c<n.length;c++)uh(yl(r,t),e,n[c].type);!function ND(e,t,r){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+r,e.providerIndexes=t}(r,e.data.length,n.length);for(let c=0;c<n.length;c++){const h=n[c];h.providersResolver&&h.providersResolver(h)}let a=!1,l=!1,u=ea(e,t,n.length,null);for(let c=0;c<n.length;c++){const h=n[c];r.mergedAttrs=wo(r.mergedAttrs,h.hostAttrs),RD(e,r,t,u,h),ID(u,h,s),null!==h.contentQueries&&(r.flags|=4),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(r.flags|=64);const g=h.type.prototype;!a&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((e.preOrderHooks??=[]).push(r.index),a=!0),!l&&(g.ngOnChanges||g.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(r.index),l=!0),u++}!function PD(e,t,r){const s=t.directiveEnd,o=e.data,a=t.attrs,l=[];let u=null,c=null;for(let h=t.directiveStart;h<s;h++){const g=o[h],y=r?r.get(g):null,w=y?y.outputs:null;u=Jm(g.inputs,h,u,y?y.inputs:null),c=Jm(g.outputs,h,c,w);const T=null===u||null===a||qp(t)?null:BD(u,h,a);l.push(T)}null!==u&&(u.hasOwnProperty("class")&&(t.flags|=8),u.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=l,t.inputs=u,t.outputs=c}(e,r,o)}function qm(e,t,r){const n=r.directiveStart,s=r.directiveEnd,o=r.index,a=function E2(){return Je.lFrame.currentDirectiveIndex}();try{xr(o);for(let l=n;l<s;l++){const u=e.data[l],c=t[l];Qc(l),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&xD(u,c)}}finally{xr(-1),Qc(a)}}function xD(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function fd(e,t,r){t.componentOffset=r,(e.components??=[]).push(t.index)}function ID(e,t,r){if(r){if(t.exportAs)for(let n=0;n<t.exportAs.length;n++)r[t.exportAs[n]]=e;fn(t)&&(r[""]=e)}}function RD(e,t,r,n,s){e.data[n]=s;const o=s.factory||(s.factory=Or(s.type)),a=new Lo(o,fn(s),Xe);e.blueprint[n]=a,r[n]=a,function MD(e,t,r,n,s){const o=s.hostBindings;if(o){let a=e.hostBindingOpCodes;null===a&&(a=e.hostBindingOpCodes=[]);const l=~t.index;(function SD(e){let t=e.length;for(;t>0;){const r=e[--t];if("number"==typeof r&&r<0)return r}return 0})(a)!=l&&a.push(l),a.push(r,n,o)}}(e,t,n,ea(e,r,s.hostVars,nt),s)}function kD(e,t,r,n,s,o){const a=o[t];if(null!==a)for(let l=0;l<a.length;)Qm(n,r,a[l++],a[l++],a[l++])}function Qm(e,t,r,n,s){const o=Ki(null);try{const a=e.inputTransforms;null!==a&&a.hasOwnProperty(n)&&(s=a[n].call(t,s)),null!==e.setInput?e.setInput(t,s,r,n):t[n]=s}finally{Ki(o)}}function BD(e,t,r){let n=null,s=0;for(;s<r.length;){const o=r[s];if(0!==o)if(5!==o){if("number"==typeof o)break;if(e.hasOwnProperty(o)){null===n&&(n=[]);const a=e[o];for(let l=0;l<a.length;l+=2)if(a[l]===t){n.push(o,a[l+1],r[s+1]);break}}s+=2}else s+=2;else s+=4}return n}function e_(e,t,r,n){return[e,!0,!1,t,null,0,n,r,null,null,null]}function t_(e,t){const r=e.contentQueries;if(null!==r)for(let n=0;n<r.length;n+=2){const o=r[n+1];if(-1!==o){const a=e.data[o];th(r[n]),a.contentQueries(2,t[o],o)}}}function ru(e,t){return e[So]?e[s0][dn]=t:e[So]=t,e[s0]=t,t}function gd(e,t,r){th(0);const n=Ki(null);try{t(e,r)}finally{Ki(n)}}function md(e,t,r,n,s){for(let o=0;o<r.length;){const a=r[o++],l=r[o++];Qm(e.data[a],t[a],n,l,s)}}function FD(e,t){const r=Vi(t,e),n=r[Me];!function jD(e,t){for(let r=t.length;r<e.blueprint.length;r++)t.push(e.blueprint[r])}(n,r);const s=r[Yt];null!==s&&null===r[Vn]&&(r[Vn]=Wh(s,r[hr])),_d(n,r,r[Ht])}function _d(e,t,r){ih(t);try{const n=e.viewQuery;null!==n&&gd(1,n,r);const s=e.template;null!==s&&zm(e,t,s,1,r),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&t_(e,t),e.staticViewQueries&&gd(2,e.viewQuery,r);const o=e.components;null!==o&&function UD(e,t){for(let r=0;r<t.length;r++)FD(e,t[r])}(t,o)}catch(n){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),n}finally{t[rt]&=-5,nh()}}let o_=(()=>{var e;class t{constructor(){this.all=new Set,this.queue=new Map}create(n,s,o){const a=typeof Zone>"u"?null:Zone.current,l=function WE(e,t,r){const n=Object.create(KE);r&&(n.consumerAllowSignalWrites=!0),n.fn=e,n.schedule=t;const s=a=>{n.cleanupFn=a};return n.ref={notify:()=>p0(n),run:()=>{if(n.dirty=!1,n.hasRun&&!g0(n))return;n.hasRun=!0;const a=ul(n);try{n.cleanupFn(),n.cleanupFn=P0,n.fn(s)}finally{cl(n,a)}},cleanup:()=>n.cleanupFn()},n.ref}(n,h=>{this.all.has(h)&&this.queue.set(h,a)},o);let u;this.all.add(l),l.notify();const c=()=>{l.cleanup(),u?.(),this.all.delete(l),this.queue.delete(l)};return u=s?.onDestroy(c),{destroy:c}}flush(){if(0!==this.queue.size)for(const[n,s]of this.queue)this.queue.delete(n),s?s.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}}return(e=t).\u0275prov=ze({token:e,providedIn:"root",factory:()=>new e}),t})();function su(e,t,r){let n=r?e.styles:null,s=r?e.classes:null,o=0;if(null!==t)for(let a=0;a<t.length;a++){const l=t[a];"number"==typeof l?o=l:1==o?s=Zc(s,l):2==o&&(n=Zc(n,l+": "+t[++a]+";"))}r?e.styles=n:e.stylesWithoutHost=n,r?e.classes=s:e.classesWithoutHost=s}function ta(e,t,r,n,s=!1){for(;null!==r;){const o=t[r.index];null!==o&&n.push(Tt(o)),Ei(o)&&a_(o,n);const a=r.type;if(8&a)ta(e,t,r.child,n);else if(32&a){const l=bh(r,t);let u;for(;u=l();)n.push(u)}else if(16&a){const l=Ug(t,r);if(Array.isArray(l))n.push(...l);else{const u=Ho(t[Xt]);ta(u[Me],u,l,n,!0)}}r=s?r.projectionNext:r.next}return n}function a_(e,t){for(let r=ci;r<e.length;r++){const n=e[r],s=n[Me].firstChild;null!==s&&ta(n[Me],n,s,t)}e[xn]!==e[Yt]&&t.push(e[xn])}function ou(e,t,r,n=!0){const s=t[rs],o=s.rendererFactory,a=s.afterRenderEventManager;o.begin?.(),a?.begin();try{l_(e,t,e.template,r)}catch(u){throw n&&function s_(e,t){const r=e[hr],n=r?r.get($n,null):null;n&&n.handleError(t)}(t,u),u}finally{o.end?.(),s.effectManager?.flush(),a?.end()}}function l_(e,t,r,n){const s=t[rt];if(256!=(256&s)){t[rs].effectManager?.flush(),ih(t);try{x0(t),function B0(e){return Je.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==r&&zm(e,t,r,2,n);const a=3==(3&s);if(a){const c=e.preOrderCheckHooks;null!==c&&ml(t,c,null)}else{const c=e.preOrderHooks;null!==c&&_l(t,c,0,null),rh(t,0)}if(function HD(e){for(let t=Og(e);null!==t;t=xg(t)){if(!t[a0])continue;const r=t[as];for(let n=0;n<r.length;n++){a2(r[n])}}}(t),u_(t,2),null!==e.contentQueries&&t_(e,t),a){const c=e.contentCheckHooks;null!==c&&ml(t,c)}else{const c=e.contentHooks;null!==c&&_l(t,c,1),rh(t,1)}!function gD(e,t){const r=e.hostBindingOpCodes;if(null===r)return;const n=jm(t,Ao);try{for(let s=0;s<r.length;s++){const o=r[s];if(o<0)xr(~o);else{const a=o,l=r[++s],u=r[++s];b2(l,a),n.dirty=!1;const c=ul(n);try{u(2,t[a])}finally{cl(n,c)}}}}finally{null===t[Ao]&&Um(t,Ao),xr(-1)}}(e,t);const l=e.components;null!==l&&h_(t,l,0);const u=e.viewQuery;if(null!==u&&gd(2,u,n),a){const c=e.viewCheckHooks;null!==c&&ml(t,c)}else{const c=e.viewHooks;null!==c&&_l(t,c,2),rh(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[rt]&=-73,T0(t)}finally{nh()}}}function u_(e,t){for(let r=Og(e);null!==r;r=xg(r))for(let n=ci;n<r.length;n++)c_(r[n],t)}function XD(e,t,r){c_(Vi(t,e),r)}function c_(e,t){if(!function s2(e){return 128==(128&e[rt])}(e))return;const r=e[Me],n=e[rt];if(80&n&&0===t||1024&n||2===t)l_(r,e,r.template,e[Ht]);else if(e[Mo]>0){u_(e,1);const s=r.components;null!==s&&h_(e,s,1)}}function h_(e,t,r){for(let n=0;n<t.length;n++)XD(e,t[n],r)}class ia{get rootNodes(){const t=this._lView,r=t[Me];return ta(r,t,r.firstChild,[])}constructor(t,r){this._lView=t,this._cdRefInjectingView=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ht]}set context(t){this._lView[Ht]=t}get destroyed(){return 256==(256&this._lView[rt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[kt];if(Ei(t)){const r=t[8],n=r?r.indexOf(this):-1;n>-1&&(Rl(t,n),Pl(r,n))}this._attachedToViewContainer=!1}Ph(this._lView[Me],this._lView)}onDestroy(t){!function I0(e,t){if(256==(256&e[rt]))throw new Ze(911,!1);null===e[dr]&&(e[dr]=[]),e[dr].push(t)}(this._lView,t)}markForCheck(){Qo(this._cdRefInjectingView||this._lView)}detach(){this._lView[rt]&=-129}reattach(){this._lView[rt]|=128}detectChanges(){ou(this._lView[Me],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ze(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function RP(e,t){zo(e,t,t[it],2,null,null)}(this._lView[Me],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Ze(902,!1);this._appRef=t}}class zD extends ia{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;ou(t[Me],t,t[Ht],!1)}checkNoChanges(){}get context(){return null}}class d_ extends ql{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const r=pt(t);return new na(r,this.ngModule)}}function f_(e){const t=[];for(let r in e)e.hasOwnProperty(r)&&t.push({propName:e[r],templateName:r});return t}class $D{constructor(t,r){this.injector=t,this.parentInjector=r}get(t,r,n){n=tl(n);const s=this.injector.get(t,Qh,n);return s!==Qh||r===Qh?s:this.parentInjector.get(t,r,n)}}class na extends vm{get inputs(){const t=this.componentDef,r=t.inputTransforms,n=f_(t.inputs);if(null!==r)for(const s of n)r.hasOwnProperty(s.propName)&&(s.transform=r[s.propName]);return n}get outputs(){return f_(this.componentDef.outputs)}constructor(t,r){super(),this.componentDef=t,this.ngModule=r,this.componentType=t.type,this.selector=function AE(e){return e.map(TE).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!r}create(t,r,n,s){let o=(s=s||this.ngModule)instanceof Qi?s:s?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const a=o?new $D(t,o):t,l=a.get(Cm,null);if(null===l)throw new Ze(407,!1);const g={rendererFactory:l,sanitizer:a.get(HZ,null),effectManager:a.get(o_,null),afterRenderEventManager:a.get(od,null)},y=l.createRenderer(null,this.componentDef),E=this.componentDef.selectors[0][0]||"div",w=n?function _D(e,t,r,n){const o=n.get(Lm,!1)||r===cn.ShadowDom,a=e.selectRootElement(t,o);return function vD(e){$m(e)}(a),a}(y,n,this.componentDef.encapsulation,a):Nl(y,E,function GD(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(E)),L=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let R=null;null!==w&&(R=Wh(w,a,!0));const H=hd(0,null,null,1,0,null,null,null,null,null,null),V=nu(null,H,null,L,null,null,g,y,a,null,R);let U,Q;ih(V);try{const oe=this.componentDef;let te,ne=null;oe.findHostDirectiveDefs?(te=[],ne=new Map,oe.findHostDirectiveDefs(oe,te,ne),te.push(oe)):te=[oe];const ce=function WD(e,t){const r=e[Me],n=ht;return e[n]=t,Is(r,n,2,"#host",null)}(V,w),he=function KD(e,t,r,n,s,o,a){const l=s[Me];!function qD(e,t,r,n){for(const s of e)t.mergedAttrs=wo(t.mergedAttrs,s.hostAttrs);null!==t.mergedAttrs&&(su(t,t.mergedAttrs,!0),null!==r&&Xg(n,r,t))}(n,e,t,a);let u=null;null!==t&&(u=Wh(t,s[hr]));const c=o.rendererFactory.createRenderer(t,r);let h=16;r.signals?h=4096:r.onPush&&(h=64);const g=nu(s,Gm(r),null,h,s[e.index],e,o,c,null,null,u);return l.firstCreatePass&&fd(l,e,n.length-1),ru(s,g),s[e.index]=g}(ce,w,oe,te,V,g,y);Q=O0(H,ht),w&&function ew(e,t,r,n){if(n)Fc(e,r,["ng-version",XZ.full]);else{const{attrs:s,classes:o}=function IE(e){const t=[],r=[];let n=1,s=2;for(;n<e.length;){let o=e[n];if("string"==typeof o)2===s?""!==o&&t.push(o,e[++n]):8===s&&r.push(o);else{if(!hn(s))break;s=o}n++}return{attrs:t,classes:r}}(t.selectors[0]);s&&Fc(e,r,s),o&&o.length>0&&Hg(e,r,o.join(" "))}}(y,oe,w,n),void 0!==r&&function tw(e,t,r){const n=e.projection=[];for(let s=0;s<t.length;s++){const o=r[s];n.push(null!=o?Array.from(o):null)}}(Q,this.ngContentSelectors,r),U=function QD(e,t,r,n,s,o){const a=di(),l=s[Me],u=Ri(a,s);Km(l,s,a,r,null,n);for(let h=0;h<r.length;h++)gi(Tr(s,l,a.directiveStart+h,a),s);qm(l,s,a),u&&gi(u,s);const c=Tr(s,l,a.directiveStart+a.componentOffset,a);if(e[Ht]=s[Ht]=c,null!==o)for(const h of o)h(c,t);return ld(l,a,e),c}(he,oe,te,ne,V,[iw]),_d(H,V,null)}finally{nh()}return new JD(this.componentType,U,xs(Q,V),V,Q)}}class JD extends BZ{constructor(t,r,n,s,o){super(),this.location=n,this._rootLView=s,this._tNode=o,this.previousInputValues=null,this.instance=r,this.hostView=this.changeDetectorRef=new zD(s),this.componentType=t}setInput(t,r){const n=this._tNode.inputs;let s;if(null!==n&&(s=n[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),r))return;const o=this._rootLView;md(o[Me],o,s,t,r),this.previousInputValues.set(t,r),Qo(Vi(this._tNode.index,o))}}get injector(){return new Di(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function iw(){const e=di();gl(_e()[Me],e)}function lu(e){return!!vd(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function vd(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function mi(e,t,r){return!Object.is(e[t],r)&&(e[t]=r,!0)}function Dd(e,t,r,n,s,o,a,l){const u=_e(),c=gt(),h=e+ht,g=c.firstCreatePass?function Tw(e,t,r,n,s,o,a,l,u){const c=t.consts,h=Is(t,e,4,a||null,gr(c,l));dd(t,r,h,gr(c,u)),gl(t,h);const g=h.tView=hd(2,h,n,s,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c,null);return null!==t.queries&&(t.queries.template(t,h),g.queries=t.queries.embeddedTView(h)),h}(h,c,u,t,r,n,s,o,a):c.data[h];An(g,!1);const y=A_(c,u,g,e);pl()&&kl(c,u,y,g),gi(y,u),ru(u,u[h]=e_(y,u,y,g)),ol(g)&&ud(c,u,g),null!=a&&cd(u,g,l)}let A_=function I_(e,t,r,n){return mr(!0),t[it].createComment("")};function Mi(e,t,r){const n=_e();return mi(n,function hs(){return Je.lFrame.bindingIndex++}(),t)&&function Xi(e,t,r,n,s,o,a,l){const u=Ri(t,r);let h,c=t.inputs;!l&&null!=c&&(h=c[n])?(md(e,r,h,n,s),Sr(t)&&function DD(e,t){const r=Vi(t,e);16&r[rt]||(r[rt]|=64)}(r,t.index)):3&t.type&&(n=function ZD(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(n),s=null!=a?a(s,t.value||"",n):s,o.setProperty(u,n,s))}(gt(),function jt(){const e=Je.lFrame;return O0(e.tView,e.selectedIndex)}(),n,e,t,n[it],r,!1),Mi}function wd(e,t,r,n,s){const a=s?"class":"style";md(e,r,t.inputs[a],a,n)}function pn(e,t,r,n){const s=_e(),o=gt(),a=ht+e,l=s[it],u=o.firstCreatePass?function Lw(e,t,r,n,s,o){const a=t.consts,u=Is(t,e,2,n,gr(a,s));return dd(t,r,u,gr(a,o)),null!==u.attrs&&su(u,u.attrs,!1),null!==u.mergedAttrs&&su(u,u.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,u),u}(a,o,s,t,r,n):o.data[a],c=N_(o,s,u,l,t,e);s[a]=c;const h=ol(u);return An(u,!0),Xg(l,c,u),32!=(32&u.flags)&&pl()&&kl(o,s,c,u),0===function u2(){return Je.lFrame.elementDepthCount}()&&gi(c,s),function c2(){Je.lFrame.elementDepthCount++}(),h&&(ud(o,s,u),ld(o,u,s)),null!==n&&cd(s,u),pn}function zi(){let e=di();Kc()?function qc(){Je.lFrame.isParent=!1}():(e=e.parent,An(e,!1));const t=e;(function d2(e){return Je.skipHydrationRootTNode===e})(t)&&function m2(){Je.skipHydrationRootTNode=null}(),function h2(){Je.lFrame.elementDepthCount--}();const r=gt();return r.firstCreatePass&&(gl(r,e),Yc(e)&&r.queries.elementEnd(e)),null!=t.classesWithoutHost&&function I2(e){return 0!=(8&e.flags)}(t)&&wd(r,t,_e(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function N2(e){return 0!=(16&e.flags)}(t)&&wd(r,t,_e(),t.stylesWithoutHost,!1),zi}function gn(e,t,r,n){return pn(e,t,r,n),zi(),gn}let N_=(e,t,r,n,s,o)=>(mr(!0),Nl(n,s,function z0(){return Je.lFrame.currentNamespace}()));function fu(e){return!!e&&"function"==typeof e.then}function k_(e){return!!e&&"function"==typeof e.subscribe}function pu(e=1){return function Z2(e){return(Je.lFrame.contextLView=function D2(e,t){for(;e>0;)t=t[ss],e--;return t}(e,Je.lFrame.contextLView))[Ht]}(e)}const Xs="en-US";let R1=Xs;class kr{}class av{}class Yd extends kr{constructor(t,r,n){super(),this._parent=r,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new d_(this);const s=Yi(t);this._bootstrapComponents=Jn(s.bootstrap),this._r3Injector=Dm(t,r,[{provide:kr,useValue:this},{provide:ql,useValue:this.componentFactoryResolver},...n],ei(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(r=>r()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Vd extends av{constructor(t){super(),this.moduleType=t}create(t){return new Yd(this.moduleType,t,[])}}class lv extends kr{constructor(t){super(),this.componentFactoryResolver=new d_(this),this.instance=null;const r=new Xl([...t.providers,{provide:kr,useValue:this},{provide:ql,useValue:this.componentFactoryResolver}],t.parent||Hl(),t.debugName,new Set(["environment"]));this.injector=r,t.runEnvironmentInitializers&&r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function Hd(e,t,r=null){return new lv({providers:e,parent:t,debugName:r,runEnvironmentInitializers:!0}).injector}let jS=(()=>{var e;class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const s=lm(0,n.type),o=s.length>0?Hd([s],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,o)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}}return(e=t).\u0275prov=ze({token:e,providedIn:"environment",factory:()=>new e(He(Qi))}),t})();function uv(e){e.getStandaloneInjector=t=>t.get(jS).getOrCreateStandaloneInjector(e)}function zd(e,t,r,n){return function mv(e,t,r,n,s,o){const a=t+r;return mi(e,a,s)?function Rn(e,t,r){return e[t]=r}(e,a+1,o?n.call(o,s):n(s)):function pa(e,t){const r=e[t];return r===nt?void 0:r}(e,a+1)}(_e(),function Pi(){const e=Je.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}(),e,t,r,n)}function fO(e,t,r,n=!0){const s=t[Me];if(function kP(e,t,r,n){const s=ci+n,o=r.length;n>0&&(r[s-1][dn]=t),n<o-ci?(t[dn]=r[s],lg(r,ci+n,t)):(r.push(t),t[dn]=null),t[kt]=r;const a=t[Oo];null!==a&&r!==a&&function BP(e,t){const r=e[as];t[Xt]!==t[kt][kt][Xt]&&(e[a0]=!0),null===r?e[as]=[t]:r.push(t)}(a,t);const l=t[On];null!==l&&l.insertView(e),t[rt]|=128}(s,t,e,r),n){const o=Mh(r,e),a=t[it],l=Ll(a,e[xn]);null!==l&&function NP(e,t,r,n,s,o){n[Yt]=s,n[pi]=t,zo(e,n,r,1,s,o)}(s,e[pi],a,t,l,o)}}let Kn=(()=>{class t{}return t.__NG_ELEMENT_ID__=mO,t})();const pO=Kn,gO=class extends pO{constructor(t,r,n){super(),this._declarationLView=t,this._declarationTContainer=r,this.elementRef=n}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,n){const s=function dO(e,t,r,n){const s=t.tView,l=nu(e,s,r,4096&e[rt]?4096:16,null,t,null,null,null,n?.injector??null,n?.hydrationInfo??null);l[Oo]=e[t.index];const c=e[On];return null!==c&&(l[On]=c.createEmbeddedView(s)),_d(s,l,r),l}(this._declarationLView,this._declarationTContainer,t,{injector:r,hydrationInfo:n});return new ia(s)}};function mO(){return function bu(e,t){return 4&e.type?new gO(t,e,xs(e,t)):null}(di(),_e())}let vn=(()=>{class t{}return t.__NG_ELEMENT_ID__=EO,t})();function EO(){return function Mv(e,t){let r;const n=t[e.index];return Ei(n)?r=n:(r=e_(n,t,null,e),t[e.index]=r,ru(t,r)),Sv(r,t,e,n),new Dv(r,e,t)}(di(),_e())}const PO=vn,Dv=class extends PO{constructor(t,r,n){super(),this._lContainer=t,this._hostTNode=r,this._hostLView=n}get element(){return xs(this._hostTNode,this._hostLView)}get injector(){return new Di(this._hostTNode,this._hostLView)}get parentInjector(){const t=Cl(this._hostTNode,this._hostLView);if(oh(t)){const r=Bo(t,this._hostLView),n=ko(t);return new Di(r[Me].data[n+8],r)}return new Di(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const r=wv(this._lContainer);return null!==r&&r[t]||null}get length(){return this._lContainer.length-ci}createEmbeddedView(t,r,n){let s,o;"number"==typeof n?s=n:null!=n&&(s=n.index,o=n.injector);const l=t.createEmbeddedViewImpl(r||{},o,null);return this.insertImpl(l,s,false),l}createComponent(t,r,n,s,o){const a=t&&!function jo(e){return"function"==typeof e}(t);let l;if(a)l=r;else{const T=r||{};l=T.index,n=T.injector,s=T.projectableNodes,o=T.environmentInjector||T.ngModuleRef}const u=a?t:new na(pt(t)),c=n||this.parentInjector;if(!o&&null==u.ngModule){const N=(a?c:this.parentInjector).get(Qi,null);N&&(o=N)}pt(u.componentType??{});const E=u.create(c,s,null,o);return this.insertImpl(E.hostView,l,false),E}insert(t,r){return this.insertImpl(t,r,!1)}insertImpl(t,r,n){const s=t._lView;if(function o2(e){return Ei(e[kt])}(s)){const u=this.indexOf(t);if(-1!==u)this.detach(u);else{const c=s[kt],h=new Dv(c,c[pi],c[kt]);h.detach(h.indexOf(t))}}const a=this._adjustIndex(r),l=this._lContainer;return fO(l,s,a,!n),t.attachToViewContainerRef(),lg($d(l),a,t),t}move(t,r){return this.insert(t,r)}indexOf(t){const r=wv(this._lContainer);return null!==r?r.indexOf(t):-1}remove(t){const r=this._adjustIndex(t,-1),n=Rl(this._lContainer,r);n&&(Pl($d(this._lContainer),r),Ph(n[Me],n))}detach(t){const r=this._adjustIndex(t,-1),n=Rl(this._lContainer,r);return n&&null!=Pl($d(this._lContainer),r)?new ia(n):null}_adjustIndex(t,r=0){return t??this.length+r}};function wv(e){return e[8]}function $d(e){return e[8]||(e[8]=[])}let Sv=function Ov(e,t,r,n){if(e[xn])return;let s;s=8&r.type?Tt(n):function ZO(e,t){const r=e[it],n=r.createComment(""),s=Ri(t,e);return Ar(r,Ll(r,s),n,function YP(e,t){return e.nextSibling(t)}(r,s),!1),n}(t,r),e[xn]=s};const af=new Ye("Application Initializer");let lf=(()=>{var e;class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,s)=>{this.resolve=n,this.reject=s}),this.appInits=Ie(af,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const o of this.appInits){const a=o();if(fu(a))n.push(a);else if(k_(a)){const l=new Promise((u,c)=>{a.subscribe({complete:u,error:c})});n.push(l)}}const s=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{s()}).catch(o=>{this.reject(o)}),0===n.length&&s(),this.initialized=!0}}return(e=t).\u0275fac=function(n){return new(n||e)},e.\u0275prov=ze({token:e,factory:e.\u0275fac,providedIn:"root"}),t})(),ey=(()=>{var e;class t{log(n){console.log(n)}warn(n){console.warn(n)}}return(e=t).\u0275fac=function(n){return new(n||e)},e.\u0275prov=ze({token:e,factory:e.\u0275fac,providedIn:"platform"}),t})();const qn=new Ye("LocaleId",{providedIn:"root",factory:()=>Ie(qn,ut.Optional|ut.SkipSelf)||function tx(){return typeof $localize<"u"&&$localize.locale||Xs}()});let ty=(()=>{var e;class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ji(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return(e=t).\u0275fac=function(n){return new(n||e)},e.\u0275prov=ze({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();class rx{constructor(t,r){this.ngModuleFactory=t,this.componentFactories=r}}let iy=(()=>{var e;class t{compileModuleSync(n){return new Vd(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const s=this.compileModuleSync(n),a=Jn(Yi(n).declarations).reduce((l,u)=>{const c=pt(u);return c&&l.push(new na(c)),l},[]);return new rx(s,a)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return(e=t).\u0275fac=function(n){return new(n||e)},e.\u0275prov=ze({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();const oy=new Ye(""),Du=new Ye("");let ff,hf=(()=>{var e;class t{constructor(n,s,o){this._ngZone=n,this.registry=s,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,ff||(function Zx(e){ff=e}(o),o.addToWindow(s)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{At.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(s=>!s.updateCb||!s.updateCb(n)||(clearTimeout(s.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,s,o){let a=-1;s&&s>0&&(a=setTimeout(()=>{this._callbacks=this._callbacks.filter(l=>l.timeoutId!==a),n(this._didWork,this.getPendingTasks())},s)),this._callbacks.push({doneCb:n,timeoutId:a,updateCb:o})}whenStable(n,s,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,s,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,s,o){return[]}}return(e=t).\u0275fac=function(n){return new(n||e)(He(At),He(df),He(Du))},e.\u0275prov=ze({token:e,factory:e.\u0275fac}),t})(),df=(()=>{var e;class t{constructor(){this._applications=new Map}registerApplication(n,s){this._applications.set(n,s)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,s=!0){return ff?.findTestabilityInTree(this,n,s)??null}}return(e=t).\u0275fac=function(n){return new(n||e)},e.\u0275prov=ze({token:e,factory:e.\u0275fac,providedIn:"platform"}),t})(),Cr=null;const ay=new Ye("AllowMultipleToken"),pf=new Ye("PlatformDestroyListeners"),gf=new Ye("appBootstrapListener");class uy{constructor(t,r){this.name=t,this.token=r}}function hy(e,t,r=[]){const n=`Platform: ${t}`,s=new Ye(n);return(o=[])=>{let a=mf();if(!a||a.injector.get(ay,!1)){const l=[...r,...o,{provide:s,useValue:!0}];e?e(l):function Mx(e){if(Cr&&!Cr.get(ay,!1))throw new Ze(400,!1);(function ly(){!function XE(e){y0=e}(()=>{throw new Ze(600,!1)})})(),Cr=e;const t=e.get(fy);(function cy(e){e.get(fm,null)?.forEach(r=>r())})(e)}(function dy(e=[],t){return en.create({name:t,providers:[{provide:Fh,useValue:"platform"},{provide:pf,useValue:new Set([()=>Cr=null])},...e]})}(l,n))}return function Ox(e){const t=mf();if(!t)throw new Ze(401,!1);return t}()}}function mf(){return Cr?.get(fy)??null}let fy=(()=>{var e;class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,s){const o=function xx(e="zone.js",t){return"noop"===e?new nD:"zone.js"===e?new At(t):e}(s?.ngZone,function py(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}({eventCoalescing:s?.ngZoneEventCoalescing,runCoalescing:s?.ngZoneRunCoalescing}));return o.run(()=>{const a=function FS(e,t,r){return new Yd(e,t,r)}(n.moduleType,this.injector,function yy(e){return[{provide:At,useFactory:e},{provide:Wo,multi:!0,useFactory:()=>{const t=Ie(Ax,{optional:!0});return()=>t.initialize()}},{provide:vy,useFactory:Tx},{provide:xm,useFactory:Tm}]}(()=>o)),l=a.injector.get($n,null);return o.runOutsideAngular(()=>{const u=o.onError.subscribe({next:c=>{l.handleError(c)}});a.onDestroy(()=>{wu(this._modules,a),u.unsubscribe()})}),function gy(e,t,r){try{const n=r();return fu(n)?n.catch(s=>{throw t.runOutsideAngular(()=>e.handleError(s)),s}):n}catch(n){throw t.runOutsideAngular(()=>e.handleError(n)),n}}(l,o,()=>{const u=a.injector.get(lf);return u.runInitializers(),u.donePromise.then(()=>(function L1(e){Wi(e,"Expected localeId to be defined"),"string"==typeof e&&(R1=e.toLowerCase().replace(/_/g,"-"))}(a.injector.get(qn,Xs)||Xs),this._moduleDoBootstrap(a),a))})})}bootstrapModule(n,s=[]){const o=my({},s);return function Dx(e,t,r){const n=new Vd(r);return Promise.resolve(n)}(0,0,n).then(a=>this.bootstrapModuleFactory(a,o))}_moduleDoBootstrap(n){const s=n.injector.get($s);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(o=>s.bootstrap(o));else{if(!n.instance.ngDoBootstrap)throw new Ze(-403,!1);n.instance.ngDoBootstrap(s)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ze(404,!1);this._modules.slice().forEach(s=>s.destroy()),this._destroyListeners.forEach(s=>s());const n=this._injector.get(pf,null);n&&(n.forEach(s=>s()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return(e=t).\u0275fac=function(n){return new(n||e)(He(en))},e.\u0275prov=ze({token:e,factory:e.\u0275fac,providedIn:"platform"}),t})();function my(e,t){return Array.isArray(t)?t.reduce(my,e):{...e,...t}}let $s=(()=>{var e;class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ie(vy),this.zoneIsStable=Ie(xm),this.componentTypes=[],this.components=[],this.isStable=Ie(ty).hasPendingTasks.pipe(Mn(n=>n?qe(!1):this.zoneIsStable),function nE(e,t=me){return e=e??rE,mt((r,n)=>{let s,o=!0;r.subscribe(bt(n,a=>{const l=t(a);(o||!e(s,l))&&(o=!1,s=l,n.next(a))}))})}(),Lp()),this._injector=Ie(Qi)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,s){const o=n instanceof vm;if(!this._injector.get(lf).done)throw!o&&function is(e){const t=pt(e)||ui(e)||bi(e);return null!==t&&t.standalone}(n),new Ze(405,!1);let l;l=o?n:this._injector.get(ql).resolveComponentFactory(n),this.componentTypes.push(l.componentType);const u=function wx(e){return e.isBoundToModule}(l)?void 0:this._injector.get(kr),h=l.create(en.NULL,[],s||l.selector,u),g=h.location.nativeElement,y=h.injector.get(oy,null);return y?.registerApplication(g),h.onDestroy(()=>{this.detachView(h.hostView),wu(this.components,h),y?.unregisterApplication(g)}),this._loadComponent(h),h}tick(){if(this._runningTick)throw new Ze(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const s=n;this._views.push(s),s.attachToAppRef(this)}detachView(n){const s=n;wu(this._views,s),s.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const s=this._injector.get(gf,[]);s.push(...this._bootstrapListeners),s.forEach(o=>o(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>wu(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new Ze(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return(e=t).\u0275fac=function(n){return new(n||e)},e.\u0275prov=ze({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();function wu(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}const vy=new Ye("",{providedIn:"root",factory:()=>Ie($n).handleError.bind(void 0)});function Tx(){const e=Ie(At),t=Ie($n);return r=>e.runOutsideAngular(()=>t.handleError(r))}let Ax=(()=>{var e;class t{constructor(){this.zone=Ie(At),this.applicationRef=Ie($s)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return(e=t).\u0275fac=function(n){return new(n||e)},e.\u0275prov=ze({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();let _f=(()=>{class t{}return t.__NG_ELEMENT_ID__=Nx,t})();function Nx(e){return function Rx(e,t,r){if(Sr(e)&&!r){const n=Vi(e.index,t);return new ia(n,n)}return 47&e.type?new ia(t[Xt],t):null}(di(),_e(),16==(16&e))}class Py{constructor(){}supports(t){return lu(t)}create(t){return new Ux(t)}}const jx=(e,t)=>t;class Ux{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||jx}forEachItem(t){let r;for(r=this._itHead;null!==r;r=r._next)t(r)}forEachOperation(t){let r=this._itHead,n=this._removalsHead,s=0,o=null;for(;r||n;){const a=!n||r&&r.currentIndex<Dy(n,s,o)?r:n,l=Dy(a,s,o),u=a.currentIndex;if(a===n)s--,n=n._nextRemoved;else if(r=r._next,null==a.previousIndex)s++;else{o||(o=[]);const c=l-s,h=u-s;if(c!=h){for(let y=0;y<c;y++){const E=y<o.length?o[y]:o[y]=0,w=E+y;h<=w&&w<c&&(o[y]=E+1)}o[a.previousIndex]=h-c}}l!==u&&t(a,l,u)}}forEachPreviousItem(t){let r;for(r=this._previousItHead;null!==r;r=r._nextPrevious)t(r)}forEachAddedItem(t){let r;for(r=this._additionsHead;null!==r;r=r._nextAdded)t(r)}forEachMovedItem(t){let r;for(r=this._movesHead;null!==r;r=r._nextMoved)t(r)}forEachRemovedItem(t){let r;for(r=this._removalsHead;null!==r;r=r._nextRemoved)t(r)}forEachIdentityChange(t){let r;for(r=this._identityChangesHead;null!==r;r=r._nextIdentityChange)t(r)}diff(t){if(null==t&&(t=[]),!lu(t))throw new Ze(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let s,o,a,r=this._itHead,n=!1;if(Array.isArray(t)){this.length=t.length;for(let l=0;l<this.length;l++)o=t[l],a=this._trackByFn(l,o),null!==r&&Object.is(r.trackById,a)?(n&&(r=this._verifyReinsertion(r,o,a,l)),Object.is(r.item,o)||this._addIdentityChange(r,o)):(r=this._mismatch(r,o,a,l),n=!0),r=r._next}else s=0,function fw(e,t){if(Array.isArray(e))for(let r=0;r<e.length;r++)t(e[r]);else{const r=e[Symbol.iterator]();let n;for(;!(n=r.next()).done;)t(n.value)}}(t,l=>{a=this._trackByFn(s,l),null!==r&&Object.is(r.trackById,a)?(n&&(r=this._verifyReinsertion(r,l,a,s)),Object.is(r.item,l)||this._addIdentityChange(r,l)):(r=this._mismatch(r,l,a,s),n=!0),r=r._next,s++}),this.length=s;return this._truncate(r),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,r,n,s){let o;return null===t?o=this._itTail:(o=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,r)||this._addIdentityChange(t,r),this._reinsertAfter(t,o,s)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,s))?(Object.is(t.item,r)||this._addIdentityChange(t,r),this._moveAfter(t,o,s)):t=this._addAfter(new Yx(r,n),o,s),t}_verifyReinsertion(t,r,n,s){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==o?t=this._reinsertAfter(o,t._prev,s):t.currentIndex!=s&&(t.currentIndex=s,this._addToMoves(t,s)),t}_truncate(t){for(;null!==t;){const r=t._next;this._addToRemovals(this._unlink(t)),t=r}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,r,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const s=t._prevRemoved,o=t._nextRemoved;return null===s?this._removalsHead=o:s._nextRemoved=o,null===o?this._removalsTail=s:o._prevRemoved=s,this._insertAfter(t,r,n),this._addToMoves(t,n),t}_moveAfter(t,r,n){return this._unlink(t),this._insertAfter(t,r,n),this._addToMoves(t,n),t}_addAfter(t,r,n){return this._insertAfter(t,r,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,r,n){const s=null===r?this._itHead:r._next;return t._next=s,t._prev=r,null===s?this._itTail=t:s._prev=t,null===r?this._itHead=t:r._next=t,null===this._linkedRecords&&(this._linkedRecords=new Zy),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const r=t._prev,n=t._next;return null===r?this._itHead=n:r._next=n,null===n?this._itTail=r:n._prev=r,t}_addToMoves(t,r){return t.previousIndex===r||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Zy),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,r){return t.item=r,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Yx{constructor(t,r){this.item=t,this.trackById=r,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Vx{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,r){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===r||r<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const r=t._prevDup,n=t._nextDup;return null===r?this._head=n:r._nextDup=n,null===n?this._tail=r:n._prevDup=r,null===this._head}}class Zy{constructor(){this.map=new Map}put(t){const r=t.trackById;let n=this.map.get(r);n||(n=new Vx,this.map.set(r,n)),n.add(t)}get(t,r){const s=this.map.get(t);return s?s.get(t,r):null}remove(t){const r=t.trackById;return this.map.get(r).remove(t)&&this.map.delete(r),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Dy(e,t,r){const n=e.previousIndex;if(null===n)return n;let s=0;return r&&n<r.length&&(s=r[n]),n+t+s}class wy{constructor(){}supports(t){return t instanceof Map||vd(t)}create(){return new Hx}}class Hx{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let r;for(r=this._mapHead;null!==r;r=r._next)t(r)}forEachPreviousItem(t){let r;for(r=this._previousMapHead;null!==r;r=r._nextPrevious)t(r)}forEachChangedItem(t){let r;for(r=this._changesHead;null!==r;r=r._nextChanged)t(r)}forEachAddedItem(t){let r;for(r=this._additionsHead;null!==r;r=r._nextAdded)t(r)}forEachRemovedItem(t){let r;for(r=this._removalsHead;null!==r;r=r._nextRemoved)t(r)}diff(t){if(t){if(!(t instanceof Map||vd(t)))throw new Ze(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let r=this._mapHead;if(this._appendAfter=null,this._forEach(t,(n,s)=>{if(r&&r.key===s)this._maybeAddToChanges(r,n),this._appendAfter=r,r=r._next;else{const o=this._getOrCreateRecordForKey(s,n);r=this._insertBeforeOrAppend(r,o)}}),r){r._prev&&(r._prev._next=null),this._removalsHead=r;for(let n=r;null!==n;n=n._nextRemoved)n===this._mapHead&&(this._mapHead=null),this._records.delete(n.key),n._nextRemoved=n._next,n.previousValue=n.currentValue,n.currentValue=null,n._prev=null,n._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,r){if(t){const n=t._prev;return r._next=t,r._prev=n,t._prev=r,n&&(n._next=r),t===this._mapHead&&(this._mapHead=r),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=r,r._prev=this._appendAfter):this._mapHead=r,this._appendAfter=r,null}_getOrCreateRecordForKey(t,r){if(this._records.has(t)){const s=this._records.get(t);this._maybeAddToChanges(s,r);const o=s._prev,a=s._next;return o&&(o._next=a),a&&(a._prev=o),s._next=null,s._prev=null,s}const n=new Xx(t);return this._records.set(t,n),n.currentValue=r,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,r){Object.is(r,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=r,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,r){t instanceof Map?t.forEach(r):Object.keys(t).forEach(n=>r(t[n],n))}}class Xx{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function My(){return new Ou([new Py])}let Ou=(()=>{var e;class t{constructor(n){this.factories=n}static create(n,s){if(null!=s){const o=s.factories.slice();n=n.concat(o)}return new t(n)}static extend(n){return{provide:t,useFactory:s=>t.create(n,s||My()),deps:[[t,new wl,new Dl]]}}find(n){const s=this.factories.find(o=>o.supports(n));if(null!=s)return s;throw new Ze(901,!1)}}return(e=t).\u0275prov=ze({token:e,providedIn:"root",factory:My}),t})();function Sy(){return new va([new wy])}let va=(()=>{var e;class t{constructor(n){this.factories=n}static create(n,s){if(s){const o=s.factories.slice();n=n.concat(o)}return new t(n)}static extend(n){return{provide:t,useFactory:s=>t.create(n,s||Sy()),deps:[[t,new wl,new Dl]]}}find(n){const s=this.factories.find(o=>o.supports(n));if(s)return s;throw new Ze(901,!1)}}return(e=t).\u0275prov=ze({token:e,providedIn:"root",factory:Sy}),t})();const $x=hy(null,"core",[]);let Jx=(()=>{var e;class t{constructor(n){}}return(e=t).\u0275fac=function(n){return new(n||e)(He($s))},e.\u0275mod=Mr({type:e}),e.\u0275inj=ur({}),t})(),Zf=null;function Js(){return Zf}class uT{}const rn=new Ye("DocumentToken");let Df=(()=>{var e;class t{historyGo(n){throw new Error("Not implemented")}}return(e=t).\u0275fac=function(n){return new(n||e)},e.\u0275prov=ze({token:e,factory:function(){return Ie(hT)},providedIn:"platform"}),t})();const cT=new Ye("Location Initialized");let hT=(()=>{var e;class t extends Df{constructor(){super(),this._doc=Ie(rn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Js().getBaseHref(this._doc)}onPopState(n){const s=Js().getGlobalEventTarget(this._doc,"window");return s.addEventListener("popstate",n,!1),()=>s.removeEventListener("popstate",n)}onHashChange(n){const s=Js().getGlobalEventTarget(this._doc,"window");return s.addEventListener("hashchange",n,!1),()=>s.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,s,o){this._history.pushState(n,s,o)}replaceState(n,s,o){this._history.replaceState(n,s,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return(e=t).\u0275fac=function(n){return new(n||e)},e.\u0275prov=ze({token:e,factory:function(){return new e},providedIn:"platform"}),t})();function wf(e,t){if(0==e.length)return t;if(0==t.length)return e;let r=0;return e.endsWith("/")&&r++,t.startsWith("/")&&r++,2==r?e+t.substring(1):1==r?e+t:e+"/"+t}function ky(e){const t=e.match(/#|\?|$/),r=t&&t.index||e.length;return e.slice(0,r-("/"===e[r-1]?1:0))+e.slice(r)}function Qn(e){return e&&"?"!==e[0]?"?"+e:e}let Fr=(()=>{var e;class t{historyGo(n){throw new Error("Not implemented")}}return(e=t).\u0275fac=function(n){return new(n||e)},e.\u0275prov=ze({token:e,factory:function(){return Ie(Fy)},providedIn:"root"}),t})();const By=new Ye("appBaseHref");let Fy=(()=>{var e;class t extends Fr{constructor(n,s){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=s??this._platformLocation.getBaseHrefFromDOM()??Ie(rn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return wf(this._baseHref,n)}path(n=!1){const s=this._platformLocation.pathname+Qn(this._platformLocation.search),o=this._platformLocation.hash;return o&&n?`${s}${o}`:s}pushState(n,s,o,a){const l=this.prepareExternalUrl(o+Qn(a));this._platformLocation.pushState(n,s,l)}replaceState(n,s,o,a){const l=this.prepareExternalUrl(o+Qn(a));this._platformLocation.replaceState(n,s,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return(e=t).\u0275fac=function(n){return new(n||e)(He(Df),He(By,8))},e.\u0275prov=ze({token:e,factory:e.\u0275fac,providedIn:"root"}),t})(),dT=(()=>{var e;class t extends Fr{constructor(n,s){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=s&&(this._baseHref=s)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let s=this._platformLocation.hash;return null==s&&(s="#"),s.length>0?s.substring(1):s}prepareExternalUrl(n){const s=wf(this._baseHref,n);return s.length>0?"#"+s:s}pushState(n,s,o,a){let l=this.prepareExternalUrl(o+Qn(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(n,s,l)}replaceState(n,s,o,a){let l=this.prepareExternalUrl(o+Qn(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(n,s,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return(e=t).\u0275fac=function(n){return new(n||e)(He(Df),He(By,8))},e.\u0275prov=ze({token:e,factory:e.\u0275fac}),t})(),Mf=(()=>{var e;class t{constructor(n){this._subject=new wi,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const s=this._locationStrategy.getBaseHref();this._basePath=function gT(e){if(new RegExp("^(https?:)?//").test(e)){const[,r]=e.split(/\/\/[^\/]+/);return r}return e}(ky(jy(s))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,s=""){return this.path()==this.normalize(n+Qn(s))}normalize(n){return t.stripTrailingSlash(function pT(e,t){if(!e||!t.startsWith(e))return t;const r=t.substring(e.length);return""===r||["/",";","?","#"].includes(r[0])?r:t}(this._basePath,jy(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,s="",o=null){this._locationStrategy.pushState(o,"",n,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Qn(s)),o)}replaceState(n,s="",o=null){this._locationStrategy.replaceState(o,"",n,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Qn(s)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(s=>{this._notifyUrlChangeListeners(s.url,s.state)})),()=>{const s=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(s,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",s){this._urlChangeListeners.forEach(o=>o(n,s))}subscribe(n,s,o){return this._subject.subscribe({next:n,error:s,complete:o})}}return(e=t).normalizeQueryParams=Qn,e.joinWithSlash=wf,e.stripTrailingSlash=ky,e.\u0275fac=function(n){return new(n||e)(He(Fr))},e.\u0275prov=ze({token:e,factory:function(){return function fT(){return new Mf(He(Fr))}()},providedIn:"root"}),t})();function jy(e){return e.replace(/\/index.html$/,"")}class iA{constructor(t,r,n,s){this.$implicit=t,this.ngForOf=r,this.index=n,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ky=(()=>{var e;class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,s,o){this._viewContainer=n,this._template=s,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const s=this._viewContainer;n.forEachOperation((o,a,l)=>{if(null==o.previousIndex)s.createEmbeddedView(this._template,new iA(o.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)s.remove(null===a?void 0:a);else if(null!==a){const u=s.get(a);s.move(u,l),qy(u,o)}});for(let o=0,a=s.length;o<a;o++){const u=s.get(o).context;u.index=o,u.count=a,u.ngForOf=this._ngForOf}n.forEachIdentityChange(o=>{qy(s.get(o.currentIndex),o)})}static ngTemplateContextGuard(n,s){return!0}}return(e=t).\u0275fac=function(n){return new(n||e)(Xe(vn),Xe(Kn),Xe(Ou))},e.\u0275dir=fi({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),t})();function qy(e,t){e.context.$implicit=t.item}let tC=(()=>{var e;class t{constructor(n,s,o){this._ngEl=n,this._differs=s,this._renderer=o,this._ngStyle=null,this._differ=null}set ngStyle(n){this._ngStyle=n,!this._differ&&n&&(this._differ=this._differs.find(n).create())}ngDoCheck(){if(this._differ){const n=this._differ.diff(this._ngStyle);n&&this._applyChanges(n)}}_setStyle(n,s){const[o,a]=n.split("."),l=-1===o.indexOf("-")?void 0:_r.DashCase;null!=s?this._renderer.setStyle(this._ngEl.nativeElement,o,a?`${s}${a}`:s,l):this._renderer.removeStyle(this._ngEl.nativeElement,o,l)}_applyChanges(n){n.forEachRemovedItem(s=>this._setStyle(s.key,null)),n.forEachAddedItem(s=>this._setStyle(s.key,s.currentValue)),n.forEachChangedItem(s=>this._setStyle(s.key,s.currentValue))}}return(e=t).\u0275fac=function(n){return new(n||e)(Xe(Gn),Xe(va),Xe(Ql))},e.\u0275dir=fi({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),t})(),xA=(()=>{var e;class t{}return(e=t).\u0275fac=function(n){return new(n||e)},e.\u0275mod=Mr({type:e}),e.\u0275inj=ur({}),t})();function rC(e){return"server"===e}let NA=(()=>{var e;class t{}return(e=t).\u0275prov=ze({token:e,providedIn:"root",factory:()=>new RA(He(rn),window)}),t})();class RA{constructor(t,r){this.document=t,this.window=r,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const r=function LA(e,t){const r=e.getElementById(t)||e.getElementsByName(t)[0];if(r)return r;if("function"==typeof e.createTreeWalker&&e.body&&"function"==typeof e.body.attachShadow){const n=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let s=n.currentNode;for(;s;){const o=s.shadowRoot;if(o){const a=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(a)return a}s=n.nextNode()}}return null}(this.document,t);r&&(this.scrollToElement(r),r.focus())}setHistoryScrollRestoration(t){this.supportsScrolling()&&(this.window.history.scrollRestoration=t)}scrollToElement(t){const r=t.getBoundingClientRect(),n=r.left+this.window.pageXOffset,s=r.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(n-o[0],s-o[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class oI extends uT{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Hf extends oI{static makeCurrent(){!function lT(e){Zf||(Zf=e)}(new Hf)}onAndCancel(t,r,n){return t.addEventListener(r,n),()=>{t.removeEventListener(r,n)}}dispatchEvent(t,r){t.dispatchEvent(r)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,r){return(r=r||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,r){return"window"===r?window:"document"===r?t:"body"===r?t.body:null}getBaseHref(t){const r=function aI(){return Ea=Ea||document.querySelector("base"),Ea?Ea.getAttribute("href"):null}();return null==r?null:function lI(e){Vu=Vu||document.createElement("a"),Vu.setAttribute("href",e);const t=Vu.pathname;return"/"===t.charAt(0)?t:`/${t}`}(r)}resetBaseElement(){Ea=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function QT(e,t){t=encodeURIComponent(t);for(const r of e.split(";")){const n=r.indexOf("="),[s,o]=-1==n?[r,""]:[r.slice(0,n),r.slice(n+1)];if(s.trim()===t)return decodeURIComponent(o)}return null}(document.cookie,t)}}let Vu,Ea=null,cI=(()=>{var e;class t{build(){return new XMLHttpRequest}}return(e=t).\u0275fac=function(n){return new(n||e)},e.\u0275prov=ze({token:e,factory:e.\u0275fac}),t})();const Xf=new Ye("EventManagerPlugins");let uC=(()=>{var e;class t{constructor(n,s){this._zone=s,this._eventNameToPlugin=new Map,n.forEach(o=>{o.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,s,o){return this._findPluginFor(s).addEventListener(n,s,o)}getZone(){return this._zone}_findPluginFor(n){let s=this._eventNameToPlugin.get(n);if(s)return s;if(s=this._plugins.find(a=>a.supports(n)),!s)throw new Ze(5101,!1);return this._eventNameToPlugin.set(n,s),s}}return(e=t).\u0275fac=function(n){return new(n||e)(He(Xf),He(At))},e.\u0275prov=ze({token:e,factory:e.\u0275fac}),t})();class cC{constructor(t){this._doc=t}}const zf="ng-app-id";let hC=(()=>{var e;class t{constructor(n,s,o,a={}){this.doc=n,this.appId=s,this.nonce=o,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=rC(a),this.resetHostNodes()}addStyles(n){for(const s of n)1===this.changeUsageCount(s,1)&&this.onStyleAdded(s)}removeStyles(n){for(const s of n)this.changeUsageCount(s,-1)<=0&&this.onStyleRemoved(s)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(s=>s.remove()),n.clear());for(const s of this.getAllStyles())this.onStyleRemoved(s);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const s of this.getAllStyles())this.addStyleToHost(n,s)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const s of this.hostNodes)this.addStyleToHost(s,n)}onStyleRemoved(n){const s=this.styleRef;s.get(n)?.elements?.forEach(o=>o.remove()),s.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${zf}="${this.appId}"]`);if(n?.length){const s=new Map;return n.forEach(o=>{null!=o.textContent&&s.set(o.textContent,o)}),s}return null}changeUsageCount(n,s){const o=this.styleRef;if(o.has(n)){const a=o.get(n);return a.usage+=s,a.usage}return o.set(n,{usage:s,elements:[]}),s}getStyleElement(n,s){const o=this.styleNodesInDOM,a=o?.get(s);if(a?.parentNode===n)return o.delete(s),a.removeAttribute(zf),a;{const l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=s,this.platformIsServer&&l.setAttribute(zf,this.appId),l}}addStyleToHost(n,s){const o=this.getStyleElement(n,s);n.appendChild(o);const a=this.styleRef,l=a.get(s)?.elements;l?l.push(o):a.set(s,{elements:[o],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}}return(e=t).\u0275fac=function(n){return new(n||e)(He(rn),He(zl),He(pm,8),He(Ms))},e.\u0275prov=ze({token:e,factory:e.\u0275fac}),t})();const Gf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},$f=/%COMP%/g,pI=new Ye("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function fC(e,t){return t.map(r=>r.replace($f,e))}let pC=(()=>{var e;class t{constructor(n,s,o,a,l,u,c,h=null){this.eventManager=n,this.sharedStylesHost=s,this.appId=o,this.removeStylesOnCompDestroy=a,this.doc=l,this.platformId=u,this.ngZone=c,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=rC(u),this.defaultRenderer=new Jf(n,l,c,this.platformIsServer)}createRenderer(n,s){if(!n||!s)return this.defaultRenderer;this.platformIsServer&&s.encapsulation===cn.ShadowDom&&(s={...s,encapsulation:cn.Emulated});const o=this.getOrCreateRenderer(n,s);return o instanceof mC?o.applyToHost(n):o instanceof Wf&&o.applyStyles(),o}getOrCreateRenderer(n,s){const o=this.rendererByCompId;let a=o.get(s.id);if(!a){const l=this.doc,u=this.ngZone,c=this.eventManager,h=this.sharedStylesHost,g=this.removeStylesOnCompDestroy,y=this.platformIsServer;switch(s.encapsulation){case cn.Emulated:a=new mC(c,h,s,this.appId,g,l,u,y);break;case cn.ShadowDom:return new vI(c,h,n,s,l,u,this.nonce,y);default:a=new Wf(c,h,s,g,l,u,y)}o.set(s.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}}return(e=t).\u0275fac=function(n){return new(n||e)(He(uC),He(hC),He(zl),He(pI),He(rn),He(Ms),He(At),He(pm))},e.\u0275prov=ze({token:e,factory:e.\u0275fac}),t})();class Jf{constructor(t,r,n,s){this.eventManager=t,this.doc=r,this.ngZone=n,this.platformIsServer=s,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,r){return r?this.doc.createElementNS(Gf[r]||r,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,r){(gC(t)?t.content:t).appendChild(r)}insertBefore(t,r,n){t&&(gC(t)?t.content:t).insertBefore(r,n)}removeChild(t,r){t&&t.removeChild(r)}selectRootElement(t,r){let n="string"==typeof t?this.doc.querySelector(t):t;if(!n)throw new Ze(-5104,!1);return r||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,r,n,s){if(s){r=s+":"+r;const o=Gf[s];o?t.setAttributeNS(o,r,n):t.setAttribute(r,n)}else t.setAttribute(r,n)}removeAttribute(t,r,n){if(n){const s=Gf[n];s?t.removeAttributeNS(s,r):t.removeAttribute(`${n}:${r}`)}else t.removeAttribute(r)}addClass(t,r){t.classList.add(r)}removeClass(t,r){t.classList.remove(r)}setStyle(t,r,n,s){s&(_r.DashCase|_r.Important)?t.style.setProperty(r,n,s&_r.Important?"important":""):t.style[r]=n}removeStyle(t,r,n){n&_r.DashCase?t.style.removeProperty(r):t.style[r]=""}setProperty(t,r,n){t[r]=n}setValue(t,r){t.nodeValue=r}listen(t,r,n){if("string"==typeof t&&!(t=Js().getGlobalEventTarget(this.doc,t)))throw new Error(`Unsupported event target ${t} for event ${r}`);return this.eventManager.addEventListener(t,r,this.decoratePreventDefault(n))}decoratePreventDefault(t){return r=>{if("__ngUnwrap__"===r)return t;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>t(r)):t(r))&&r.preventDefault()}}}function gC(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class vI extends Jf{constructor(t,r,n,s,o,a,l,u){super(t,o,a,u),this.sharedStylesHost=r,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=fC(s.id,s.styles);for(const h of c){const g=document.createElement("style");l&&g.setAttribute("nonce",l),g.textContent=h,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,r){return super.appendChild(this.nodeOrShadowRoot(t),r)}insertBefore(t,r,n){return super.insertBefore(this.nodeOrShadowRoot(t),r,n)}removeChild(t,r){return super.removeChild(this.nodeOrShadowRoot(t),r)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Wf extends Jf{constructor(t,r,n,s,o,a,l,u){super(t,o,a,l),this.sharedStylesHost=r,this.removeStylesOnCompDestroy=s,this.styles=u?fC(u,n.styles):n.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class mC extends Wf{constructor(t,r,n,s,o,a,l,u){const c=s+"-"+n.id;super(t,r,n,o,a,l,u,c),this.contentAttr=function gI(e){return"_ngcontent-%COMP%".replace($f,e)}(c),this.hostAttr=function mI(e){return"_nghost-%COMP%".replace($f,e)}(c)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,r){const n=super.createElement(t,r);return super.setAttribute(n,this.contentAttr,""),n}}let yI=(()=>{var e;class t extends cC{constructor(n){super(n)}supports(n){return!0}addEventListener(n,s,o){return n.addEventListener(s,o,!1),()=>this.removeEventListener(n,s,o)}removeEventListener(n,s,o){return n.removeEventListener(s,o)}}return(e=t).\u0275fac=function(n){return new(n||e)(He(rn))},e.\u0275prov=ze({token:e,factory:e.\u0275fac}),t})();const _C=["alt","control","meta","shift"],CI={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},bI={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let EI=(()=>{var e;class t extends cC{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,s,o){const a=t.parseEventName(s),l=t.eventCallback(a.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Js().onAndCancel(n,a.domEventName,l))}static parseEventName(n){const s=n.toLowerCase().split("."),o=s.shift();if(0===s.length||"keydown"!==o&&"keyup"!==o)return null;const a=t._normalizeKey(s.pop());let l="",u=s.indexOf("code");if(u>-1&&(s.splice(u,1),l="code."),_C.forEach(h=>{const g=s.indexOf(h);g>-1&&(s.splice(g,1),l+=h+".")}),l+=a,0!=s.length||0===a.length)return null;const c={};return c.domEventName=o,c.fullKey=l,c}static matchEventFullKeyCode(n,s){let o=CI[n.key]||n.key,a="";return s.indexOf("code.")>-1&&(o=n.code,a="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),_C.forEach(l=>{l!==o&&(0,bI[l])(n)&&(a+=l+".")}),a+=o,a===s)}static eventCallback(n,s,o){return a=>{t.matchEventFullKeyCode(a,n)&&o.runGuarded(()=>s(a))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return(e=t).\u0275fac=function(n){return new(n||e)(He(rn))},e.\u0275prov=ze({token:e,factory:e.\u0275fac}),t})();const wI=hy($x,"browser",[{provide:Ms,useValue:"browser"},{provide:fm,useValue:function PI(){Hf.makeCurrent()},multi:!0},{provide:rn,useFactory:function DI(){return function WP(e){xh=e}(document),document},deps:[]}]),MI=new Ye(""),CC=[{provide:Du,useClass:class uI{addToWindow(t){xt.getAngularTestability=(n,s=!0)=>{const o=t.findTestabilityInTree(n,s);if(null==o)throw new Ze(5103,!1);return o},xt.getAllAngularTestabilities=()=>t.getAllTestabilities(),xt.getAllAngularRootElements=()=>t.getAllRootElements(),xt.frameworkStabilizers||(xt.frameworkStabilizers=[]),xt.frameworkStabilizers.push(n=>{const s=xt.getAllAngularTestabilities();let o=s.length,a=!1;const l=function(u){a=a||u,o--,0==o&&n(a)};s.forEach(u=>{u.whenStable(l)})})}findTestabilityInTree(t,r,n){return null==r?null:t.getTestability(r)??(n?Js().isShadowRoot(r)?this.findTestabilityInTree(t,r.host,!0):this.findTestabilityInTree(t,r.parentElement,!0):null)}},deps:[]},{provide:oy,useClass:hf,deps:[At,df,Du]},{provide:hf,useClass:hf,deps:[At,df,Du]}],bC=[{provide:Fh,useValue:"root"},{provide:$n,useFactory:function ZI(){return new $n},deps:[]},{provide:Xf,useClass:yI,multi:!0,deps:[rn,At,Ms]},{provide:Xf,useClass:EI,multi:!0,deps:[rn]},pC,hC,uC,{provide:Cm,useExisting:pC},{provide:class kA{},useClass:cI,deps:[]},[]];let SI=(()=>{var e;class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:zl,useValue:n.appId}]}}}return(e=t).\u0275fac=function(n){return new(n||e)(He(MI,12))},e.\u0275mod=Mr({type:e}),e.\u0275inj=ur({providers:[...bC,...CC],imports:[xA,Jx]}),t})(),EC=(()=>{var e;class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}}return(e=t).\u0275fac=function(n){return new(n||e)(He(rn))},e.\u0275prov=ze({token:e,factory:function(n){let s=null;return s=n?new n:function xI(){return new EC(He(rn))}(),s},providedIn:"root"}),t})();typeof window<"u"&&window;const{isArray:LI}=Array,{getPrototypeOf:kI,prototype:BI,keys:FI}=Object;const{isArray:YI}=Array;function qf(...e){const t=Eo(e),r=function $b(e){return F(Ec(e))?e.pop():void 0}(e),{args:n,keys:s}=function jI(e){if(1===e.length){const t=e[0];if(LI(t))return{args:t,keys:null};if(function UI(e){return e&&"object"==typeof e&&kI(e)===BI}(t)){const r=FI(t);return{args:r.map(n=>t[n]),keys:r}}}return{args:e,keys:null}}(e);if(0===n.length)return li([],t);const o=new Ne(function zI(e,t,r=me){return n=>{wC(t,()=>{const{length:s}=e,o=new Array(s);let a=s,l=s;for(let u=0;u<s;u++)wC(t,()=>{const c=li(e[u],t);let h=!1;c.subscribe(bt(n,g=>{o[u]=g,h||(h=!0,l--),l||n.next(r(o.slice()))},()=>{--a||n.complete()}))},n)},n)}}(n,t,s?a=>function XI(e,t){return e.reduce((r,n,s)=>(r[n]=t[s],r),{})}(s,a):me));return r?o.pipe(function HI(e){return dt(t=>function VI(e,t){return YI(t)?e(...t):e(t)}(e,t))}(r)):o}function wC(e,t,r){e?Jt(r,e,t):t()}const Hu=X(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function Qf(...e){return function GI(){return Qr(1)}()(li(e,Eo(e)))}function MC(e){return new Ne(t=>{ji(e()).subscribe(t)})}function Pa(e,t){const r=F(e)?e:()=>e,n=s=>s.error(r());return new Ne(t?s=>t.schedule(n,0,s):n)}function ep(){return mt((e,t)=>{let r=null;e._refCount++;const n=bt(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(r=null);const s=e._connection,o=r;r=null,s&&(!o||s===o)&&s.unsubscribe(),t.unsubscribe()});e.subscribe(n),n.closed||(r=e.connect())})}class SC extends Ne{constructor(t,r){super(),this.source=t,this.subjectFactory=r,this._subject=null,this._refCount=0,this._connection=null,$t(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new A;const r=this.getSubject();t.add(this.source.subscribe(bt(r,void 0,()=>{this._teardown(),r.complete()},n=>{this._teardown(),r.error(n)},()=>this._teardown()))),t.closed&&(this._connection=null,t=A.EMPTY)}return t}refCount(){return ep()(this)}}function Ks(e){return e<=0?()=>wn:mt((t,r)=>{let n=0;t.subscribe(bt(r,s=>{++n<=e&&(r.next(s),e<=n&&r.complete())}))})}function Er(e,t){return mt((r,n)=>{let s=0;r.subscribe(bt(n,o=>e.call(t,o,s++)&&n.next(o)))})}function Xu(e){return mt((t,r)=>{let n=!1;t.subscribe(bt(r,s=>{n=!0,r.next(s)},()=>{n||r.next(e),r.complete()}))})}function OC(e=JI){return mt((t,r)=>{let n=!1;t.subscribe(bt(r,s=>{n=!0,r.next(s)},()=>n?r.complete():r.error(e())))})}function JI(){return new Hu}function jr(e,t){const r=arguments.length>=2;return n=>n.pipe(e?Er((s,o)=>e(s,o,n)):me,Ks(1),r?Xu(t):OC(()=>new Hu))}function Za(e,t){return F(t)?ai(e,t,1):ai(e,1)}function _i(e,t,r){const n=F(e)||t||r?{next:e,error:t,complete:r}:e;return n?mt((s,o)=>{var a;null===(a=n.subscribe)||void 0===a||a.call(n);let l=!0;s.subscribe(bt(o,u=>{var c;null===(c=n.next)||void 0===c||c.call(n,u),o.next(u)},()=>{var u;l=!1,null===(u=n.complete)||void 0===u||u.call(n),o.complete()},u=>{var c;l=!1,null===(c=n.error)||void 0===c||c.call(n,u),o.error(u)},()=>{var u,c;l&&(null===(u=n.unsubscribe)||void 0===u||u.call(n)),null===(c=n.finalize)||void 0===c||c.call(n)}))}):me}function Ur(e){return mt((t,r)=>{let o,n=null,s=!1;n=t.subscribe(bt(r,void 0,void 0,a=>{o=ji(e(a,Ur(e)(t))),n?(n.unsubscribe(),n=null,o.subscribe(r)):s=!0})),s&&(n.unsubscribe(),n=null,o.subscribe(r))})}function tp(e){return e<=0?()=>wn:mt((t,r)=>{let n=[];t.subscribe(bt(r,s=>{n.push(s),e<n.length&&n.shift()},()=>{for(const s of n)r.next(s);r.complete()},void 0,()=>{n=null}))})}function ip(e){return mt((t,r)=>{try{t.subscribe(r)}finally{r.add(e)}})}const ot="primary",Da=Symbol("RouteTitle");class tN{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const r=this.params[t];return Array.isArray(r)?r[0]:r}return null}getAll(t){if(this.has(t)){const r=this.params[t];return Array.isArray(r)?r:[r]}return[]}get keys(){return Object.keys(this.params)}}function qs(e){return new tN(e)}function iN(e,t,r){const n=r.path.split("/");if(n.length>e.length||"full"===r.pathMatch&&(t.hasChildren()||n.length<e.length))return null;const s={};for(let o=0;o<n.length;o++){const a=n[o],l=e[o];if(a.startsWith(":"))s[a.substring(1)]=l;else if(a!==l.path)return null}return{consumed:e.slice(0,n.length),posParams:s}}function Bn(e,t){const r=e?Object.keys(e):void 0,n=t?Object.keys(t):void 0;if(!r||!n||r.length!=n.length)return!1;let s;for(let o=0;o<r.length;o++)if(s=r[o],!xC(e[s],t[s]))return!1;return!0}function xC(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const r=[...e].sort(),n=[...t].sort();return r.every((s,o)=>n[o]===s)}return e===t}function TC(e){return e.length>0?e[e.length-1]:null}function Pr(e){return function RI(e){return!!e&&(e instanceof Ne||F(e.lift)&&F(e.subscribe))}(e)?e:fu(e)?li(Promise.resolve(e)):qe(e)}const rN={exact:function NC(e,t,r){if(!Yr(e.segments,t.segments)||!zu(e.segments,t.segments,r)||e.numberOfChildren!==t.numberOfChildren)return!1;for(const n in t.children)if(!e.children[n]||!NC(e.children[n],t.children[n],r))return!1;return!0},subset:RC},AC={exact:function sN(e,t){return Bn(e,t)},subset:function oN(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(r=>xC(e[r],t[r]))},ignored:()=>!0};function IC(e,t,r){return rN[r.paths](e.root,t.root,r.matrixParams)&&AC[r.queryParams](e.queryParams,t.queryParams)&&!("exact"===r.fragment&&e.fragment!==t.fragment)}function RC(e,t,r){return LC(e,t,t.segments,r)}function LC(e,t,r,n){if(e.segments.length>r.length){const s=e.segments.slice(0,r.length);return!(!Yr(s,r)||t.hasChildren()||!zu(s,r,n))}if(e.segments.length===r.length){if(!Yr(e.segments,r)||!zu(e.segments,r,n))return!1;for(const s in t.children)if(!e.children[s]||!RC(e.children[s],t.children[s],n))return!1;return!0}{const s=r.slice(0,e.segments.length),o=r.slice(e.segments.length);return!!(Yr(e.segments,s)&&zu(e.segments,s,n)&&e.children[ot])&&LC(e.children[ot],t,o,n)}}function zu(e,t,r){return t.every((n,s)=>AC[r](e[s].parameters,n.parameters))}class Qs{constructor(t=new Dt([],{}),r={},n=null){this.root=t,this.queryParams=r,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qs(this.queryParams)),this._queryParamMap}toString(){return uN.serialize(this)}}class Dt{constructor(t,r){this.segments=t,this.children=r,this.parent=null,Object.values(r).forEach(n=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Gu(this)}}class wa{constructor(t,r){this.path=t,this.parameters=r}get parameterMap(){return this._parameterMap||(this._parameterMap=qs(this.parameters)),this._parameterMap}toString(){return FC(this)}}function Yr(e,t){return e.length===t.length&&e.every((r,n)=>r.path===t[n].path)}let Ma=(()=>{var e;class t{}return(e=t).\u0275fac=function(n){return new(n||e)},e.\u0275prov=ze({token:e,factory:function(){return new np},providedIn:"root"}),t})();class np{parse(t){const r=new CN(t);return new Qs(r.parseRootSegment(),r.parseQueryParams(),r.parseFragment())}serialize(t){const r=`/${Sa(t.root,!0)}`,n=function dN(e){const t=Object.keys(e).map(r=>{const n=e[r];return Array.isArray(n)?n.map(s=>`${$u(r)}=${$u(s)}`).join("&"):`${$u(r)}=${$u(n)}`}).filter(r=>!!r);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${r}${n}${"string"==typeof t.fragment?`#${function cN(e){return encodeURI(e)}(t.fragment)}`:""}`}}const uN=new np;function Gu(e){return e.segments.map(t=>FC(t)).join("/")}function Sa(e,t){if(!e.hasChildren())return Gu(e);if(t){const r=e.children[ot]?Sa(e.children[ot],!1):"",n=[];return Object.entries(e.children).forEach(([s,o])=>{s!==ot&&n.push(`${s}:${Sa(o,!1)}`)}),n.length>0?`${r}(${n.join("//")})`:r}{const r=function lN(e,t){let r=[];return Object.entries(e.children).forEach(([n,s])=>{n===ot&&(r=r.concat(t(s,n)))}),Object.entries(e.children).forEach(([n,s])=>{n!==ot&&(r=r.concat(t(s,n)))}),r}(e,(n,s)=>s===ot?[Sa(e.children[ot],!1)]:[`${s}:${Sa(n,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[ot]?`${Gu(e)}/${r[0]}`:`${Gu(e)}/(${r.join("//")})`}}function kC(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $u(e){return kC(e).replace(/%3B/gi,";")}function rp(e){return kC(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ju(e){return decodeURIComponent(e)}function BC(e){return Ju(e.replace(/\+/g,"%20"))}function FC(e){return`${rp(e.path)}${function hN(e){return Object.keys(e).map(t=>`;${rp(t)}=${rp(e[t])}`).join("")}(e.parameters)}`}const fN=/^[^\/()?;#]+/;function sp(e){const t=e.match(fN);return t?t[0]:""}const pN=/^[^\/()?;=#]+/,mN=/^[^=?&#]+/,vN=/^[^&#]+/;class CN{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Dt([],{}):new Dt([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let r={};this.peekStartsWith("/(")&&(this.capture("/"),r=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(r).length>0)&&(n[ot]=new Dt(t,r)),n}parseSegment(){const t=sp(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Ze(4009,!1);return this.capture(t),new wa(Ju(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const r=function gN(e){const t=e.match(pN);return t?t[0]:""}(this.remaining);if(!r)return;this.capture(r);let n="";if(this.consumeOptional("=")){const s=sp(this.remaining);s&&(n=s,this.capture(n))}t[Ju(r)]=Ju(n)}parseQueryParam(t){const r=function _N(e){const t=e.match(mN);return t?t[0]:""}(this.remaining);if(!r)return;this.capture(r);let n="";if(this.consumeOptional("=")){const a=function yN(e){const t=e.match(vN);return t?t[0]:""}(this.remaining);a&&(n=a,this.capture(n))}const s=BC(r),o=BC(n);if(t.hasOwnProperty(s)){let a=t[s];Array.isArray(a)||(a=[a],t[s]=a),a.push(o)}else t[s]=o}parseParens(t){const r={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=sp(this.remaining),s=this.remaining[n.length];if("/"!==s&&")"!==s&&";"!==s)throw new Ze(4010,!1);let o;n.indexOf(":")>-1?(o=n.slice(0,n.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=ot);const a=this.parseChildren();r[o]=1===Object.keys(a).length?a[ot]:new Dt([],a),this.consumeOptional("//")}return r}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Ze(4011,!1)}}function jC(e){return e.segments.length>0?new Dt([],{[ot]:e}):e}function UC(e){const t={};for(const n of Object.keys(e.children)){const o=UC(e.children[n]);if(n===ot&&0===o.segments.length&&o.hasChildren())for(const[a,l]of Object.entries(o.children))t[a]=l;else(o.segments.length>0||o.hasChildren())&&(t[n]=o)}return function bN(e){if(1===e.numberOfChildren&&e.children[ot]){const t=e.children[ot];return new Dt(e.segments.concat(t.segments),t.children)}return e}(new Dt(e.segments,t))}function Vr(e){return e instanceof Qs}function YC(e){let t;const s=jC(function r(o){const a={};for(const u of o.children){const c=r(u);a[u.outlet]=c}const l=new Dt(o.url,a);return o===e&&(t=l),l}(e.root));return t??s}function VC(e,t,r,n){let s=e;for(;s.parent;)s=s.parent;if(0===t.length)return op(s,s,s,r,n);const o=function PN(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new XC(!0,0,e);let t=0,r=!1;const n=e.reduce((s,o,a)=>{if("object"==typeof o&&null!=o){if(o.outlets){const l={};return Object.entries(o.outlets).forEach(([u,c])=>{l[u]="string"==typeof c?c.split("/"):c}),[...s,{outlets:l}]}if(o.segmentPath)return[...s,o.segmentPath]}return"string"!=typeof o?[...s,o]:0===a?(o.split("/").forEach((l,u)=>{0==u&&"."===l||(0==u&&""===l?r=!0:".."===l?t++:""!=l&&s.push(l))}),s):[...s,o]},[]);return new XC(r,t,n)}(t);if(o.toRoot())return op(s,s,new Dt([],{}),r,n);const a=function ZN(e,t,r){if(e.isAbsolute)return new Ku(t,!0,0);if(!r)return new Ku(t,!1,NaN);if(null===r.parent)return new Ku(r,!0,0);const n=Wu(e.commands[0])?0:1;return function DN(e,t,r){let n=e,s=t,o=r;for(;o>s;){if(o-=s,n=n.parent,!n)throw new Ze(4005,!1);s=n.segments.length}return new Ku(n,!1,s-o)}(r,r.segments.length-1+n,e.numberOfDoubleDots)}(o,s,e),l=a.processChildren?xa(a.segmentGroup,a.index,o.commands):zC(a.segmentGroup,a.index,o.commands);return op(s,a.segmentGroup,l,r,n)}function Wu(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Oa(e){return"object"==typeof e&&null!=e&&e.outlets}function op(e,t,r,n,s){let a,o={};n&&Object.entries(n).forEach(([u,c])=>{o[u]=Array.isArray(c)?c.map(h=>`${h}`):`${c}`}),a=e===t?r:HC(e,t,r);const l=jC(UC(a));return new Qs(l,o,s)}function HC(e,t,r){const n={};return Object.entries(e.children).forEach(([s,o])=>{n[s]=o===t?r:HC(o,t,r)}),new Dt(e.segments,n)}class XC{constructor(t,r,n){if(this.isAbsolute=t,this.numberOfDoubleDots=r,this.commands=n,t&&n.length>0&&Wu(n[0]))throw new Ze(4003,!1);const s=n.find(Oa);if(s&&s!==TC(n))throw new Ze(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ku{constructor(t,r,n){this.segmentGroup=t,this.processChildren=r,this.index=n}}function zC(e,t,r){if(e||(e=new Dt([],{})),0===e.segments.length&&e.hasChildren())return xa(e,t,r);const n=function MN(e,t,r){let n=0,s=t;const o={match:!1,pathIndex:0,commandIndex:0};for(;s<e.segments.length;){if(n>=r.length)return o;const a=e.segments[s],l=r[n];if(Oa(l))break;const u=`${l}`,c=n<r.length-1?r[n+1]:null;if(s>0&&void 0===u)break;if(u&&c&&"object"==typeof c&&void 0===c.outlets){if(!$C(u,c,a))return o;n+=2}else{if(!$C(u,{},a))return o;n++}s++}return{match:!0,pathIndex:s,commandIndex:n}}(e,t,r),s=r.slice(n.commandIndex);if(n.match&&n.pathIndex<e.segments.length){const o=new Dt(e.segments.slice(0,n.pathIndex),{});return o.children[ot]=new Dt(e.segments.slice(n.pathIndex),e.children),xa(o,0,s)}return n.match&&0===s.length?new Dt(e.segments,{}):n.match&&!e.hasChildren()?ap(e,t,r):n.match?xa(e,0,s):ap(e,t,r)}function xa(e,t,r){if(0===r.length)return new Dt(e.segments,{});{const n=function wN(e){return Oa(e[0])?e[0].outlets:{[ot]:e}}(r),s={};if(Object.keys(n).some(o=>o!==ot)&&e.children[ot]&&1===e.numberOfChildren&&0===e.children[ot].segments.length){const o=xa(e.children[ot],t,r);return new Dt(e.segments,o.children)}return Object.entries(n).forEach(([o,a])=>{"string"==typeof a&&(a=[a]),null!==a&&(s[o]=zC(e.children[o],t,a))}),Object.entries(e.children).forEach(([o,a])=>{void 0===n[o]&&(s[o]=a)}),new Dt(e.segments,s)}}function ap(e,t,r){const n=e.segments.slice(0,t);let s=0;for(;s<r.length;){const o=r[s];if(Oa(o)){const u=SN(o.outlets);return new Dt(n,u)}if(0===s&&Wu(r[0])){n.push(new wa(e.segments[t].path,GC(r[0]))),s++;continue}const a=Oa(o)?o.outlets[ot]:`${o}`,l=s<r.length-1?r[s+1]:null;a&&l&&Wu(l)?(n.push(new wa(a,GC(l))),s+=2):(n.push(new wa(a,{})),s++)}return new Dt(n,{})}function SN(e){const t={};return Object.entries(e).forEach(([r,n])=>{"string"==typeof n&&(n=[n]),null!==n&&(t[r]=ap(new Dt([],{}),0,n))}),t}function GC(e){const t={};return Object.entries(e).forEach(([r,n])=>t[r]=`${n}`),t}function $C(e,t,r){return e==r.path&&Bn(t,r.parameters)}const Ta="imperative";class Fn{constructor(t,r){this.id=t,this.url=r}}class qu extends Fn{constructor(t,r,n="imperative",s=null){super(t,r),this.type=0,this.navigationTrigger=n,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Zr extends Fn{constructor(t,r,n){super(t,r),this.urlAfterRedirects=n,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Aa extends Fn{constructor(t,r,n,s){super(t,r),this.reason=n,this.code=s,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class eo extends Fn{constructor(t,r,n,s){super(t,r),this.reason=n,this.code=s,this.type=16}}class Qu extends Fn{constructor(t,r,n,s){super(t,r),this.error=n,this.target=s,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class JC extends Fn{constructor(t,r,n,s){super(t,r),this.urlAfterRedirects=n,this.state=s,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ON extends Fn{constructor(t,r,n,s){super(t,r),this.urlAfterRedirects=n,this.state=s,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xN extends Fn{constructor(t,r,n,s,o){super(t,r),this.urlAfterRedirects=n,this.state=s,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class TN extends Fn{constructor(t,r,n,s){super(t,r),this.urlAfterRedirects=n,this.state=s,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class AN extends Fn{constructor(t,r,n,s){super(t,r),this.urlAfterRedirects=n,this.state=s,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class IN{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class NN{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class RN{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class LN{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kN{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class BN{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class WC{constructor(t,r,n){this.routerEvent=t,this.position=r,this.anchor=n,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class lp{}class up{constructor(t){this.url=t}}class FN{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ia,this.attachRef=null}}let Ia=(()=>{var e;class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,s){const o=this.getOrCreateContext(n);o.outlet=s,this.contexts.set(n,o)}onChildOutletDestroyed(n){const s=this.getContext(n);s&&(s.outlet=null,s.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let s=this.getContext(n);return s||(s=new FN,this.contexts.set(n,s)),s}getContext(n){return this.contexts.get(n)||null}}return(e=t).\u0275fac=function(n){return new(n||e)},e.\u0275prov=ze({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();class KC{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const r=this.pathFromRoot(t);return r.length>1?r[r.length-2]:null}children(t){const r=cp(t,this._root);return r?r.children.map(n=>n.value):[]}firstChild(t){const r=cp(t,this._root);return r&&r.children.length>0?r.children[0].value:null}siblings(t){const r=hp(t,this._root);return r.length<2?[]:r[r.length-2].children.map(s=>s.value).filter(s=>s!==t)}pathFromRoot(t){return hp(t,this._root).map(r=>r.value)}}function cp(e,t){if(e===t.value)return t;for(const r of t.children){const n=cp(e,r);if(n)return n}return null}function hp(e,t){if(e===t.value)return[t];for(const r of t.children){const n=hp(e,r);if(n.length)return n.unshift(t),n}return[]}class ir{constructor(t,r){this.value=t,this.children=r}toString(){return`TreeNode(${this.value})`}}function to(e){const t={};return e&&e.children.forEach(r=>t[r.value.outlet]=r),t}class qC extends KC{constructor(t,r){super(t),this.snapshot=r,dp(this,t)}toString(){return this.snapshot.toString()}}function QC(e,t){const r=function jN(e,t){const a=new ec([],{},{},"",{},ot,t,null,{});return new tb("",new ir(a,[]))}(0,t),n=new Ji([new wa("",{})]),s=new Ji({}),o=new Ji({}),a=new Ji({}),l=new Ji(""),u=new io(n,s,a,l,o,ot,t,r.root);return u.snapshot=r.root,new qC(new ir(u,[]),r)}class io{constructor(t,r,n,s,o,a,l,u){this.urlSubject=t,this.paramsSubject=r,this.queryParamsSubject=n,this.fragmentSubject=s,this.dataSubject=o,this.outlet=a,this.component=l,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(dt(c=>c[Da]))??qe(void 0),this.url=t,this.params=r,this.queryParams=n,this.fragment=s,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(dt(t=>qs(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(dt(t=>qs(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function eb(e,t="emptyOnly"){const r=e.pathFromRoot;let n=0;if("always"!==t)for(n=r.length-1;n>=1;){const s=r[n],o=r[n-1];if(s.routeConfig&&""===s.routeConfig.path)n--;else{if(o.component)break;n--}}return function UN(e){return e.reduce((t,r)=>({params:{...t.params,...r.params},data:{...t.data,...r.data},resolve:{...r.data,...t.resolve,...r.routeConfig?.data,...r._resolvedData}}),{params:{},data:{},resolve:{}})}(r.slice(n))}class ec{get title(){return this.data?.[Da]}constructor(t,r,n,s,o,a,l,u,c){this.url=t,this.params=r,this.queryParams=n,this.fragment=s,this.data=o,this.outlet=a,this.component=l,this.routeConfig=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=qs(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qs(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(n=>n.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class tb extends KC{constructor(t,r){super(r),this.url=t,dp(this,r)}toString(){return ib(this._root)}}function dp(e,t){t.value._routerState=e,t.children.forEach(r=>dp(e,r))}function ib(e){const t=e.children.length>0?` { ${e.children.map(ib).join(", ")} } `:"";return`${e.value}${t}`}function fp(e){if(e.snapshot){const t=e.snapshot,r=e._futureSnapshot;e.snapshot=r,Bn(t.queryParams,r.queryParams)||e.queryParamsSubject.next(r.queryParams),t.fragment!==r.fragment&&e.fragmentSubject.next(r.fragment),Bn(t.params,r.params)||e.paramsSubject.next(r.params),function nN(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(!Bn(e[r],t[r]))return!1;return!0}(t.url,r.url)||e.urlSubject.next(r.url),Bn(t.data,r.data)||e.dataSubject.next(r.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function pp(e,t){const r=Bn(e.params,t.params)&&function aN(e,t){return Yr(e,t)&&e.every((r,n)=>Bn(r.parameters,t[n].parameters))}(e.url,t.url);return r&&!(!e.parent!=!t.parent)&&(!e.parent||pp(e.parent,t.parent))}let gp=(()=>{var e;class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=ot,this.activateEvents=new wi,this.deactivateEvents=new wi,this.attachEvents=new wi,this.detachEvents=new wi,this.parentContexts=Ie(Ia),this.location=Ie(vn),this.changeDetector=Ie(_f),this.environmentInjector=Ie(Qi),this.inputBinder=Ie(tc,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:s,previousValue:o}=n.name;if(s)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ze(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ze(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ze(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,s){this.activated=n,this._activatedRoute=s,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,s){if(this.isActivated)throw new Ze(4013,!1);this._activatedRoute=n;const o=this.location,l=n.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,c=new YN(n,u,o.injector);this.activated=o.createComponent(l,{index:o.length,injector:c,environmentInjector:s??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return(e=t).\u0275fac=function(n){return new(n||e)},e.\u0275dir=fi({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[pr]}),t})();class YN{constructor(t,r,n){this.route=t,this.childContexts=r,this.parent=n}get(t,r){return t===io?this.route:t===Ia?this.childContexts:this.parent.get(t,r)}}const tc=new Ye("");let nb=(()=>{var e;class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:s}=n,o=qf([s.queryParams,s.params,s.data]).pipe(Mn(([a,l,u],c)=>(u={...a,...l,...u},0===c?qe(u):Promise.resolve(u)))).subscribe(a=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==s||null===s.component)return void this.unsubscribeFromRouteData(n);const l=function aT(e){const t=pt(e);if(!t)return null;const r=new na(t);return{get selector(){return r.selector},get type(){return r.componentType},get inputs(){return r.inputs},get outputs(){return r.outputs},get ngContentSelectors(){return r.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}(s.component);if(l)for(const{templateName:u}of l.inputs)n.activatedComponentRef.setInput(u,a[u]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,o)}}return(e=t).\u0275fac=function(n){return new(n||e)},e.\u0275prov=ze({token:e,factory:e.\u0275fac}),t})();function Na(e,t,r){if(r&&e.shouldReuseRoute(t.value,r.value.snapshot)){const n=r.value;n._futureSnapshot=t.value;const s=function HN(e,t,r){return t.children.map(n=>{for(const s of r.children)if(e.shouldReuseRoute(n.value,s.value.snapshot))return Na(e,n,s);return Na(e,n)})}(e,t,r);return new ir(n,s)}{if(e.shouldAttach(t.value)){const o=e.retrieve(t.value);if(null!==o){const a=o.route;return a.value._futureSnapshot=t.value,a.children=t.children.map(l=>Na(e,l)),a}}const n=function XN(e){return new io(new Ji(e.url),new Ji(e.params),new Ji(e.queryParams),new Ji(e.fragment),new Ji(e.data),e.outlet,e.component,e)}(t.value),s=t.children.map(o=>Na(e,o));return new ir(n,s)}}const mp="ngNavigationCancelingError";function rb(e,t){const{redirectTo:r,navigationBehaviorOptions:n}=Vr(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,s=sb(!1,0,t);return s.url=r,s.navigationBehaviorOptions=n,s}function sb(e,t,r){const n=new Error("NavigationCancelingError: "+(e||""));return n[mp]=!0,n.cancellationCode=t,r&&(n.url=r),n}function ob(e){return e&&e[mp]}let ab=(()=>{var e;class t{}return(e=t).\u0275fac=function(n){return new(n||e)},e.\u0275cmp=ts({type:e,selectors:[["ng-component"]],standalone:!0,features:[uv],decls:1,vars:0,template:function(n,s){1&n&&gn(0,"router-outlet")},dependencies:[gp],encapsulation:2}),t})();function _p(e){const t=e.children&&e.children.map(_p),r=t?{...e,children:t}:{...e};return!r.component&&!r.loadComponent&&(t||r.loadChildren)&&r.outlet&&r.outlet!==ot&&(r.component=ab),r}function bn(e){return e.outlet||ot}function Ra(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){const r=t.routeConfig;if(r?._loadedInjector)return r._loadedInjector;if(r?._injector)return r._injector}return null}class QN{constructor(t,r,n,s,o){this.routeReuseStrategy=t,this.futureState=r,this.currState=n,this.forwardEvent=s,this.inputBindingEnabled=o}activate(t){const r=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(r,n,t),fp(this.futureState.root),this.activateChildRoutes(r,n,t)}deactivateChildRoutes(t,r,n){const s=to(r);t.children.forEach(o=>{const a=o.value.outlet;this.deactivateRoutes(o,s[a],n),delete s[a]}),Object.values(s).forEach(o=>{this.deactivateRouteAndItsChildren(o,n)})}deactivateRoutes(t,r,n){const s=t.value,o=r?r.value:null;if(s===o)if(s.component){const a=n.getContext(s.outlet);a&&this.deactivateChildRoutes(t,r,a.children)}else this.deactivateChildRoutes(t,r,n);else o&&this.deactivateRouteAndItsChildren(r,n)}deactivateRouteAndItsChildren(t,r){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,r):this.deactivateRouteAndOutlet(t,r)}detachAndStoreRouteSubtree(t,r){const n=r.getContext(t.value.outlet),s=n&&t.value.component?n.children:r,o=to(t);for(const a of Object.keys(o))this.deactivateRouteAndItsChildren(o[a],s);if(n&&n.outlet){const a=n.outlet.detach(),l=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:a,route:t,contexts:l})}}deactivateRouteAndOutlet(t,r){const n=r.getContext(t.value.outlet),s=n&&t.value.component?n.children:r,o=to(t);for(const a of Object.keys(o))this.deactivateRouteAndItsChildren(o[a],s);n&&(n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated()),n.attachRef=null,n.route=null)}activateChildRoutes(t,r,n){const s=to(r);t.children.forEach(o=>{this.activateRoutes(o,s[o.value.outlet],n),this.forwardEvent(new BN(o.value.snapshot))}),t.children.length&&this.forwardEvent(new LN(t.value.snapshot))}activateRoutes(t,r,n){const s=t.value,o=r?r.value:null;if(fp(s),s===o)if(s.component){const a=n.getOrCreateContext(s.outlet);this.activateChildRoutes(t,r,a.children)}else this.activateChildRoutes(t,r,n);else if(s.component){const a=n.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const l=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),a.children.onOutletReAttached(l.contexts),a.attachRef=l.componentRef,a.route=l.route.value,a.outlet&&a.outlet.attach(l.componentRef,l.route.value),fp(l.route.value),this.activateChildRoutes(t,null,a.children)}else{const l=Ra(s.snapshot);a.attachRef=null,a.route=s,a.injector=l,a.outlet&&a.outlet.activateWith(s,a.injector),this.activateChildRoutes(t,null,a.children)}}else this.activateChildRoutes(t,null,n)}}class lb{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class ic{constructor(t,r){this.component=t,this.route=r}}function e3(e,t,r){const n=e._root;return La(n,t?t._root:null,r,[n.value])}function no(e,t){const r=Symbol(),n=t.get(e,r);return n===r?"function"!=typeof e||function hE(e){return null!==Ka(e)}(e)?t.get(e):e:n}function La(e,t,r,n,s={canDeactivateChecks:[],canActivateChecks:[]}){const o=to(t);return e.children.forEach(a=>{(function i3(e,t,r,n,s={canDeactivateChecks:[],canActivateChecks:[]}){const o=e.value,a=t?t.value:null,l=r?r.getContext(e.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){const u=function n3(e,t,r){if("function"==typeof r)return r(e,t);switch(r){case"pathParamsChange":return!Yr(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Yr(e.url,t.url)||!Bn(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!pp(e,t)||!Bn(e.queryParams,t.queryParams);default:return!pp(e,t)}}(a,o,o.routeConfig.runGuardsAndResolvers);u?s.canActivateChecks.push(new lb(n)):(o.data=a.data,o._resolvedData=a._resolvedData),La(e,t,o.component?l?l.children:null:r,n,s),u&&l&&l.outlet&&l.outlet.isActivated&&s.canDeactivateChecks.push(new ic(l.outlet.component,a))}else a&&ka(t,l,s),s.canActivateChecks.push(new lb(n)),La(e,null,o.component?l?l.children:null:r,n,s)})(a,o[a.value.outlet],r,n.concat([a.value]),s),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,l])=>ka(l,r.getContext(a),s)),s}function ka(e,t,r){const n=to(e),s=e.value;Object.entries(n).forEach(([o,a])=>{ka(a,s.component?t?t.children.getContext(o):null:t,r)}),r.canDeactivateChecks.push(new ic(s.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,s))}function Ba(e){return"function"==typeof e}function ub(e){return e instanceof Hu||"EmptyError"===e?.name}const nc=Symbol("INITIAL_VALUE");function ro(){return Mn(e=>qf(e.map(t=>t.pipe(Ks(1),function $I(...e){const t=Eo(e);return mt((r,n)=>{(t?Qf(e,r,t):Qf(e,r)).subscribe(n)})}(nc)))).pipe(dt(t=>{for(const r of t)if(!0!==r){if(r===nc)return nc;if(!1===r||r instanceof Qs)return r}return!0}),Er(t=>t!==nc),Ks(1)))}function cb(e){return function we(...e){return Ae(e)}(_i(t=>{if(Vr(t))throw rb(0,t)}),dt(t=>!0===t))}class rc{constructor(t){this.segmentGroup=t||null}}class hb{constructor(t){this.urlTree=t}}function so(e){return Pa(new rc(e))}function db(e){return Pa(new hb(e))}class P3{constructor(t,r){this.urlSerializer=t,this.urlTree=r}noMatchError(t){return new Ze(4002,!1)}lineralizeSegments(t,r){let n=[],s=r.root;for(;;){if(n=n.concat(s.segments),0===s.numberOfChildren)return qe(n);if(s.numberOfChildren>1||!s.children[ot])return Pa(new Ze(4e3,!1));s=s.children[ot]}}applyRedirectCommands(t,r,n){return this.applyRedirectCreateUrlTree(r,this.urlSerializer.parse(r),t,n)}applyRedirectCreateUrlTree(t,r,n,s){const o=this.createSegmentGroup(t,r.root,n,s);return new Qs(o,this.createQueryParams(r.queryParams,this.urlTree.queryParams),r.fragment)}createQueryParams(t,r){const n={};return Object.entries(t).forEach(([s,o])=>{if("string"==typeof o&&o.startsWith(":")){const l=o.substring(1);n[s]=r[l]}else n[s]=o}),n}createSegmentGroup(t,r,n,s){const o=this.createSegments(t,r.segments,n,s);let a={};return Object.entries(r.children).forEach(([l,u])=>{a[l]=this.createSegmentGroup(t,u,n,s)}),new Dt(o,a)}createSegments(t,r,n,s){return r.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,s):this.findOrReturn(o,n))}findPosParam(t,r,n){const s=n[r.path.substring(1)];if(!s)throw new Ze(4001,!1);return s}findOrReturn(t,r){let n=0;for(const s of r){if(s.path===t.path)return r.splice(n),s;n++}return t}}const vp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Z3(e,t,r,n,s){const o=yp(e,t,r);return o.matched?(n=function GN(e,t){return e.providers&&!e._injector&&(e._injector=Hd(e.providers,t,`Route: ${e.path}`)),e._injector??t}(t,n),function C3(e,t,r,n){const s=t.canMatch;return s&&0!==s.length?qe(s.map(a=>{const l=no(a,e);return Pr(function u3(e){return e&&Ba(e.canMatch)}(l)?l.canMatch(t,r):e.runInContext(()=>l(t,r)))})).pipe(ro(),cb()):qe(!0)}(n,t,r).pipe(dt(a=>!0===a?o:{...vp}))):qe(o)}function yp(e,t,r){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||r.length>0)?{...vp}:{matched:!0,consumedSegments:[],remainingSegments:r,parameters:{},positionalParamSegments:{}};const s=(t.matcher||iN)(r,e,t);if(!s)return{...vp};const o={};Object.entries(s.posParams??{}).forEach(([l,u])=>{o[l]=u.path});const a=s.consumed.length>0?{...o,...s.consumed[s.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:s.consumed,remainingSegments:r.slice(s.consumed.length),parameters:a,positionalParamSegments:s.posParams??{}}}function fb(e,t,r,n){return r.length>0&&function M3(e,t,r){return r.some(n=>sc(e,t,n)&&bn(n)!==ot)}(e,r,n)?{segmentGroup:new Dt(t,w3(n,new Dt(r,e.children))),slicedSegments:[]}:0===r.length&&function S3(e,t,r){return r.some(n=>sc(e,t,n))}(e,r,n)?{segmentGroup:new Dt(e.segments,D3(e,0,r,n,e.children)),slicedSegments:r}:{segmentGroup:new Dt(e.segments,e.children),slicedSegments:r}}function D3(e,t,r,n,s){const o={};for(const a of n)if(sc(e,r,a)&&!s[bn(a)]){const l=new Dt([],{});o[bn(a)]=l}return{...s,...o}}function w3(e,t){const r={};r[ot]=t;for(const n of e)if(""===n.path&&bn(n)!==ot){const s=new Dt([],{});r[bn(n)]=s}return r}function sc(e,t,r){return(!(e.hasChildren()||t.length>0)||"full"!==r.pathMatch)&&""===r.path}class A3{constructor(t,r,n,s,o,a,l){this.injector=t,this.configLoader=r,this.rootComponentType=n,this.config=s,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=l,this.allowRedirects=!0,this.applyRedirects=new P3(this.urlSerializer,this.urlTree)}noMatchError(t){return new Ze(4002,!1)}recognize(){const t=fb(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,ot).pipe(Ur(r=>{if(r instanceof hb)return this.allowRedirects=!1,this.urlTree=r.urlTree,this.match(r.urlTree);throw r instanceof rc?this.noMatchError(r):r}),dt(r=>{const n=new ec([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ot,this.rootComponentType,null,{}),s=new ir(n,r),o=new tb("",s),a=function EN(e,t,r=null,n=null){return VC(YC(e),t,r,n)}(n,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),this.inheritParamsAndData(o._root),{state:o,tree:a}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t.root,ot).pipe(Ur(n=>{throw n instanceof rc?this.noMatchError(n):n}))}inheritParamsAndData(t){const r=t.value,n=eb(r,this.paramsInheritanceStrategy);r.params=Object.freeze(n.params),r.data=Object.freeze(n.data),t.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(t,r,n,s){return 0===n.segments.length&&n.hasChildren()?this.processChildren(t,r,n):this.processSegment(t,r,n,n.segments,s,!0)}processChildren(t,r,n){const s=[];for(const o of Object.keys(n.children))"primary"===o?s.unshift(o):s.push(o);return li(s).pipe(Za(o=>{const a=n.children[o],l=function KN(e,t){const r=e.filter(n=>bn(n)===t);return r.push(...e.filter(n=>bn(n)!==t)),r}(r,o);return this.processSegmentGroup(t,l,a,o)}),function KI(e,t){return mt(function WI(e,t,r,n,s){return(o,a)=>{let l=r,u=t,c=0;o.subscribe(bt(a,h=>{const g=c++;u=l?e(u,h,g):(l=!0,h),n&&a.next(u)},s&&(()=>{l&&a.next(u),a.complete()})))}}(e,t,arguments.length>=2,!0))}((o,a)=>(o.push(...a),o)),Xu(null),function qI(e,t){const r=arguments.length>=2;return n=>n.pipe(e?Er((s,o)=>e(s,o,n)):me,tp(1),r?Xu(t):OC(()=>new Hu))}(),ai(o=>{if(null===o)return so(n);const a=pb(o);return function I3(e){e.sort((t,r)=>t.value.outlet===ot?-1:r.value.outlet===ot?1:t.value.outlet.localeCompare(r.value.outlet))}(a),qe(a)}))}processSegment(t,r,n,s,o,a){return li(r).pipe(Za(l=>this.processSegmentAgainstRoute(l._injector??t,r,l,n,s,o,a).pipe(Ur(u=>{if(u instanceof rc)return qe(null);throw u}))),jr(l=>!!l),Ur(l=>{if(ub(l))return function x3(e,t,r){return 0===t.length&&!e.children[r]}(n,s,o)?qe([]):so(n);throw l}))}processSegmentAgainstRoute(t,r,n,s,o,a,l){return function O3(e,t,r,n){return!!(bn(e)===n||n!==ot&&sc(t,r,e))&&("**"===e.path||yp(t,e,r).matched)}(n,s,o,a)?void 0===n.redirectTo?this.matchSegmentAgainstRoute(t,s,n,o,a,l):l&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,s,r,n,o,a):so(s):so(s)}expandSegmentAgainstRouteUsingRedirect(t,r,n,s,o,a){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,s,a):this.expandRegularSegmentAgainstRouteUsingRedirect(t,r,n,s,o,a)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,n,s){const o=this.applyRedirects.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?db(o):this.applyRedirects.lineralizeSegments(n,o).pipe(ai(a=>{const l=new Dt(a,{});return this.processSegment(t,r,l,a,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,r,n,s,o,a){const{matched:l,consumedSegments:u,remainingSegments:c,positionalParamSegments:h}=yp(r,s,o);if(!l)return so(r);const g=this.applyRedirects.applyRedirectCommands(u,s.redirectTo,h);return s.redirectTo.startsWith("/")?db(g):this.applyRedirects.lineralizeSegments(s,g).pipe(ai(y=>this.processSegment(t,n,r,y.concat(c),a,!1)))}matchSegmentAgainstRoute(t,r,n,s,o,a){let l;if("**"===n.path){const u=s.length>0?TC(s).parameters:{};l=qe({snapshot:new ec(s,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,gb(n),bn(n),n.component??n._loadedComponent??null,n,mb(n)),consumedSegments:[],remainingSegments:[]}),r.children={}}else l=Z3(r,n,s,t).pipe(dt(({matched:u,consumedSegments:c,remainingSegments:h,parameters:g})=>u?{snapshot:new ec(c,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,gb(n),bn(n),n.component??n._loadedComponent??null,n,mb(n)),consumedSegments:c,remainingSegments:h}:null));return l.pipe(Mn(u=>null===u?so(r):this.getChildConfig(t=n._injector??t,n,s).pipe(Mn(({routes:c})=>{const h=n._loadedInjector??t,{snapshot:g,consumedSegments:y,remainingSegments:E}=u,{segmentGroup:w,slicedSegments:T}=fb(r,y,E,c);if(0===T.length&&w.hasChildren())return this.processChildren(h,c,w).pipe(dt(L=>null===L?null:[new ir(g,L)]));if(0===c.length&&0===T.length)return qe([new ir(g,[])]);const N=bn(n)===o;return this.processSegment(h,c,w,T,N?ot:o,!0).pipe(dt(L=>[new ir(g,L)]))}))))}getChildConfig(t,r,n){return r.children?qe({routes:r.children,injector:t}):r.loadChildren?void 0!==r._loadedRoutes?qe({routes:r._loadedRoutes,injector:r._loadedInjector}):function y3(e,t,r,n){const s=t.canLoad;return void 0===s||0===s.length?qe(!0):qe(s.map(a=>{const l=no(a,e);return Pr(function s3(e){return e&&Ba(e.canLoad)}(l)?l.canLoad(t,r):e.runInContext(()=>l(t,r)))})).pipe(ro(),cb())}(t,r,n).pipe(ai(s=>s?this.configLoader.loadChildren(t,r).pipe(_i(o=>{r._loadedRoutes=o.routes,r._loadedInjector=o.injector})):function E3(e){return Pa(sb(!1,3))}())):qe({routes:[],injector:t})}}function N3(e){const t=e.value.routeConfig;return t&&""===t.path}function pb(e){const t=[],r=new Set;for(const n of e){if(!N3(n)){t.push(n);continue}const s=t.find(o=>n.value.routeConfig===o.value.routeConfig);void 0!==s?(s.children.push(...n.children),r.add(s)):t.push(n)}for(const n of r){const s=pb(n.children);t.push(new ir(n.value,s))}return t.filter(n=>!r.has(n))}function gb(e){return e.data||{}}function mb(e){return e.resolve||{}}function _b(e){return"string"==typeof e.title||null===e.title}function Cp(e){return Mn(t=>{const r=e(t);return r?li(r).pipe(dt(()=>t)):qe(t)})}const oo=new Ye("ROUTES");let bp=(()=>{var e;class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Ie(iy)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return qe(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const s=Pr(n.loadComponent()).pipe(dt(vb),_i(a=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=a}),ip(()=>{this.componentLoaders.delete(n)})),o=new SC(s,()=>new Pt).pipe(ep());return this.componentLoaders.set(n,o),o}loadChildren(n,s){if(this.childrenLoaders.get(s))return this.childrenLoaders.get(s);if(s._loadedRoutes)return qe({routes:s._loadedRoutes,injector:s._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(s);const a=this.loadModuleFactoryOrRoutes(s.loadChildren).pipe(dt(u=>{this.onLoadEndListener&&this.onLoadEndListener(s);let c,h;return Array.isArray(u)?h=u:(c=u.create(n).injector,h=c.get(oo,[],ut.Self|ut.Optional).flat()),{routes:h.map(_p),injector:c}}),ip(()=>{this.childrenLoaders.delete(s)})),l=new SC(a,()=>new Pt).pipe(ep());return this.childrenLoaders.set(s,l),l}loadModuleFactoryOrRoutes(n){return Pr(n()).pipe(dt(vb),ai(s=>s instanceof av||Array.isArray(s)?qe(s):li(this.compiler.compileModuleAsync(s))))}}return(e=t).\u0275fac=function(n){return new(n||e)},e.\u0275prov=ze({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();function vb(e){return function U3(e){return e&&"object"==typeof e&&"default"in e}(e)?e.default:e}let oc=(()=>{var e;class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Pt,this.transitionAbortSubject=new Pt,this.configLoader=Ie(bp),this.environmentInjector=Ie(Qi),this.urlSerializer=Ie(Ma),this.rootContexts=Ie(Ia),this.inputBindingEnabled=null!==Ie(tc,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>qe(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new NN(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new IN(o))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const s=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:s})}setupNavigations(n,s,o){return this.transitions=new Ji({id:0,currentUrlTree:s,currentRawUrl:s,currentBrowserUrl:s,extractedUrl:n.urlHandlingStrategy.extract(s),urlAfterRedirects:n.urlHandlingStrategy.extract(s),rawUrl:s,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ta,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Er(a=>0!==a.id),dt(a=>({...a,extractedUrl:n.urlHandlingStrategy.extract(a.rawUrl)})),Mn(a=>{this.currentTransition=a;let l=!1,u=!1;return qe(a).pipe(_i(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Mn(c=>{const h=c.currentBrowserUrl.toString(),g=!n.navigated||c.extractedUrl.toString()!==h||h!==c.currentUrlTree.toString();if(!g&&"reload"!==(c.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const E="";return this.events.next(new eo(c.id,this.urlSerializer.serialize(c.rawUrl),E,0)),c.resolve(null),wn}if(n.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return qe(c).pipe(Mn(E=>{const w=this.transitions?.getValue();return this.events.next(new qu(E.id,this.urlSerializer.serialize(E.extractedUrl),E.source,E.restoredState)),w!==this.transitions?.getValue()?wn:Promise.resolve(E)}),function R3(e,t,r,n,s,o){return ai(a=>function T3(e,t,r,n,s,o,a="emptyOnly"){return new A3(e,t,r,n,s,a,o).recognize()}(e,t,r,n,a.extractedUrl,s,o).pipe(dt(({state:l,tree:u})=>({...a,targetSnapshot:l,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),_i(E=>{a.targetSnapshot=E.targetSnapshot,a.urlAfterRedirects=E.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:E.urlAfterRedirects};const w=new JC(E.id,this.urlSerializer.serialize(E.extractedUrl),this.urlSerializer.serialize(E.urlAfterRedirects),E.targetSnapshot);this.events.next(w)}));if(g&&n.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){const{id:E,extractedUrl:w,source:T,restoredState:N,extras:L}=c,R=new qu(E,this.urlSerializer.serialize(w),T,N);this.events.next(R);const H=QC(0,this.rootComponentType).snapshot;return this.currentTransition=a={...c,targetSnapshot:H,urlAfterRedirects:w,extras:{...L,skipLocationChange:!1,replaceUrl:!1}},qe(a)}{const E="";return this.events.next(new eo(c.id,this.urlSerializer.serialize(c.extractedUrl),E,1)),c.resolve(null),wn}}),_i(c=>{const h=new ON(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(h)}),dt(c=>(this.currentTransition=a={...c,guards:e3(c.targetSnapshot,c.currentSnapshot,this.rootContexts)},a)),function h3(e,t){return ai(r=>{const{targetSnapshot:n,currentSnapshot:s,guards:{canActivateChecks:o,canDeactivateChecks:a}}=r;return 0===a.length&&0===o.length?qe({...r,guardsResult:!0}):function d3(e,t,r,n){return li(e).pipe(ai(s=>function v3(e,t,r,n,s){const o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return o&&0!==o.length?qe(o.map(l=>{const u=Ra(t)??s,c=no(l,u);return Pr(function l3(e){return e&&Ba(e.canDeactivate)}(c)?c.canDeactivate(e,t,r,n):u.runInContext(()=>c(e,t,r,n))).pipe(jr())})).pipe(ro()):qe(!0)}(s.component,s.route,r,t,n)),jr(s=>!0!==s,!0))}(a,n,s,e).pipe(ai(l=>l&&function r3(e){return"boolean"==typeof e}(l)?function f3(e,t,r,n){return li(t).pipe(Za(s=>Qf(function g3(e,t){return null!==e&&t&&t(new RN(e)),qe(!0)}(s.route.parent,n),function p3(e,t){return null!==e&&t&&t(new kN(e)),qe(!0)}(s.route,n),function _3(e,t,r){const n=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(a=>function t3(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(a)).filter(a=>null!==a).map(a=>MC(()=>qe(a.guards.map(u=>{const c=Ra(a.node)??r,h=no(u,c);return Pr(function a3(e){return e&&Ba(e.canActivateChild)}(h)?h.canActivateChild(n,e):c.runInContext(()=>h(n,e))).pipe(jr())})).pipe(ro())));return qe(o).pipe(ro())}(e,s.path,r),function m3(e,t,r){const n=t.routeConfig?t.routeConfig.canActivate:null;if(!n||0===n.length)return qe(!0);const s=n.map(o=>MC(()=>{const a=Ra(t)??r,l=no(o,a);return Pr(function o3(e){return e&&Ba(e.canActivate)}(l)?l.canActivate(t,e):a.runInContext(()=>l(t,e))).pipe(jr())}));return qe(s).pipe(ro())}(e,s.route,r))),jr(s=>!0!==s,!0))}(n,o,e,t):qe(l)),dt(l=>({...r,guardsResult:l})))})}(this.environmentInjector,c=>this.events.next(c)),_i(c=>{if(a.guardsResult=c.guardsResult,Vr(c.guardsResult))throw rb(0,c.guardsResult);const h=new xN(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(h)}),Er(c=>!!c.guardsResult||(this.cancelNavigationTransition(c,"",3),!1)),Cp(c=>{if(c.guards.canActivateChecks.length)return qe(c).pipe(_i(h=>{const g=new TN(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(g)}),Mn(h=>{let g=!1;return qe(h).pipe(function L3(e,t){return ai(r=>{const{targetSnapshot:n,guards:{canActivateChecks:s}}=r;if(!s.length)return qe(r);let o=0;return li(s).pipe(Za(a=>function k3(e,t,r,n){const s=e.routeConfig,o=e._resolve;return void 0!==s?.title&&!_b(s)&&(o[Da]=s.title),function B3(e,t,r,n){const s=function F3(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}(e);if(0===s.length)return qe({});const o={};return li(s).pipe(ai(a=>function j3(e,t,r,n){const s=Ra(t)??n,o=no(e,s);return Pr(o.resolve?o.resolve(t,r):s.runInContext(()=>o(t,r)))}(e[a],t,r,n).pipe(jr(),_i(l=>{o[a]=l}))),tp(1),function QI(e){return dt(()=>e)}(o),Ur(a=>ub(a)?wn:Pa(a)))}(o,e,t,n).pipe(dt(a=>(e._resolvedData=a,e.data=eb(e,r).resolve,s&&_b(s)&&(e.data[Da]=s.title),null)))}(a.route,n,e,t)),_i(()=>o++),tp(1),ai(a=>o===s.length?qe(r):wn))})}(n.paramsInheritanceStrategy,this.environmentInjector),_i({next:()=>g=!0,complete:()=>{g||this.cancelNavigationTransition(h,"",2)}}))}),_i(h=>{const g=new AN(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(g)}))}),Cp(c=>{const h=g=>{const y=[];g.routeConfig?.loadComponent&&!g.routeConfig._loadedComponent&&y.push(this.configLoader.loadComponent(g.routeConfig).pipe(_i(E=>{g.component=E}),dt(()=>{})));for(const E of g.children)y.push(...h(E));return y};return qf(h(c.targetSnapshot.root)).pipe(Xu(),Ks(1))}),Cp(()=>this.afterPreactivation()),dt(c=>{const h=function VN(e,t,r){const n=Na(e,t._root,r?r._root:void 0);return new qC(n,t)}(n.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=a={...c,targetRouterState:h},a}),_i(()=>{this.events.next(new lp)}),((e,t,r,n)=>dt(s=>(new QN(t,s.targetRouterState,s.currentRouterState,r,n).activate(e),s)))(this.rootContexts,n.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Ks(1),_i({next:c=>{l=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Zr(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),n.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{l=!0}}),function eN(e){return mt((t,r)=>{ji(e).subscribe(bt(r,()=>r.complete(),m)),!r.closed&&t.subscribe(r)})}(this.transitionAbortSubject.pipe(_i(c=>{throw c}))),ip(()=>{l||u||this.cancelNavigationTransition(a,"",1),this.currentNavigation?.id===a.id&&(this.currentNavigation=null)}),Ur(c=>{if(u=!0,ob(c))this.events.next(new Aa(a.id,this.urlSerializer.serialize(a.extractedUrl),c.message,c.cancellationCode)),function zN(e){return ob(e)&&Vr(e.url)}(c)?this.events.next(new up(c.url)):a.resolve(!1);else{this.events.next(new Qu(a.id,this.urlSerializer.serialize(a.extractedUrl),c,a.targetSnapshot??void 0));try{a.resolve(n.errorHandler(c))}catch(h){a.reject(h)}}return wn}))}))}cancelNavigationTransition(n,s,o){const a=new Aa(n.id,this.urlSerializer.serialize(n.extractedUrl),s,o);this.events.next(a),n.resolve(!1)}}return(e=t).\u0275fac=function(n){return new(n||e)},e.\u0275prov=ze({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();function yb(e){return e!==Ta}let Cb=(()=>{var e;class t{buildTitle(n){let s,o=n.root;for(;void 0!==o;)s=this.getResolvedTitleForRoute(o)??s,o=o.children.find(a=>a.outlet===ot);return s}getResolvedTitleForRoute(n){return n.data[Da]}}return(e=t).\u0275fac=function(n){return new(n||e)},e.\u0275prov=ze({token:e,factory:function(){return Ie(Y3)},providedIn:"root"}),t})(),Y3=(()=>{var e;class t extends Cb{constructor(n){super(),this.title=n}updateTitle(n){const s=this.buildTitle(n);void 0!==s&&this.title.setTitle(s)}}return(e=t).\u0275fac=function(n){return new(n||e)(He(EC))},e.\u0275prov=ze({token:e,factory:e.\u0275fac,providedIn:"root"}),t})(),V3=(()=>{var e;class t{}return(e=t).\u0275fac=function(n){return new(n||e)},e.\u0275prov=ze({token:e,factory:function(){return Ie(X3)},providedIn:"root"}),t})();class H3{shouldDetach(t){return!1}store(t,r){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,r){return t.routeConfig===r.routeConfig}}let X3=(()=>{var e;class t extends H3{}return(e=t).\u0275fac=function(){let r;return function(s){return(r||(r=function sg(e){return Un(()=>{const t=e.prototype.constructor,r=t[Yn]||ch(t),n=Object.prototype;let s=Object.getPrototypeOf(e.prototype).constructor;for(;s&&s!==n;){const o=s[Yn]||ch(s);if(o&&o!==r)return o;s=Object.getPrototypeOf(s)}return o=>new o})}(e)))(s||e)}}(),e.\u0275prov=ze({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();const ac=new Ye("",{providedIn:"root",factory:()=>({})});let z3=(()=>{var e;class t{}return(e=t).\u0275fac=function(n){return new(n||e)},e.\u0275prov=ze({token:e,factory:function(){return Ie(G3)},providedIn:"root"}),t})(),G3=(()=>{var e;class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,s){return n}}return(e=t).\u0275fac=function(n){return new(n||e)},e.\u0275prov=ze({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();var Fa=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(Fa||{});function bb(e,t){e.events.pipe(Er(r=>r instanceof Zr||r instanceof Aa||r instanceof Qu||r instanceof eo),dt(r=>r instanceof Zr||r instanceof eo?Fa.COMPLETE:r instanceof Aa&&(0===r.code||1===r.code)?Fa.REDIRECTING:Fa.FAILED),Er(r=>r!==Fa.REDIRECTING),Ks(1)).subscribe(()=>{t()})}function $3(e){throw e}function J3(e,t,r){return t.parse("/")}const W3={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},K3={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let an=(()=>{var e;class t{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Ie(ey),this.isNgZoneEnabled=!1,this._events=new Pt,this.options=Ie(ac,{optional:!0})||{},this.pendingTasks=Ie(ty),this.errorHandler=this.options.errorHandler||$3,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||J3,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Ie(z3),this.routeReuseStrategy=Ie(V3),this.titleStrategy=Ie(Cb),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Ie(oo,{optional:!0})?.flat()??[],this.navigationTransitions=Ie(oc),this.urlSerializer=Ie(Ma),this.location=Ie(Mf),this.componentInputBindingEnabled=!!Ie(tc,{optional:!0}),this.eventsSubscription=new A,this.isNgZoneEnabled=Ie(At)instanceof At&&At.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Qs,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=QC(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(s=>{try{const{currentTransition:o}=this.navigationTransitions;if(null===o)return void(Eb(s)&&this._events.next(s));if(s instanceof qu)yb(o.source)&&(this.browserUrlTree=o.extractedUrl);else if(s instanceof eo)this.rawUrlTree=o.rawUrl;else if(s instanceof JC){if("eager"===this.urlUpdateStrategy){if(!o.extras.skipLocationChange){const a=this.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl);this.setBrowserUrl(a,o)}this.browserUrlTree=o.urlAfterRedirects}}else if(s instanceof lp)this.currentUrlTree=o.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),this.routerState=o.targetRouterState,"deferred"===this.urlUpdateStrategy&&(o.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,o),this.browserUrlTree=o.urlAfterRedirects);else if(s instanceof Aa)0!==s.code&&1!==s.code&&(this.navigated=!0),(3===s.code||2===s.code)&&this.restoreHistory(o);else if(s instanceof up){const a=this.urlHandlingStrategy.merge(s.url,o.currentRawUrl),l={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||yb(o.source)};this.scheduleNavigation(a,Ta,null,l,{resolve:o.resolve,reject:o.reject,promise:o.promise})}s instanceof Qu&&this.restoreHistory(o,!0),s instanceof Zr&&(this.navigated=!0),Eb(s)&&this._events.next(s)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Ta,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const s="popstate"===n.type?"popstate":"hashchange";"popstate"===s&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,s,n.state)},0)}))}navigateToSyncWithBrowser(n,s,o){const a={replaceUrl:!0},l=o?.navigationId?o:null;if(o){const c={...o};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(a.state=c)}const u=this.parseUrl(n);this.scheduleNavigation(u,s,l,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(_p),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,s={}){const{relativeTo:o,queryParams:a,fragment:l,queryParamsHandling:u,preserveFragment:c}=s,h=c?this.currentUrlTree.fragment:l;let y,g=null;switch(u){case"merge":g={...this.currentUrlTree.queryParams,...a};break;case"preserve":g=this.currentUrlTree.queryParams;break;default:g=a||null}null!==g&&(g=this.removeEmptyProps(g));try{y=YC(o?o.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||!n[0].startsWith("/"))&&(n=[]),y=this.currentUrlTree.root}return VC(y,n,g,h??null)}navigateByUrl(n,s={skipLocationChange:!1}){const o=Vr(n)?n:this.parseUrl(n),a=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(a,Ta,null,s)}navigate(n,s={skipLocationChange:!1}){return function q3(e){for(let t=0;t<e.length;t++)if(null==e[t])throw new Ze(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,s),s)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let s;try{s=this.urlSerializer.parse(n)}catch(o){s=this.malformedUriErrorHandler(o,this.urlSerializer,n)}return s}isActive(n,s){let o;if(o=!0===s?{...W3}:!1===s?{...K3}:s,Vr(n))return IC(this.currentUrlTree,n,o);const a=this.parseUrl(n);return IC(this.currentUrlTree,a,o)}removeEmptyProps(n){return Object.keys(n).reduce((s,o)=>{const a=n[o];return null!=a&&(s[o]=a),s},{})}scheduleNavigation(n,s,o,a,l){if(this.disposed)return Promise.resolve(!1);let u,c,h;l?(u=l.resolve,c=l.reject,h=l.promise):h=new Promise((y,E)=>{u=y,c=E});const g=this.pendingTasks.add();return bb(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(g))}),this.navigationTransitions.handleNavigationRequest({source:s,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:n,extras:a,resolve:u,reject:c,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(y=>Promise.reject(y))}setBrowserUrl(n,s){const o=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(o)||s.extras.replaceUrl){const l={...s.extras.state,...this.generateNgRouterState(s.id,this.browserPageId)};this.location.replaceState(o,"",l)}else{const a={...s.extras.state,...this.generateNgRouterState(s.id,this.browserPageId+1)};this.location.go(o,"",a)}}restoreHistory(n,s=!1){if("computed"===this.canceledNavigationResolution){const a=this.currentPageId-this.browserPageId;0!==a?this.location.historyGo(a):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===a&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(s&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,s){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:s}:{navigationId:n}}}return(e=t).\u0275fac=function(n){return new(n||e)},e.\u0275prov=ze({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();function Eb(e){return!(e instanceof lp||e instanceof up)}class Pb{}let tR=(()=>{var e;class t{constructor(n,s,o,a,l){this.router=n,this.injector=o,this.preloadingStrategy=a,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Er(n=>n instanceof Zr),Za(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,s){const o=[];for(const a of s){a.providers&&!a._injector&&(a._injector=Hd(a.providers,n,`Route: ${a.path}`));const l=a._injector??n,u=a._loadedInjector??l;(a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent)&&o.push(this.preloadConfig(l,a)),(a.children||a._loadedRoutes)&&o.push(this.processRoutes(u,a.children??a._loadedRoutes))}return li(o).pipe(Qr())}preloadConfig(n,s){return this.preloadingStrategy.preload(s,()=>{let o;o=s.loadChildren&&void 0===s.canLoad?this.loader.loadChildren(n,s):qe(null);const a=o.pipe(ai(l=>null===l?qe(void 0):(s._loadedRoutes=l.routes,s._loadedInjector=l.injector,this.processRoutes(l.injector??n,l.routes))));return s.loadComponent&&!s._loadedComponent?li([a,this.loader.loadComponent(s)]).pipe(Qr()):a})}}return(e=t).\u0275fac=function(n){return new(n||e)(He(an),He(iy),He(Qi),He(Pb),He(bp))},e.\u0275prov=ze({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();const Pp=new Ye("");let Zb=(()=>{var e;class t{constructor(n,s,o,a,l={}){this.urlSerializer=n,this.transitions=s,this.viewportScroller=o,this.zone=a,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof qu?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Zr?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof eo&&0===n.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof WC&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,s){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new WC(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,s))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return(e=t).\u0275fac=function(n){!function Xm(){throw new Error("invalid")}()},e.\u0275prov=ze({token:e,factory:e.\u0275fac}),t})();function nr(e,t){return{\u0275kind:e,\u0275providers:t}}function wb(){const e=Ie(en);return t=>{const r=e.get($s);if(t!==r.components[0])return;const n=e.get(an),s=e.get(Mb);1===e.get(Zp)&&n.initialNavigation(),e.get(Sb,null,ut.Optional)?.setUpPreloading(),e.get(Pp,null,ut.Optional)?.init(),n.resetRootComponentType(r.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}const Mb=new Ye("",{factory:()=>new Pt}),Zp=new Ye("",{providedIn:"root",factory:()=>1}),Sb=new Ye("");function sR(e){return nr(0,[{provide:Sb,useExisting:tR},{provide:Pb,useExisting:e}])}const Ob=new Ye("ROUTER_FORROOT_GUARD"),aR=[Mf,{provide:Ma,useClass:np},an,Ia,{provide:io,useFactory:function Db(e){return e.routerState.root},deps:[an]},bp,[]];function lR(){return new uy("Router",an)}let xb=(()=>{var e;class t{constructor(n){}static forRoot(n,s){return{ngModule:t,providers:[aR,[],{provide:oo,multi:!0,useValue:n},{provide:Ob,useFactory:dR,deps:[[an,new Dl,new wl]]},{provide:ac,useValue:s||{}},s?.useHash?{provide:Fr,useClass:dT}:{provide:Fr,useClass:Fy},{provide:Pp,useFactory:()=>{const e=Ie(NA),t=Ie(At),r=Ie(ac),n=Ie(oc),s=Ie(Ma);return r.scrollOffset&&e.setOffset(r.scrollOffset),new Zb(s,n,e,t,r)}},s?.preloadingStrategy?sR(s.preloadingStrategy).\u0275providers:[],{provide:uy,multi:!0,useFactory:lR},s?.initialNavigation?fR(s):[],s?.bindToComponentInputs?nr(8,[nb,{provide:tc,useExisting:nb}]).\u0275providers:[],[{provide:Tb,useFactory:wb},{provide:gf,multi:!0,useExisting:Tb}]]}}static forChild(n){return{ngModule:t,providers:[{provide:oo,multi:!0,useValue:n}]}}}return(e=t).\u0275fac=function(n){return new(n||e)(He(Ob,8))},e.\u0275mod=Mr({type:e}),e.\u0275inj=ur({}),t})();function dR(e){return"guarded"}function fR(e){return["disabled"===e.initialNavigation?nr(3,[{provide:af,multi:!0,useFactory:()=>{const t=Ie(an);return()=>{t.setUpLocationChangeListener()}}},{provide:Zp,useValue:2}]).\u0275providers:[],"enabledBlocking"===e.initialNavigation?nr(2,[{provide:Zp,useValue:0},{provide:af,multi:!0,deps:[en],useFactory:t=>{const r=t.get(cT,Promise.resolve());return()=>r.then(()=>new Promise(n=>{const s=t.get(an),o=t.get(Mb);bb(s,()=>{n(!0)}),t.get(oc).afterPreactivation=()=>(n(!0),o.closed?qe(void 0):o),s.initialNavigation()}))}}]).\u0275providers:[]]}const Tb=new Ye("");var D=$(917),le=$(658),Y=$(222),d=$(695);D.Z.XML={cleanWhitespace:function(e){for(var t=e.firstChild;d.Z.exists(t);)3!==t.nodeType||/\S/.test(t.nodeValue)?1===t.nodeType&&this.cleanWhitespace(t):e.removeChild(t),t=t.nextSibling},parse:function(e){var r;return r=(new("function"==typeof DOMParser||"object"==typeof DOMParser?DOMParser:function(){this.parseFromString=function(s){var o;return"function"==typeof ActiveXObject&&(o=new ActiveXObject("MSXML.DomDocument")).loadXML(s),o}})).parseFromString(e,"text/xml"),this.cleanWhitespace(r),r}};var gR=$(131),q=($(819),$(515));q.Z.ProbFuncs={MAXNUM:17014118346046923e22,SQRTH:.7071067811865476,SQRT2:1.4142135623730951,MAXLOG:708.3964185322641,P:[2.461969814735305e-10,.5641895648310689,7.463210564422699,48.63719709856814,196.5208329560771,526.4451949954773,934.5285271719576,1027.5518868951572,557.5353353693994],Q:[13.228195115474499,86.70721408859897,354.9377788878199,975.7085017432055,1823.9091668790973,2246.3376081871097,1656.6630919416134,557.5353408177277],R:[.5641895835477551,1.275366707599781,5.019050422511805,6.160210979930536,7.4097426995044895,2.9788666537210022],S:[2.2605286322011726,9.396035249380015,12.048953980809666,17.08144507475659,9.608968090632859,3.369076451000815],T:[9.604973739870516,90.02601972038427,2232.005345946843,7003.325141128051,55592.30130103949],U:[33.56171416475031,521.3579497801527,4594.323829709801,22629.000061389095,49267.39426086359],M:128,MINV:.0078125,expx2:function(e,t){var r,n,s,o;return e=Math.abs(e),t<0&&(e=-e),r=(s=this.MINV*Math.floor(this.M*e+.5))*s,n=2*s*(o=e-s)+o*o,t<0&&(r=-r,n=-n),r+n>this.MAXLOG?1/0:r=Math.exp(r)*Math.exp(n)},polevl:function(e,t,r){var n,s;if(d.Z.exists(t.reduce))return t.reduce(function(o,a){return o*e+a},0);for(s=0,n=0;s<=r;s++)n=n*e+t[s];return n},p1evl:function(e,t,r){var n,s;if(d.Z.exists(t.reduce))return t.reduce(function(o,a){return o*e+a},1);for(s=0,n=1;s<r;s++)n=n*e+t[s];return n},ndtr:function(e){var t,r,n;return t=e*this.SQRTH,(n=Math.abs(t))<1?r=.5+.5*this.erf(t):(r=.5*this.erfce(n),n=this.expx2(e,-1),r*=Math.sqrt(n),t>0&&(r=1-r)),r},_underflow:function(e){return console.log("erfc","UNDERFLOW"),e<0?2:0},erfc:function(e){var t,r,n,s,o;return(n=e<0?-e:e)<1?1-this.erf(e):(o=-e*e)<-this.MAXLOG?this._underflow(e):(o=this.expx2(e,-1),n<8?(t=this.polevl(n,this.P,8),r=this.p1evl(n,this.Q,8)):(t=this.polevl(n,this.R,5),r=this.p1evl(n,this.S,6)),s=o*t/r,e<0&&(s=2-s),0===s?this._underflow(e):s)},erfce:function(e){var t,r;return e<8?(t=this.polevl(e,this.P,8),r=this.p1evl(e,this.Q,8)):(t=this.polevl(e,this.R,5),r=this.p1evl(e,this.S,6)),t/r},erf:function(e){var r;return Math.abs(e)>1?1-this.erfc(e):e*this.polevl(r=e*e,this.T,4)/this.p1evl(r,this.U,5)},s2pi:2.5066282746310007,P0:[-59.96335010141079,98.00107541859997,-56.67628574690703,13.931260938727968,-1.2391658386738125],Q0:[1.9544885833814176,4.676279128988815,86.36024213908905,-225.46268785411937,200.26021238006066,-82.03722561683334,15.90562251262117,-1.1833162112133],P1:[4.0554489230596245,31.525109459989388,57.16281922464213,44.08050738932008,14.684956192885803,2.1866330685079025,-.1402560791713545,-.03504246268278482,-.0008574567851546854],Q1:[15.779988325646675,45.39076351288792,41.3172038254672,15.04253856929075,2.504649462083094,-.14218292285478779,-.03808064076915783,-.0009332594808954574],P2:[3.2377489177694603,6.915228890689842,3.9388102529247444,1.3330346081580755,.20148538954917908,.012371663481782003,.00030158155350823543,26580697468673755e-22,6.239745391849833e-9],Q2:[6.02427039364742,3.6798356385616087,1.3770209948908132,.21623699359449663,.013420400608854318,.00032801446468212774,28924786474538068e-22,6.790194080099813e-9],ndtri:function(e){var t,r,n,s,l;return e<=0?-1/0:e>=1?1/0:(l=1,(r=e)>.8646647167633873&&(r=1-r,l=0),r>.1353352832366127?(t=(r-=.5)+r*((s=r*r)*this.polevl(s,this.P0,4)/this.p1evl(s,this.Q0,8)),t*=this.s2pi):(n=1/(t=Math.sqrt(-2*Math.log(r))),t=t-Math.log(t)/t-(t<8?n*this.polevl(n,this.P1,8)/this.p1evl(n,this.Q1,8):n*this.polevl(n,this.P2,8)/this.p1evl(n,this.Q2,8)),0!==l&&(t=-t),t))},erfi:function(e){return this.ndtri(.5*(e+1))*this.SQRTH}};var lc=$(492);q.Z.Extrapolate={upper:15,infty:1e4,wynnEps:function(e,t,r){var l,u,c,h,g;if(r[t]=e,0===t)g=e;else{for(c=0,l=t;l>0;l--)u=c,h=r[l]-(c=r[l-1]),r[l-1]=Math.abs(h)<=1e-15?1e20:1*u+1/h;g=r[t%2]}return g},aitken:function(e,t,r){var n,a,l,u,c,h;if(r[t]=e,t<2)n=e;else{for(u=t/2,c=1;c<=u;c++)a=r[2+(h=t-2*c)]-2*r[h+1]+r[h],Math.abs(a)<1e-15?r[h]=1e20:r[h]-=(l=r[h]-r[h+1])*l/a;n=r[t%2]}return n},brezinski:function(e,t,r){var n,a,l,u,c,h,g,y;if(r[t]=e,t<3)n=e;else{for(h=t/3,y=t,g=1;g<=h;g++)a=(c=r[3+(y-=3)]-r[y+2])*((u=r[y+2]-r[y+1])-(l=r[y+1]-r[y]))-l*(c-u),r[y]=Math.abs(a)<1e-15?1e20:r[y+1]-l*u*(c-u)/a;n=r[t%3]}return n},iteration:function(e,t,r,n,s){var o,a,l,u=NaN,g=[],y="finite",E=t;for(s=s||0,o=1;o<=this.upper;o++){if(a=r(e+(E=0===s?t/(o+1):.5*E),!0),l=this[n](a,o-1,g),isNaN(l)){y="NaN";break}if(0!==a&&l/a>this.infty){u=l,y="infinite";break}if(Math.abs(l-u)<1e-7)break;u=l}return[u,y,1-(o-1)/this.upper]},levin:function(e,t,r,n,s,o){var u,c,h,g;if(g=1/(n+t),s[t]=e/r,o[t]=1/r,t>0&&(s[t-1]=s[t]-s[t-1],o[t-1]=o[t]-o[t-1],t>1))for(h=(n+t-1)*g,u=2;u<=t;u++)c=(n+t-u)*Math.pow(h,u-2)*g,s[t-u]=s[t-u+1]-c*s[t-u],o[t-u]=o[t-u+1]-c*o[t-u],g*=h;return Math.abs(o[0])<1e-15?1e20:s[0]/o[0]},iteration_levin:function(e,t,r,n){var s,o,a,u,c,h,l=NaN,w=[],T=[],N="finite",L=t,R="u";for(n=n||0,u=r(e+t,!0),s=1;s<=this.upper;s++){if(c=(o=r(e+(L=0===n?t/(s+1):.5*L),!0))-u,R=Math.abs(c)<1?"u":"t",u=o,h=(a=this.levin(o,s-1,"u"===R?(1+s)*c:c,1,w,T))-l,isNaN(a)){N="NaN";break}if(0!==o&&a/o>this.infty){l=a,N="infinite";break}if(Math.abs(h)<1e-7)break;l=a}return[l,N,1-(s-1)/this.upper]},limit:function(e,t,r){return this.iteration_levin(e,t,r,0)}};const uc=q.Z.Extrapolate;q.Z.Quadtree=function(e){this.capacity=10,this.points=[],this.xlb=e[0],this.xub=e[2],this.ylb=e[3],this.yub=e[1],this.northWest=null,this.northEast=null,this.southEast=null,this.southWest=null},d.Z.extend(q.Z.Quadtree.prototype,{contains:function(e,t){return this.xlb<e&&e<=this.xub&&this.ylb<t&&t<=this.yub},insert:function(e){return!(!this.contains(e.usrCoords[1],e.usrCoords[2])||(this.points.length<this.capacity?(this.points.push(e),0):(null===this.northWest&&this.subdivide(),!(this.northWest.insert(e)||this.northEast.insert(e)||this.southEast.insert(e)||this.southWest.insert(e)))))},subdivide:function(){var e,t=this.points.length,r=this.xlb+(this.xub-this.xlb)/2,n=this.ylb+(this.yub-this.ylb)/2;for(this.northWest=new q.Z.Quadtree([this.xlb,this.yub,r,n]),this.northEast=new q.Z.Quadtree([r,this.yub,this.xub,n]),this.southEast=new q.Z.Quadtree([this.xlb,n,r,this.ylb]),this.southWest=new q.Z.Quadtree([r,n,this.xub,this.ylb]),e=0;e<t;e+=1)this.northWest.insert(this.points[e]),this.northEast.insert(this.points[e]),this.southEast.insert(this.points[e]),this.southWest.insert(this.points[e])},_query:function(e,t){var r;if(this.contains(e,t)){if(null===this.northWest)return this;if((r=this.northWest._query(e,t))||(r=this.northEast._query(e,t))||(r=this.southEast._query(e,t))||(r=this.southWest._query(e,t)))return r}return!1},query:function(e,t){var r,n;return d.Z.exists(t)?(r=e,n=t):(r=e.usrCoords[1],n=e.usrCoords[2]),this._query(r,n)}});const mR=q.Z.Quadtree;var Qe=$(514);D.Z.Math.Nlp={arr:function(e){return new Float64Array(e)},arr2:function(e,t){for(var r=0,n=new Array(e);r<e;)n[r]=this.arr(t),r++;return n},arraycopy:function(e,t,r,n,s){for(var o=0;o<s;)r[o+n]=e[o+t],o++},lastNumberOfEvaluations:0,GetLastNumberOfEvaluations:function(){return this.lastNumberOfEvaluations},Normal:0,MaxIterationsReached:1,DivergingRoundingErrors:2,FindMinimum:function(e,t,r,n,s,o,a,l,u){var h,c=r+2,g=this.arr(t+1),y=this;return this.lastNumberOfEvaluations=0,u&&console.log("Experimental feature 'testForRoundingErrors' is activated."),g[0]=0,this.arraycopy(n,0,g,1,t),h=this.cobylb(function(w,T,N,L){var H,V,R=y.arr(w);return y.lastNumberOfEvaluations=y.lastNumberOfEvaluations+1,y.arraycopy(N,1,R,0,w),H=y.arr(T),V=e(w,T,R,H),y.arraycopy(H,0,L,1,T),V},t,r,c,g,s,o,a,l,u),this.arraycopy(g,1,n,0,t),h},cobylb:function(e,t,r,n,s,o,a,l,u,c){var L,De,Ee,de,Ft,Oe,oi,Ot,Ce,ke,st,Ve,ve,vt,Fe,Kt,at,ni,Gt,Ti,rr,co,sr,or,xp,Tp,ar,Dr,Xr,h=-1,T=0,N=0,R=t+1,H=r+1,V=o,U=0,Q=!1,oe=!1,te=0,ne=0,ce=0,he=this.arr(1+n),ye=this.arr2(1+t,1+R),be=this.arr2(1+t,1+t),re=this.arr2(1+n,1+R),We=this.arr2(1+t,1+H),Te=this.arr(1+t),Re=this.arr(1+t),lt=this.arr(1+t),Ge=this.arr(1+t),Bt=this.arr(1+t);for(l>=2&&console.log("The initial value of RHO is "+V+" and PARMU is set to zero."),Ot=0,Oe=1/V,De=1;De<=t;++De)ye[De][R]=s[De],ye[De][De]=V,be[De][De]=Oe;Ce=R,ke=!1;e:for(;;){if(Ot>=u&&Ot>0){h=this.MaxIterationsReached;break e}for(++Ot,T=e(t,r,s,he),N=0,de=1;de<=r;++de)N=Math.max(N,-he[de]);if((Ot===l-1||3===l)&&this.PrintIterationResult(Ot,T,N,s,t,l),he[H]=T,he[n]=N,st=!0,!ke){for(st=!1,De=1;De<=n;++De)re[De][Ce]=he[De];if(Ot<=R){if(Ce<=t)if(re[H][R]<=T)s[Ce]=ye[Ce][R];else{for(ye[Ce][R]=s[Ce],de=1;de<=n;++de)re[de][Ce]=re[de][R],re[de][R]=he[de];for(de=1;de<=Ce;++de){for(ye[Ce][de]=-V,Oe=0,De=de;De<=Ce;++De)Oe-=be[De][de];be[Ce][de]=Oe}}if(Ot<=t){s[Ce=Ot]+=V;continue e}}ke=!0}t:for(;;){i:do{if(!st){for(Ve=re[H][R]+U*re[n][R],ve=R,Ee=1;Ee<=t;++Ee)(Oe=re[H][Ee]+U*re[n][Ee])<Ve?(ve=Ee,Ve=Oe):Oe===Ve&&0===U&&re[n][Ee]<re[n][ve]&&(ve=Ee);if(ve<=t){for(De=1;De<=n;++De)Oe=re[De][R],re[De][R]=re[De][ve],re[De][ve]=Oe;for(De=1;De<=t;++De){for(Oe=ye[De][ve],ye[De][ve]=0,ye[De][R]+=Oe,oi=0,de=1;de<=t;++de)ye[De][de]-=Oe,oi-=be[de][De];be[ve][De]=oi}}if(vt=0,c)for(De=1;De<=t;++De)for(Ee=1;Ee<=t;++Ee)Oe=this.DOT_PRODUCT_ROW_COL(be,De,ye,Ee,1,t)-(De===Ee?1:0),vt=Math.max(vt,Math.abs(Oe));if(vt>.1){h=this.DivergingRoundingErrors;break e}for(de=1;de<=H;++de){for(he[de]=-re[de][R],Ee=1;Ee<=t;++Ee)Bt[Ee]=re[de][Ee]+he[de];for(De=1;De<=t;++De)We[De][de]=(de===H?-1:1)*this.DOT_PRODUCT_ROW_COL(Bt,-1,be,De,1,t)}for(Q=!0,te=.25*V,Fe=2.1*V,Ee=1;Ee<=t;++Ee){for(Kt=0,at=0,de=1;de<=t;++de)Kt+=be[Ee][de]*be[Ee][de],at+=ye[de][Ee]*ye[de][Ee];Te[Ee]=1/Math.sqrt(Kt),Re[Ee]=Math.sqrt(at),(Te[Ee]<te||Re[Ee]>Fe)&&(Q=!1)}if(!ke&&!Q){for(Ce=0,Oe=Fe,Ee=1;Ee<=t;++Ee)Re[Ee]>Oe&&(Ce=Ee,Oe=Re[Ee]);if(0===Ce)for(Ee=1;Ee<=t;++Ee)Te[Ee]<Oe&&(Ce=Ee,Oe=Te[Ee]);for(Oe=.5*V*Te[Ce],de=1;de<=t;++de)Ge[de]=Oe*be[Ce][de];for(ni=0,Gt=0,L=0,de=1;de<=H;++de)L=this.DOT_PRODUCT_ROW_COL(Ge,-1,We,de,1,t),de<H&&(Oe=re[de][R],ni=Math.max(ni,-L-Oe),Gt=Math.max(Gt,L-Oe));for(Ti=U*(ni-Gt)>2*L?-1:1,Oe=0,De=1;De<=t;++De)Ge[De]=Ti*Ge[De],ye[De][Ce]=Ge[De],Oe+=be[Ce][De]*Ge[De];for(de=1;de<=t;++de)be[Ce][de]/=Oe;for(Ee=1;Ee<=t;++Ee){if(Ee!==Ce)for(Oe=this.DOT_PRODUCT_ROW_COL(be,Ee,Ge,-1,1,t),de=1;de<=t;++de)be[Ee][de]-=Oe*be[Ce][de];s[Ee]=ye[Ee][R]+Ge[Ee]}continue e}if(!(oe=this.trstlp(t,r,We,he,V,Ge))){for(Oe=0,de=1;de<=t;++de)Oe+=Ge[de]*Ge[de];if(Oe<.25*V*V){ke=!0;break i}}for(L=0,rr=0,he[H]=0,de=1;de<=H;++de)L=he[de]-this.DOT_PRODUCT_ROW_COL(Ge,-1,We,de,1,t),de<H&&(rr=Math.max(rr,L));if(U<1.5*(co=(ne=re[n][R]-rr)>0?L/ne:0))for(U=2*co,l>=2&&console.log("Increase in PARMU to "+U),sr=re[H][R]+U*re[n][R],Ee=1;Ee<=t;++Ee)if((Oe=re[H][Ee]+U*re[n][Ee])<sr||Oe===sr&&0===U&&re[n][Ee]<re[n][R])continue t;for(ce=U*ne-L,de=1;de<=t;++de)s[de]=ye[de][R]+Ge[de];ke=!0;continue e}for(st=!1,or=re[H][R]+U*re[n][R]-(T+U*N),0===U&&T===re[H][R]&&(ce=ne,or=re[n][R]-N),xp=or<=0?1:0,Ce=0,Ee=1;Ee<=t;++Ee)(Oe=Math.abs(this.DOT_PRODUCT_ROW_COL(be,Ee,Ge,-1,1,t)))>xp&&(Ce=Ee,xp=Oe),lt[Ee]=Oe*Te[Ee];for(Tp=1.1*V,Ft=0,Ee=1;Ee<=t;++Ee)if(lt[Ee]>=te||lt[Ee]>=Te[Ee]){if(Oe=Re[Ee],or>0){for(Oe=0,de=1;de<=t;++de)Oe+=Math.pow(Ge[de]-ye[de][Ee],2);Oe=Math.sqrt(Oe)}Oe>Tp&&(Ft=Ee,Tp=Oe)}if(Ft>0&&(Ce=Ft),0!==Ce){for(Oe=0,De=1;De<=t;++De)ye[De][Ce]=Ge[De],Oe+=be[Ce][De]*Ge[De];for(de=1;de<=t;++de)be[Ce][de]/=Oe;for(Ee=1;Ee<=t;++Ee)if(Ee!==Ce)for(Oe=this.DOT_PRODUCT_ROW_COL(be,Ee,Ge,-1,1,t),de=1;de<=t;++de)be[Ee][de]-=Oe*be[Ce][de];for(de=1;de<=n;++de)re[de][Ce]=he[de];if(or>0&&or>=.1*ce)continue t}}while(0);if(Q){if(V<=a){h=this.Normal;break e}if(ar=0,Dr=0,(V*=.5)<=1.5*a&&(V=a),U>0){for(Xr=0,de=1;de<=H;++de){for(Dr=ar=re[de][R],De=1;De<=t;++De)ar=Math.min(ar,re[de][De]),Dr=Math.max(Dr,re[de][De]);de<=r&&ar<.5*Dr&&(Oe=Math.max(Dr,0)-ar,Xr=Xr<=0?Oe:Math.min(Xr,Oe))}0===Xr?U=0:Dr-ar<U*Xr&&(U=(Dr-ar)/Xr)}l>=2&&console.log("Reduction in RHO to "+V+"  and PARMU = "+U),2===l&&this.PrintIterationResult(Ot,re[H][R],re[n][R],this.COL(ye,R),t,l)}else ke=!1}}switch(h){case this.Normal:if(l>=1&&console.log("%nNormal return from subroutine COBYLA%n"),oe)return l>=1&&this.PrintIterationResult(Ot,T,N,s,t,l),h;break;case this.MaxIterationsReached:l>=1&&console.log("%nReturn from subroutine COBYLA because the MAXFUN limit has been reached.%n");break;case this.DivergingRoundingErrors:l>=1&&console.log("%nReturn from subroutine COBYLA because rounding errors are becoming damaging.%n")}for(de=1;de<=t;++de)s[de]=ye[de][R];return T=re[H][R],N=re[n][R],l>=1&&this.PrintIterationResult(Ot,T,N,s,t,l),h},trstlp:function(e,t,r,n,s,o){var R,H,V,U,Q,oe,te,ne,ce,he,ye,be,re,We,Te,Re,lt,Ge,Bt,De,Ee,de,Ft,Oe,oi,Ot,Ce,ke,st,Ve,ve,Fe,Kt,a=0,l=0,u=0,c=this.arr2(1+e,1+e),h=this.arr(2+t),g=this.arr(2+t),y=this.arr(1+e),E=this.arr(1+e),w=this.arr(2+t),T=this.arr(2+t),N=t,L=0;for(V=1;V<=e;++V)c[V][V]=1,o[V]=0;if(R=0,H=0,t>=1){for(U=1;U<=t;++U)n[U]>H&&(H=n[U],R=U);for(U=1;U<=t;++U)T[U]=U,g[U]=H-n[U]}Q=!0;do{e:for(;;){(!Q||Q&&0===H)&&(R=N=t+1,T[N]=N,g[N]=0),Q=!1,oe=0,te=0,ne=0,ce=0;t:do{if(he=N===t?H:-this.DOT_PRODUCT_ROW_COL(o,-1,r,N,1,e),0===te||he<oe?(oe=he,l=L,te=3):L>l?(l=L,te=3):--te,0===te)break e;if(ye=0,R<=L){if(R<L){be=T[R],re=g[R],U=R;do{for(Re=T[Te=U+1],Bt=(lt=this.DOT_PRODUCT(this.PART(this.COL(c,U),1,e),this.PART(this.COL(r,Re),1,e)))/(a=Math.sqrt(lt*lt+h[Te]*h[Te])),h[Te]=(Ge=h[Te]/a)*h[U],h[U]=a,V=1;V<=e;++V)a=Ge*c[V][Te]+Bt*c[V][U],c[V][Te]=Ge*c[V][U]-Bt*c[V][Te],c[V][U]=a;T[U]=Re,g[U]=g[Te],U=Te}while(U<L);T[U]=be,g[U]=re}if(--L,N>t)for(a=1/h[L],U=1;U<=e;++U)y[U]=a*c[U][L];else for(a=this.DOT_PRODUCT_ROW_COL(y,-1,c,L+1,1,e),U=1;U<=e;++U)y[U]-=a*c[U][L+1]}else{for(Re=T[R],U=1;U<=e;++U)E[U]=r[U][Re];for(De=0,U=e;U>L;){for(lt=0,Ee=0,V=1;V<=e;++V)lt+=a=c[V][U]*E[V],Ee+=Math.abs(a);if(de=Ee+.1*Math.abs(lt),Ft=Ee+.2*Math.abs(lt),(Ee>=de||de>=Ft)&&(lt=0),0===De)De=lt;else for(Te=U+1,Ge=lt/(a=Math.sqrt(lt*lt+De*De)),Bt=De/a,De=a,V=1;V<=e;++V)a=Ge*c[V][U]+Bt*c[V][Te],c[V][Te]=Ge*c[V][Te]-Bt*c[V][U],c[V][U]=a;--U}if(0===De){ye=-1,U=L;do{for(Oe=0,oi=0,V=1;V<=e;++V)Oe+=a=c[V][U]*E[V],oi+=Math.abs(a);if(de=oi+.1*Math.abs(Oe),Ft=oi+.2*Math.abs(Oe),oi<de&&de<Ft){if((a=Oe/h[U])>0&&T[U]<=t&&(Kt=g[U]/a,(ye<0||Kt<ye)&&(ye=Kt)),U>=2)for(Ot=T[U],V=1;V<=e;++V)E[V]-=a*r[V][Ot];w[U]=a}else w[U]=0}while(--U>0);if(ye<0)break e;for(U=1;U<=L;++U)g[U]=Math.max(0,g[U]-ye*w[U]);if(R<L){be=T[R],re=g[R],U=R;do{for(Ot=T[Te=U+1],Bt=(lt=this.DOT_PRODUCT(this.PART(this.COL(c,U),1,e),this.PART(this.COL(r,Ot),1,e)))/(a=Math.sqrt(lt*lt+h[Te]*h[Te])),h[Te]=(Ge=h[Te]/a)*h[U],h[U]=a,V=1;V<=e;++V)a=Ge*c[V][Te]+Bt*c[V][U],c[V][Te]=Ge*c[V][U]-Bt*c[V][Te],c[V][U]=a;T[U]=Ot,g[U]=g[Te],U=Te}while(U<L);T[U]=be,g[U]=re}if(0===(a=this.DOT_PRODUCT(this.PART(this.COL(c,L),1,e),this.PART(this.COL(r,Re),1,e))))break e;h[L]=a,g[R]=0,g[L]=ye}else h[++L]=De,g[R]=g[L],g[L]=0;if(T[R]=T[L],T[L]=Re,N>t&&Re!==N){for(Bt=(lt=this.DOT_PRODUCT(this.PART(this.COL(c,U=L-1),1,e),this.PART(this.COL(r,Re),1,e)))/(a=Math.sqrt(lt*lt+h[L]*h[L])),h[L]=(Ge=h[L]/a)*h[U],h[U]=a,V=1;V<=e;++V)a=Ge*c[V][L]+Bt*c[V][U],c[V][L]=Ge*c[V][U]-Bt*c[V][L],c[V][U]=a;T[L]=T[U],T[U]=Re,a=g[U],g[U]=g[L],g[L]=a}if(N>t)for(a=1/h[L],U=1;U<=e;++U)y[U]=a*c[U][L];else for(a=(this.DOT_PRODUCT_ROW_COL(y,-1,r,Re=T[L],1,e)-1)/h[L],U=1;U<=e;++U)y[U]-=a*c[U][L]}for(Ce=s*s,st=0,ke=0,V=1;V<=e;++V)Math.abs(o[V])>=1e-6*s&&(Ce-=o[V]*o[V]),st+=o[V]*y[V],ke+=y[V]*y[V];if(Ce<=0)break e;if(a=Math.sqrt(ke*Ce),Math.abs(st)>=1e-6*a&&(a=Math.sqrt(ke*Ce+st*st)),ne=ce=Ce/(a+st),N===t){if(Ft=ne+.2*H,ne>=(de=ne+.1*H)||de>=Ft)break t;ne=Math.min(ne,H)}for(U=1;U<=e;++U)E[U]=o[U]+ne*y[U];if(N===t)for(u=H,H=0,U=1;U<=L;++U)a=n[Re=T[U]]-this.DOT_PRODUCT_ROW_COL(E,-1,r,Re,1,e),H=Math.max(H,a);U=L;do{for(Ve=0,ve=0,V=1;V<=e;++V)Ve+=a=c[V][U]*E[V],ve+=Math.abs(a);if(de=ve+.1*Math.abs(Ve),Ft=ve+.2*Math.abs(Ve),(ve>=de||de>=Ft)&&(Ve=0),w[U]=Ve/h[U],U>=2)for(Re=T[U],V=1;V<=e;++V)E[V]-=w[U]*r[V][Re]}while(U-- >=2);for(N>t&&(w[L]=Math.max(0,w[L])),U=1;U<=e;++U)E[U]=o[U]+ne*y[U];if(N>L)for(U=L+1;U<=N;++U){for(We=H-n[Re=T[U]],Fe=H+Math.abs(n[Re]),V=1;V<=e;++V)We+=a=r[V][Re]*E[V],Fe+=Math.abs(a);de=Fe+.1*Math.abs(We),Ft=Fe+.2*Math.abs(We),(Fe>=de||de>=Ft)&&(We=0),w[U]=We}for(ye=1,R=0,U=1;U<=N;++U)w[U]<0&&(a=g[U]/(g[U]-w[U]))<ye&&(ye=a,R=U);for(a=1-ye,U=1;U<=e;++U)o[U]=a*o[U]+ye*E[U];for(U=1;U<=N;++U)g[U]=Math.max(0,a*g[U]+ye*w[U]);N===t&&(H=u+ye*(H-u))}while(R>0);if(ne===ce)return!0}}while(N===t);return!1},PrintIterationResult:function(e,t,r,n,s,o){o>1&&console.log("NFVALS = "+e+"  F = "+t+"  MAXCV = "+r),o>1&&console.log("X = "+this.PART(n,1,s))},ROW:function(e,t){return e[t].slice()},COL:function(e,t){var r,n=e.length,s=[];for(r=0;r<n;++r)s[r]=e[r][t];return s},PART:function(e,t,r){return e.slice(t,r+1)},FORMAT:function(e){return e.join(",")},DOT_PRODUCT:function(e,t){var r,n=0,s=e.length;for(r=0;r<s;++r)n+=e[r]*t[r];return n},DOT_PRODUCT_ROW_COL:function(e,t,r,n,s,o){var a,l=0;if(-1===t)for(a=s;a<=o;++a)l+=e[a]*r[a][n];else if(-1===n)for(a=s;a<=o;++a)l+=e[t][a]*r[a];else for(a=s;a<=o;++a)l+=e[t][a]*r[a][n];return l}};var ge=$(70),ln=$(706),fe=$(209);q.Z.Plot={checkReal:function(e){var r,n,t=!1,s=e.length;for(r=0;r<s;r++)if(n=e[r].usrCoords,!isNaN(n[1])&&!isNaN(n[2])&&Math.abs(n[0])>q.Z.eps){t=!0;break}return t},updateParametricCurveNaive:function(e,t,r,n){var s,o,a=!1,l=(r-t)/n;for(s=0;s<n;s++)e.points[s].setCoordinates(Y.Z.COORDS_BY_USER,[e.X(o=t+s*l,a),e.Y(o,a)],!1),e.points[s]._t=o,a=!0;return e},isSegmentOutside:function(e,t,r,n,s){return t<0&&n<0||t>s.canvasHeight&&n>s.canvasHeight||e<0&&r<0||e>s.canvasWidth&&r>s.canvasWidth},isDistOK:function(e,t,r,n){return Math.abs(e)<r&&Math.abs(t)<n&&!isNaN(e+t)},isSegmentDefined:function(e,t,r,n){return!(isNaN(e+t)&&isNaN(r+n))},updateParametricCurveOld:function(e,t,r){var n,s,a,l,c,h,g,y,E,w,T,ne,ce,he,ye,re,We,Te,Re,lt,N=!1,L=new ge.Z(Y.Z.COORDS_BY_USER,[0,0],e.board,!1),R=[],H=[],V=[],U=[],Q=!1,oe=0;for(D.Z.deprecated("Curve.updateParametricCurveOld()"),e.board.updateQuality===e.board.BOARD_QUALITY_LOW?(E=15,w=10,T=10):(E=21,w=.7,T=.7),U[0]=r-t,n=1;n<E;n++)U[n]=.5*U[n-1];n=1,R[0]=1,H[0]=0,L.setCoordinates(Y.Z.COORDS_BY_USER,[e.X(s=t,N),e.Y(s,N)],!1),c=L.scrCoords[1],h=L.scrCoords[2],L.setCoordinates(Y.Z.COORDS_BY_USER,[e.X(s=r,N=!0),e.Y(s,N)],!1),V[0]=[a=L.scrCoords[1],l=L.scrCoords[2]],g=1,y=0,e.points=[],e.points[oe++]=new ge.Z(Y.Z.COORDS_BY_SCREEN,[c,h],e.board,!1);do{for(Q=this.isDistOK(a-c,l-h,w,T)||this.isSegmentOutside(c,h,a,l,e.board);y<E&&(!Q||y<6)&&(y<=7||this.isSegmentDefined(c,h,a,l));)R[g]=n,H[g]=y,V[g]=[a,l],g+=1,y++,L.setCoordinates(Y.Z.COORDS_BY_USER,[e.X(s=t+(n=2*n-1)*U[y],N),e.Y(s,N)],!1,!0),Q=this.isDistOK((a=L.scrCoords[1])-c,(l=L.scrCoords[2])-h,w,T)||this.isSegmentOutside(c,h,a,l,e.board);oe>1&&(ye=void 0,re=void 0,We=void 0,void 0,void 0,void 0,re=(he=e.points[oe-1].scrCoords)[1]-(ne=e.points[oe-2].scrCoords)[1],We=he[2]-ne[2],(lt=(Te=(ce=[a,l])[0]-ne[1])*Te+(Re=ce[1]-ne[2])*Re)>=q.Z.eps&&(ye=(re*Te+We*Re)/lt)>0&&(ye<=1?(re-=ye*Te,We-=ye*Re):(re-=Te,We-=Re)),Math.sqrt(re*re+We*We)<.015&&(oe-=1)),e.points[oe]=new ge.Z(Y.Z.COORDS_BY_SCREEN,[a,l],e.board,!1),e.points[oe]._t=s,oe+=1,c=a,h=l,a=V[g-=1][0],l=V[g][1],y=H[g]+1,n=2*R[g]}while(g>0&&oe<5e5);return e.numberPoints=e.points.length,e},_insertPoint_v2:function(e,t,r){var n=!isNaN(this._lastCrds[1]+this._lastCrds[2]),s=!isNaN(t.scrCoords[1]+t.scrCoords[2]),l=500;(!(s=s&&t.scrCoords[1]>-l&&t.scrCoords[2]>-l&&t.scrCoords[1]<e.board.canvasWidth+l&&t.scrCoords[2]<e.board.canvasHeight+l)&&n||s&&(!n||Math.abs(t.scrCoords[1]-this._lastCrds[1])>.7||Math.abs(t.scrCoords[2]-this._lastCrds[2])>.7))&&(t._t=r,e.points.push(t),this._lastCrds=t.copy("scrCoords"))},neighborhood_isNaN_v2:function(e,t){var r,s,o,n=new ge.Z(Y.Z.COORDS_BY_USER,[0,0],e.board,!1);return n.setCoordinates(Y.Z.COORDS_BY_USER,[e.X(s=t+q.Z.eps,!0),e.Y(s,!0)],!1),o=n.usrCoords,!(!(r=isNaN(o[1]+o[2]))&&(s=t-q.Z.eps,n.setCoordinates(Y.Z.COORDS_BY_USER,[e.X(s,!0),e.Y(s,!0)],!1),o=n.usrCoords,r=isNaN(o[1]+o[2]),!r))},_borderCase:function(e,t,r,n,s,o,a,l){var u,c,h,y,T,N,L,g=null,w=!1;if(l<=1){if(c=new ge.Z(Y.Z.COORDS_BY_USER,[0,0],e.board,!1),isNaN(t[1]+t[2])&&!isNaN(n[1]+n[2])&&!this.neighborhood_isNaN_v2(e,s)||isNaN(r[1]+r[2])&&!isNaN(n[1]+n[2])&&!this.neighborhood_isNaN_v2(e,o)||isNaN(n[1]+n[2])&&(!isNaN(t[1]+t[2])||!isNaN(r[1]+r[2]))&&!this.neighborhood_isNaN_v2(e,a))return!1;y=0;do{if(isNaN(t[1]+t[2])&&!isNaN(n[1]+n[2]))T=s,N=a,L=o;else if(isNaN(r[1]+r[2])&&!isNaN(n[1]+n[2]))T=o,N=a,L=s;else if(isNaN(n[1]+n[2])&&!isNaN(r[1]+r[2]))T=a,N=o,L=o+(o-a);else{if(!isNaN(n[1]+n[2])||isNaN(t[1]+t[2]))return!1;T=a,N=s,L=s-(a-s)}c.setCoordinates(Y.Z.COORDS_BY_USER,[e.X(u=.5*(T+N),!0),e.Y(u,!0)],!1),h=c.usrCoords,(w=isNaN(h[1]+h[2]))?T=u:(L=N,N=u),++y}while(w&&y<30);if(y<30&&(g=h.slice(),n=h.slice(),N=u),e.X(N,!0),e.X(L,!0),e.Y(N,!0),e.Y(L,!0),null!==g)return this._insertPoint_v2(e,new ge.Z(Y.Z.COORDS_BY_USER,g,e.board,!1)),!0}return!1},_plotRecursive_v2:function(e,t,r,n,s,o,a){var l,u,c,g,y,h=0,N=new ge.Z(Y.Z.COORDS_BY_USER,[0,0],e.board,!1);if(!(e.numberPoints>65536))return o<this.nanLevel&&this._isUndefined(e,t,r,n,s)||o<this.nanLevel&&this._isOutside(t,r,n,s,e.board)||(N.setCoordinates(Y.Z.COORDS_BY_USER,[e.X(l=.5*(r+s),!0),e.Y(l,!0)],!1),this._borderCase(e,t,n,u=N.scrCoords,r,s,l,o)||(c=this._triangleDists(t,n,u),g=o<this.smoothLevel&&c[3]<a,y=o<this.jumpLevel&&(c[2]>.99*c[0]||c[1]>.99*c[0]||c[0]===1/0||c[1]===1/0||c[2]===1/0),o<this.smoothLevel+2&&c[0]<.5*(c[1]+c[2])&&(h=0,g=!1),--o,y?this._insertPoint_v2(e,new ge.Z(Y.Z.COORDS_BY_SCREEN,[NaN,NaN],e.board,!1),l):o<=h||g?this._insertPoint_v2(e,N,l):(this._plotRecursive_v2(e,t,r,u,l,o,a),isNaN(N.scrCoords[1]+N.scrCoords[2])||this._insertPoint_v2(e,N,l),this._plotRecursive_v2(e,u,l,n,s,o,a)))),this},updateParametricCurve_v2:function(e,t,r){var n,s,o,a,h,g,y,w,T,l=!1,u=new ge.Z(Y.Z.COORDS_BY_USER,[0,0],e.board,!1),c=new ge.Z(Y.Z.COORDS_BY_USER,[0,0],e.board,!1);return e.board.updateQuality===e.board.BOARD_QUALITY_LOW?(h=d.Z.evaluate(e.visProp.recursiondepthlow)||13,g=2,this.smoothLevel=h-6,this.jumpLevel=3):(h=d.Z.evaluate(e.visProp.recursiondepthhigh)||17,g=2,this.smoothLevel=h-9,this.jumpLevel=2),this.nanLevel=h-4,e.points=[],"x"===this.xterm?(y=.3*((w=e.board.getBoundingBox())[2]-w[0]),n=Math.max(t,w[0]-y),s=Math.min(r,w[2]+y)):(n=t,s=r),u.setCoordinates(Y.Z.COORDS_BY_USER,[e.X(n,l),e.Y(n,l)],!1),c.setCoordinates(Y.Z.COORDS_BY_USER,[e.X(s,l=!0),e.Y(s,l)],!1),T=this._findStartPoint(e,u.scrCoords,n,c.scrCoords,s),u.setCoordinates(Y.Z.COORDS_BY_SCREEN,T[0],!1),T=this._findStartPoint(e,c.scrCoords,s,u.scrCoords,n=T[1]),c.setCoordinates(Y.Z.COORDS_BY_SCREEN,T[0],!1),this._visibleArea=[n,s=T[1]],o=u.copy("scrCoords"),a=c.copy("scrCoords"),u._t=n,e.points.push(u),this._lastCrds=u.copy("scrCoords"),this._plotRecursive_v2(e,o,n,a,s,h,g),c._t=s,e.points.push(c),e.numberPoints=e.points.length,e},_insertLimesPoint:function(e,t,r,n,s){var o,a,l;Math.abs(this._lastUsrCrds[1])===1/0&&Math.abs(s.left_x)===1/0||Math.abs(this._lastUsrCrds[2])===1/0&&Math.abs(s.left_y)===1/0||((o=new ge.Z(Y.Z.COORDS_BY_USER,[s.left_x,s.left_y],e.board))._t=r,e.points.push(o),!isNaN(s.left_x)&&!isNaN(s.left_y)&&!isNaN(s.right_x)&&!isNaN(s.right_y)&&(Math.abs(s.left_x-s.right_x)>q.Z.eps||Math.abs(s.left_y-s.right_y)>q.Z.eps)&&((a=new ge.Z(Y.Z.COORDS_BY_SCREEN,t,e.board))._t=r,e.points.push(a)),(l=new ge.Z(Y.Z.COORDS_BY_USER,[s.right_x,s.right_y],e.board))._t=r,e.points.push(l),this._lastScrCrds=l.copy("scrCoords"),this._lastUsrCrds=l.copy("usrCoords"))},_insertPoint:function(e,t,r,n,s){var c,o=!isNaN(this._lastScrCrds[1]+this._lastScrCrds[2]),a=!isNaN(t[1]+t[2]),l=e.board.canvasWidth,u=e.board.canvasHeight,g=500;d.Z.exists(s)?this._insertLimesPoint(e,t,r,n,s):(a=a&&t[1]>-g&&t[2]>-g&&t[1]<l+g&&t[2]<u+g,(o||a)&&(a&&o&&Math.abs(t[1]-this._lastScrCrds[1])<.8&&Math.abs(t[2]-this._lastScrCrds[2])<.8||Math.abs(t[1])===1/0&&Math.abs(this._lastUsrCrds[1])===1/0||Math.abs(t[2])===1/0&&Math.abs(this._lastUsrCrds[2])===1/0||((c=new ge.Z(Y.Z.COORDS_BY_SCREEN,t,e.board))._t=r,e.points.push(c),this._lastScrCrds=c.copy("scrCoords"),this._lastUsrCrds=c.copy("usrCoords"))))},_triangleDists:function(e,t,r){var n;return n=[e[0]*t[0],.5*(e[1]+t[1]),.5*(e[2]+t[2])],[fe.Z.distance(e,t,3),fe.Z.distance(e,r,3),fe.Z.distance(r,t,3),fe.Z.distance(r,n,3)]},_isUndefined:function(e,t,r,n,s){var o,a,l;if(!isNaN(t[1]+t[2])||!isNaN(n[1]+n[2]))return!1;for(l=new ge.Z(Y.Z.COORDS_BY_USER,[0,0],e.board,!1),a=0;a<20;++a)if(o=r+Math.random()*(s-r),l.setCoordinates(Y.Z.COORDS_BY_USER,[e.X(o,!0),e.Y(o,!0)],!1),!isNaN(l.scrCoords[0]+l.scrCoords[1]+l.scrCoords[2]))return!1;return!0},_isOutside:function(e,t,r,n,s){var o=500,a=s.canvasWidth,l=s.canvasHeight;return e[1]<-o&&r[1]<-o||e[2]<-o&&r[2]<-o||e[1]>a+o&&r[1]>a+o||e[2]>l+o&&r[2]>l+o},_isOutsidePoint:function(e,t){var r=500;return e[1]<-r||e[2]<-r||e[1]>t.canvasWidth+r||e[2]>t.canvasHeight+r},_findStartPoint:function(e,t,r,n,s){return[t,r]},_getBorderPos:function(e,t,r,n,s,o,a){var l,u,c,h,w,T;if(u=new ge.Z(Y.Z.COORDS_BY_USER,[0,0],e.board,!1),h=0,isNaN(r[1]+r[2])&&!isNaN(s[1]+s[2]))T=t,w=n;else if(isNaN(a[1]+a[2])&&!isNaN(s[1]+s[2]))T=o,w=n;else if(isNaN(s[1]+s[2])&&!isNaN(a[1]+a[2]))T=n,w=o;else{if(!isNaN(s[1]+s[2])||isNaN(r[1]+r[2]))return!1;T=n,w=t}do{u.setCoordinates(Y.Z.COORDS_BY_USER,[e.X(l=.5*(w+T),!0),e.Y(l,!0)],!1),c=u.usrCoords,isNaN(c[1]+c[2])?T=l:w=l,++h}while(h<30&&Math.abs(w-T)>q.Z.eps);return l},_getCuspPos:function(e,t,r){var n=[e.X(t,!0),e.Y(t,!0)],s=[e.X(r,!0),e.Y(r,!0)];return Qe.Z.fminbr(function(a){var l=[e.X(a,!0),e.Y(a,!0)];return-(Math.sqrt((n[0]-l[0])*(n[0]-l[0])+(n[1]-l[1])*(n[1]-l[1]))+Math.sqrt((s[0]-l[0])*(s[0]-l[0])+(s[1]-l[1])*(s[1]-l[1])))},[t,r],e)},_getJumpPos:function(e,t,r){return Qe.Z.fminbr(function(s){var o=q.Z.eps*q.Z.eps,a=[e.X(s,!0),e.Y(s,!0)],l=[e.X(s+o,!0),e.Y(s+o,!0)];return-Math.abs((l[1]-a[1])/(l[0]-a[0]))},[t,r],e)},_getLimits:function(e,t){var r,s,o,a,l,n=2/(e.maxX()-e.minX());return s=(r=uc.limit(t,-n,e.X))[0],"infinite"===r[1]&&(s=Math.sign(s)*(1/0)),a=(r=uc.limit(t,-n,e.Y))[0],"infinite"===r[1]&&(a=Math.sign(a)*(1/0)),o=(r=uc.limit(t,n,e.X))[0],"infinite"===r[1]&&(o=Math.sign(o)*(1/0)),l=(r=uc.limit(t,n,e.Y))[0],"infinite"===r[1]&&(l=Math.sign(l)*(1/0)),{left_x:s,left_y:a,right_x:o,right_y:l,t}},_getLimes:function(e,t,r,n,s,o,a,l,u){var c;return"border"===l?c=this._getBorderPos(e,t,r,n,s,o,a):"cusp"===l?c=this._getCuspPos(e,t,o):"jump"===l&&(c=this._getJumpPos(e,t,o)),this._getLimits(e,c)},_plotNonRecursive:function(e,t,r,n,s,o){var a,l,u,g,y,T,N,L,R,H,Q,h=null,E=!1,w="",V=[],U=0;for(L=e.board.origin.scrCoords,V[U++]=[t,r,n,s,o,1/0];U>0;){if(t=(Q=V[--U])[0],r=Q[1],n=Q[2],s=Q[3],H=Q[5],E=!1,w="",h=null,e.points.length>65536)return;(R=Q[4])<this.nanLevel&&(this._isUndefined(e,t,r,n,s)||this._isOutside(t,r,n,s,e.board))||(T=e.X(a=.5*(r+s),!0),N=e.Y(a,!0),u=this._triangleDists(t,n,l=[1,L[1]+T*e.board.unitX,L[2]-N*e.board.unitY]),g=isNaN(t[1]+t[2]),y=isNaN(n[1]+n[2]),g&&!y||!g&&y?w="border":u[0]>.66*H||u[0]<this.cusp_threshold*(u[1]+u[2])||u[1]>5*u[2]||u[2]>5*u[1]?w="cusp":(u[2]>this.jump_threshold*u[0]||u[1]>this.jump_threshold*u[0]||u[0]===1/0||u[1]===1/0||u[2]===1/0)&&(w="jump"),E=""===w&&R<this.smoothLevel&&u[3]<this.smooth_threshold,R<this.testLevel&&!E&&(""===w?E=!0:h=this._getLimes(e,r,t,a,l,s,n,w,R)),null!==h?this._insertPoint(e,l=[1,NaN,NaN],a,R,h):R<=0||E?this._insertPoint(e,l,a,R,null):(V[U++]=[l,a,n,s,R-1,u[0]],V[U++]=[t,r,l,a,R-1,u[0]]))}return this},updateParametricCurve_v3:function(e,t,r){var n,s,o,a,h,g,y,E,l=!1,u=new ge.Z(Y.Z.COORDS_BY_USER,[0,0],e.board,!1),c=new ge.Z(Y.Z.COORDS_BY_USER,[0,0],e.board,!1);return h=e.board.updateQuality===e.board.BOARD_QUALITY_LOW?d.Z.evaluate(e.visProp.recursiondepthlow)||14:d.Z.evaluate(e.visProp.recursiondepthhigh)||17,this.smoothLevel=7,this.nanLevel=h-4,this.testLevel=4,this.cusp_threshold=.5,this.jump_threshold=.99,this.smooth_threshold=2,e.points=[],"x"===e.xterm?(g=.3*((y=e.board.getBoundingBox())[2]-y[0]),n=Math.max(t,y[0]-g),s=Math.min(r,y[2]+g)):(n=t,s=r),u.setCoordinates(Y.Z.COORDS_BY_USER,[e.X(n,l),e.Y(n,l)],!1),c.setCoordinates(Y.Z.COORDS_BY_USER,[e.X(s,l=!0),e.Y(s,l)],!1),E=this._findStartPoint(e,u.scrCoords,n,c.scrCoords,s),u.setCoordinates(Y.Z.COORDS_BY_SCREEN,E[0],!1),E=this._findStartPoint(e,c.scrCoords,s,u.scrCoords,n=E[1]),c.setCoordinates(Y.Z.COORDS_BY_SCREEN,E[0],!1),this._visibleArea=[n,s=E[1]],o=u.copy("scrCoords"),a=c.copy("scrCoords"),u._t=n,e.points.push(u),this._lastScrCrds=u.copy("scrCoords"),this._lastUsrCrds=u.copy("usrCoords"),this._plotNonRecursive(e,o,n,a,s,h),c._t=s,e.points.push(c),e.numberPoints=e.points.length,e},_criticalInterval:function(e,t,r){var n,s,o,a,l,u,h,c=!1,g=-1/0,y=!1,E=!1,w=0,T=[],N=[],L=[];for(h=ln.Z.abs(e),(a=ln.Z.median(h))<1e-7?(a=1e-7,y=!0):a*=this.criticalThreshold,n=0;n<t;n++)h[n]>a?(L.push({i:n,v:e[n],group:w}),g=n,c||(c=!0)):c&&n>g+4&&(L.length>0&&T.push(L.slice(0)),L=[],c=!1,w++);for(c&&L.length>1&&T.push(L.slice(0)),y&&0===T.length&&(E=!0),s=0;s<T.length;s++)if(N[s]="point",!((o=T[s].length)<64)){for(u=0,l=Math.sign(T[s][0].v),n=1;n<o;n++)Math.sign(T[s][n].v)!==l&&(u++,l=Math.sign(T[s][n].v));6*u>o&&(N[s]="interval")}return{smooth:E,groups:T,types:N}},Component:function(){this.left_isNaN=!1,this.right_isNaN=!1,this.left_t=null,this.right_t=null,this.t_values=[],this.x_values=[],this.y_values=[],this.len=0},findComponents:function(e,t,r,n){var s,o,l,u,c,g,h=[],y=0,E=0,w=0,T=!1,N=!1;for(l=(r-t)/n,h[y]=new this.Component,g=h[y],s=0,o=t;s<=n;s++,o+=l)u=e.X(o,N),c=e.Y(o,N),isNaN(u)||isNaN(c)?++w>1&&T&&(g.right_isNaN=!0,g.right_t=o-l,g.len=E,T=!1,h[++y]=new this.Component,g=h[y],w=0):(T||(T=!0,E=0,w>0&&(g.left_t=o-l,g.left_isNaN=!0)),w=0,g.t_values[E]=o,g.x_values[E]=u,g.y_values[E]=c,E++),0===s&&(N=!0);return T?g.len=E:h.pop(),h},getPointType:function(e,t,r,n,s,o,a){var l=s[0],u=o[0],c=n.length,h={idx:t,t:r,x:l[t],y:u[t],type:"other"};return t<5?(h.type="borderleft",h.idx=0,h.t=n[0],h.x=l[0],h.y=u[0],h):(t>a-6&&(h.type="borderright",h.idx=c-1,h.t=n[c-1],h.x=l[c-1],h.y=u[c-1]),h)},newtonApprox:function(e,t,r,n,s){var o,a=0;for(o=n;o>0;o--)a=(a+s[o][e])*(t-(o-1)*r)/o;return a+s[0][e]},thiele:function(e,t,r,n,s){var o,a=0;for(o=s;o>1;o--)a=(e-r[n+o])/(t[o][n+1]-t[o-2][n+1]+a);return t[0][n+1]+(e-r[n+1])/(t[1][n+1]+a)},differenceMethodExperiments:function(e,t){var r,n,s,o,L,R,V,U,Q,oe,te,a=e.t_values,l=e.x_values,u=e.y_values,c=[],h=[],g=[],y=[],E=[],w=[],T=[],N=[],H=0,ne=[];for(L=a[1]-a[0],E.push([]),w.push([]),T.push([]),N.push([]),s=u.length,r=0;r<s;r++)E[0][r]=l[r],w[0][r]=u[r],T[0][r]=l[r],N[0][r]=u[r];for(E.push([]),w.push([]),T.push([]),N.push([]),R=L,s=u.length-1,r=0;r<s;r++)c[r]=l[r+1]-l[r],h[r]=u[r+1]-u[r],g[r]=c[r],y[r]=h[r],E[1][r]=c[r],w[1][r]=h[r],T[1][r]=R/c[r],N[1][r]=R/h[r];for(s--,o=Math.min(8,u.length-1),n=1;n<o;n++){for(E.push([]),w.push([]),T.push([]),N.push([]),R*=L,r=0;r<s;r++)c[r]=c[r+1]-c[r],h[r]=h[r+1]-h[r],E[n+1][r]=c[r],w[n+1][r]=h[r],T[n+1][r]=R/(T[n][r+1]-T[n][r])+T[n-1][r+1],N[n+1][r]=R/(N[n][r+1]-N[n][r])+N[n-1][r+1];if(!1===(te=this._criticalPoints(h,s,n))){console.log("Polynomial of degree",n),te=[];break}if(te.length>0&&++H>1&&n%2==0)break;s--}for(r=0;r<te.length;r++){for(U=-1/0,Q=0;Q<te[r].length;Q++)(oe=Math.abs(te[r][Q].v))>U&&(U=oe,V=Q);V=Math.floor(te[r][V].i+n/2),ne.push(this.getPointType(t,V,a,l,u,g,y,s+1))}return[ne,E,w,T,N]},getCenterOfCriticalInterval:function(e,t,r){var n,s,o,a,h,l=0,u=0,c=r[1]-r[0],g=[];for(n=-1/0,g=[],s=0;s<e.length;s++)(a=Math.abs(e[s].v))>n?(g=[s],n=a,o=s):n===a&&g.push(s);if(g.length>0&&(h=g.reduce(function(y,E){return y+E},0)/g.length,o=Math.floor(h),h+=e[0].i),n<1/0){for(s=0;s<e.length;s++)l+=Math.abs(e[s].v)*e[s].i,u+=Math.abs(e[s].v);h=l/u}return[e[o].i+t/2,h+=t/2,r[Math.floor(h)]+c*(h-Math.floor(h))]},differenceMethod:function(e,t){var r,n,s,o,w,T,N,L,V,a=e.t_values,u=e.y_values,c=[],h=[],g=0,y=-1,E=-1,H=[],U=[];for(s=u.length,c.push(new Float64Array(e.x_values)),h.push(new Float64Array(u)),s--,o=Math.min(12,s),n=0;n<o&&(c.push(new Float64Array(s)),h.push(new Float64Array(s)),c[n+1]=c[n].map(function(Q,oe,te){return te[oe+1]-Q}),h[n+1]=h[n].map(function(Q,oe,te){return te[oe+1]-Q}),!0===(L=this._criticalInterval(h[n+1],s,n)).smooth&&(E=n,H=[]),N=this._criticalInterval(c[n+1],s,n),-1===y&&!0===N.smooth&&(y=n),!(E>=0));n++){if(L.groups.length>0&&++g>2&&(n+1)%2==0){H=L.groups,V=L.types;break}s--}for(r=0;r<H.length;r++)"interval"!==V[r]&&(T=this.getCenterOfCriticalInterval(H[r],n+1,a),w=Math.floor(T[1]),U.push(this.getPointType(t,w,T[2],a,c,h,s+1)));return[U,c,h,y,E]},_insertPoint_v4:function(e,t,r,n){var s,a,l,o=null;e.points.length>0&&(o=e.points[e.points.length-1].scrCoords),s=new ge.Z(Y.Z.COORDS_BY_USER,t,e.board),!(null!==o&&(a=s.scrCoords[1]-o[1],l=s.scrCoords[2]-o[2],a*a+l*l<.8*.8))&&(s._t=r,e.points.push(s))},getInterval:function(e,t,r){var n,o;return lc.Z.disable(),n=lc.Z.Interval(t,r),e.board.mathLib=lc.Z,e.board.mathLibJXG=lc.Z,e.X(n,!0),o=e.Y(n,!0),e.board.mathLib=Math,e.board.mathLibJXG=D.Z.Math,o},sign:function(e){return e<0?-1:e>0?1:0},handleBorder:function(e,t,r,n,s){var a,l,u,h,g,E,w,T,N,L,R,o=r.idx;if(R=t.t_values[1]-t.t_values[0],"borderleft"===r.type?u=(l=a=t.left_isNaN?t.left_t:r.t-R)+R:"borderright"===r.type?l=(u=a=t.right_isNaN?t.right_t:r.t+R)-R:console.log("No bordercase!!!"),0!==(N=this.findComponents(e,l,u,32)).length){for("borderleft"===r.type&&(u=N[0].t_values[0],R=N[0].t_values[1]-N[0].t_values[0],a=l=null===(l=N[0].left_t)?u-R:l,h=this.getInterval(e,l,u),d.Z.isObject(h)&&(E=h.lo,w=h.hi,g=e.X(a,!0),this._insertPoint_v4(e,[1,g,s[1][o]<0?w:E],a))),L=N[0].t_values.length,T=0;T<L;T++)this._insertPoint_v4(e,[1,g=N[0].x_values[T],N[0].y_values[T]],a=N[0].t_values[T]);"borderright"===r.type&&(l=N[0].t_values[L-1],R=N[0].t_values[1]-N[0].t_values[0],a=u=null===(u=N[0].right_t)?l+R:u,h=this.getInterval(e,l,u),d.Z.isObject(h)&&(E=h.lo,w=h.hi,g=e.X(a,!0),this._insertPoint_v4(e,[1,g,s[1][o]>0?w:E],a)))}},_seconditeration_v4:function(e,t,r,n,s){var o,u,c,h,g,y,E,w,T,N,L;for(c=this.findComponents(e,t.t_values[r.idx-2],t.t_values[r.idx+2],64),g=0;g<c.length;g++){for(y=(u=this.differenceMethod(h=c[g],e))[0],w=u[1],T=u[2],N=0,E=0;E<=y.length;E++){for(L=E===y.length?h.len:y[E].idx,o=N;o<L;o++)!isNaN(h.x_values[o])&&!isNaN(h.y_values[o])&&this._insertPoint_v4(e,[1,h.x_values[o],h.y_values[o]],h.t_values[o]);E<y.length&&(this.handleSingularity(e,h,y[E],w,T),N=y[E].idx+1)}L=h.len,g<c.length-1&&this._insertPoint_v4(e,[1,NaN,NaN],h.right_t)}return this},_recurse_v4:function(e,t,r,n,s,o,a,l){var y,E,c=.5*(t+r),h=e.X(c,!0),g=e.Y(c,!0);0!==l?(y=(h-n)*e.board.unitX,E=(g-s)*e.board.unitY,Math.sqrt(y*y+E*E)>2?this._recurse_v4(e,t,c,n,s,h,g,l-1):this._insertPoint_v4(e,[1,h,g],c),y=(h-o)*e.board.unitX,E=(g-a)*e.board.unitY,Math.sqrt(y*y+E*E)>2?this._recurse_v4(e,c,r,h,g,o,a,l-1):this._insertPoint_v4(e,[1,h,g],c)):this._insertPoint_v4(e,[1,NaN,NaN],c)},handleSingularity:function(e,t,r,n,s){var a,c,h,g,y,w,T,N,L,o=r.idx,R=100;a=r.t,console.log("HandleSingularity at t =",a),c=this.getInterval(e,t.t_values[o-5],t.t_values[o+5]),d.Z.isObject(c)?(w=c.lo,T=c.hi):s[0][o-1]<s[0][o+1]?(w=s[0][o-1],T=s[0][o+1]):(w=s[0][o+1],T=s[0][o-1]),y=e.X(a,!0),N=(s[0][o-3]-s[0][o-5])/(t.t_values[o-3]-t.t_values[o-5]),L=(s[0][o+3]-s[0][o+5])/(t.t_values[o+3]-t.t_values[o+5]),console.log(":::",N,L),N<-R?(this._insertPoint_v4(e,[1,y,w],a,!0),L<=R&&this._insertPoint_v4(e,[1,NaN,NaN],a)):N>R?(this._insertPoint_v4(e,[1,y,T],a),L>=-R&&this._insertPoint_v4(e,[1,NaN,NaN],a)):(w===-1/0&&(this._insertPoint_v4(e,[1,y,w],a,!0),this._insertPoint_v4(e,[1,NaN,NaN],a)),T===1/0&&(this._insertPoint_v4(e,[1,NaN,NaN],a),this._insertPoint_v4(e,[1,y,T],a,!0)),r.t<t.t_values[o]?(h=o-1,g=o):(h=o,g=o+1),this._recurse_v4(e,t.t_values[h],t.t_values[g],n[0][h],s[0][h],n[0][g],s[0][g],10)),L<-R?this._insertPoint_v4(e,[1,y,T],a):L>R&&this._insertPoint_v4(e,[1,y,w],a)},steps:1021,criticalThreshold:1e3,plot_v4:function(e,t,r,n){var s,a,l,u,c,h,g,y,E,w,T,N,L,R,Q,ne=(r-t)/n,ce=function(be){return e.Y(be,!0)},he=function(be){return-e.Y(be,!0)},ye=.5*ne;for(l=this.findComponents(e,t,r,n),u=0;u<l.length;u++){for(w=(E=this.differenceMethod(c=l[u],e))[1],T=E[2],(0===(h=E[0]).length||"borderleft"!==h[0].type)&&h.unshift({idx:0,t:c.t_values[0],x:c.x_values[0],y:c.y_values[0],type:"borderleft"}),"borderright"!==h[h.length-1].type&&h.push({idx:(a=c.t_values.length)-1,t:c.t_values[a-1],x:c.x_values[a-1],y:c.y_values[a-1],type:"borderright"}),y=0,g=0;g<=h.length;g++){for(a=g===h.length?c.len:h[g].idx-1,s=y;s<a-2;s++)this._insertPoint_v4(e,[1,c.x_values[s],c.y_values[s]],c.t_values[s]),Math.max(0,s-2),s>=y+3&&s<a-3&&T.length>3&&Math.abs(T[2][s])>.2*Math.abs(T[0][s])&&(ye=.25*ne,Q=this.getInterval(e,N=c.t_values[s],N+ne),d.Z.isObject(Q)?T[2][s]>0?this._insertPoint_v4(e,[1,N+ye,Q.lo],N+ye):this._insertPoint_v4(e,[1,N+ne-ye,Q.hi],N+ne-ye):(L=Qe.Z.fminbr(ce,[N,N+ne]))<(R=Qe.Z.fminbr(he,[N,N+ne]))?(this._insertPoint_v4(e,[1,e.X(L,!0),e.Y(L,!0)],L),this._insertPoint_v4(e,[1,e.X(R,!0),e.Y(R,!0)],R)):(this._insertPoint_v4(e,[1,e.X(R,!0),e.Y(R,!0)],R),this._insertPoint_v4(e,[1,e.X(L,!0),e.Y(L,!0)],L)));g<h.length&&(s=h[g].idx,"borderleft"===h[g].type||"borderright"===h[g].type?this.handleBorder(e,c,h[g],w,T):this._seconditeration_v4(e,c,h[g],w,T),y=h[g].idx+1+1)}a=c.len,u<l.length-1&&this._insertPoint_v4(e,[1,NaN,NaN],c.right_t)}},updateParametricCurve_v4:function(e,t,r){var n,s,o,a;"x"===e.xterm?(o=.3*((a=e.board.getBoundingBox())[2]-a[0]),n=Math.max(t,a[0]-o),s=Math.min(r,a[2]+o)):(n=t,s=r),e.points=[],this.plot_v4(e,n,s,this.steps),e.numberPoints=e.points.length},updateParametricCurve:function(e,t,r){return this.updateParametricCurve_v2(e,t,r)}};const Hr=q.Z.Plot;q.Z.Metapost={MP_ENDPOINT:0,MP_EXPLICIT:1,MP_GIVEN:2,MP_CURL:3,MP_OPEN:4,MP_END_CYCLE:5,UNITY:1,FRACTION_ONE:1,FRACTION_THREE:3,ONE_EIGHTY_DEG:Math.PI,THREE_SIXTY_DEG:2*Math.PI,EPS_SQ:1e-5*1e-5,make_choices:function(e){var t,r,n,s,o,a,l,u,c,h,g,y,E,w,T;l=e[0];do{if(!l)break;a=l.next,l.rtype>this.MP_EXPLICIT&&(l.x-a.x)*(l.x-a.x)+(l.y-a.y)*(l.y-a.y)<this.EPS_SQ&&(l.rtype=this.MP_EXPLICIT,l.ltype===this.MP_OPEN&&(l.ltype=this.MP_CURL,l.set_left_curl(this.UNITY)),a.ltype=this.MP_EXPLICIT,a.rtype===this.MP_OPEN&&(a.rtype=this.MP_CURL,a.set_right_curl(this.UNITY)),l.rx=l.x,a.lx=l.x,l.ry=l.y,a.ly=l.y),l=a}while(l!==e[0]);for(r=e[0];r.ltype===this.MP_OPEN&&r.rtype===this.MP_OPEN;)if((r=r.next)===e[0]){r.ltype=this.MP_END_CYCLE;break}for(l=r;l;){if(a=l.next,l.rtype>=this.MP_GIVEN){for(;a.ltype===this.MP_OPEN&&a.rtype===this.MP_OPEN;)a=a.next;for(n=0,u=l,o=e.length,y=[],E=[],w=[],T=[null];y.push((h=u.next).x-u.x),E.push(h.y-u.y),w.push(this.mp_pyth_add(y[n],E[n])),n>0&&(g=E[n-1]/w[n-1],c=y[n-1]/w[n-1],T.push(Math.atan2(E[n]*c-y[n]*g,y[n]*c+E[n]*g))),n++,(u=h)===a&&(o=n),!(n>=o&&u.ltype!==this.MP_END_CYCLE););T.push(n===o?0:T[1]),a.ltype===this.MP_OPEN&&((s=a.rx-a.x)*s+(t=a.ry-a.y)*t<this.EPS_SQ?(a.ltype=this.MP_CURL,a.set_left_curl(this.UNITY)):(a.ltype=this.MP_GIVEN,a.set_left_given(Math.atan2(t,s)))),l.rtype===this.MP_OPEN&&l.ltype===this.MP_EXPLICIT&&((s=l.x-l.lx)*s+(t=l.y-l.ly)*t<this.EPS_SQ?(l.rtype=this.MP_CURL,l.set_right_curl(this.UNITY)):(l.rtype=this.MP_GIVEN,l.set_right_given(Math.atan2(t,s)))),this.mp_solve_choices(l,a,o,y,E,w,T)}else l.rtype===this.MP_ENDPOINT&&(l.rx=l.x,l.ry=l.y,a.lx=a.x,a.ly=a.y);if((l=a)===r)break}},mp_solve_choices:function(e,t,r,n,s,o,a){var l,u,c,h,g,y,E,w,T,N,L,R,H,V,U,Q,oe,te,ne,ce,he,ye,We,Te;for(g=o.length+1,N=new Array(g),T=new Array(g),c=new Array(g),U=new Array(g),We=0;We<g;We++)U[We]=c[We]=T[We]=N[We]=0;for(E=0,w=e,R=0;;){if(H=w.next,0===E)if(w.rtype===this.MP_GIVEN){if(H.ltype===this.MP_GIVEN)return l=Math.atan2(s[0],n[0]),ce=(ne=this.mp_n_sin_cos(e.right_given()-l))[0],he=ne[1],ye=this.mp_n_sin_cos(t.left_given()-l),void this.mp_set_controls(e,t,n[0],s[0],he,ce,-ye[1],ye[0]);c[0]=w.right_given()-Math.atan2(s[0],n[0]),c[0]=this.reduce_angle(c[0]),N[0]=0,T[0]=0}else if(w.rtype===this.MP_CURL){if(H.ltype===this.MP_CURL)return e.rtype=this.MP_EXPLICIT,t.ltype=this.MP_EXPLICIT,L=Math.abs(t.left_tension()),Q=Math.abs(e.right_tension()),e.rx=e.x+n[0]*(V=this.UNITY/(3*Q)),e.ry=e.y+s[0]*V,t.lx=t.x-n[0]*(V=this.UNITY/(3*L)),void(t.ly=t.y-s[0]*V);te=w.right_curl(),L=Math.abs(H.left_tension()),Q=Math.abs(w.right_tension()),N[0]=this.mp_curl_ratio(te,Q,L),c[0]=-a[1]*N[0],T[0]=0}else w.rtype===this.MP_OPEN&&(N[0]=0,c[0]=0,T[0]=this.FRACTION_ONE);else if(w.ltype===this.MP_END_CYCLE||w.ltype===this.MP_OPEN){if(l=this.UNITY/(3*Math.abs(R.right_tension())-this.UNITY),oe=o[E]*(this.FRACTION_THREE-this.UNITY/Math.abs(R.right_tension())),h=this.UNITY/(3*Math.abs(H.left_tension())-this.UNITY),y=o[E-1]*(this.FRACTION_THREE-this.UNITY/Math.abs(H.left_tension())),oe*=te=this.FRACTION_ONE-N[E-1]*l,(L=Math.abs(w.left_tension()))<(Q=Math.abs(w.right_tension()))?oe*=Math.pow(L/Q,2):L>Q&&(y*=Math.pow(Q/L,2)),N[E]=(V=y/(y+oe))*h,u=-a[E+1]*N[E],R.rtype===this.MP_CURL?(T[E]=0,c[E]=u-a[1]*(this.FRACTION_ONE-V)):(c[E]=(u-=a[E]*(V=(this.FRACTION_ONE-V)/te))-c[E-1]*(V*=l),T[E]=-T[E-1]*V),w.ltype===this.MP_END_CYCLE){for(l=0,h=this.FRACTION_ONE;0==(E-=1)&&(E=r),l=c[E]-l*N[E],h=T[E]-h*N[E],E!==r;);for(U[r]=l/=this.FRACTION_ONE-h,c[0]=l,Te=1;Te<r;Te++)c[Te]=c[Te]+l*T[Te];break}}else{if(w.ltype===this.MP_CURL){te=w.left_curl(),L=Math.abs(w.left_tension()),Q=Math.abs(R.right_tension()),V=this.mp_curl_ratio(te,L,Q),U[r]=-c[r-1]*V/(this.FRACTION_ONE-V*N[r-1]);break}if(w.ltype===this.MP_GIVEN){U[r]=w.left_given()-Math.atan2(s[r-1],n[r-1]),U[r]=this.reduce_angle(U[r]);break}}R=w,w=H,E+=1}for(E=r-1;E>-1;E--)U[E]=c[E]-U[E+1]*N[E];for(w=e,E=0;H=w.next,ce=(ne=this.mp_n_sin_cos(U[E]))[0],he=ne[1],ye=this.mp_n_sin_cos(-a[E+1]-U[E+1]),this.mp_set_controls(w,H,n[E],s[E],he,ce,ye[1],ye[0]),w=H,++E!==r;);},mp_n_sin_cos:function(e){return[Math.cos(e),Math.sin(e)]},mp_set_controls:function(e,t,r,n,s,o,a,l){var u,c,h,g,y;h=Math.abs(t.left_tension()),u=Math.abs(e.right_tension()),y=this.mp_velocity(s,o,a,l,u),c=this.mp_velocity(a,l,s,o,h),(e.right_tension()<0||t.left_tension()<0)&&(s>=0&&a>=0||s<=0&&a<=0)&&(g=Math.abs(s)*l+Math.abs(a)*o)>0&&(g*=1.00024414062,e.right_tension()<0&&this.mp_ab_vs_cd(Math.abs(a),this.FRACTION_ONE,y,g)<0&&(y=Math.abs(a)/g),t.left_tension()<0&&this.mp_ab_vs_cd(Math.abs(s),this.FRACTION_ONE,c,g)<0&&(c=Math.abs(s)/g)),e.rx=e.x+(r*o-n*s)*y,e.ry=e.y+(n*o+r*s)*y,t.lx=t.x-(r*l+n*a)*c,t.ly=t.y-(n*l-r*a)*c,e.rtype=this.MP_EXPLICIT,t.ltype=this.MP_EXPLICIT},mp_pyth_add:function(e,t){return Math.sqrt(e*e+t*t)},mp_curl_ratio:function(e,t,r){var n=1/t,s=1/r;return Math.min(4,((3-n)*n*n*e+s*s*s)/(n*n*n*e+(3-s)*s*s))},mp_ab_vs_cd:function(e,t,r,n){return e*t==r*n?0:e*t>r*n?1:-1},mp_velocity:function(e,t,r,n,s){return Math.min(4,(2+Math.sqrt(2)*(e-r/16)*(r-e/16)*(t-n))/(1.5*s*(2+(Math.sqrt(5)-1)*t+(3-Math.sqrt(5))*n)))},reduce_angle:function(e){return Math.abs(e)>this.ONE_EIGHTY_DEG&&(e>0?e-=this.THREE_SIXTY_DEG:e+=this.THREE_SIXTY_DEG),e},makeknots:function(e,t){var r,n,s=[];for(n=e.length,r=0;r<n;r++)s.push({x:e[r][0],y:e[r][1],ltype:this.MP_OPEN,rtype:this.MP_OPEN,lx:!1,rx:!1,ly:t,ry:t,left_curl:function(){return this.lx||0},right_curl:function(){return this.rx||0},left_tension:function(){return this.ly||1},right_tension:function(){return this.ry||1},set_right_curl:function(o){this.rx=o||0},set_left_curl:function(o){this.lx=o||0}});for(n=s.length,r=0;r<n;r++)s[r].next=s[r+1]||s[r],s[r].set_right_given=s[r].set_right_curl,s[r].set_left_given=s[r].set_left_curl,s[r].right_given=s[r].right_curl,s[r].left_given=s[r].left_curl;return s[n-1].next=s[0],s},curve:function(e,t){var r,n,s,o,a,l,u=!1,c=[],h=[];for(o in a=1,(t=t||{tension:1,direction:{},curl:{},isClosed:!1}).hasOwnProperty("tension")&&(a=d.Z.evaluate(t.tension)),n=(r=this.makeknots(e,a)).length,d.Z.exists(t.isClosed)&&d.Z.evaluate(t.isClosed)&&(u=!0),u||(r[0].ltype=this.MP_ENDPOINT,r[0].rtype=this.MP_CURL,r[n-1].rtype=this.MP_ENDPOINT,r[n-1].ltype=this.MP_CURL),t)if(t.hasOwnProperty(o)){if(s=parseInt(o,10),isNaN(s)||s<0||s>=n)continue;d.Z.exists((l=t[s]).type)&&"curl"===l.type&&(a=d.Z.evaluate(l.curl),0===s?(r[s].rtype=this.MP_CURL,r[s].set_right_curl(a)):s===n-1?(r[s].ltype=this.MP_CURL,r[s].set_left_curl(a)):(r[s].ltype=this.MP_CURL,r[s].rtype=this.MP_CURL,r[s].lx=a,r[s].rx=a)),d.Z.exists(l.direction)&&(a=d.Z.evaluate(l.direction),d.Z.isArray(a)?(!1!==a[0]&&(r[s].lx=a[0]*Math.PI/180,r[s].ltype=this.MP_GIVEN),!1!==a[1]&&(r[s].rx=a[1]*Math.PI/180,r[s].rtype=this.MP_GIVEN)):(r[s].lx=a*Math.PI/180,r[s].rx=a*Math.PI/180,r[s].ltype=r[s].rtype=this.MP_GIVEN)),d.Z.exists(l.tension)&&(a=d.Z.evaluate(l.tension),d.Z.isArray(a)?(!1!==a[0]&&(r[s].ly=d.Z.evaluate(a[0])),!1!==a[1]&&(r[s].ry=d.Z.evaluate(a[1]))):(r[s].ly=a,r[s].ry=a))}for(this.make_choices(r),s=0;s<n-1;s++)c.push(r[s].x),c.push(r[s].rx),c.push(r[s+1].lx),h.push(r[s].y),h.push(r[s].ry),h.push(r[s+1].ly);return c.push(r[n-1].x),h.push(r[n-1].y),u&&(c.push(r[n-1].rx),h.push(r[n-1].ry),c.push(r[0].lx),h.push(r[0].ly),c.push(r[0].x),h.push(r[0].y)),[c,h]}};var Dp=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,3,131,67,195,35,163,99,227,19,147,83,211,51,179,115,243,11,139,75,203,43,171,107,235,27,155,91,219,59,187,123,251,7,135,71,199,39,167,103,231,23,151,87,215,55,183,119,247,15,143,79,207,47,175,111,239,31,159,95,223,63,191,127,255],Ab=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],Ib=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99],Nb=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],ao=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],_R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];D.Z.Util=D.Z.Util||{},D.Z.Util.Unzip=function(e){var t,s,o,a,l=[],h=0,g=[],y=new Array(32768),E=0,w=!1,T=e.length,N=0,R=1,V=new Array(288),U=new Array(32),Q=0,oe=null,he=(new Array(64),new Array(64),0),ye=new Array(17),be=[];function re(){return N<T?e[N++]:-1}function We(){R=1}function Te(){var Ce;try{Ce=1&R,0==(R>>=1)&&(Ce=1&(R=re()),R=R>>1|128)}catch(ke){throw console.log("Probably problems on iOS7 with >>"),ke}return Ce}function Re(Ce){var ke=0,st=Ce;try{for(;st--;)ke=ke<<1|Te();Ce&&(ke=Dp[ke]>>8-Ce)}catch(Ve){throw console.log("Probably problems on iOS7 with >>"),Ve}return ke}function lt(){E=0}function Ge(Ce){y[E++]=Ce,l.push(String.fromCharCode(Ce)),32768===E&&(E=0)}function Bt(){this.b0=0,this.b1=0,this.jump=null,this.jumppos=-1}function De(){for(;;){if(ye[he]>=a)return-1;if(o[ye[he]]===he)return ye[he]++;ye[he]++}}function Ee(){var ke,Ce=oe[Q];if(17===he)return-1;if(Q++,he++,(ke=De())>=0)Ce.b0=ke;else if(Ce.b0=32768,Ee())return-1;if((ke=De())>=0)Ce.b1=ke,Ce.jump=null;else if(Ce.b1=32768,Ce.jump=oe[Q],Ce.jumppos=Q,Ee())return-1;return he--,0}function de(Ce,ke,st,Ve){var ve;for(oe=Ce,Q=0,o=st,a=ke,ve=0;ve<17;ve++)ye[ve]=0;return he=0,Ee()?-1:0}function Ft(Ce){for(var ke,st,vt=0,Fe=Ce[vt];;)if(Te()){if(!(32768&Fe.b1))return Fe.b1;for(Fe=Fe.jump,ke=Ce.length,st=0;st<ke;st++)if(Ce[st]===Fe){vt=st;break}}else{if(!(32768&Fe.b0))return Fe.b0;Fe=Ce[++vt]}}function Oe(){var Ce,st,Ve,ve,vt,Fe,Kt,at,ni,Gt,Ti,rr,sr,ho,Ua;do{if(Ce=Te(),0===(st=Re(2)))for(We(),ni=re(),ni|=re()<<8,Ti=re(),65535&(ni^~(Ti|=re()<<8))&&D.Z.debug("BlockLen checksum mismatch\n");ni--;)Ge(re());else if(1===st)for(;;)if((ve=Dp[Re(7)]>>1)>23?(ve=ve<<1|Te())>199?ve=(ve-=128)<<1|Te():(ve-=48)>143&&(ve+=136):ve+=256,ve<256)Ge(ve);else{if(256===ve)break;for(at=Re(Ib[ve-=257])+Ab[ve],ve=Dp[Re(5)]>>3,ao[ve]>8?(Gt=Re(8),Gt|=Re(ao[ve]-8)<<8):Gt=Re(ao[ve]),Gt+=Nb[ve],ve=0;ve<at;ve++)Ge(y[E-Gt&32767])}else if(2===st){for(Fe=new Array(320),sr=257+Re(5),ho=1+Re(5),Ua=4+Re(4),ve=0;ve<19;ve++)Fe[ve]=0;for(ve=0;ve<Ua;ve++)Fe[_R[ve]]=Re(3);for(at=U.length,Ve=0;Ve<at;Ve++)U[Ve]=new Bt;if(de(U,19,Fe))return lt(),1;for(rr=sr+ho,Ve=0;Ve<rr;)if((ve=Ft(U))<16)Fe[Ve++]=ve;else if(16===ve){if(Ve+(ve=3+Re(2))>rr)return lt(),1;for(vt=Ve?Fe[Ve-1]:0;ve--;)Fe[Ve++]=vt}else{if(Ve+(ve=17===ve?3+Re(3):11+Re(7))>rr)return lt(),1;for(;ve--;)Fe[Ve++]=0}for(at=V.length,Ve=0;Ve<at;Ve++)V[Ve]=new Bt;if(de(V,sr,Fe))return lt(),1;for(at=V.length,Ve=0;Ve<at;Ve++)U[Ve]=new Bt;for(Kt=[],Ve=sr;Ve<Fe.length;Ve++)Kt[Ve-sr]=Fe[Ve];if(de(U,ho,Kt))return lt(),1;for(;;)if((ve=Ft(V))>=256){if(0==(ve-=256))break;for(at=Re(Ib[ve-=1])+Ab[ve],ve=Ft(U),ao[ve]>8?(Gt=Re(8),Gt|=Re(ao[ve]-8)<<8):Gt=Re(ao[ve]),Gt+=Nb[ve];at--;)Ge(y[E-Gt&32767])}else Ge(ve)}}while(!Ce);return lt(),We(),0}function oi(){var Ce,ke,st,Ve,Kt,at=[];try{if(l=[],w=!1,at[0]=re(),at[1]=re(),120===at[0]&&218===at[1]&&(Oe(),g[h]=[l.join(""),"geonext.gxt"],h++),31===at[0]&&139===at[1]&&(Ot(),g[h]=[l.join(""),"file"],h++),80===at[0]&&75===at[1]){if(w=!0,at[2]=re(),at[3]=re(),3===at[2]&&4===at[3]){for(at[0]=re(),at[1]=re(),t=re(),t|=re()<<8,Kt=re(),Kt|=re()<<8,re(),re(),re(),re(),re(),re(),re(),re(),re(),re(),re(),re(),re(),re(),re(),re(),Ve=re(),Ve|=re()<<8,st=re(),st|=re()<<8,Ce=0,be=[];Ve--;)"/"===(ke=re())|":"===ke?Ce=0:Ce<255&&(be[Ce++]=String.fromCharCode(ke));for(s||(s=be),Ce=0;Ce<st;)ke=re(),Ce++;if(8===Kt&&(Oe(),g[h]=new Array(2),g[h][0]=l.join(""),g[h][1]=be.join(""),h++),Ot())return!1}return!0}}catch(ni){throw console.log("Probably problems on iOS7 with >>"),ni}return!1}function Ot(){var ve,vt,Fe=[];if(8&t&&(Fe[0]=re(),Fe[1]=re(),Fe[2]=re(),Fe[3]=re(),80===Fe[0]&&75===Fe[1]&&7===Fe[2]&&8===Fe[3]&&(re(),re(),re(),re()),re(),re(),re(),re(),re(),re(),re(),re()),w&&oi())return!1;if(Fe[0]=re(),8!==Fe[0])return!0;if(t=re(),re(),re(),re(),re(),re(),re(),4&t)for(Fe[0]=re(),Fe[2]=re(),he=Fe[0]+256*Fe[1],ve=0;ve<he;ve++)re();if(8&t)for(ve=0,be=[],vt=re();vt;)("7"===vt||":"===vt)&&(ve=0),ve<255&&(be[ve++]=vt),vt=re();if(16&t)for(vt=re();vt;)vt=re();return 2&t&&(re(),re()),Oe(),re(),re(),re(),re(),re(),re(),re(),re(),w&&oi(),!1}ye[0]=0,D.Z.Util.Unzip.prototype.unzipFile=function(Ce){var ke;for(this.unzip(),ke=0;ke<g.length;ke++)if(g[ke][1]===Ce)return g[ke][0];return""},D.Z.Util.Unzip.prototype.unzip=function(){return oi(),g}};const vR=D.Z.Util;var Lb=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,10,3,3,3,3,3,3,3,3,3,3,3,3,4,3,3,11,6,6,6,5,8,8,8,8,8,8,8,8,8,8,8,0,12,24,36,60,96,84,12,12,12,48,72,12,12,12,12,12,12,12,12,12,12,12,12,12,0,12,12,12,12,12,0,12,0,12,12,12,24,12,12,12,12,12,24,12,24,12,12,12,12,12,12,12,12,12,24,12,12,12,12,12,24,12,12,12,12,12,12,12,24,12,12,12,12,12,12,12,12,12,36,12,36,12,12,12,36,12,12,12,12,12,36,12,36,12,12,12,36,12,12,12,12,12,12,12,12,12,12];D.Z.Util=D.Z.Util||{},D.Z.Util.UTF8={encode:function(e){var t,r,n="",s=e.length;if(e=e.replace(/\r\n/g,"\n"),"function"==typeof unescape&&"function"==typeof encodeURIComponent)return unescape(encodeURIComponent(e));for(t=0;t<s;t++)(r=e.charCodeAt(t))<128?n+=String.fromCharCode(r):r>127&&r<2048?(n+=String.fromCharCode(r>>6|192),n+=String.fromCharCode(63&r|128)):(n+=String.fromCharCode(r>>12|224),n+=String.fromCharCode(r>>6&63|128),n+=String.fromCharCode(63&r|128));return n},decode:function(e){var t,r,n,s=0,o=0,a=0,l=[],u=e.length,c=[];for(t=0;t<u;t++)r=e.charCodeAt(t),n=Lb[r],o=0!==a?63&r|o<<6:255>>n&r,0===(a=Lb[256+a+n])&&(o>65535?l.push(55232+(o>>10),56320+(1023&o)):l.push(o),++s%1e4==0&&(c.push(String.fromCharCode.apply(null,l)),l=[]));return c.push(String.fromCharCode.apply(null,l)),c.join("")},asciiCharCodeAt:function(e,t){var r=e.charCodeAt(t);if(r>255)switch(r){case 8364:r=128;break;case 8218:r=130;break;case 402:r=131;break;case 8222:r=132;break;case 8230:r=133;break;case 8224:r=134;break;case 8225:r=135;break;case 710:r=136;break;case 8240:r=137;break;case 352:r=138;break;case 8249:r=139;break;case 338:r=140;break;case 381:r=142;break;case 8216:r=145;break;case 8217:r=146;break;case 8220:r=147;break;case 8221:r=148;break;case 8226:r=149;break;case 8211:r=150;break;case 8212:r=151;break;case 732:r=152;break;case 8482:r=153;break;case 353:r=154;break;case 8250:r=155;break;case 339:r=156;break;case 382:r=158;break;case 376:r=159}return r}};const Mp=D.Z.Util.UTF8;var jn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";D.Z.Util=D.Z.Util||{},D.Z.Util.Base64={_getByte:function(e,t){return 255&e.charCodeAt(t)},_getIndex:function(e,t){return jn.indexOf(e.charAt(t))},encode:function(e){var t,r,n,s,o,a=[];for(s=(n=(o=Mp.encode(e)).length)%3,t=0;t<n-s;t+=3)r=this._getByte(o,t)<<16|this._getByte(o,t+1)<<8|this._getByte(o,t+2),a.push(jn.charAt(r>>18),jn.charAt(r>>12&63),jn.charAt(r>>6&63),jn.charAt(63&r));switch(s){case 1:r=this._getByte(o,n-1),a.push(jn.charAt(r>>2),jn.charAt(r<<4&63),"=","=");break;case 2:r=this._getByte(o,n-2)<<8|this._getByte(o,n-1),a.push(jn.charAt(r>>10),jn.charAt(r>>4&63),jn.charAt(r<<2&63),"=")}return a.join("")},decode:function(e,t){var r,n,s,o,a,l,u=[],c=[];if((s=(r=e.replace(/[^A-Za-z0-9+/=]/g,"")).length)%4!=0)throw new Error("JSXGraph/utils/base64: Can't decode string (invalid input length).");for("="===r.charAt(s-1)&&(o=1,"="===r.charAt(s-2)&&(o=2),s-=4),n=0;n<s;n+=4)a=this._getIndex(r,n)<<18|this._getIndex(r,n+1)<<12|this._getIndex(r,n+2)<<6|this._getIndex(r,n+3),c.push(a>>16,a>>8&255,255&a),n%1e4==0&&(u.push(String.fromCharCode.apply(null,c)),c=[]);switch(o){case 1:a=this._getIndex(r,s)<<12|this._getIndex(r,s+1)<<6|this._getIndex(r,s+2),c.push(a>>10,a>>2&255);break;case 2:a=this._getIndex(r,n)<<6|this._getIndex(r,n+1),c.push(a>>4)}return u.push(String.fromCharCode.apply(null,c)),l=u.join(""),t&&(l=Mp.decode(l)),l},decodeAsArray:function(e){var t,r=this.decode(e),n=[],s=r.length;for(t=0;t<s;t++)n[t]=r.charCodeAt(t);return n}};const cc=D.Z.Util.Base64;D.Z.Server={modules:{},runningCalls:{},handleError:function(e){D.Z.debug("error occured, server says: "+e.message)},callServer:function(e,t,r,n){var s,o,a,u,c,h,g;for(h in n=n||!1,r)r.hasOwnProperty(h)&&(escape(h),escape(r[h]));c=d.Z.toJSON(r);do{u=e+Math.floor(4096*Math.random())}while(d.Z.exists(this.runningCalls[u]));return this.runningCalls[u]={action:e},d.Z.exists(r.module)&&(this.runningCalls[u].module=r.module),s=D.Z.serverBase+"JXGServer.py",o="action="+escape(e)+"&id="+u+"&dataJSON="+escape(cc.encode(c)),this.cbp=function(g){var y,E,w,T,N,L,R,H;if(y=new vR.Unzip(cc.decodeAsArray(g)).unzip(),d.Z.isArray(y)&&y.length>0&&(y=y[0][0]),d.Z.exists(y))if("error"===(E=window.JSON&&window.JSON.parse?window.JSON.parse(y):new Function("return "+y)()).type)this.handleError(E);else if("response"===E.type){for(L=E.id,R=0;R<E.fields.length;R++)T=(w=E.fields[R]).namespace+("object"==typeof new Function("return "+w.namespace)()?".":".prototype.")+w.name+" = "+w.value,new Function(T)();for(R=0;R<E.handler.length;R++){for(w=E.handler[R],N=[],H=0;H<w.parameters.length;H++)N[H]='"'+w.parameters[H]+'": '+w.parameters[H];T="if(typeof JXG.Server.modules."+this.runningCalls[L].module+' == "undefined")JXG.Server.modules.'+this.runningCalls[L].module+" = {};",T+="JXG.Server.modules."+this.runningCalls[L].module+"."+w.name+"_cb = "+w.callback+";",T+="JXG.Server.modules."+this.runningCalls[L].module+"."+w.name+" = function ("+w.parameters.join(",")+', __JXGSERVER_CB__, __JXGSERVER_SYNC) {if(typeof __JXGSERVER_CB__ == "undefined") __JXGSERVER_CB__ = JXG.Server.modules.'+this.runningCalls[L].module+"."+w.name+"_cb;var __JXGSERVER_PAR__ = {"+N.join(",")+', "module": "'+this.runningCalls[L].module+'", "handler": "'+w.name+'" };JXG.Server.callServer("exec", __JXGSERVER_CB__, __JXGSERVER_PAR__, __JXGSERVER_SYNC);};',new Function(T)()}delete this.runningCalls[L],t(E.data)}},this.cb=D.Z.bind(this.cbp,this),window.XMLHttpRequest?(a=new XMLHttpRequest).overrideMimeType("text/plain; charset=iso-8859-1"):a=new ActiveXObject("Microsoft.XMLHTTP"),!(!a||(a.open("POST",s,!n),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n||(a.onreadystatechange=(g=this.cb,function(){return 4===a.readyState&&200===a.status&&(g(a.responseText),!0)})),a.send(o),!n)||(this.cb(a.responseText),0))},loadModule_cb:function(e){var t;for(t=0;t<e.length;t++)D.Z.debug(e[t].name+": "+e[t].value)},loadModule:function(e){return D.Z.Server.callServer("load",D.Z.Server.loadModule_cb,{module:e},!0)}},D.Z.Server.load=D.Z.Server.loadModule;const hc=D.Z.Server;var dc;q.Z.Symbolic={generateSymbolicCoordinatesPartial:function(e,t,r,n){var s,o,a,l=t.ancestors,u=0,c=function(h){return"underscore"===n?r+"_{"+h+"}":"brace"===n?r+"["+h+"]":r+h};for(o in e.listOfFreePoints=[],e.listOfDependantPoints=[],l)if(l.hasOwnProperty(o)&&(s=0,d.Z.isPoint(l[o]))){for(a in l[o].ancestors)l[o].ancestors.hasOwnProperty(a)&&s++;0===s?(l[o].symbolic.x=l[o].coords.usrCoords[1],l[o].symbolic.y=l[o].coords.usrCoords[2],e.listOfFreePoints.push(l[o])):(l[o].symbolic.x=c(u+=1),l[o].symbolic.y=c(u+=1),e.listOfDependantPoints.push(l[o]))}return d.Z.isPoint(t)&&(t.symbolic.x="x",t.symbolic.y="y"),u},clearSymbolicCoordinates:function(e){var t=function(r){var n,s=r&&r.length||0;for(n=0;n<s;n++)d.Z.isPoint(r[n])&&(r[n].symbolic.x="",r[n].symbolic.y="")};t(e.listOfFreePoints),t(e.listOfDependantPoints),delete e.listOfFreePoints,delete e.listOfDependantPoints},generatePolynomials:function(e,t,r){var n,s,o,l,a=t.ancestors,u=[],c=[];for(n in r&&this.generateSymbolicCoordinatesPartial(e,t,"u","brace"),a[t.id]=t,a)if(a.hasOwnProperty(n)&&(l=0,u=[],d.Z.isPoint(a[n]))){for(s in a[n].ancestors)a[n].ancestors.hasOwnProperty(s)&&l++;if(l>0)for(u=a[n].generatePolynomial(),o=0;o<u.length;o++)c.push(u[o])}return r&&this.clearSymbolicCoordinates(e),c},geometricLocusByGroebnerBase:function(e,t){var n,s,o,a,l,u,c,h,g,y,E,w,T=e.options.locus,N={},L=this.generateSymbolicCoordinatesPartial(e,t,"u","brace"),R=new ge.Z(Y.Z.COORDS_BY_USR,[0,0],e),H=new ge.Z(Y.Z.COORDS_BY_USR,[e.canvasWidth,e.canvasHeight],e),V=1,U=0,Q=0,oe=0;if(hc.modules.geoloci===dc&&hc.loadModule("geoloci"),hc.modules.geoloci===dc)throw new Error("JSXGraph: Unable to load JXG.Server module 'geoloci.py'.");if(u=R.usrCoords[1],c=H.usrCoords[1],h=H.usrCoords[2],g=R.usrCoords[2],T.translateToOrigin&&e.listOfFreePoints.length>0){for(U=(o=T.toOrigin!==dc&&null!==T.toOrigin&&d.Z.isInArray(e.listOfFreePoints,T.toOrigin.id)?T.toOrigin:e.listOfFreePoints[0]).symbolic.x,Q=o.symbolic.y,l=0;l<e.listOfFreePoints.length;l++)e.listOfFreePoints[l].symbolic.x-=U,e.listOfFreePoints[l].symbolic.y-=Q;if(u-=U,c-=U,h-=Q,g-=Q,T.translateTo10&&e.listOfFreePoints.length>1){for(a=T.to10!==dc&&null!==T.to10&&T.to10.id!==T.toOrigin.id&&d.Z.isInArray(e.listOfFreePoints,T.to10.id)?T.to10:e.listOfFreePoints[0].id===o.id?e.listOfFreePoints[1]:e.listOfFreePoints[0],oe=fe.Z.rad([1,0],[0,0],[a.symbolic.x,a.symbolic.y]),y=Math.cos(-oe),E=Math.sin(-oe),l=0;l<e.listOfFreePoints.length;l++)w=e.listOfFreePoints[l].symbolic.x,e.listOfFreePoints[l].symbolic.x=y*e.listOfFreePoints[l].symbolic.x-E*e.listOfFreePoints[l].symbolic.y,e.listOfFreePoints[l].symbolic.y=E*w+y*e.listOfFreePoints[l].symbolic.y;if(a.symbolic.y=0,w=u,u=y*u-E*h,h=E*w+y*h,w=c,c=y*c-E*g,g=E*w+y*g,T.stretch&&Math.abs(a.symbolic.x)>q.Z.eps){for(V=a.symbolic.x,l=0;l<e.listOfFreePoints.length;l++)e.listOfFreePoints[l].symbolic.x/=V,e.listOfFreePoints[l].symbolic.y/=V;for(l=0;l<e.objectsList.length;l++)e.objectsList[l].elementClass===Y.Z.OBJECT_CLASS_CIRCLE&&"pointRadius"===e.objectsList[l].method&&(N[l]=e.objectsList[l].radius,e.objectsList[l].radius/=V);u/=V,c/=V,h/=V,g/=V,a.symbolic.x=1}}for(l=0;l<e.listOfFreePoints.length;l++)w=e.listOfFreePoints[l].symbolic.x,Math.abs(w)<q.Z.eps&&(e.listOfFreePoints[l].symbolic.x=0),Math.abs(w-Math.round(w))<q.Z.eps&&(e.listOfFreePoints[l].symbolic.x=Math.round(w)),w=e.listOfFreePoints[l].symbolic.y,Math.abs(w)<q.Z.eps&&(e.listOfFreePoints[l].symbolic.y=0),Math.abs(w-Math.round(w))<q.Z.eps&&(e.listOfFreePoints[l].symbolic.y=Math.round(w))}for(l in n=this.generatePolynomials(e,t).join(","),this.cbp=function(te){s=te},this.cb=d.Z.bind(this.cbp,this),hc.modules.geoloci.lociCoCoA(u,c,h,g,L,n,V,oe,U,Q,this.cb,!0),this.clearSymbolicCoordinates(e),N)N.hasOwnProperty(l)&&(e.objects[l].radius=N[l]);return s}};const kb=q.Z.Symbolic;q.Z.Clip={_isSeparator:function(e){return isNaN(e.coords.usrCoords[1])&&isNaN(e.coords.usrCoords[2])},makeDoublyLinkedList:function(e){var t,r=null,n=[],s=e.length;if(s>0)for(t=0;t<s;t++)this._isSeparator(e[t])?(e[t]._next=e[(t+1)%s],e[t]._prev=e[(s+t-1)%s]):(null===r&&n.push(r=t),this._isSeparator(e[(t+1)%s])||t===s-1?(e[t]._next=e[r],e[r]._prev=e[t],e[t]._end=!0,r=null):(e[t]._next=e[(t+1)%s],e[r]._prev=e[t]),this._isSeparator(e[(s+t-1)%s])||(e[t]._prev=e[(s+t-1)%s]));return n},Vertex:function(e,t,r,n,s,o){this.pos=t,this.intersection=!0,this.coords=e,this.elementClass=Y.Z.OBJECT_CLASS_POINT,this.data={alpha:r,path:n,pathname:s,done:!1,type:o,idx:0},this.neighbour=null,this.entry_exit=!1},_addToList:function(e,t,r){var n=e.length,s=q.Z.eps*q.Z.eps;n>0&&Math.abs(e[n-1].coords.usrCoords[0]-t.usrCoords[0])<s&&Math.abs(e[n-1].coords.usrCoords[1]-t.usrCoords[1])<s&&Math.abs(e[n-1].coords.usrCoords[2]-t.usrCoords[2])<s||e.push({pos:r,intersection:!1,coords:t,elementClass:Y.Z.OBJECT_CLASS_POINT})},sortIntersections:function(e){var t,r,n,s,o,a,l=[],u=e.length;for(t=0;t<u;t++)if(e[t].sort(function(c,h){return c.data.alpha>h.data.alpha?1:-1}),e[t].length>0){for(o=e[t].length-1,a=(s=(n=e[t][0]).data.path[n.pos])._next,t===u-1&&(s._end=!1),0===n.data.alpha&&"T"===n.data.type?(s.intersection=!0,s.data=n.data,s.neighbour=n.neighbour,s.neighbour.neighbour=s,s.entry_exit=!1,e[t][0]=s):(n._prev=s,n._prev._next=n),r=1;r<=o;r++)(n=e[t][r])._prev=e[t][r-1],n._prev._next=n;(n=e[t][o])._next=a,n._next._prev=n,t===u-1&&(n._end=!0),l=l.concat(e[t])}return l},_inbetween:function(e,t,r){var n,s=q.Z.eps*q.Z.eps,o=r[1]-t[1],a=r[2]-t[2],l=e[1]-t[1],u=e[2]-t[2];return 0===o&&0===a&&0===l&&0===u||(n=Math.abs(l)<s&&Math.abs(o)<s?u/a:l/o,Math.abs(n)<s&&(n=0),n)},_print_array:function(e){var t,r;for(t=0;t<e.length;t++)try{r="",e[t]._end&&(r=" end"),console.log(t,e[t].coords.usrCoords,e[t].data.type,"\t","prev",e[t]._prev.coords.usrCoords,"next",e[t]._next.coords.usrCoords+r)}catch{console.log(t,e[t].coords.usrCoords)}},_print_list:function(e){for(var t=0;t<100&&(console.log("\t",e.coords.usrCoords,"\n\t\tis:",e.intersection,"end:",e._end,e.data?e.data.alpha:"-","\n\t\t-:",e._prev.coords.usrCoords,"\n\t\t+:",e._next.coords.usrCoords,"\n\t\tn:",e.intersection?e.neighbour.coords.usrCoords:"-"),!e._end);)e=e._next,t++},_noOverlap:function(e,t,r,n){var s,a,l,u,c,o=Math.sqrt(q.Z.eps),h=!1;for(s=0;s<3;s++)if(a=Math.min(e[s],t[s]),l=Math.max(e[s],t[s]),u=Math.min(r[s],n[s]),c=Math.max(r[s],n[s]),l<u-o||a>c+o){h=!0;break}return h},findIntersections:function(e,t,r){var o,a,l,h,g,y,E,w,T,N,L,R,H,n=[],s=100*q.Z.eps,u=e.length,c=t.length,V=[],Q=[],oe=[],te=!1,ne=!1;for(a=0;a<c;a++)oe.push([]);for(o=0;o<u;o++)if(Q.push([]),this._isSeparator(e[o])||this._isSeparator(e[(o+1)%u]))te=!0;else{if(te&&o===u-1)break;for(h=e[o].coords.usrCoords,g=e[(o+1)%u].coords.usrCoords,a=0;a<c;a++)if(this._isSeparator(t[a])||this._isSeparator(t[(a+1)%c]))ne=!0;else{if(ne&&a===c-1)break;if(!this._noOverlap(h,g,y=t[a].coords.usrCoords,E=t[(a+1)%c].coords.usrCoords)&&(n=fe.Z.meetSegmentSegment(h,g,y,E),w=fe.Z.distance(h,g,3),T=fe.Z.distance(y,E,3),n[1]*w>-s&&n[1]<1-s/w&&n[2]*T>-s&&n[2]<1-s/T||n[1]===1/0&&n[2]===1/0&&q.Z.norm(n[0],3)<s)){if(l=new ge.Z(Y.Z.COORDS_BY_USER,n[0],r),L="X",Math.abs(n[1])*w<s||Math.abs(n[2])*T<s)L="T",Math.abs(n[1])*w<s&&(n[1]=0),Math.abs(n[2])*T<s&&(n[2]=0),l=new ge.Z(Y.Z.COORDS_BY_USER,0===n[1]?h:y,r);else if(n[1]===1/0&&n[2]===1/0&&q.Z.norm(n[0],3)<s){(N=this._inbetween(h,y,E))>=0&&N<1&&(L="T",l=new ge.Z(Y.Z.COORDS_BY_USER,h,r),n[1]=0,n[2]=N,R=new this.Vertex(l,o,n[1],e,"S",L),H=new this.Vertex(l,a,n[2],t,"C",L),R.neighbour=H,H.neighbour=R,Q[o].push(R),oe[a].push(H)),N=this._inbetween(y,h,g),fe.Z.distance(h,y,3)>s&&N>=0&&N<1&&(L="T",l=new ge.Z(Y.Z.COORDS_BY_USER,y,r),n[1]=N,n[2]=0,R=new this.Vertex(l,o,n[1],e,"S",L),H=new this.Vertex(l,a,n[2],t,"C",L),R.neighbour=H,H.neighbour=R,Q[o].push(R),oe[a].push(H));continue}R=new this.Vertex(l,o,n[1],e,"S",L),H=new this.Vertex(l,a,n[2],t,"C",L),R.neighbour=H,H.neighbour=R,Q[o].push(R),oe[a].push(H)}}}for(V=this.sortIntersections(Q),o=0;o<V.length;o++)V[o].data.idx=o,V[o].neighbour.data.idx=o;return[V,this.sortIntersections(oe)]},_getPosition:function(e,t,r,n){var s=fe.Z.det3p(e,t,r),o=fe.Z.det3p(e,r,n);return fe.Z.det3p(t,r,n)>=0?s>=0&&o>=0?"left":"right":s>=0||o>=0?"left":"right"},_classifyDegenerateIntersections:function(e){var t,r,n,s,o,a,l,u,c,h,g,y,E,w;for(c=fe.Z.det3p,l=0,e._tours=0;;){if(e.intersection&&"T"===e.data.type&&(r=e._prev.coords.usrCoords,fe.Z.distance(e.coords.usrCoords,t=e._next.coords.usrCoords,3)<q.Z.eps&&(t=e._next._next.coords.usrCoords),fe.Z.distance(e.coords.usrCoords,r,3)<q.Z.eps&&(r=e._prev._prev.coords.usrCoords),s=(o=e.neighbour)._prev.coords.usrCoords,fe.Z.distance(o.coords.usrCoords,n=o._next.coords.usrCoords,3)<q.Z.eps&&(n=o._next._next.coords.usrCoords),fe.Z.distance(o.coords.usrCoords,s,3)<q.Z.eps&&(s=o._prev._prev.coords.usrCoords),g=c(e.coords.usrCoords,r,s),y=c(e.coords.usrCoords,t,n),E=c(e.coords.usrCoords,r,n),w=c(e.coords.usrCoords,t,s),0===g&&0===y&&0===E&&0===w&&(e.coords.usrCoords[1]*=1+Math.random()*q.Z.eps,e.coords.usrCoords[2]*=1+Math.random()*q.Z.eps,o.coords.usrCoords[1]=e.coords.usrCoords[1],o.coords.usrCoords[2]=e.coords.usrCoords[2],g=c(e.coords.usrCoords,r,s),y=c(e.coords.usrCoords,t,n),E=c(e.coords.usrCoords,r,n),w=c(e.coords.usrCoords,t,s)),h=!1,0===g?fe.Z.affineRatio(e.coords.usrCoords,r,s)<0&&(h=!0):0===y?fe.Z.affineRatio(e.coords.usrCoords,t,n)<0&&(h=!0):0===E?fe.Z.affineRatio(e.coords.usrCoords,r,n)>0&&(h=!0):0===w&&fe.Z.affineRatio(e.coords.usrCoords,t,s)>0&&(h=!0),h&&(u=s,s=n,n=u,u=g,g=E,E=u,u=y,y=w,w=u),d.Z.exists(e.delayedStatus)||(e.delayedStatus=[]),0===g&&0===y?e.delayedStatus=["on","on"]:0===g?(a=this._getPosition(t,s,o.coords.usrCoords,n),e.delayedStatus=["on",a]):0===y?(a=this._getPosition(r,s,o.coords.usrCoords,n),e.delayedStatus=[a,"on"]):0===e.delayedStatus.length&&(e.data.type=this._getPosition(r,s,o.coords.usrCoords,n)!==this._getPosition(t,s,o.coords.usrCoords,n)?"X":"B")),d.Z.exists(e._tours)&&e._tours++,e._tours>3||e._end||l>1e3){l>1e3&&console.log("Clipping: _classifyDegenerateIntersections exit"),d.Z.exists(e._tours)&&delete e._tours;break}e.intersection&&l++,e=e._next}},_handleIntersectionChains:function(e){for(var n,t=0,r="Null",o=!1,a=!1;!0===e.intersection&&("T"===e.data.type&&("on"!==e.delayedStatus[0]&&"on"===e.delayedStatus[1]?(o=!0,n=e,r=e.delayedStatus[0]):o&&"on"===e.delayedStatus[0]&&"on"===e.delayedStatus[1]?e.data.type="B":o&&"on"===e.delayedStatus[0]&&"on"!==e.delayedStatus[1]&&(o=!1,r===e.delayedStatus[1]?(n.data.type="DB",e.data.type="DB"):(n.data.type="DX",e.data.type="DX"))),t++),e._end&&(a=!0),!a||o;){if(t>1e3){console.log("Warning: _handleIntersectionChains: intersection chain reached maximum numbers of iterations");break}e=e._next}},_handleFullyDegenerateCase:function(e,t,r){var n,s,o,a,l,u,c,h,g,y,E,w,T,N,L,R=[e,t];for(o=0;o<2;o++){for(E=(n=R[o]).length,g=0,L=!0;g<E;g++)if(!n[g].intersection){L=!1;break}if(L)for(w=(s=R[(o+1)%2]).length,g=0;g<E;g++){for(a=[.5*((u=n[g].coords.usrCoords)[0]+(c=n[g]._next.coords.usrCoords)[0]),.5*(u[1]+c[1]),.5*(u[2]+c[2])],y=0,T=!1;y<w;y++)if(Math.abs(fe.Z.det3p(s[y].coords.usrCoords,s[(y+1)%w].coords.usrCoords,a))<q.Z.eps){T=!0;break}if(!T){l=new ge.Z(Y.Z.COORDS_BY_USER,a,r),N=n[g]._next,n[g]._next=h={pos:g,intersection:!1,coords:l,elementClass:Y.Z.OBJECT_CLASS_POINT},h._prev=n[g],h._next=N,N._prev=h,n[g]._end&&(n[g]._end=!1,h._end=!0);break}}}},_getStatus:function(e,t){for(;e.intersection&&!e._end;)e=e._next;return[e,0===fe.Z.windingNumber(e.coords.usrCoords,t)?"entry":"exit"]},markEntryExit:function(e,t,r){var n,s,o,a,l,u,c,g=null,y=0;for(u=r.length,l=0;l<u;l++)for(this._classifyDegenerateIntersections(e[c=r[l]]),this._handleIntersectionChains(e[c]),n=(a=this._getStatus(e[c],t))[1],(s=a[0])._starter=!0,o=0,g=null,y=0;!0===s.intersection&&("X"===s.data.type&&1===y&&(g.entry_exit=n,"exit"===n&&(g.data.type="X"),y=2),("X"===s.data.type||"DB"===s.data.type)&&(s.entry_exit=n,n="entry"===n?"exit":"entry"),"DX"===s.data.type&&(0===y?(g=s,y=1):1===y?(s.entry_exit=n,g.entry_exit=n,"exit"===n?g.data.type="X":s.data.type="X",n="entry"===n?"exit":"entry",g=null,y=0):2===y&&(s.entry_exit=n,s.data.type="X",n="entry"===n?"exit":"entry",g=null,y=0))),!(d.Z.exists((s=s._next)._starter)||o>1e4);)o++},_stayOnPath:function(e,t){var r=!0;return e.intersection&&"B"!==e.data.type&&(r=t===e.entry_exit),r},_addVertex:function(e,t,r){return!isNaN(t.coords.usrCoords[1])&&!isNaN(t.coords.usrCoords[2])&&e.push(t),t.intersection&&t.data.done?(r&&console.log("Add last intersection point",t.coords.usrCoords,"on",t.data.pathname,t.entry_exit,t.data.type),!0):(t.intersection&&(t.data.done=!0,r&&console.log("Add intersection point",t.coords.usrCoords,"on",t.data.pathname,t.entry_exit,t.data.type)),!1)},tracing:function(e,t,r){for(var n,s,o,a,l=0,u=1e4,c=0,h=[],g=!1,y=!1;c<t.length&&l<u;)if((o=t[c]).data.done||"X"!==o.data.type)c++;else{h.length>0&&h.push([NaN,NaN]),a=o.data.idx,n=e,g=this._addVertex(h,o,y),s=o.entry_exit;do{if(g)break;if("intersection"===r&&"entry"===o.entry_exit||"union"===r&&"exit"===o.entry_exit||"difference"===r&&n===e==("exit"===o.entry_exit)){do{if(g=this._addVertex(h,o=o._next,y))break}while(this._stayOnPath(o,s));l++}else{do{if(g=this._addVertex(h,o=o._prev,y))break}while(this._stayOnPath(o,s));l++}if(g)break;if(!o.neighbour)return console.log("Tracing: emergency break - no neighbour!!!!!!!!!!!!!!!!!",l),[[0],[0]];if((o=o.neighbour).data.done)break;o.data.done=!0,s=o.entry_exit,n=o.data.path}while(o.data.idx!==a&&l<u);l>=u&&console.log("Tracing: stopping an infinite loop!",l),c++}return this._getCoordsArrays(h,!1)},isEmptyCase:function(e,t,r){return"intersection"===r&&(0===e.length||0===t.length)||"union"===r&&0===e.length&&0===t.length||"difference"===r&&0===e.length},_getCoordsArrays:function(e,t){var s,r=[],n=[],o=e.length;for(s=0;s<o;s++)e[s].coords?(r.push(e[s].coords.usrCoords[1]),n.push(e[s].coords.usrCoords[2])):(r.push(e[s][0]),n.push(e[s][1]));return t&&o>0&&(e[0].coords?(r.push(e[0].coords.usrCoords[1]),n.push(e[0].coords.usrCoords[2])):(r.push(e[0][0]),n.push(e[0][1]))),[r,n]},handleEmptyIntersection:function(e,t,r){var n,s,o=!1,a=[];if(0===e.length)return this._getCoordsArrays(a="union"===r?t:[],!0);if(0===t.length)return this._getCoordsArrays(a="intersection"===r?[]:e,!0);if(e.length>0)for(n=e[0];n.intersection&&!(n=n._next)._end;);if(t.length>0)for(s=t[0];s.intersection&&!(s=s._next)._end;);return 0===fe.Z.windingNumber(n.coords.usrCoords,t)?0!==fe.Z.windingNumber(s.coords.usrCoords,e)?("union"===r?(a=a.concat(e)).push(e[0]):"difference"===r&&((a=a.concat(e)).push(e[0]),fe.Z.signedPolygon(e)*fe.Z.signedPolygon(t)>0&&a.reverse(),a.push([NaN,NaN])),("difference"===r||"intersection"===r)&&((a=a.concat(t)).push(t[0]),o=!1)):"difference"===r?(a=a.concat(e),o=!0):"union"===r&&((a=a.concat(e)).push(e[0]),a.push([NaN,NaN]),(a=a.concat(t)).push(t[0])):"intersection"===r?(a=a.concat(e),o=!0):"union"===r&&(a=a.concat(t)).push(t[0]),this._getCoordsArrays(a,o)},_countCrossingIntersections:function(e){var t,r=e.length,n=0;for(t=0;t<r;t++)"X"===e[t].data.type&&n++;return n},_getPath:function(e,t){var r,n,s,o,a,l,u,c=[];if(e.elementClass!==Y.Z.OBJECT_CLASS_CURVE||e.type!==Y.Z.OBJECT_TYPE_ARC&&e.type!==Y.Z.OBJECT_TYPE_SECTOR){if(e.elementClass===Y.Z.OBJECT_CLASS_CURVE&&d.Z.exists(e.points))for(n=e.numberPoints,r=0;r<n;r++)this._addToList(c,e.points[r],r);else if(e.type===Y.Z.OBJECT_TYPE_POLYGON)for(r=0;r<e.vertices.length;r++)this._addToList(c,e.vertices[r].coords,r);else if(e.elementClass===Y.Z.OBJECT_CLASS_CIRCLE)for(u=359,s=e.Radius(),o=2*Math.PI/u,r=0;r<=u;r++)this._addToList(c,new ge.Z(Y.Z.COORDS_BY_USER,[e.center.coords.usrCoords[0],e.center.coords.usrCoords[1]+Math.cos(r*o)*s,e.center.coords.usrCoords[2]+Math.sin(r*o)*s],t),r);else if(d.Z.isArray(e))for(n=e.length,r=0;r<n;r++)d.Z.exists(e[r].coords)?this._addToList(c,e[r].coords,r):d.Z.isArray(e[r])?this._addToList(c,new ge.Z(Y.Z.COORDS_BY_USER,e[r],t),r):d.Z.exists(e[r].usrCoords)&&this._addToList(c,e[r],r)}else{for(a=fe.Z.rad(e.radiuspoint,e.center,e.anglepoint),u=Math.floor(180*a/Math.PI),s=e.Radius(),o=a/u,l=Math.atan2(e.radiuspoint.coords.usrCoords[2]-e.center.coords.usrCoords[2],e.radiuspoint.coords.usrCoords[1]-e.center.coords.usrCoords[1]),e.type===Y.Z.OBJECT_TYPE_SECTOR&&this._addToList(c,e.center.coords,0),r=0;r<=u;r++)this._addToList(c,new ge.Z(Y.Z.COORDS_BY_USER,[e.center.coords.usrCoords[0],e.center.coords.usrCoords[1]+Math.cos(r*o+l)*s,e.center.coords.usrCoords[2]+Math.sin(r*o+l)*s],t),r+1);e.type===Y.Z.OBJECT_TYPE_SECTOR&&this._addToList(c,e.center.coords,u+2)}return c},greinerHormann:function(e,t,r,n){var s,u,c,o=[],a=[],l=[];return(s=(o=this._getPath(e,n)).length)>0&&fe.Z.distance(o[0].coords.usrCoords,o[s-1].coords.usrCoords,3)<q.Z.eps&&o.pop(),(s=(a=this._getPath(t,n)).length)>0&&fe.Z.distance(a[0].coords.usrCoords,a[s-1].coords.usrCoords,3)<q.Z.eps*q.Z.eps&&a.pop(),this.isEmptyCase(o,a,r)?[[],[]]:(u=this.makeDoublyLinkedList(o),c=this.makeDoublyLinkedList(a),l=this.findIntersections(o,a,n)[0],this._handleFullyDegenerateCase(o,a,n),this.markEntryExit(o,a,u),this.markEntryExit(a,o,c),0===this._countCrossingIntersections(l)?this.handleEmptyIntersection(o,a,r):this.tracing(o,l,r))},union:function(e,t,r){return this.greinerHormann(e,t,"union",r)},intersection:function(e,t,r){return this.greinerHormann(e,t,"intersection",r)},difference:function(e,t,r){return this.greinerHormann(e,t,"difference",r)}},D.Z.extend(q.Z.Clip,{}),q.Z.Poly={},q.Z.Poly.Ring=function(e){this.vars=e},D.Z.extend(q.Z.Poly.Ring.prototype,{}),q.Z.Poly.Monomial=function(e,t,r){var n;if(!d.Z.exists(e))throw new Error("JSXGraph error: In JXG.Math.Poly.monomial missing parameter 'ring'.");for(d.Z.isArray(r)||(r=[]),n=(r=r.slice(0,e.vars.length)).length;n<e.vars.length;n++)r.push(0);this.ring=e,this.coefficient=t||0,this.exponents=d.Z.deepCopy(r)},D.Z.extend(q.Z.Poly.Monomial.prototype,{copy:function(){return new q.Z.Poly.Monomial(this.ring,this.coefficient,this.exponents)},print:function(){var t,e=[];for(t=0;t<this.ring.vars.length;t++)e.push(this.ring.vars[t]+"^"+this.exponents[t]);return this.coefficient+"*"+e.join("*")}}),q.Z.Poly.Polynomial=function(e,t){var n;if(!d.Z.exists(e))throw new Error("JSXGraph error: In JXG.Math.Poly.polynomial missing parameter 'ring'.");n=d.Z.exists(t)&&d.Z.isString(t)?void 0:[],this.ring=e,this.monomials=n},D.Z.extend(q.Z.Poly.Polynomial.prototype,{findSignature:function(e){var t;for(t=0;t<this.monomials.length;t++)if(d.Z.cmpArrays(this.monomials[t].exponents,e))return t;return-1},addSubMonomial:function(e,t){var r;(r=this.findSignature(e.exponents))>-1?this.monomials[r].coefficient+=t*e.coefficient:(e.coefficient*=t,this.monomials.push(e))},add:function(e){var t;if(!d.Z.exists(e)||e.ring!==this.ring)throw new Error("JSXGraph error: In JXG.Math.Poly.polynomial.add either summand is undefined or rings don't match.");if(d.Z.isArray(e.exponents))this.addSubMonomial(e,1);else for(t=0;t<e.monomials.length;t++)this.addSubMonomial(e.monomials[t],1)},sub:function(e){var t;if(!d.Z.exists(e)||e.ring!==this.ring)throw new Error("JSXGraph error: In JXG.Math.Poly.polynomial.sub either summand is undefined or rings don't match.");if(d.Z.isArray(e.exponents))this.addSubMonomial(e,-1);else for(t=0;t<e.monomials.length;t++)this.addSubMonomial(e.monomials[t],-1)},copy:function(){var e,t;for(t=new q.Z.Poly.Polynomial(this.ring),e=0;e<this.monomials.length;e++)t.monomials.push(this.monomials[e].copy());return t},print:function(){var t,e=[];for(t=0;t<this.monomials.length;t++)e.push("("+this.monomials[t].print()+")");return e.join("+")}}),D.Z.Complex=function(e,t){this.isComplex=!0,e&&e.isComplex&&(t=e.imaginary,e=e.real),this.real=e||0,this.imaginary=t||0,this.absval=0,this.angle=0},D.Z.extend(D.Z.Complex.prototype,{toString:function(){return this.real+" + "+this.imaginary+"i"},add:function(e){return d.Z.isNumber(e)?this.real+=e:(this.real+=e.real,this.imaginary+=e.imaginary),this},sub:function(e){return d.Z.isNumber(e)?this.real-=e:(this.real-=e.real,this.imaginary-=e.imaginary),this},mult:function(e){var t,r;return d.Z.isNumber(e)?(this.real*=e,this.imaginary*=e):(this.real=(t=this.real)*e.real-(r=this.imaginary)*e.imaginary,this.imaginary=t*e.imaginary+r*e.real),this},div:function(e){var t,r,n;if(d.Z.isNumber(e)){if(Math.abs(e)<Math.eps)return this.real=1/0,this.imaginary=1/0,this;this.real/=e,this.imaginary/=e}else{if(Math.abs(e.real)<Math.eps&&Math.abs(e.imaginary)<Math.eps)return this.real=1/0,this.imaginary=1/0,this;this.real=((n=this.real)*e.real+(r=this.imaginary)*e.imaginary)/(t=e.real*e.real+e.imaginary*e.imaginary),this.imaginary=(r*e.real-n*e.imaginary)/t}return this},conj:function(){return this.imaginary*=-1,this}}),D.Z.C={},D.Z.C.add=function(e,t){var r=new D.Z.Complex(e);return r.add(t),r},D.Z.C.sub=function(e,t){var r=new D.Z.Complex(e);return r.sub(t),r},D.Z.C.mult=function(e,t){var r=new D.Z.Complex(e);return r.mult(t),r},D.Z.C.div=function(e,t){var r=new D.Z.Complex(e);return r.div(t),r},D.Z.C.conj=function(e){var t=new D.Z.Complex(e);return t.conj(),t},D.Z.C.abs=function(e){var t=new D.Z.Complex(e);return t.conj(),t.mult(e),Math.sqrt(t.real)},D.Z.Complex.C=D.Z.C;const lo=D.Z.Complex;var Rt=$(982);D.Z.AbstractRenderer=function(){this.vOffsetText=0,this.enhancedRendering=!0,this.container=null,this.type="",this.supportsForeignObject=!1,this.dashArray=[[2,2],[5,5],[10,10],[20,20],[20,10,10,10],[20,5,10,5],[0,5]]},D.Z.extend(D.Z.AbstractRenderer.prototype,{_updateVisual:function(e,t,r){(r||this.enhancedRendering)&&(t=t||{},this.setObjectTransition(e),d.Z.evaluate(e.visProp.draft)?this.setDraft(e):(t.stroke||(e.highlighted?(this.setObjectStrokeColor(e,e.visProp.highlightstrokecolor,e.visProp.highlightstrokeopacity),this.setObjectStrokeWidth(e,e.visProp.highlightstrokewidth)):(this.setObjectStrokeColor(e,e.visProp.strokecolor,e.visProp.strokeopacity),this.setObjectStrokeWidth(e,e.visProp.strokewidth))),t.fill||(e.highlighted?this.setObjectFillColor(e,e.visProp.highlightfillcolor,e.visProp.highlightfillopacity):this.setObjectFillColor(e,e.visProp.fillcolor,e.visProp.fillopacity)),t.dash||this.setDashStyle(e,e.visProp),t.shadow||this.setShadow(e),t.tabindex||this.setTabindex(e)))},_getHighlighted:function(e){var t=!1;return(!d.Z.exists(e.board)||!d.Z.exists(e.board.highlightedObjects))&&(t=!0),!t&&d.Z.exists(e.board.highlightedObjects[e.id])?"highlight":""},drawPoint:function(e){var t,r=Rt.Z.normalizePointFace(d.Z.evaluate(e.visProp.face));e.rendNode=this.appendChildPrim(this.createPrim(t="o"===r?"ellipse":"[]"===r?"rect":"path",e.id),d.Z.evaluate(e.visProp.layer)),this.appendNodesToElement(e,t),this._updateVisual(e,{dash:!0,shadow:!0},!0),this.updatePoint(e)},updatePoint:function(e){var o,t=d.Z.evaluate(e.visProp.size),r=Rt.Z.normalizePointFace(d.Z.evaluate(e.visProp.face)),n=d.Z.evaluate(e.visProp.sizeunit),s=d.Z.evaluate(e.visProp.zoom);isNaN(e.coords.scrCoords[2]+e.coords.scrCoords[1])||("user"===n&&(t*=Math.sqrt(Math.abs(e.board.unitX*e.board.unitY))),o=0==(t*=e.board&&s?Math.sqrt(e.board.zoomX*e.board.zoomY):1)?0:t+1,"o"===r?this.updateEllipsePrim(e.rendNode,e.coords.scrCoords[1],e.coords.scrCoords[2],o,o):"[]"===r?this.updateRectPrim(e.rendNode,e.coords.scrCoords[1]-t,e.coords.scrCoords[2]-t,2*t,2*t):this.updatePathPrim(e.rendNode,this.updatePathStringPoint(e,t,r),e.board),this._updateVisual(e,{dash:!1,shadow:!1}),this.setShadow(e))},changePointStyle:function(e){var t=this.getElementById(e.id);d.Z.exists(t)&&this.remove(t),this.drawPoint(e),d.Z.clearVisPropOld(e),e.visPropCalc.visible||this.display(e,!1),d.Z.evaluate(e.visProp.draft)&&this.setDraft(e)},drawLine:function(e){e.rendNode=this.appendChildPrim(this.createPrim("line",e.id),d.Z.evaluate(e.visProp.layer)),this.appendNodesToElement(e,"lines"),this.updateLine(e)},updateLine:function(e){this._updateVisual(e),this.updatePathWithArrowHeads(e),this.setLineCap(e)},drawCurve:function(e){e.rendNode=this.appendChildPrim(this.createPrim("path",e.id),d.Z.evaluate(e.visProp.layer)),this.appendNodesToElement(e,"path"),this.updateCurve(e)},updateCurve:function(e){this._updateVisual(e),this.updatePathWithArrowHeads(e),this.setLineCap(e)},updatePathWithArrowHeads:function(e,t){var s,o,r=e.visProp,n=t?"highlight":"";s=t&&r.highlightstrokewidth?Math.max(d.Z.evaluate(r.highlightstrokewidth),d.Z.evaluate(r.strokewidth)):d.Z.evaluate(r.strokewidth),o=this.getArrowHeadData(e,s,n),this.makeArrows(e,o),e.elementClass===Y.Z.OBJECT_CLASS_LINE?this.updateLineWithEndings(e,o):e.elementClass===Y.Z.OBJECT_CLASS_CURVE&&this.updatePath(e),this.setArrowSize(e,o)},getArrowHeadData:function(e,t,r){var s,o,y,E,n=q.Z.eps,a=0,l=0,u=0,c=0,h=d.Z.evaluate(e.visProp.firstarrow),g=d.Z.evaluate(e.visProp.lastarrow);return(h||g)&&(s=d.Z.exists(h.type)?d.Z.evaluate(h.type):e.elementClass===Y.Z.OBJECT_CLASS_LINE?1:7,o=d.Z.exists(g.type)?d.Z.evaluate(g.type):e.elementClass===Y.Z.OBJECT_CLASS_LINE?1:7,h&&(E=6,d.Z.exists(h.size)&&(E=d.Z.evaluate(h.size)),""!==r&&d.Z.exists(h[r+"size"])&&(E=d.Z.evaluate(h[r+"size"])),y=t*E,2===s?(y*=.5,n+=t*E):3===s?(y=t*E/3,n+=t):4===s||5===s||6===s?(y=t*E/1.5,n+=t*E):7===s?(y=0,E=10,n+=t):n+=t*E,a+=y,u=E),g&&(E=6,d.Z.exists(g.size)&&(E=d.Z.evaluate(g.size)),""!==r&&d.Z.exists(g[r+"size"])&&(E=d.Z.evaluate(g[r+"size"])),y=t*E,2===o?(y*=.5,n+=t*E):3===o?(y=t*E/3,n+=t):4===o||5===o||6===o?(y=t*E/1.5,n+=t*E):7===o?(y=0,E=10,n+=t):n+=t*E,l+=y,c=E)),e.visPropCalc.typeFirst=s,e.visPropCalc.typeLast=o,{evFirst:h,evLast:g,typeFirst:s,typeLast:o,offFirst:a,offLast:l,sizeFirst:u,sizeLast:c,showFirst:1,showLast:1,minLen:n,strokeWidth:t}},updateLineWithEndings:function(e,t){var r,n,s;return r=new ge.Z(Y.Z.COORDS_BY_USER,e.point1.coords.usrCoords,e.board),n=new ge.Z(Y.Z.COORDS_BY_USER,e.point2.coords.usrCoords,e.board),s=d.Z.evaluate(e.visProp.margin),fe.Z.calcStraight(e,r,n,s),this.handleTouchpoints(e,r,n,t),this.getPositionArrowHead(e,r,n,t),this.updateLinePrim(e.rendNode,r.scrCoords[1],r.scrCoords[2],n.scrCoords[1],n.scrCoords[2],e.board),this},updatePath:function(e){return d.Z.evaluate(e.visProp.handdrawing)?this.updatePathPrim(e.rendNode,this.updatePathStringBezierPrim(e),e.board):this.updatePathPrim(e.rendNode,this.updatePathStringPrim(e),e.board),this},getPositionArrowHead:function(e,t,r,n){var s,o,a,l,u;return(n.evFirst||n.evLast)&&(o=a=l=u=0,s=t.distance(Y.Z.COORDS_BY_SCREEN,r),n.evFirst&&"vml"!==e.board.renderer.type&&(s>=n.minLen?(o=(r.scrCoords[1]-t.scrCoords[1])*n.offFirst/s,a=(r.scrCoords[2]-t.scrCoords[2])*n.offFirst/s):n.showFirst=0),n.evLast&&"vml"!==e.board.renderer.type&&(s>=n.minLen?(l=(r.scrCoords[1]-t.scrCoords[1])*n.offLast/s,u=(r.scrCoords[2]-t.scrCoords[2])*n.offLast/s):n.showLast=0),t.setCoordinates(Y.Z.COORDS_BY_SCREEN,[t.scrCoords[1]+o,t.scrCoords[2]+a],!1,!0),r.setCoordinates(Y.Z.COORDS_BY_SCREEN,[r.scrCoords[1]-l,r.scrCoords[2]-u],!1,!0)),this},handleTouchpoints:function(e,t,r,n){var s,o,a,l,u,c,h;return(n.evFirst||n.evLast)&&(a=l=u=c=h=0,s=d.Z.evaluate(e.point1.visProp.size)+d.Z.evaluate(e.point1.visProp.strokewidth),o=d.Z.evaluate(e.point2.visProp.size)+d.Z.evaluate(e.point2.visProp.strokewidth),n.evFirst&&d.Z.evaluate(e.visProp.touchfirstpoint)&&d.Z.evaluate(e.point1.visProp.visible)&&(a=t.distance(Y.Z.COORDS_BY_SCREEN,r),l=(r.scrCoords[1]-t.scrCoords[1])*s/a,u=(r.scrCoords[2]-t.scrCoords[2])*s/a),n.evLast&&d.Z.evaluate(e.visProp.touchlastpoint)&&d.Z.evaluate(e.point2.visProp.visible)&&(a=t.distance(Y.Z.COORDS_BY_SCREEN,r),c=(r.scrCoords[1]-t.scrCoords[1])*o/a,h=(r.scrCoords[2]-t.scrCoords[2])*o/a),t.setCoordinates(Y.Z.COORDS_BY_SCREEN,[t.scrCoords[1]+l,t.scrCoords[2]+u],!1,!0),r.setCoordinates(Y.Z.COORDS_BY_SCREEN,[r.scrCoords[1]-c,r.scrCoords[2]-h],!1,!0)),this},setArrowSize:function(e,t){return t.evFirst&&this._setArrowWidth(e.rendNodeTriangleStart,t.showFirst*t.strokeWidth,e.rendNode,t.sizeFirst),t.evLast&&this._setArrowWidth(e.rendNodeTriangleEnd,t.showLast*t.strokeWidth,e.rendNode,t.sizeLast),this},setLineCap:function(e){},drawTicks:function(e){e.rendNode=this.appendChildPrim(this.createPrim("path",e.id),d.Z.evaluate(e.visProp.layer)),this.appendNodesToElement(e,"path")},updateTicks:function(e){},drawEllipse:function(e){e.rendNode=this.appendChildPrim(this.createPrim("ellipse",e.id),d.Z.evaluate(e.visProp.layer)),this.appendNodesToElement(e,"ellipse"),this.updateEllipse(e)},updateEllipse:function(e){this._updateVisual(e);var t=e.Radius();Math.abs(e.center.coords.usrCoords[0])>q.Z.eps&&!isNaN(t+e.center.coords.scrCoords[1]+e.center.coords.scrCoords[2])&&t*e.board.unitX<2e6&&this.updateEllipsePrim(e.rendNode,e.center.coords.scrCoords[1],e.center.coords.scrCoords[2],t*e.board.unitX,t*e.board.unitY),this.setLineCap(e)},drawPolygon:function(e){e.rendNode=this.appendChildPrim(this.createPrim("polygon",e.id),d.Z.evaluate(e.visProp.layer)),this.appendNodesToElement(e,"polygon"),this.updatePolygon(e)},updatePolygon:function(e){this._updateVisual(e,{stroke:!0,dash:!0}),this.updatePolygonPrim(e.rendNode,e)},displayCopyright:function(e,t){},drawInternalText:function(e){},updateInternalText:function(e){},drawText:function(e){var t,r,n,s;"html"===d.Z.evaluate(e.visProp.display)&&le.Z.isBrowser&&"no"!==this.type?((t=this.container.ownerDocument.createElement("div")).style.position="absolute",t.className=d.Z.evaluate(e.visProp.cssclass),n=d.Z.evaluate(e.visProp.layer),d.Z.exists(n)||(n=0),r=""===this.container.style.zIndex?0:parseInt(this.container.style.zIndex,10),t.style.zIndex=r+n,this.container.appendChild(t),t.setAttribute("id",this.container.id+"_"+e.id)):t=this.drawInternalText(e),e.rendNode=t,e.htmlStr="",e.visProp.islabel&&d.Z.exists(e.visProp.anchor)?(s=d.Z.evaluate(e.visProp.anchor.visProp.visible),e.prepareUpdate().updateVisibility(s)):e.prepareUpdate().updateVisibility(),this.updateText(e)},updateText:function(e){var r,n,s,l,u,c,h,g,y,E,w,T,t=e.plaintext;if(e.visPropCalc.visible)if(this.updateTextStyle(e,!1),"html"===d.Z.evaluate(e.visProp.display)&&"no"!==this.type){if(isNaN(e.coords.scrCoords[1]+e.coords.scrCoords[2])||(n=e.coords.scrCoords[1],n=Math.abs(n)<1e6?n:1e6,"right"===(c=e.getAnchorX())?(r=e.board.canvasWidth-n,w="right"):"middle"===c?(r=n-.5*e.size[0],w="center"):(r=n,w="left"),e.visPropOld.left!==c+r&&("right"===c?(e.rendNode.style.right=r+"px",e.rendNode.style.left="auto"):(e.rendNode.style.left=r+"px",e.rendNode.style.right="auto"),e.visPropOld.left=c+r),n=e.coords.scrCoords[2]+this.vOffsetText,n=Math.abs(n)<1e6?n:1e6,"bottom"===(h=e.getAnchorY())?(r=e.board.canvasHeight-n,T="bottom"):"middle"===h?(r=n-.5*e.size[1],T="center"):(r=n,T="top"),e.visPropOld.top!==h+r&&("bottom"===h?(e.rendNode.style.top="auto",e.rendNode.style.bottom=r+"px"):(e.rendNode.style.bottom="auto",e.rendNode.style.top=r+"px"),e.visPropOld.top=h+r)),e.htmlStr!==t){try{e.type===d.Z.OBJECT_TYPE_BUTTON?e.rendNodeButton.innerHTML=t:e.type===d.Z.OBJECT_TYPE_CHECKBOX||e.type===d.Z.OBJECT_TYPE_INPUT?e.rendNodeLabel.innerHTML=t:e.rendNode.innerHTML=t}catch{s=e.rendNode.parentNode,e.rendNode.parentNode.removeChild(e.rendNode),e.rendNode.innerHTML=t,s.appendChild(e.rendNode)}if(e.htmlStr=t,d.Z.evaluate(e.visProp.usemathjax))try{MathJax.typeset?MathJax.typeset([e.rendNode]):MathJax.Hub.Queue(["Typeset",MathJax.Hub,e.rendNode]),u="fullscreenwrap_"+(l=e.board.container),document.getElementById(u)&&le.Z.scaleJSXGraphDiv("#"+u,"#"+l,e.board.containerObj._cssFullscreenStore.scale,e.board.containerObj._cssFullscreenStore.vshift)}catch{D.Z.debug("MathJax (not yet) loaded")}else if(d.Z.evaluate(e.visProp.usekatex))try{katex.render(t,e.rendNode,{macros:d.Z.evaluate(e.visProp.katexmacros),throwOnError:!1})}catch{D.Z.debug("KaTeX not loaded (yet)")}else if(d.Z.evaluate(e.visProp.useasciimathml))try{AMprocessNode(e.rendNode,!1)}catch{D.Z.debug("AsciiMathML not loaded (yet)")}}0!==(g=d.Z.evaluate(e.visProp.rotate))&&(g*=Math.PI/180,y=Math.cos(g),E=Math.sin(g),e.rendNode.style.transform="matrix("+[y,-1*E,E,y,0,0].join(",")+")",e.rendNode.style["transform-origin"]=w+" "+T),this.transformImage(e,e.transformations)}else this.updateInternalText(e)},_css2js:function(e){var r,n,s,o,a,t=[],l=d.Z.trim(e).replace(/;$/,"").split(";");for(n=l.length,r=0;r<n;++r)""!==d.Z.trim(l[r])&&(a=l[r].split(":"),s=d.Z.trim(a[0].replace(/-([a-z])/gi,function(u,c){return c.toUpperCase()})),o=d.Z.trim(a[1]),t.push({key:s,val:o}));return t},updateTextStyle:function(e,t){var r,n,s,o,a,y,E,w,T,l=e.visProp,u=le.Z.isBrowser?l.display:"internal",c=["rendNode","rendNodeTag","rendNodeLabel"],h=c.length,g=d.Z.evaluate(l.fontunit),N=["cssdefaultstyle","cssstyle"],L=N.length;if(t?(s=l.highlightstrokecolor,n=l.highlightstrokeopacity,o=l.highlightcssclass):(s=l.strokecolor,n=l.strokeopacity,o=l.cssclass),"no"!==this.type&&("html"===u||"canvas"!==this.type)){for(w=0;w<L;w++)if(""!==(T=d.Z.evaluate(l[(t?"highlight":"")+N[w]]))&&e.visPropOld[N[w]]!==T){for(y=this._css2js(T),a=0;a<h;a++)if(d.Z.exists(e[c[a]]))for(E in y)y.hasOwnProperty(E)&&(e[c[a]].style[y[E].key]=y[E].val);e.visPropOld[N[w]]=T}if(r=d.Z.evaluate(l.fontsize),e.visPropOld.fontsize!==r){e.needsSizeUpdate=!0;try{for(a=0;a<h;a++)d.Z.exists(e[c[a]])&&(e[c[a]].style.fontSize=r+g)}catch{for(a=0;a<h;a++)d.Z.exists(e[c[a]])&&(e[c[a]].style.fontSize=r)}e.visPropOld.fontsize=r}}return this.setTabindex(e),this.setObjectTransition(e),"html"===u&&"no"!==this.type?(e.visPropOld.cssclass!==o&&(e.rendNode.className=o,e.visPropOld.cssclass=o,e.needsSizeUpdate=!0),this.setObjectStrokeColor(e,s,n)):this.updateInternalTextStyle(e,s,n),this},updateInternalTextStyle:function(e,t,r){this.setObjectStrokeColor(e,t,r)},drawImage:function(e){},updateImage:function(e){this.updateRectPrim(e.rendNode,e.coords.scrCoords[1],e.coords.scrCoords[2]-e.size[1],e.size[0],e.size[1]),this.updateImageURL(e),this.transformImage(e,e.transformations),this._updateVisual(e,{stroke:!0,dash:!0},!0)},joinTransforms:function(e,t){var r,n=e.board.origin.scrCoords[1],s=e.board.origin.scrCoords[2],o=e.board.unitX,a=e.board.unitY,l=t.length,u=[[1,0,0],[-n/o,1/o,0],[s/a,0,-1/a]];for(r=0;r<l;r++)u=q.Z.matMatMult(t[r].matrix,u);return q.Z.matMatMult([[1,0,0],[n,o,0],[s,0,-a]],u)},transformImage:function(e,t){},updateImageURL:function(e){},updateImageStyle:function(e,t){e.rendNode.className=d.Z.evaluate(t?e.visProp.highlightcssclass:e.visProp.cssclass)},drawForeignObject:function(e){},updateForeignObject:function(e){},appendChildPrim:function(e,t){},appendNodesToElement:function(e,t){},createPrim:function(e,t){return null},remove:function(e){},makeArrows:function(e,t){},_setArrowWidth:function(e,t,r){},updateEllipsePrim:function(e,t,r,n,s){},updateLinePrim:function(e,t,r,n,s,o){},updatePathPrim:function(e,t,r){},updatePathStringPoint:function(e,t,r){},updatePathStringPrim:function(e){},updatePathStringBezierPrim:function(e){},updatePolygonPrim:function(e,t){},updateRectPrim:function(e,t,r,n,s){},setPropertyPrim:function(e,t,r){},setTabindex:function(e){var t;e.board.attr.keyboard.enabled&&d.Z.exists(e.rendNode)&&(t=d.Z.evaluate(e.visProp.tabindex),(!e.visPropCalc.visible||d.Z.evaluate(e.visProp.fixed))&&(t=null),t!==e.visPropOld.tabindex&&(e.rendNode.setAttribute("tabindex",t),e.visPropOld.tabindex=t))},display:function(e,t){e&&(e.visPropOld.visible=t)},show:function(e){},hide:function(e){},setBuffering:function(e,t){},setDashStyle:function(e){},setDraft:function(e){if(d.Z.evaluate(e.visProp.draft)){var t=e.board.options.elements.draft.color,r=e.board.options.elements.draft.opacity;this.setObjectTransition(e),e.type===Y.Z.OBJECT_TYPE_POLYGON?this.setObjectFillColor(e,t,r):(e.elementClass===Y.Z.OBJECT_CLASS_POINT?this.setObjectFillColor(e,t,r):this.setObjectFillColor(e,"none",0),this.setObjectStrokeColor(e,t,r),this.setObjectStrokeWidth(e,e.board.options.elements.draft.strokeWidth))}},removeDraft:function(e){this.setObjectTransition(e),e.type===Y.Z.OBJECT_TYPE_POLYGON?this.setObjectFillColor(e,e.visProp.fillcolor,e.visProp.fillopacity):(e.type===Y.Z.OBJECT_CLASS_POINT&&this.setObjectFillColor(e,e.visProp.fillcolor,e.visProp.fillopacity),this.setObjectStrokeColor(e,e.visProp.strokecolor,e.visProp.strokeopacity),this.setObjectStrokeWidth(e,e.visProp.strokewidth))},setGradient:function(e){},updateGradient:function(e){},setObjectTransition:function(e,t){},setObjectFillColor:function(e,t,r){},setObjectStrokeColor:function(e,t,r){},setObjectStrokeWidth:function(e,t){},setShadow:function(e){},highlight:function(e,t){var r,n,o,s=e.visProp;if(this.setObjectTransition(e),!s.draft){if(e.type===Y.Z.OBJECT_TYPE_POLYGON)for(this.setObjectFillColor(e,s.highlightfillcolor,s.highlightfillopacity),n=d.Z.evaluate(s.highlightbystrokewidth),r=0;r<e.borders.length;r++)this.highlight(e.borders[r],!n);else e.elementClass===Y.Z.OBJECT_CLASS_TEXT?this.updateTextStyle(e,!0):e.type===Y.Z.OBJECT_TYPE_IMAGE?(this.updateImageStyle(e,!0),this.setObjectFillColor(e,s.highlightfillcolor,s.highlightfillopacity)):(this.setObjectStrokeColor(e,s.highlightstrokecolor,s.highlightstrokeopacity),this.setObjectFillColor(e,s.highlightfillcolor,s.highlightfillopacity));s.highlightstrokewidth&&!t&&(o=Math.max(d.Z.evaluate(s.highlightstrokewidth),d.Z.evaluate(s.strokewidth)),this.setObjectStrokeWidth(e,o),(e.elementClass===Y.Z.OBJECT_CLASS_LINE||e.elementClass===Y.Z.OBJECT_CLASS_CURVE)&&this.updatePathWithArrowHeads(e,!0))}return this},noHighlight:function(e){var t,n,r=e.visProp;if(this.setObjectTransition(e),!d.Z.evaluate(e.visProp.draft)){if(e.type===Y.Z.OBJECT_TYPE_POLYGON)for(this.setObjectFillColor(e,r.fillcolor,r.fillopacity),t=0;t<e.borders.length;t++)this.noHighlight(e.borders[t]);else e.elementClass===Y.Z.OBJECT_CLASS_TEXT?this.updateTextStyle(e,!1):e.type===Y.Z.OBJECT_TYPE_IMAGE?(this.updateImageStyle(e,!1),this.setObjectFillColor(e,r.fillcolor,r.fillopacity)):(this.setObjectStrokeColor(e,r.strokecolor,r.strokeopacity),this.setObjectFillColor(e,r.fillcolor,r.fillopacity));n=d.Z.evaluate(r.strokewidth),this.setObjectStrokeWidth(e,n),(e.elementClass===Y.Z.OBJECT_CLASS_LINE||e.elementClass===Y.Z.OBJECT_CLASS_CURVE)&&this.updatePathWithArrowHeads(e,!1)}return this},suspendRedraw:function(){},unsuspendRedraw:function(){},drawNavigationBar:function(e,t){var r,n,s=function(a){a||(a=window.event),a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},o=function(a,l,u){var c;u=u||"",(c=r.createElement("span")).innerHTML=a,c.style.paddingLeft="7px",c.style.paddingRight="7px",void 0!==c.classList&&c.classList.add("JXG_navigation_button"),c.setAttribute("id",u),n.appendChild(c),le.Z.addEvent(c,"click",function(h){return d.Z.bind(l,e)(),!1},e),le.Z.addEvent(c,"pointerup",s,e),le.Z.addEvent(c,"pointerdown",s,e),le.Z.addEvent(c,"pointerleave",s,e),le.Z.addEvent(c,"mouseup",s,e),le.Z.addEvent(c,"mousedown",s,e),le.Z.addEvent(c,"touchend",s,e),le.Z.addEvent(c,"touchstart",s,e)};le.Z.isBrowser&&"no"!==this.type&&((n=(r=e.containerObj.ownerDocument).createElement("div")).setAttribute("id",e.container+"_navigationbar"),n.style.color=t.strokecolor,n.style.backgroundColor=t.fillcolor,n.style.padding=t.padding,n.style.position=t.position,n.style.fontSize=t.fontsize,n.style.cursor=t.cursor,n.style.zIndex=t.zindex,e.containerObj.appendChild(n),n.style.right=t.right,n.style.bottom=t.bottom,void 0!==n.classList&&n.classList.add("JXG_navigation"),e.attr.showfullscreen&&o(e.attr.fullscreen.symbol,function(){e.toFullscreen(e.attr.fullscreen.id)},e.container+"_navigation_fullscreen"),e.attr.showscreenshot&&o(e.attr.screenshot.symbol,function(){window.setTimeout(function(){e.renderer.screenshot(e,"",!1)},330)},e.container+"_navigation_screenshot"),e.attr.showreload&&o("\u21bb",function(){e.reload()},e.container+"_navigation_reload"),e.attr.showcleartraces&&o("\u2297",function(){e.clearTraces()},e.container+"_navigation_cleartraces"),e.attr.shownavigation&&(e.attr.showzoom&&(o("\u2013",e.zoomOut,e.container+"_navigation_out"),o("o",e.zoom100,e.container+"_navigation_100"),o("+",e.zoomIn,e.container+"_navigation_in")),o("\u2190",e.clickLeftArrow,e.container+"_navigation_left"),o("\u2193",e.clickUpArrow,e.container+"_navigation_down"),o("\u2191",e.clickDownArrow,e.container+"_navigation_up"),o("\u2192",e.clickRightArrow,e.container+"_navigation_right")))},getElementById:function(e){var t;return d.Z.exists(this.container)?(t=this.container.id+"_"+e,d.Z.exists(CSS)&&d.Z.exists(CSS.escape)&&(t=CSS.escape(t)),this.container.querySelector("#"+t)):""},removeToInsertLater:function(e){var t=e.parentNode,r=e.nextSibling;if(null!==t)return t.removeChild(e),function(){r?t.insertBefore(e,r):t.appendChild(e)}},resize:function(e,t){},createTouchpoints:function(e){},showTouchpoint:function(e){},hideTouchpoint:function(e){},updateTouchpoint:function(e,t){},dumpToDataURI:function(e){},dumpToCanvas:function(e,t,r,n){},screenshot:function(e){},setLayer:function(e,t){}});const fc=D.Z.AbstractRenderer;D.Z.FileReader={handleRemoteFile:function(e,t,r,n,s,o){var a=!1;try{a=new XMLHttpRequest,"raw"===r.toLowerCase()?a.overrideMimeType("text/plain; charset="+s):a.overrideMimeType("text/xml; charset="+s)}catch{try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch{try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch{a=!1}}}if(a){a.open("GET",e,n),this.cbp="raw"===r.toLowerCase()?function(){4===a.readyState&&t(a.responseText)}:function(){var l=a,u="";4===l.readyState&&(u=!d.Z.exists(l.responseStream)||"PK"!==l.responseText.slice(0,2)&&31!==Mp.asciiCharCodeAt(l.responseText.slice(0,1),0)?l.responseText:cc.decode(jxgBinFileReader(l)),this.parseString(u,t,r,o))},this.cb=d.Z.bind(this.cbp,this),a.onreadystatechange=this.cb;try{a.send(null)}catch{throw new Error("JSXGraph: A problem occurred while trying to read remote file '"+e+"'.")}}else D.Z.debug("AJAX not activated!")},handleLocalFile:function(e,t,r,n,s,o){d.Z.exists(n)||(n=!0),this.cbp="raw"===r.toLowerCase()?function(l){t(l.target.result)}:function(l){this.parseString(l.target.result,t,r,o)},this.cb=d.Z.bind(this.cbp,this);var a=new FileReader;a.onload=this.cb,"raw"===r.toLowerCase()?a.readAsText(e):a.readAsText(e,s)},parseFileContent:function(e,t,r,n,s,o){d.Z.isString(e)||void 0===FileReader?this.handleRemoteFile(e,t,r,n,s,o):this.handleLocalFile(e,t,r,n,s,o)},parseString:function(e,t,r,n){var s;if(r=r.toLowerCase(),d.Z.exists(s=D.Z.readers[r]))new s(t,e).read();else if("jessiecode"!==r)throw new Error("JSXGraph: There is no reader available for '"+r+"'.");d.Z.isFunction(n)&&n(t)}},!le.Z.isMetroApp()&&le.Z.isBrowser&&"object"==typeof navigator&&/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)&&document&&document.write&&document.write('<script type="text/vbscript">\nFunction Base64Encode(inData)\n  Const Base64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"\n  Dim cOut, sOut, I\n  For I = 1 To LenB(inData) Step 3\n    Dim nGroup, pOut, sGroup\n    nGroup = &H10000 * AscB(MidB(inData, I, 1)) + _\n      &H100 * MyASC(MidB(inData, I + 1, 1)) + MyASC(MidB(inData, I + 2, 1))\n    nGroup = Oct(nGroup)\n    nGroup = String(8 - Len(nGroup), "0") & nGroup\n    pOut = Mid(Base64, CLng("&o" & Mid(nGroup, 1, 2)) + 1, 1) + _\n      Mid(Base64, CLng("&o" & Mid(nGroup, 3, 2)) + 1, 1) + _\n      Mid(Base64, CLng("&o" & Mid(nGroup, 5, 2)) + 1, 1) + _\n      Mid(Base64, CLng("&o" & Mid(nGroup, 7, 2)) + 1, 1)\n    sOut = sOut + pOut\n  Next\n  Select Case LenB(inData) Mod 3\n    Case 1: \'8 bit final\n      sOut = Left(sOut, Len(sOut) - 2) + "=="\n    Case 2: \'16 bit final\n      sOut = Left(sOut, Len(sOut) - 1) + "="\n  End Select\n  Base64Encode = sOut\nEnd Function\n\nFunction MyASC(OneChar)\n  If OneChar = "" Then MyASC = 0 Else MyASC = AscB(OneChar)\nEnd Function\n\nFunction jxgBinFileReader(xhr)\n    Dim byteString\n    Dim b64String\n    Dim i\n    byteString = xhr.responseBody\n    ReDim byteArray(LenB(byteString))\n    For i = 1 To LenB(byteString)\n        byteArray(i-1) = AscB(MidB(byteString, i, 1))\n    Next\n    b64String = Base64Encode(byteString)\n    jxgBinFileReader = b64String\nEnd Function\n<\/script>\n');const Bb=D.Z.FileReader;var Fb=$(849),yR=$(277),Fi=$(500);D.Z.Composition=function(e){var t,r=this,n=["setAttribute","setParents","prepareUpdate","updateRenderer","update","fullUpdate","highlight","noHighlight"],s=function(o){return function(){var a;for(a in r.elements)r.elements.hasOwnProperty(a)&&d.Z.exists(r.elements[a][o])&&r.elements[a][o].apply(r.elements[a],arguments);return r}};for(t=0;t<n.length;t++)this[n[t]]=s(n[t]);for(t in this.elements={},this.objects=this.elements,this.elementsByName={},this.objectsList=[],this.groups={},this.methodMap={setAttribute:"setAttribute",setProperty:"setAttribute",setParents:"setParents",add:"add",remove:"remove",select:"select"},e)e.hasOwnProperty(t)&&this.add(t,e[t]);this.dump=!0,this.subs={}},D.Z.extend(D.Z.Composition.prototype,{add:function(e,t){return!(d.Z.exists(this[e])||!d.Z.exists(t)||(d.Z.exists(t.id)?this.elements[t.id]=t:this.elements[e]=t,d.Z.exists(t.name)&&(this.elementsByName[t.name]=t),t.on("attribute:name",this.nameListener,this),this.objectsList.push(t),this[e]=t,this.methodMap[e]=t,0))},remove:function(e){var r,t=!1;for(r in this.elements)if(this.elements.hasOwnProperty(r)&&this.elements[r].id===this[e].id){t=!0;break}return t&&(delete this.elements[this[e].id],delete this[e]),t},nameListener:function(e,t,r){delete this.elementsByName[e],this.elementsByName[t]=r},select:function(e){return d.Z.exists(D.Z.Board)?D.Z.Board.prototype.select.call(this,e):new D.Z.Composition},getParents:function(){return this.parents},getType:function(){return this.elType},getAttributes:function(){var t,e={};for(t in this.subs)this.subs.hasOwnProperty(t)&&(e[t]=this.subs[t].visProp);return this.attr}});const Sp=D.Z.Composition;D.Z.Board=function(e,t,r,n,s,o,a,l,u,c,h){if(this.BOARD_MODE_NONE=0,this.BOARD_MODE_DRAG=1,this.BOARD_MODE_MOVE_ORIGIN=2,this.BOARD_MODE_ZOOM=17,this.BOARD_QUALITY_LOW=1,this.BOARD_QUALITY_HIGH=2,d.Z.exists(h.document)&&!1!==h.document?this.document=h.document:le.Z.isBrowser&&(this.document=document),this.container=e,this.containerObj=le.Z.isBrowser?this.document.getElementById(this.container):null,le.Z.isBrowser&&"no"!==t.type&&null===this.containerObj)throw new Error('\nJSXGraph: HTML container element "'+e+'" not found.');this.renderer=t,this.grids=[],this.options=d.Z.deepCopy(Rt.Z),this.attr=h,this.dimension=2,this.jc=new yR.Z,this.jc.use(this),this.origin={},this.origin.usrCoords=[1,0,0],this.origin.scrCoords=[1,n[0],n[1]],this.zoomX=s,this.zoomY=o,this.unitX=a*this.zoomX,this.unitY=l*this.zoomY,this.keepaspectratio=!1,this.canvasWidth=u,this.canvasHeight=c,this.id=d.Z.exists(r)&&""!==r&&le.Z.isBrowser&&!d.Z.exists(this.document.getElementById(r))?r:this.generateId(),gR.Z.eventify(this),this.hooks=[],this.dependentBoards=[],this.inUpdate=!1,this.objects={},this.objectsList=[],this.groups={},this.animationObjects={},this.highlightedObjects={},this.numObjects=0,this.elementsByName={},this.mode=this.BOARD_MODE_NONE,this.updateQuality=this.BOARD_QUALITY_HIGH,this.isSuspendedRedraw=!1,this.calculateSnapSizes(),this.drag_dx=0,this.drag_dy=0,this.drag_position=[0,0],this.mouse={},this.touches=[],this.xmlString="",this.cPos=[],this.touchMoveLast=0,this.touchMoveLastId=1/0,this.positionAccessLast=0,this.downObjects=[],this.focusObjects=[],this.attr.showcopyright&&this.renderer.displayCopyright(Y.Z.licenseText,parseInt(this.options.text.fontSize,10)),this.needsFullUpdate=!1,this.reducedUpdate=!1,this.currentCBDef="none",this.geonextCompatibilityMode=!1,this.options.text.useASCIIMathML&&translateASCIIMath?init():this.options.text.useASCIIMathML=!1,this.hasMouseHandlers=!1,this.hasTouchHandlers=!1,this.hasPointerHandlers=!1,this.hasMouseUp=!1,this.hasTouchEnd=!1,this.hasPointerUp=!1,this._drag_offset=[0,0],this._inputDevice="mouse",this._board_touches=[],this.selectingMode=!1,this.isSelecting=!1,this._isScrolling=!1,this._isResizing=!1,this.selectingBox=[[0,0],[0,0]],this.userLog=[],this.mathLib=Math,this.mathLibJXG=D.Z.Math,this.attr.registerevents&&this.addEventHandlers(),this.attr.registerresizeevent&&this.addResizeEventHandlers(),this.attr.registerfullscreenevent&&this.addFullscreenEventHandlers(),this.methodMap={update:"update",fullUpdate:"fullUpdate",on:"on",off:"off",trigger:"trigger",setView:"setBoundingBox",setBoundingBox:"setBoundingBox",migratePoint:"migratePoint",colorblind:"emulateColorblindness",suspendUpdate:"suspendUpdate",unsuspendUpdate:"unsuspendUpdate",clearTraces:"clearTraces",left:"clickLeftArrow",right:"clickRightArrow",up:"clickUpArrow",down:"clickDownArrow",zoomIn:"zoomIn",zoomOut:"zoomOut",zoom100:"zoom100",zoomElements:"zoomElements",remove:"removeObject",removeObject:"removeObject"}},D.Z.extend(D.Z.Board.prototype,{generateName:function(e){var t,r,n=this.attr.maxnamelength,s="",o="",a=[],l="";if(e.type===Y.Z.OBJECT_TYPE_TICKS)return"";for(t=d.Z.isPoint(e)||d.Z.isPoint3D(e)?["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]:e.type===Y.Z.OBJECT_TYPE_ANGLE?["","&alpha;","&beta;","&gamma;","&delta;","&epsilon;","&zeta;","&eta;","&theta;","&iota;","&kappa;","&lambda;","&mu;","&nu;","&xi;","&omicron;","&pi;","&rho;","&sigma;","&tau;","&upsilon;","&phi;","&chi;","&psi;","&omega;"]:["","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],!d.Z.isPoint(e)&&e.elementClass!==Y.Z.OBJECT_CLASS_LINE&&e.type!==Y.Z.OBJECT_TYPE_ANGLE&&(s=e.type===Y.Z.OBJECT_TYPE_POLYGON?"P_{":e.elementClass===Y.Z.OBJECT_CLASS_CIRCLE?"k_{":e.elementClass===Y.Z.OBJECT_CLASS_TEXT?"t_{":"s_{",o="}"),r=0;r<n;r++)a[r]=0;for(;a[n-1]<t.length;){for(a[0]=1;a[0]<t.length;a[0]++){for(l=s,r=n;r>0;r--)l+=t[a[r-1]];if(!d.Z.exists(this.elementsByName[l+o]))return l+o}for(a[0]=t.length,r=1;r<n;r++)a[r-1]===t.length&&(a[r-1]=1,a[r]+=1)}return""},generateId:function(){for(var e=1;d.Z.exists(D.Z.boards["jxgBoard"+e]);)e=Math.round(65535*Math.random());return"jxgBoard"+e},setId:function(e,t){var r,n=this.numObjects,s=e.id;if(this.numObjects+=1,""===s||!d.Z.exists(s))for(s=this.id+t+n;d.Z.exists(this.objects[s]);)r=Math.round(65535*Math.random()),s=this.id+t+n+"-"+r;return e.id=s,this.objects[s]=e,e._pos=this.objectsList.length,this.objectsList[this.objectsList.length]=e,s},finalizeAdding:function(e){!1===d.Z.evaluate(e.visProp.visible)&&this.renderer.display(e,!1)},finalizeLabel:function(e){e.hasLabel&&!d.Z.evaluate(e.label.visProp.islabel)&&!1===d.Z.evaluate(e.label.visProp.visible)&&this.renderer.display(e.label,!1)},checkFrameRate:function(e){var t=!1,r=(new Date).getTime();return d.Z.exists(e.pointerId)&&this.touchMoveLastId!==e.pointerId&&(t=!0,this.touchMoveLastId=e.pointerId),!t&&(r-this.touchMoveLast)*this.attr.maxframerate>=1e3&&(t=!0),t&&(this.touchMoveLast=r),t},getCoordsTopLeftCorner:function(){var e,r,l,u,n=this.document.ownerDocument||this.document,s=n.documentElement||this.document.body.parentNode,o=n.body,a=this.containerObj;if(this.cPos.length>0&&(this.mode===this.BOARD_MODE_DRAG||this.mode===this.BOARD_MODE_MOVE_ORIGIN||(new Date).getTime()-this.positionAccessLast<1e3))return this.cPos;if(this.positionAccessLast=(new Date).getTime(),a.getBoundingClientRect){for(r=a.getBoundingClientRect(),l=1,u=a;u&&d.Z.exists(u.parentNode);)d.Z.exists(u.style)&&d.Z.exists(u.style.zoom)&&""!==u.style.zoom&&(l*=parseFloat(u.style.zoom)),u=u.parentNode;return(e=[r.left*l,r.top*l])[0]+=le.Z.getProp(a,"border-left-width"),e[1]+=le.Z.getProp(a,"border-top-width"),"vml"!==this.renderer.type&&(e[0]+=le.Z.getProp(a,"padding-left"),e[1]+=le.Z.getProp(a,"padding-top")),this.cPos=e.slice(),this.cPos}return e=le.Z.getOffset(a),!this.containerObj.currentStyle&&this.document.documentElement.ownerDocument.defaultView&&(e[0]+=le.Z.getProp(s,"margin-left"),e[1]+=le.Z.getProp(s,"margin-top"),e[0]+=le.Z.getProp(s,"border-left-width"),e[1]+=le.Z.getProp(s,"border-top-width"),e[0]+=le.Z.getProp(s,"padding-left"),e[1]+=le.Z.getProp(s,"padding-top")),o&&(e[0]+=le.Z.getProp(o,"left"),e[1]+=le.Z.getProp(o,"top")),"object"==typeof google&&google.translate&&(e[0]+=10,e[1]+=25),e[0]+=le.Z.getProp(a,"border-left-width"),e[1]+=le.Z.getProp(a,"border-top-width"),"vml"!==this.renderer.type&&(e[0]+=le.Z.getProp(a,"padding-left"),e[1]+=le.Z.getProp(a,"padding-top")),e[0]+=this.attr.offsetx,e[1]+=this.attr.offsety,this.cPos=e.slice(),this.cPos},getMousePosition:function(e,t){var n,s,r=this.getCoordsTopLeftCorner();return n=le.Z.getPosition(e,t,this.document),d.Z.exists(this.cssTransMat)||this.updateCSSTransforms(),(s=q.Z.matVecMult(this.cssTransMat,s=[1,n[0]-r[0],n[1]-r[1]]))[1]/=s[0],s[2]/=s[0],[s[1],s[2]]},initMoveOrigin:function(e,t){this.drag_dx=e-this.origin.scrCoords[1],this.drag_dy=t-this.origin.scrCoords[2],this.mode=this.BOARD_MODE_MOVE_ORIGIN,this.updateQuality=this.BOARD_QUALITY_LOW},initMoveObject:function(e,t,r,n){var s,o,u,a=[],l=[],c=this.objectsList.length,h={visProp:{layer:-1e4}};for(this._shiftKey=r.shiftKey,this._ctrlKey=r.ctrlKey,o=0;o<c;o++)u=(s=this.objectsList[o]).hasPoint&&s.hasPoint(e,t),s.visPropCalc.visible&&u&&(s.triggerEventHandlers([n+"down","down"],[r]),this.downObjects.push(s)),u&&s.isDraggable&&s.visPropCalc.visible&&(this.geonextCompatibilityMode&&(d.Z.isPoint(s)||s.elementClass===Y.Z.OBJECT_CLASS_TEXT)||!this.geonextCompatibilityMode)&&!d.Z.evaluate(s.visProp.fixed)&&(s.visProp.layer>h.visProp.layer||s.visProp.layer===h.visProp.layer&&s.lastDragTime.getTime()>=h.lastDragTime.getTime())&&(!this.attr.ignorelabels||!d.Z.exists(h.label)||s!==h.label)&&(a.push(h=s),d.Z.exists(h.coords)?l.push(ln.Z.subtract(h.coords.scrCoords.slice(1),[e,t])):l.push([0,0]));return this.attr.drag.enabled&&a.length>0&&(this.mode=this.BOARD_MODE_DRAG),this.attr.takefirst?(a.length=1,this._drag_offset=l[0]):(a=a.slice(-1),this._drag_offset=l[l.length-1]),this._drag_offset||(this._drag_offset=[0,0]),"svg"===this.renderer.type&&d.Z.exists(a[0])&&d.Z.evaluate(a[0].visProp.dragtotopoflayer)&&1===a.length&&d.Z.exists(a[0].rendNode)&&a[0].rendNode.parentNode.appendChild(a[0].rendNode),a.length>=1&&(a[0].highlight(!0),this.triggerEventHandlers(["mousehit","hit"],[r,a[0]])),a},moveObject:function(e,t,r,n,s){var a,l,u,o=new ge.Z(Y.Z.COORDS_BY_SCREEN,this.getScrCoordsOfMouse(e,t),this);r&&r.obj&&((a=r.obj).coords&&(l=a.coords.scrCoords.slice()),this.addLogEntry("drag",a,o.usrCoords.slice(1)),this.drag_position=[o.scrCoords[1],o.scrCoords[2]],this.drag_position=ln.Z.add(this.drag_position,this._drag_offset),this._shiftKey=n.shiftKey,this._ctrlKey=n.ctrlKey,d.Z.exists(a.coords)?a.setPositionDirectly(Y.Z.COORDS_BY_SCREEN,this.drag_position):(this.displayInfobox(!1),isNaN(r.targets[0].Xprev+r.targets[0].Yprev)||a.setPositionDirectly(Y.Z.COORDS_BY_SCREEN,[o.scrCoords[1],o.scrCoords[2]],[r.targets[0].Xprev,r.targets[0].Yprev]),r.targets[0].Xprev=o.scrCoords[1],r.targets[0].Yprev=o.scrCoords[2]),d.Z.exists(a.coords)&&(a.prepareUpdate().update(!1).updateRenderer(),this.updateInfobox(a),a.prepareUpdate().update(!0).updateRenderer()),a.coords&&(u=a.coords.scrCoords),(!a.coords||l[1]!==u[1]||l[2]!==u[2])&&(a.triggerEventHandlers([s+"drag","drag"],[n]),this.update()),a.highlight(!0),this.triggerEventHandlers(["mousehit","hit"],[n,a]),a.lastDragTime=new Date)},twoFingerMove:function(e,t,r){var n;d.Z.exists(e)&&d.Z.exists(e.obj)&&((n=e.obj).elementClass===Y.Z.OBJECT_CLASS_LINE||n.type===Y.Z.OBJECT_TYPE_POLYGON?this.twoFingerTouchObject(e.targets,n,t):n.elementClass===Y.Z.OBJECT_CLASS_CIRCLE&&this.twoFingerTouchCircle(e.targets,n,t),r&&n.triggerEventHandlers(["touchdrag","drag"],[r]))},getTwoFingerTransform(e,t,r,n){var s,o,a,l,u,c,h,g,y,E,w,T,N,L,R,H,Q;return o=(s=new ge.Z(Y.Z.COORDS_BY_SCREEN,[e.Xprev,e.Yprev],this).usrCoords)[1],a=s[2],l=(s=new ge.Z(Y.Z.COORDS_BY_SCREEN,[t.Xprev,t.Yprev],this).usrCoords)[1],u=s[2],g=(s=new ge.Z(Y.Z.COORDS_BY_SCREEN,[e.X,e.Y],this).usrCoords)[1],y=s[2],L=((T=(E=(s=new ge.Z(Y.Z.COORDS_BY_SCREEN,[t.X,t.Y],this).usrCoords)[1])-g)*(c=l-o)+(N=(w=s[2])-y)*(h=u-a))/(H=c*c+h*h),R=(N*c-T*h)/H,r||(L/=Q=Math.sqrt(L*L+R*R),R/=Q),n||(R=0),[1,0,0,.5*(g+E-L*(o+l)+R*(a+u)),L,-R,.5*(y+w-R*(o+l)-L*(a+u)),R,L]},twoFingerTouchObject:function(e,t,r){var n,s,o,a,l,u,c=!1;if(d.Z.exists(e[0])&&d.Z.exists(e[1])&&!isNaN(e[0].Xprev+e[0].Yprev+e[1].Xprev+e[1].Yprev)){if(s=this.getTwoFingerTransform(e[0],e[1],d.Z.evaluate(t.visProp.scalable),d.Z.evaluate(t.visProp.rotatable)),(n=this.create("transform",s,{type:"generic"})).update(),t.elementClass===Y.Z.OBJECT_CLASS_LINE)o=[],t.point1.draggable()&&o.push(t.point1),t.point2.draggable()&&o.push(t.point2),n.applyOnce(o);else if(t.type===Y.Z.OBJECT_TYPE_POLYGON){for(l=t.vertices.length-1,c=d.Z.evaluate((u=t.visProp).snaptogrid)||d.Z.evaluate(u.snaptopoints),a=0;a<l&&!c;++a)u=t.vertices[a].visProp,c=(c=c||d.Z.evaluate(u.snaptogrid)||d.Z.evaluate(u.snaptopoints))||!t.vertices[a].draggable();if(!c){for(o=[],a=0;a<l;++a)t.vertices[a].draggable()&&o.push(t.vertices[a]);n.applyOnce(o)}}this.update(),t.highlight(!0)}},twoFingerTouchCircle:function(e,t,r){var n,s,o,a,l,u,c,h,g,y,E;"pointCircle"===t.method||"pointLine"===t.method||d.Z.exists(e[0])&&d.Z.exists(e[1])&&!isNaN(e[0].Xprev+e[0].Yprev+e[1].Xprev+e[1].Yprev)&&(r===e[0].num?(n=e[1],s=e[0]):(n=e[0],s=e[1]),l=new ge.Z(Y.Z.COORDS_BY_SCREEN,[n.Xprev,n.Yprev],this).usrCoords,a=new ge.Z(Y.Z.COORDS_BY_SCREEN,[s.Xprev,s.Yprev],this).usrCoords,o=new ge.Z(Y.Z.COORDS_BY_SCREEN,[s.X,s.Y],this).usrCoords,c=fe.Z.rad(a.slice(1),l.slice(1),o.slice(1)),h=this.create("transform",[-l[1],-l[2]],{type:"translate"}),g=this.create("transform",[c],{type:"rotate"}),h.melt(g),d.Z.evaluate(t.visProp.scalable)&&(u=fe.Z.distance(l,o)/fe.Z.distance(l,a),y=this.create("transform",[u,u],{type:"scale"}),h.melt(y)),E=this.create("transform",[l[1],l[2]],{type:"translate"}),h.melt(E),t.center.draggable()&&h.applyOnce([t.center]),"twoPoints"===t.method?t.point2.draggable()&&h.applyOnce([t.point2]):"pointRadius"===t.method&&d.Z.isNumber(t.updateRadius.origin)&&t.setRadius(t.radius*u),this.update(t.center),t.highlight(!0))},highlightElements:function(e,t,r,n){var s,o,a,l={},u=this.objectsList.length;for(s=0;s<u;s++)a=(o=this.objectsList[s]).id,d.Z.exists(o.hasPoint)&&o.visPropCalc.visible&&o.hasPoint(e,t)&&(this.updateInfobox(o),d.Z.exists(this.highlightedObjects[a])||(l[a]=o,o.highlight(),this.triggerEventHandlers(["mousehit","hit"],[r,o,n])),o.mouseover?o.triggerEventHandlers(["mousemove","move"],[r]):(o.triggerEventHandlers(["mouseover","over"],[r]),o.mouseover=!0));for(s=0;s<u;s++)a=(o=this.objectsList[s]).id,o.mouseover&&(l[a]||(o.triggerEventHandlers(["mouseout","out"],[r]),o.mouseover=!1))},saveStartPos:function(e,t){var n,s,r=[];if(e.type===Y.Z.OBJECT_TYPE_TICKS)r.push([1,NaN,NaN]);else if(e.elementClass===Y.Z.OBJECT_CLASS_LINE)r.push(e.point1.coords.usrCoords),r.push(e.point2.coords.usrCoords);else if(e.elementClass===Y.Z.OBJECT_CLASS_CIRCLE)r.push(e.center.coords.usrCoords),"twoPoints"===e.method&&r.push(e.point2.coords.usrCoords);else if(e.type===Y.Z.OBJECT_TYPE_POLYGON)for(s=e.vertices.length-1,n=0;n<s;n++)r.push(e.vertices[n].coords.usrCoords);else if(e.type===Y.Z.OBJECT_TYPE_SECTOR)r.push(e.point1.coords.usrCoords),r.push(e.point2.coords.usrCoords),r.push(e.point3.coords.usrCoords);else if(d.Z.isPoint(e)||e.type===Y.Z.OBJECT_TYPE_GLIDER)r.push(e.coords.usrCoords);else if(e.elementClass===Y.Z.OBJECT_CLASS_CURVE)e.points.length>0&&r.push(e.points[0].usrCoords);else try{r.push(e.coords.usrCoords)}catch(o){D.Z.debug("JSXGraph+ saveStartPos: obj.coords.usrCoords not available: "+o)}for(s=r.length,n=0;n<s;n++)t.Zstart.push(r[n][0]),t.Xstart.push(r[n][1]),t.Ystart.push(r[n][2])},mouseOriginMoveStart:function(e){var t,r;return(t=this._isRequiredKeyPressed(e,"pan"))&&(r=this.getMousePosition(e),this.initMoveOrigin(r[0],r[1])),t},mouseOriginMove:function(e){var r,t=this.mode===this.BOARD_MODE_MOVE_ORIGIN;return t&&(r=this.getMousePosition(e),this.moveOrigin(r[0],r[1],!0)),t},touchStartMoveOriginOneFinger:function(e){var r,n;return(r=this.attr.pan.enabled&&!this.attr.pan.needtwofingers&&1===e[D.Z.touchProperty].length)&&(n=this.getMousePosition(e,0),this.initMoveOrigin(n[0],n[1])),r},touchOriginMove:function(e){var r,t=this.mode===this.BOARD_MODE_MOVE_ORIGIN;return t&&(r=this.getMousePosition(e,0),this.moveOrigin(r[0],r[1],!0)),t},originMoveEnd:function(){this.updateQuality=this.BOARD_QUALITY_HIGH,this.mode=this.BOARD_MODE_NONE},addEventHandlers:function(){le.Z.supportsPointerEvents()?this.addPointerEventHandlers():(this.addMouseEventHandlers(),this.addTouchEventHandlers()),null!==this.containerObj&&(this.containerObj.oncontextmenu=function(e){return d.Z.exists(e)&&e.preventDefault(),!1}),this.addKeyboardEventHandlers()},addResizeEventHandlers:function(){if(le.Z.isBrowser){try{this.startResizeObserver()}catch{le.Z.addEvent(window,"resize",this.resizeListener,this),this.startIntersectionObserver()}le.Z.addEvent(window,"scroll",this.scrollListener,this)}},removeEventHandlers:function(){this.removeMouseEventHandlers(),this.removeTouchEventHandlers(),this.removePointerEventHandlers(),this.removeFullscreenEventHandlers(),this.removeKeyboardEventHandlers(),le.Z.isBrowser&&(d.Z.exists(this.resizeObserver)?this.stopResizeObserver():(le.Z.removeEvent(window,"resize",this.resizeListener,this),this.stopIntersectionObserver()),le.Z.removeEvent(window,"scroll",this.scrollListener,this))},addPointerEventHandlers:function(){if(!this.hasPointerHandlers&&le.Z.isBrowser){var e=this.attr.movetarget||this.containerObj;window.navigator.msPointerEnabled?(le.Z.addEvent(this.containerObj,"MSPointerDown",this.pointerDownListener,this),le.Z.addEvent(e,"MSPointerMove",this.pointerMoveListener,this)):(le.Z.addEvent(this.containerObj,"pointerdown",this.pointerDownListener,this),le.Z.addEvent(e,"pointermove",this.pointerMoveListener,this),le.Z.addEvent(e,"pointerleave",this.pointerLeaveListener,this)),le.Z.addEvent(this.containerObj,"mousewheel",this.mouseWheelListener,this),le.Z.addEvent(this.containerObj,"DOMMouseScroll",this.mouseWheelListener,this),null!==this.containerObj&&(this.containerObj.style.touchAction="none"),this.hasPointerHandlers=!0}},addMouseEventHandlers:function(){if(!this.hasMouseHandlers&&le.Z.isBrowser){var e=this.attr.movetarget||this.containerObj;le.Z.addEvent(this.containerObj,"mousedown",this.mouseDownListener,this),le.Z.addEvent(e,"mousemove",this.mouseMoveListener,this),le.Z.addEvent(this.containerObj,"mousewheel",this.mouseWheelListener,this),le.Z.addEvent(this.containerObj,"DOMMouseScroll",this.mouseWheelListener,this),this.hasMouseHandlers=!0}},addTouchEventHandlers:function(e){if(!this.hasTouchHandlers&&le.Z.isBrowser){var t=this.attr.movetarget||this.containerObj;le.Z.addEvent(this.containerObj,"touchstart",this.touchStartListener,this),le.Z.addEvent(t,"touchmove",this.touchMoveListener,this),this.hasTouchHandlers=!0}},addFullscreenEventHandlers:function(){var e,t=["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange"],r=t.length;if(!this.hasFullscreenEventHandlers&&le.Z.isBrowser){for(e=0;e<r;e++)le.Z.addEvent(this.document,t[e],this.fullscreenListener,this);this.hasFullscreenEventHandlers=!0}},addKeyboardEventHandlers:function(){this.attr.keyboard.enabled&&!this.hasKeyboardHandlers&&le.Z.isBrowser&&(le.Z.addEvent(this.containerObj,"keydown",this.keyDownListener,this),le.Z.addEvent(this.containerObj,"focusin",this.keyFocusInListener,this),le.Z.addEvent(this.containerObj,"focusout",this.keyFocusOutListener,this),this.hasKeyboardHandlers=!0)},removeKeyboardEventHandlers:function(){this.hasKeyboardHandlers&&le.Z.isBrowser&&(le.Z.removeEvent(this.containerObj,"keydown",this.keyDownListener,this),le.Z.removeEvent(this.containerObj,"focusin",this.keyFocusInListener,this),le.Z.removeEvent(this.containerObj,"focusout",this.keyFocusOutListener,this),this.hasKeyboardHandlers=!1)},removeFullscreenEventHandlers:function(){var e,t=["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange"],r=t.length;if(this.hasFullscreenEventHandlers&&le.Z.isBrowser){for(e=0;e<r;e++)le.Z.removeEvent(this.document,t[e],this.fullscreenListener,this);this.hasFullscreenEventHandlers=!1}},removePointerEventHandlers:function(){if(this.hasPointerHandlers&&le.Z.isBrowser){var e=this.attr.movetarget||this.containerObj;window.navigator.msPointerEnabled?(le.Z.removeEvent(this.containerObj,"MSPointerDown",this.pointerDownListener,this),le.Z.removeEvent(e,"MSPointerMove",this.pointerMoveListener,this)):(le.Z.removeEvent(this.containerObj,"pointerdown",this.pointerDownListener,this),le.Z.removeEvent(e,"pointermove",this.pointerMoveListener,this),le.Z.removeEvent(e,"pointerleave",this.pointerLeaveListener,this)),le.Z.removeEvent(this.containerObj,"mousewheel",this.mouseWheelListener,this),le.Z.removeEvent(this.containerObj,"DOMMouseScroll",this.mouseWheelListener,this),this.hasPointerUp&&(window.navigator.msPointerEnabled?le.Z.removeEvent(this.document,"MSPointerUp",this.pointerUpListener,this):(le.Z.removeEvent(this.document,"pointerup",this.pointerUpListener,this),le.Z.removeEvent(this.document,"pointercancel",this.pointerUpListener,this)),this.hasPointerUp=!1),this.hasPointerHandlers=!1}},removeMouseEventHandlers:function(){if(this.hasMouseHandlers&&le.Z.isBrowser){var e=this.attr.movetarget||this.containerObj;le.Z.removeEvent(this.containerObj,"mousedown",this.mouseDownListener,this),le.Z.removeEvent(e,"mousemove",this.mouseMoveListener,this),this.hasMouseUp&&(le.Z.removeEvent(this.document,"mouseup",this.mouseUpListener,this),this.hasMouseUp=!1),le.Z.removeEvent(this.containerObj,"mousewheel",this.mouseWheelListener,this),le.Z.removeEvent(this.containerObj,"DOMMouseScroll",this.mouseWheelListener,this),this.hasMouseHandlers=!1}},removeTouchEventHandlers:function(){if(this.hasTouchHandlers&&le.Z.isBrowser){var e=this.attr.movetarget||this.containerObj;le.Z.removeEvent(this.containerObj,"touchstart",this.touchStartListener,this),le.Z.removeEvent(e,"touchmove",this.touchMoveListener,this),this.hasTouchEnd&&(le.Z.removeEvent(this.document,"touchend",this.touchEndListener,this),this.hasTouchEnd=!1),this.hasTouchHandlers=!1}},clickLeftArrow:function(){return this.moveOrigin(this.origin.scrCoords[1]+.1*this.canvasWidth,this.origin.scrCoords[2]),this},clickRightArrow:function(){return this.moveOrigin(this.origin.scrCoords[1]-.1*this.canvasWidth,this.origin.scrCoords[2]),this},clickUpArrow:function(){return this.moveOrigin(this.origin.scrCoords[1],this.origin.scrCoords[2]-.1*this.canvasHeight),this},clickDownArrow:function(){return this.moveOrigin(this.origin.scrCoords[1],this.origin.scrCoords[2]+.1*this.canvasHeight),this},gestureChangeListener:function(e){var t,s,c,h,g,y,E,w,T,N,r=[],n=[],a=!1,l=this.attr.zoom.factorx,u=this.attr.zoom.factory;return this.mode!==this.BOARD_MODE_ZOOM||(e.preventDefault(),h=fe.Z.distance([e.touches[0].clientX,e.touches[0].clientY],[e.touches[1].clientX,e.touches[1].clientY],2),void 0===e.scale&&(e.scale=h/this.prevDist),!d.Z.exists(this.prevCoords)||(n=[e.touches[1].clientX-this.prevCoords[1][0],e.touches[1].clientY-this.prevCoords[1][1]],(r=[e.touches[0].clientX-this.prevCoords[0][0],e.touches[0].clientY-this.prevCoords[0][1]])[0]*r[0]+r[1]*r[1]<100&&n[0]*n[0]+n[1]*n[1]<100)||(s=fe.Z.rad(r,[0,0],n),"pan"!==this.isPreviousGesture&&Math.abs(s)>.2*Math.PI&&Math.abs(s)<1.8*Math.PI&&(a=!0),"pan"!==this.isPreviousGesture&&!a&&(Math.abs(e.scale)<.77||Math.abs(e.scale)>1.3)&&(a=!0),c=e.scale/this.prevScale,this.prevScale=e.scale,this.prevCoords=[[e.touches[0].clientX,e.touches[0].clientY],[e.touches[1].clientX,e.touches[1].clientY]],t=new ge.Z(Y.Z.COORDS_BY_SCREEN,this.getMousePosition(e,0),this),this.attr.pan.enabled&&this.attr.pan.needtwofingers&&!a?(this.isPreviousGesture="pan",this.moveOrigin(t.scrCoords[1],t.scrCoords[2],!0)):this.attr.zoom.enabled&&Math.abs(c-1)<.5&&((this.attr.zoom.pinchhorizontal||this.attr.zoom.pinchvertical)&&(E=Math.abs(e.touches[0].clientX-e.touches[1].clientX),w=Math.abs(e.touches[0].clientY-e.touches[1].clientY),g=Math.abs(Math.atan2(w,E)),y=Math.PI*this.attr.zoom.pinchsensitivity/90),this.attr.zoom.pinchhorizontal&&g<y?(this.attr.zoom.factorx=c,this.attr.zoom.factory=1,T=0,N=0):this.attr.zoom.pinchvertical&&Math.abs(g-.5*Math.PI)<y?(this.attr.zoom.factorx=1,this.attr.zoom.factory=c,T=0,N=0):(this.attr.zoom.factorx=c,this.attr.zoom.factory=c,T=t.usrCoords[1],N=t.usrCoords[2]),this.zoomIn(T,N),this.attr.zoom.factorx=l,this.attr.zoom.factory=u)),!1)},gestureStartListener:function(e){var t;return e.preventDefault(),this.prevScale=1,this.prevDist=fe.Z.distance([e.touches[0].clientX,e.touches[0].clientY],[e.touches[1].clientX,e.touches[1].clientY],2),this.prevCoords=[[e.touches[0].clientX,e.touches[0].clientY],[e.touches[1].clientX,e.touches[1].clientY]],this.isPreviousGesture="none",t=this.getMousePosition(e,0),this.initMoveOrigin(t[0],t[1]),this.mode=this.BOARD_MODE_ZOOM,!1},_isRequiredKeyPressed:function(e,t){var r=this.attr[t];return!!r.enabled&&!(!(r.needshift&&e.shiftKey||!r.needshift&&!e.shiftKey)||!(r.needctrl&&e.ctrlKey||!r.needctrl&&!e.ctrlKey))},_isPointerRegistered:function(e){var t,r=this._board_touches.length;for(t=0;t<r;t++)if(this._board_touches[t].pointerId===e.pointerId)return!0;return!1},_pointerStorePosition:function(e){var t,r;for(t=0,r=!1;t<this._board_touches.length;t++)if(this._board_touches[t].pointerId===e.pointerId){this._board_touches[t].clientX=e.clientX,this._board_touches[t].clientY=e.clientY,r=!0;break}return!r&&this._board_touches.length<2&&this._board_touches.push({pointerId:e.pointerId,clientX:e.clientX,clientY:e.clientY}),this},_pointerRemoveTouches:function(e){var t;for(t=0;t<this._board_touches.length;t++)if(this._board_touches[t].pointerId===e.pointerId){this._board_touches.splice(t,1);break}return this},_pointerClearTouches:function(e){this._board_touches.length>0&&this.dehighlightAll(),this.updateQuality=this.BOARD_QUALITY_HIGH,this.mode=this.BOARD_MODE_NONE,this._board_touches=[],this.touches=[]},_getPointerInputDevice:function(e){if(le.Z.isBrowser){if("touch"===e.pointerType||window.navigator.msMaxTouchPoints&&window.navigator.msMaxTouchPoints>1)return"touch";if("mouse"===e.pointerType)return"mouse";if("pen"===e.pointerType)return"pen"}return"mouse"},pointerDownListener:function(e,t,r){var n,s,o,a,l,u,c,h,g,y,E;if(!t&&this._isPointerRegistered(e))return!1;if(this.hasPointerUp||(window.navigator.msPointerEnabled?le.Z.addEvent(this.document,"MSPointerUp",this.pointerUpListener,this):(le.Z.addEvent(this.document,"pointerup",this.pointerUpListener,this),le.Z.addEvent(this.document,"pointercancel",this.pointerUpListener,this)),this.hasPointerUp=!0),this.hasMouseHandlers&&this.removeMouseEventHandlers(),this.hasTouchHandlers&&this.removeTouchEventHandlers(),this.document.selection&&d.Z.isFunction(this.document.selection.empty))this.document.selection.empty();else if(window.getSelection&&(u=window.getSelection()).removeAllRanges)try{u.removeAllRanges()}catch{}if(this._inputDevice=this._getPointerInputDevice(e),this.options.precision.hasPoint=this.options.precision[h=this._inputDevice],a=this.getMousePosition(e),this._testForSelection(e),this.selectingMode)return this._startSelecting(a),void this.triggerEventHandlers(["touchstartselecting","pointerstartselecting","startselecting"],[e]);if(this.attr.drag.enabled&&t?(l=[t],this.mode=this.BOARD_MODE_DRAG):l=this.initMoveObject(a[0],a[1],e,h),c={num:e.pointerId,X:a[0],Y:a[1],Xprev:NaN,Yprev:NaN,Xstart:[],Ystart:[],Zstart:[]},l.length>0){for(y=l[l.length-1],g=!1,n=0;n<this.touches.length;n++)if(this.touches[n].obj===y){s=n,o=this.touches[n].targets.push(c)-1,g=!0;break}g||(o=0,s=this.touches.push({obj:y,targets:[c]})-1),this.dehighlightAll(),y.highlight(!0),this.saveStartPos(y,this.touches[s].targets[o]),e&&e.preventDefault&&!r&&e.preventDefault()}return this.touches.length>0&&!r&&(e.preventDefault(),e.stopPropagation()),!!le.Z.isBrowser&&("touch"!==this._getPointerInputDevice(e)?this.mode===this.BOARD_MODE_NONE&&this.mouseOriginMoveStart(e):(this._pointerStorePosition(e),e.touches=this._board_touches,1===e.touches.length&&this.mode===this.BOARD_MODE_NONE&&this.touchStartMoveOriginOneFinger(e)||2===e.touches.length&&(this.mode===this.BOARD_MODE_NONE||this.mode===this.BOARD_MODE_MOVE_ORIGIN)&&(this.mode===this.BOARD_MODE_MOVE_ORIGIN&&this.originMoveEnd(),this.gestureStartListener(e))),E="none",this.mode===this.BOARD_MODE_NONE&&d.Z.evaluate(this.attr.browserpan)&&!(d.Z.evaluate(this.attr.pan.enabled)&&!d.Z.evaluate(this.attr.pan.needtwofingers))&&(E="pan-x pan-y"),this.containerObj.style.touchAction=E,this.triggerEventHandlers(["touchstart","down","pointerdown","MSPointerDown"],[e]),!0)},pointerMoveListener:function(e){var t,r,n,s,o;if("touch"===this._getPointerInputDevice(e)&&!this._isPointerRegistered(e))return this.BOARD_MODE_NONE;if(!this.checkFrameRate(e))return!1;if(this.mode!==this.BOARD_MODE_DRAG&&(this.dehighlightAll(),this.displayInfobox(!1)),this.mode!==this.BOARD_MODE_NONE&&(e.preventDefault(),e.stopPropagation()),this.updateQuality=this.BOARD_QUALITY_LOW,this._inputDevice=this._getPointerInputDevice(e),this.options.precision.hasPoint=this.options.precision[o=this._inputDevice],this.selectingMode)n=this.getMousePosition(e),this._moveSelecting(n),this.triggerEventHandlers(["touchmoveselecting","moveselecting","pointermoveselecting"],[e,this.mode]);else if(!this.mouseOriginMove(e))if(this.mode===this.BOARD_MODE_DRAG){for(n=this.getMousePosition(e),t=0;t<this.touches.length;t++)for(s=this.touches[t].targets,r=0;r<s.length;r++)if(s[r].num===e.pointerId){s[r].X=n[0],s[r].Y=n[1],1===s.length?this.moveObject(n[0],n[1],this.touches[t],e,o):2===s.length&&(this.twoFingerMove(this.touches[t],e.pointerId,e),s[r].Xprev=n[0],s[r].Yprev=n[1]);break}}else"touch"===this._getPointerInputDevice(e)&&(this._pointerStorePosition(e),2===this._board_touches.length&&(e.touches=this._board_touches,this.gestureChangeListener(e))),n=this.getMousePosition(e),this.highlightElements(n[0],n[1],e,-1);return this.triggerEventHandlers(["pointermove","MSPointerMove","move"],[e,this.mode]),this.updateQuality=this.BOARD_QUALITY_HIGH,this.mode===this.BOARD_MODE_NONE},pointerUpListener:function(e){var t,r,n,s,o=!1;if(this.triggerEventHandlers(["touchend","up","pointerup","MSPointerUp"],[e]),this.displayInfobox(!1),e)for(t=0;t<this.touches.length;t++)for(s=this.touches[t].targets,r=0;r<s.length;r++)if(s[r].num===e.pointerId){s.splice(r,1),0===s.length&&this.touches.splice(t,1);break}if(this.originMoveEnd(),this.update(),this.selectingMode)this._stopSelecting(e),this.triggerEventHandlers(["touchstopselecting","pointerstopselecting","stopselecting"],[e]),this.stopSelectionMode();else for(t=this.downObjects.length-1;t>-1;t--){for(n=!1,r=0;r<this.touches.length;r++)this.touches[r].obj.id===this.downObjects[t].id&&(n=!0);n||(this.downObjects[t].triggerEventHandlers(["touchend","up","pointerup","MSPointerUp"],[e]),d.Z.exists(this.downObjects[t].coords)||(this.downObjects[t].snapToGrid(),this.downObjects[t].snapToPoints(),o=!0),this.downObjects.splice(t,1))}return this.hasPointerUp&&(window.navigator.msPointerEnabled?le.Z.removeEvent(this.document,"MSPointerUp",this.pointerUpListener,this):(le.Z.removeEvent(this.document,"pointerup",this.pointerUpListener,this),le.Z.removeEvent(this.document,"pointercancel",this.pointerUpListener,this)),this.hasPointerUp=!1),this._pointerClearTouches(e.pointerId),"touch"!==this._getPointerInputDevice(e)&&this.dehighlightAll(),o&&this.update(),!0},pointerLeaveListener:function(e){return this.displayInfobox(!1),this.dehighlightAll(),!0},touchStartListener:function(e){var t,r,n,s,o,l,u,c,g,y,a=this.options.precision.touch,h=e[D.Z.touchProperty];for(this.hasTouchEnd||(le.Z.addEvent(this.document,"touchend",this.touchEndListener,this),this.hasTouchEnd=!0),this.document.selection&&d.Z.isFunction(this.document.selection.empty)?this.document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),this._inputDevice="touch",this.options.precision.hasPoint=this.options.precision.touch,t=0;t<h.length;t++)h[t].jxg_isused=!1;for(t=0;t<this.touches.length;t++)for(y=this.touches[t].targets,s=0;s<y.length;s++){y[s].num=-1,a=this.options.precision.touch;do{for(o=0;o<h.length;o++)if(Math.abs(Math.pow(h[o].screenX-y[s].X,2)+Math.pow(h[o].screenY-y[s].Y,2))<a*a){y[s].num=o,y[s].X=h[o].screenX,y[s].Y=h[o].screenY,h[o].jxg_isused=!0;break}a*=2}while(-1===y[s].num&&a<this.options.precision.touchMax);-1===y[s].num&&(D.Z.debug("i couldn't find a targettouches for target no "+s+" on "+this.touches[t].obj.name+" ("+this.touches[t].obj.id+"). Removed the target."),D.Z.debug("eps = "+a+", touchMax = "+Rt.Z.precision.touchMax),y.splice(t,1))}for(t=0;t<h.length;t++)if(!h[t].jxg_isused){if(r=this.getMousePosition(e,t),this.selectingMode)return this._startSelecting(r),this.triggerEventHandlers(["touchstartselecting","startselecting"],[e]),e.preventDefault(),e.stopPropagation(),this.options.precision.hasPoint=this.options.precision.mouse,this.touches.length>0;if(0!==(n=this.initMoveObject(r[0],r[1],e,"touch")).length)if(g={num:t,X:h[t].screenX,Y:h[t].screenY,Xprev:NaN,Yprev:NaN,Xstart:[],Ystart:[],Zstart:[]},d.Z.isPoint(l=n[n.length-1])||l.elementClass===Y.Z.OBJECT_CLASS_TEXT||l.type===Y.Z.OBJECT_TYPE_TICKS||l.type===Y.Z.OBJECT_TYPE_IMAGE)this.saveStartPos(l,(c=[g])[0]),this.touches.push({obj:l,targets:c}),l.highlight(!0);else if(l.elementClass===Y.Z.OBJECT_CLASS_LINE||l.elementClass===Y.Z.OBJECT_CLASS_CIRCLE||l.elementClass===Y.Z.OBJECT_CLASS_CURVE||l.type===Y.Z.OBJECT_TYPE_POLYGON){for(u=!1,s=0;s<this.touches.length;s++)l.id===this.touches[s].obj.id&&(u=!0,1===this.touches[s].targets.length&&(this.saveStartPos(l,g),this.touches[s].targets.push(g)),h[t].jxg_isused=!0);u||(this.saveStartPos(l,(c=[g])[0]),this.touches.push({obj:l,targets:c}),l.highlight(!0))}h[t].jxg_isused=!0}return this.touches.length>0&&(e.preventDefault(),e.stopPropagation()),1===h.length&&this.mode===this.BOARD_MODE_NONE&&this.touchStartMoveOriginOneFinger(e)||2===h.length&&(this.mode===this.BOARD_MODE_NONE||this.mode===this.BOARD_MODE_MOVE_ORIGIN)&&(this.mode===this.BOARD_MODE_MOVE_ORIGIN&&this.originMoveEnd(),this.gestureStartListener(e)),this.options.precision.hasPoint=this.options.precision.mouse,this.triggerEventHandlers(["touchstart","down"],[e]),!1},touchMoveListener:function(e){var t,r,n,s,o=e[D.Z.touchProperty];if(!this.checkFrameRate(e))return!1;if(this.mode!==this.BOARD_MODE_NONE&&(e.preventDefault(),e.stopPropagation()),this.mode!==this.BOARD_MODE_DRAG&&(this.dehighlightAll(),this.displayInfobox(!1)),this._inputDevice="touch",this.options.precision.hasPoint=this.options.precision.touch,this.updateQuality=this.BOARD_QUALITY_LOW,this.selectingMode){for(t=0;t<o.length;t++)if(!o[t].jxg_isused){r=this.getMousePosition(e,t),this._moveSelecting(r),this.triggerEventHandlers(["touchmoves","moveselecting"],[e,this.mode]);break}}else if(!this.touchOriginMove(e))if(this.mode===this.BOARD_MODE_DRAG){for(t=0;t<this.touches.length;t++)if(1===(s=this.touches[t].targets).length){if(o[s[0].num]){if((r=this.getMousePosition(e,s[0].num))[0]<0||r[0]>this.canvasWidth||r[1]<0||r[1]>this.canvasHeight)return;s[0].X=r[0],s[0].Y=r[1],this.moveObject(r[0],r[1],this.touches[t],e,"touch")}}else if(2===s.length&&s[0].num>-1&&s[1].num>-1&&o[s[0].num]&&o[s[1].num]){if(r=this.getMousePosition(e,s[0].num),n=this.getMousePosition(e,s[1].num),r[0]<0||r[0]>this.canvasWidth||r[1]<0||r[1]>this.canvasHeight||n[0]<0||n[0]>this.canvasWidth||n[1]<0||n[1]>this.canvasHeight)return;s[0].X=r[0],s[0].Y=r[1],s[1].X=n[0],s[1].Y=n[1],this.twoFingerMove(this.touches[t],s[0].num,e),s[0].Xprev=r[0],s[0].Yprev=r[1],s[1].Xprev=n[0],s[1].Yprev=n[1]}}else 2===o.length&&this.gestureChangeListener(e),r=this.getMousePosition(e,0),this.highlightElements(r[0],r[1],e,-1);return this.mode!==this.BOARD_MODE_DRAG&&this.displayInfobox(!1),this.triggerEventHandlers(["touchmove","move"],[e,this.mode]),this.options.precision.hasPoint=this.options.precision.mouse,this.updateQuality=this.BOARD_QUALITY_HIGH,this.mode===this.BOARD_MODE_NONE},touchEndListener:function(e){var t,r,n,a,l,c,s=this.options.precision.touch,o=[],u=e&&e[D.Z.touchProperty],h=!1;if(this.triggerEventHandlers(["touchend","up"],[e]),this.displayInfobox(!1),this.selectingMode)this._stopSelecting(e),this.triggerEventHandlers(["touchstopselecting","stopselecting"],[e]),this.stopSelectionMode();else if(u&&u.length>0){for(t=0;t<this.touches.length;t++)o[t]=this.touches[t];for(this.touches.length=0,t=0;t<u.length;t++)u[t].jxg_isused=!1;for(t=0;t<o.length;t++){for(a=!1,l=0,c=o[t].targets,r=0;r<c.length;r++)for(c[r].found=!1,n=0;n<u.length;n++)if(Math.abs(Math.pow(u[n].screenX-c[r].X,2)+Math.pow(u[n].screenY-c[r].Y,2))<s*s){c[r].found=!0,c[r].num=n,c[r].X=u[n].screenX,c[r].Y=u[n].screenY,l+=1;break}if(d.Z.isPoint(o[t].obj)?a=c[0]&&c[0].found:o[t].obj.elementClass===Y.Z.OBJECT_CLASS_LINE?a=c[0]&&c[0].found||c[1]&&c[1].found:o[t].obj.elementClass===Y.Z.OBJECT_CLASS_CIRCLE&&(a=1===l||3===l),a)for(this.touches.push({obj:o[t].obj,targets:[]}),r=0;r<c.length;r++)c[r].found&&this.touches[this.touches.length-1].targets.push({num:c[r].num,X:c[r].screenX,Y:c[r].screenY,Xprev:NaN,Yprev:NaN,Xstart:c[r].Xstart,Ystart:c[r].Ystart,Zstart:c[r].Zstart});else o[t].obj.noHighlight()}}else this.touches.length=0;for(t=this.downObjects.length-1;t>-1;t--){for(a=!1,r=0;r<this.touches.length;r++)this.touches[r].obj.id===this.downObjects[t].id&&(a=!0);a||(this.downObjects[t].triggerEventHandlers(["touchup","up"],[e]),d.Z.exists(this.downObjects[t].coords)||(this.downObjects[t].snapToGrid(),this.downObjects[t].snapToPoints(),h=!0),this.downObjects.splice(t,1))}return(!u||0===u.length)&&(this.hasTouchEnd&&(le.Z.removeEvent(this.document,"touchend",this.touchEndListener,this),this.hasTouchEnd=!1),this.dehighlightAll(),this.updateQuality=this.BOARD_QUALITY_HIGH,this.originMoveEnd(),h&&this.update()),!0},mouseDownListener:function(e){var t,r,n;if(this.document.selection&&d.Z.isFunction(this.document.selection.empty)?this.document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),!this.hasMouseUp)return le.Z.addEvent(this.document,"mouseup",this.mouseUpListener,this),this.hasMouseUp=!0,this._inputDevice="mouse",this.options.precision.hasPoint=this.options.precision.mouse,t=this.getMousePosition(e),this._testForSelection(e),this.selectingMode?(this._startSelecting(t),void this.triggerEventHandlers(["mousestartselecting","startselecting"],[e])):(0===(r=this.initMoveObject(t[0],t[1],e,"mouse")).length?(this.mode=this.BOARD_MODE_NONE,n=!0):(this.mouse={obj:null,targets:[{X:t[0],Y:t[1],Xprev:NaN,Yprev:NaN}]},this.mouse.obj=r[r.length-1],this.dehighlightAll(),this.mouse.obj.highlight(!0),this.mouse.targets[0].Xstart=[],this.mouse.targets[0].Ystart=[],this.mouse.targets[0].Zstart=[],this.saveStartPos(this.mouse.obj,this.mouse.targets[0]),e&&e.preventDefault?e.preventDefault():window.event&&(window.event.returnValue=!1)),this.mode===this.BOARD_MODE_NONE&&(n=this.mouseOriginMoveStart(e)),this.triggerEventHandlers(["mousedown","down"],[e]),n)},mouseMoveListener:function(e){var t;if(!this.checkFrameRate(e))return!1;t=this.getMousePosition(e),this.updateQuality=this.BOARD_QUALITY_LOW,this.mode!==this.BOARD_MODE_DRAG&&(this.dehighlightAll(),this.displayInfobox(!1)),this.selectingMode?(this._moveSelecting(t),this.triggerEventHandlers(["mousemoveselecting","moveselecting"],[e,this.mode])):this.mouseOriginMove(e)||(this.mode===this.BOARD_MODE_DRAG?this.moveObject(t[0],t[1],this.mouse,e,"mouse"):this.highlightElements(t[0],t[1],e,-1),this.triggerEventHandlers(["mousemove","move"],[e,this.mode])),this.updateQuality=this.BOARD_QUALITY_HIGH},mouseUpListener:function(e){var t;if(!1===this.selectingMode&&this.triggerEventHandlers(["mouseup","up"],[e]),this.updateQuality=this.BOARD_QUALITY_HIGH,this.mouse&&this.mouse.obj&&(d.Z.exists(this.mouse.obj.coords)||(this.mouse.obj.snapToGrid(this.mouse.targets[0]),this.mouse.obj.snapToPoints())),this.originMoveEnd(),this.dehighlightAll(),this.update(),this.selectingMode)this._stopSelecting(e),this.triggerEventHandlers(["mousestopselecting","stopselecting"],[e]),this.stopSelectionMode();else for(t=0;t<this.downObjects.length;t++)this.downObjects[t].triggerEventHandlers(["mouseup","up"],[e]);this.downObjects.length=0,this.hasMouseUp&&(le.Z.removeEvent(this.document,"mouseup",this.mouseUpListener,this),this.hasMouseUp=!1),this.mouse=null},mouseWheelListener:function(e){if(!this.attr.zoom.wheel||!this._isRequiredKeyPressed(e,"zoom"))return!0;var t=(e=e||window.event).detail?-e.detail:e.wheelDelta/40,r=new ge.Z(Y.Z.COORDS_BY_SCREEN,this.getMousePosition(e),this);return t>0?this.zoomIn(r.usrCoords[1],r.usrCoords[2]):this.zoomOut(r.usrCoords[1],r.usrCoords[2]),this.triggerEventHandlers(["mousewheel"],[e]),e.preventDefault(),!1},keyDownListener:function(e){var r,n,s,o,y,E,t=e.target.id,a=0,l=0,u=d.Z.evaluate(this.attr.keyboard.dx)/this.unitX,c=d.Z.evaluate(this.attr.keyboard.dy)/this.unitY,h=!1,g=!0;return!(!this.attr.keyboard.enabled||""===t||(o=this.containerObj.shadowRoot||document,o.activeElement&&(n=o.activeElement,"INPUT"===n.tagName||"textarea"===n.tagName)))&&(r=t.replace(this.containerObj.id+"_",""),n=this.select(r),d.Z.exists(n.coords)&&(E=n.coords.usrCoords.slice(1)),d.Z.evaluate(this.attr.keyboard.panshift)&&e.shiftKey||d.Z.evaluate(this.attr.keyboard.panctrl)&&e.ctrlKey?(!0===d.Z.evaluate(this.attr.zoom.enabled)&&(h=!0),38===e.keyCode?this.clickUpArrow():40===e.keyCode?this.clickDownArrow():37===e.keyCode?this.clickLeftArrow():39===e.keyCode?this.clickRightArrow():h&&171===e.keyCode?this.zoomIn():h&&173===e.keyCode?this.zoomOut():h&&79===e.keyCode?this.zoom100():g=!1):(d.Z.exists(n.visProp)&&(d.Z.exists(n.visProp.snaptogrid)&&n.visProp.snaptogrid&&d.Z.evaluate(n.visProp.snapsizex)&&d.Z.evaluate(n.visProp.snapsizey)?(a=(s=n.getSnapSizes())[0],l=s[1],u=Math.max(a,u),c=Math.max(l,c)):d.Z.exists(n.visProp.attracttogrid)&&n.visProp.attracttogrid&&d.Z.evaluate(n.visProp.attractordistance)&&d.Z.evaluate(n.visProp.attractorunit)&&(l=a=1.1*d.Z.evaluate(n.visProp.attractordistance),"screen"===d.Z.evaluate(n.visProp.attractorunit)&&(a/=this.unitX,l/=this.unitX),u=Math.max(a,u),c=Math.max(l,c))),38===e.keyCode?y=[0,c]:40===e.keyCode?y=[0,-c]:37===e.keyCode?y=[-u,0]:39===e.keyCode?y=[u,0]:g=!1,y&&n.isDraggable&&n.visPropCalc.visible&&(this.geonextCompatibilityMode&&(d.Z.isPoint(n)||n.elementClass===Y.Z.OBJECT_CLASS_TEXT)||!this.geonextCompatibilityMode)&&!d.Z.evaluate(n.visProp.fixed)&&(this.mode=this.BOARD_MODE_DRAG,d.Z.exists(n.coords)&&(y[0]+=E[0],y[1]+=E[1]),d.Z.exists(n.coords)?(n.setPosition(D.Z.COORDS_BY_USER,y),this.updateInfobox(n)):(this.displayInfobox(!1),n.setPositionDirectly(Y.Z.COORDS_BY_USER,y,[0,0])),this.triggerEventHandlers(["keymove","move"],[e,this.mode]),n.triggerEventHandlers(["keydrag","drag"],[e]),this.mode=this.BOARD_MODE_NONE)),this.update(),g&&d.Z.exists(e.preventDefault)&&e.preventDefault(),g)},keyFocusInListener:function(e){var r,n,t=e.target.id;if(!this.attr.keyboard.enabled||""===t)return!1;r=t.replace(this.containerObj.id+"_",""),n=this.select(r),d.Z.exists(n.highlight)&&(n.highlight(!0),this.focusObjects=[r],n.triggerEventHandlers(["hit"],[e])),d.Z.exists(n.coords)&&this.updateInfobox(n)},keyFocusOutListener:function(e){if(!this.attr.keyboard.enabled)return!1;this.focusObjects=[],this.dehighlightAll(),this.displayInfobox(!1)},updateContainerDims:function(){var e,t,r,n,s,o;e=(r=this.containerObj.getBoundingClientRect()).width,t=r.height,window&&window.getComputedStyle&&(n=window.getComputedStyle(this.containerObj,null),s=parseFloat(n.getPropertyValue("border-left-width"))+parseFloat(n.getPropertyValue("border-right-width")),isNaN(s)||(e-=s),o=parseFloat(n.getPropertyValue("border-top-width"))+parseFloat(n.getPropertyValue("border-bottom-width")),isNaN(o)||(t-=o)),!(e<=0||t<=0||isNaN(e)||isNaN(t))&&(isNaN(this.getBoundingBox()[0])&&this.setBoundingBox(this.attr.boundingbox,this.keepaspectratio,"keep"),(!d.Z.exists(this._prevDim)||this._prevDim.w!==e||this._prevDim.h!==t)&&(this.resizeContainer(e,t,!0),this._prevDim={w:e,h:t}))},startResizeObserver:function(){var e=this;!le.Z.isBrowser||!this.attr.resize||!this.attr.resize.enabled||(this.resizeObserver=new ResizeObserver(function(t){e._isResizing||(e._isResizing=!0,window.setTimeout(function(){try{e.updateContainerDims()}catch{e.stopResizeObserver()}finally{e._isResizing=!1}},e.attr.resize.throttle))}),this.resizeObserver.observe(this.containerObj))},stopResizeObserver:function(){!le.Z.isBrowser||!this.attr.resize||!this.attr.resize.enabled||d.Z.exists(this.resizeObserver)&&this.resizeObserver.unobserve(this.containerObj)},resizeListener:function(){var e=this;!le.Z.isBrowser||!this.attr.resize||!this.attr.resize.enabled||!this._isScrolling&&!this._isResizing&&(this._isResizing=!0,window.setTimeout(function(){e.updateContainerDims(),e._isResizing=!1},this.attr.resize.throttle))},scrollListener:function(e){var t=this;le.Z.isBrowser&&(this._isScrolling||(this._isScrolling=!0,window.setTimeout(function(){t._isScrolling=!1},66)))},startIntersectionObserver:function(){var e=this;try{this.intersectionObserver=new IntersectionObserver(function(r){isNaN(e.getBoundingBox()[0])&&e.updateContainerDims()},{root:null,rootMargin:"0px",threshold:.8}),this.intersectionObserver.observe(e.containerObj)}catch{console.log("JSXGraph: IntersectionObserver not available in this browser.")}},stopIntersectionObserver:function(){d.Z.exists(this.intersectionObserver)&&this.intersectionObserver.unobserve(this.containerObj)},initInfobox:function(e){var t=d.Z.copyAttributes(e,this.options,"infobox");return t.id=this.id+"_infobox",this.infobox=this.create("text",[0,0,"0,0"],t),this.infobox.dump=!1,this.displayInfobox(!1),this},updateInfobox:function(e){var t,r,n,s,o,a,l,u=d.Z.evaluate(e.visProp.showinfobox);return!d.Z.evaluate(this.attr.showinfobox)&&"inherit"===u||!u||d.Z.isPoint(e)&&(n=e.coords.usrCoords[1],s=e.coords.usrCoords[2],a=d.Z.evaluate(this.infobox.visProp.distancex),l=d.Z.evaluate(this.infobox.visProp.distancey),this.infobox.setCoords(n+a/this.unitX,s+l/this.unitY),o=d.Z.evaluate(e.visProp.infoboxdigits),"string"!=typeof e.infoboxText?("auto"===o?this.infobox.useLocale()?(t=this.infobox.formatNumberLocale(n),r=this.infobox.formatNumberLocale(s)):(t=d.Z.autoDigits(n),r=d.Z.autoDigits(s)):d.Z.isNumber(o)?this.infobox.useLocale()?(t=this.infobox.formatNumberLocale(n,o),r=this.infobox.formatNumberLocale(s,o)):(t=d.Z.toFixed(n,o),r=d.Z.toFixed(s,o)):(t=n,r=s),this.highlightInfobox(t,r,e)):this.highlightCustomInfobox(e.infoboxText,e),this.displayInfobox(!0)),this},displayInfobox:function(e){return!e&&this.focusObjects.length>0&&this.select(this.focusObjects[0]).elementClass===Y.Z.OBJECT_CLASS_POINT||this.infobox.hiddenByParent===e&&(this.infobox.hiddenByParent=!e,this.infobox.prepareUpdate().updateVisibility(e).updateRenderer()),this},showInfobox:function(e){return this.displayInfobox(e)},highlightInfobox:function(e,t,r){return this.highlightCustomInfobox("("+e+", "+t+")",r),this},highlightCustomInfobox:function(e,t){return this.infobox.setText(e),this},dehighlightAll:function(){var e,t,r={},n=!1;for(e in this.highlightedObjects)this.highlightedObjects.hasOwnProperty(e)&&(t=this.highlightedObjects[e],this.focusObjects.indexOf(e)<0?((this.hasMouseHandlers||this.hasPointerHandlers)&&t.noHighlight(),n=!0):r[e]=t);return this.highlightedObjects=r,"canvas"===this.renderer.type&&n&&(this.prepareUpdate(),this.renderer.suspendRedraw(this),this.updateRenderer(),this.renderer.unsuspendRedraw()),this},getScrCoordsOfMouse:function(e,t){return[e,t]},getUsrCoordsOfMouse:function(e){var t=this.getCoordsTopLeftCorner(),r=le.Z.getPosition(e,null,this.document);return new ge.Z(Y.Z.COORDS_BY_SCREEN,[r[0]-t[0],r[1]-t[1]],this).usrCoords.slice(1)},getAllUnderMouse:function(e){var t=this.getAllObjectsUnderMouse(e);return t.push(this.getUsrCoordsOfMouse(e)),t},getAllObjectsUnderMouse:function(e){var a,l,t=this.getCoordsTopLeftCorner(),r=le.Z.getPosition(e,null,this.document),n=r[0]-t[0],s=r[1]-t[1],o=[],u=this.objectsList.length;for(a=0;a<u;a++)(l=this.objectsList[a]).visPropCalc.visible&&l.hasPoint&&l.hasPoint(n,s)&&(o[o.length]=l);return o},updateCoords:function(){var e,t,r=this.objectsList.length;for(t=0;t<r;t++)d.Z.exists((e=this.objectsList[t]).coords)&&(d.Z.evaluate(e.visProp.frozen)?e.is3D?e.element2D.coords.screen2usr():e.coords.screen2usr():e.is3D?e.element2D.coords.usr2screen():e.coords.usr2screen());return this},moveOrigin:function(e,t,r){var n,s,o,a;return d.Z.exists(e)&&d.Z.exists(t)&&(n=this.origin.scrCoords[1],s=this.origin.scrCoords[2],this.origin.scrCoords[1]=e,this.origin.scrCoords[2]=t,r&&(this.origin.scrCoords[1]-=this.drag_dx,this.origin.scrCoords[2]-=this.drag_dy),o=new ge.Z(Y.Z.COORDS_BY_SCREEN,[0,0],this).usrCoords,a=new ge.Z(Y.Z.COORDS_BY_SCREEN,[this.canvasWidth,this.canvasHeight],this).usrCoords,(o[1]<this.maxboundingbox[0]||o[2]>this.maxboundingbox[1]||a[1]>this.maxboundingbox[2]||a[2]<this.maxboundingbox[3])&&(this.origin.scrCoords[1]=n,this.origin.scrCoords[2]=s)),this.updateCoords().clearTraces().fullUpdate(),this.triggerEventHandlers(["boundingbox"]),this},addConditions:function(e){var t,r,n,s,o,a,l,u=[],c=e.indexOf("<data>"),h=e.indexOf("</data>"),g=function(N,L,R,H){return function(){var V,U;U=(V=N.select(L.id)).coords.usrCoords[H],V.setPositionDirectly(Y.Z.COORDS_BY_USER,2===H?[R(),U]:[U,R()]),V.prepareUpdate().update()}},y=function(N,L,R){return function(){var H,V;H=N.select(L.id),V=R(),H.setAttribute({visible:V})}},E=function(N,L,R,H){return function(){var V,U;V=N.select(L.id),U=R(),"strokewidth"===H?V.visProp.strokewidth=U:(U=Fi.Z.rgba2rgbo(U),V.visProp[H+"color"]=U[0],V.visProp[H+"opacity"]=U[1])}},w=function(N,L,R){return function(){N.select(L.id).position=R()}},T=function(N,L,R){return function(){N.select(L.id).setStyle(R())}};if(!(c<0)){for(;c>=0;){if(r=(t=e.slice(c+6,h)).indexOf("="),n=t.slice(0,r),s=t.slice(r+1),r=n.indexOf("."),o=n.slice(0,r),a=this.elementsByName[d.Z.unescapeHTML(o)],l=n.slice(r+1).replace(/\s+/g,"").toLowerCase(),s=d.Z.createFunction(s,this,"",!0),d.Z.exists(this.elementsByName[o]))switch(l){case"x":u.push(g(this,a,s,2));break;case"y":u.push(g(this,a,s,1));break;case"visible":u.push(y(this,a,s));break;case"position":u.push(w(this,a,s));break;case"stroke":u.push(E(this,a,s,"stroke"));break;case"style":u.push(T(this,a,s));break;case"strokewidth":u.push(E(this,a,s,"strokewidth"));break;case"fill":u.push(E(this,a,s,"fill"));break;case"label":break;default:D.Z.debug('property "'+l+'" in conditions not yet implemented:'+s)}else D.Z.debug("debug conditions: |"+o+"| undefined");c=(e=e.slice(h+7)).indexOf("<data>"),h=e.indexOf("</data>")}this.updateConditions=function(){var N;for(N=0;N<u.length;N++)u[N]();return this.prepareUpdate().updateElements(),!0},this.updateConditions()}},updateConditions:function(){return!1},calculateSnapSizes:function(){var e=new ge.Z(Y.Z.COORDS_BY_USER,[0,0],this),t=new ge.Z(Y.Z.COORDS_BY_USER,[this.options.grid.gridX,this.options.grid.gridY],this),r=e.scrCoords[1]-t.scrCoords[1],n=e.scrCoords[2]-t.scrCoords[2];for(this.options.grid.snapSizeX=this.options.grid.gridX;Math.abs(r)>25;)this.options.grid.snapSizeX*=2,r/=2;for(this.options.grid.snapSizeY=this.options.grid.gridY;Math.abs(n)>25;)this.options.grid.snapSizeY*=2,n/=2;return this},applyZoom:function(){return this.updateCoords().calculateSnapSizes().clearTraces().fullUpdate(),this},zoomIn:function(e,t){var r=this.getBoundingBox(),n=this.attr.zoom.factorx,s=this.attr.zoom.factory,o=(r[2]-r[0])*(1-1/n),a=(r[1]-r[3])*(1-1/s),l=.5,u=.5,c=this.attr.zoom.eps||this.attr.zoom.min||.001;return this.zoomX>this.attr.zoom.max&&n>1||this.zoomY>this.attr.zoom.max&&s>1||this.zoomX<c&&n<1||this.zoomY<c&&s<1?this:(d.Z.isNumber(e)&&d.Z.isNumber(t)&&(l=(e-r[0])/(r[2]-r[0]),u=(r[1]-t)/(r[1]-r[3])),this.setBoundingBox([r[0]+o*l,r[1]-a*u,r[2]-o*(1-l),r[3]+a*(1-u)],this.keepaspectratio,"update"),this.applyZoom())},zoomOut:function(e,t){var r=this.getBoundingBox(),o=(r[2]-r[0])*(1-this.attr.zoom.factorx),a=(r[1]-r[3])*(1-this.attr.zoom.factory),l=.5,u=.5,c=this.attr.zoom.eps||this.attr.zoom.min||.001;return this.zoomX<c||this.zoomY<c?this:(d.Z.isNumber(e)&&d.Z.isNumber(t)&&(l=(e-r[0])/(r[2]-r[0]),u=(r[1]-t)/(r[1]-r[3])),this.setBoundingBox([r[0]+o*l,r[1]-a*u,r[2]-o*(1-l),r[3]+a*(1-u)],this.keepaspectratio,"update"),this.applyZoom())},zoom100:function(){var e,t,r;return d.Z.exists(this.attr.boundingbox)?this.setBoundingBox(this.attr.boundingbox,this.keepaspectratio,"reset"):(e=this.getBoundingBox(),this.setBoundingBox([e[0]+(t=(e[2]-e[0])*(1-this.zoomX)*.5),e[1]-(r=(e[1]-e[3])*(1-this.zoomY)*.5),e[2]-t,e[3]+r],this.keepaspectratio,"reset")),this.applyZoom()},zoomAllPoints:function(){var e,r,n,s,o=0,a=0,l=0,u=0,c=this.objectsList.length;for(e=0;e<c;e++)d.Z.isPoint(s=this.objectsList[e])&&s.visPropCalc.visible&&(s.coords.usrCoords[1]<o?o=s.coords.usrCoords[1]:s.coords.usrCoords[1]>a&&(a=s.coords.usrCoords[1]),s.coords.usrCoords[2]>u?u=s.coords.usrCoords[2]:s.coords.usrCoords[2]<l&&(l=s.coords.usrCoords[2]));return this.setBoundingBox([o-(r=50/this.unitX),u+(n=50/this.unitY),a+r,l-n],this.keepaspectratio,"update"),this.applyZoom()},zoomElements:function(e){var t,n,o,a,c,s=[1/0,-1/0,-1/0,1/0];if(!d.Z.isArray(e)||0===e.length)return this;for(t=0;t<e.length;t++)n=this.select(e[t]).bounds(),d.Z.isArray(n)&&(n[0]<s[0]&&(s[0]=n[0]),n[1]>s[1]&&(s[1]=n[1]),n[2]>s[2]&&(s[2]=n[2]),n[3]<s[3]&&(s[3]=n[3]));return d.Z.isArray(s)&&(o=.5*(s[0]+s[2]),a=.5*(s[1]+s[3]),c=Math.max(1.5*(s[2]-s[0])*.5,1.5*(s[1]-s[3])*.5),this.setBoundingBox([o-c,a+c,o+c,a-c],this.keepaspectratio,"update")),this},setZoom:function(e,t){var r=this.attr.zoom.factorx,n=this.attr.zoom.factory;return this.attr.zoom.factorx=e/this.zoomX,this.attr.zoom.factory=t/this.zoomY,this.zoomIn(),this.attr.zoom.factorx=r,this.attr.zoom.factory=n,this},removeObject:function(e,t){var r,n;if(d.Z.isArray(e)){for(n=0;n<e.length;n++)this.removeObject(e[n]);return this}if(e=this.select(e),!d.Z.exists(e)||d.Z.isString(e))return this;try{for(r in e.childElements)e.childElements.hasOwnProperty(r)&&e.childElements[r].board.removeObject(e.childElements[r]);for(r in e.objects)e.objects.hasOwnProperty(r)&&e.objects[r].board.removeObject(e.objects[r]);if(t)for(r in this.objects)this.objects.hasOwnProperty(r)&&d.Z.exists(this.objects[r].childElements)&&d.Z.exists(this.objects[r].childElements.hasOwnProperty(e.id))&&(delete this.objects[r].childElements[e.id],delete this.objects[r].descendants[e.id]);else if(d.Z.exists(e.ancestors))for(r in e.ancestors)e.ancestors.hasOwnProperty(r)&&d.Z.exists(e.ancestors[r].childElements)&&d.Z.exists(e.ancestors[r].childElements.hasOwnProperty(e.id))&&(delete e.ancestors[r].childElements[e.id],delete e.ancestors[r].descendants[e.id]);if(e._pos>-1)for(this.objectsList.splice(e._pos,1),n=e._pos;n<this.objectsList.length;n++)this.objectsList[n]._pos--;else e.type!==Y.Z.OBJECT_TYPE_TURTLE&&D.Z.debug("Board.removeObject: object "+e.id+" not found in list.");delete this.objects[e.id],delete this.elementsByName[e.name],e.visProp&&d.Z.evaluate(e.visProp.trace)&&e.clearTrace(),d.Z.exists(e.remove)&&e.remove()}catch(s){D.Z.debug(e.id+": Could not be removed: "+s)}return this.update(),this},removeAncestors:function(e){var t;for(t in e.ancestors)e.ancestors.hasOwnProperty(t)&&this.removeAncestors(e.ancestors[t]);return this.removeObject(e),this},initGeonextBoard:function(){var e,t,r;return e=this.create("point",[0,0],{id:this.id+"g00e0",name:"Ursprung",withLabel:!1,visible:!1,fixed:!0}),t=this.create("point",[1,0],{id:this.id+"gX0e0",name:"Punkt_1_0",withLabel:!1,visible:!1,fixed:!0}),r=this.create("point",[0,1],{id:this.id+"gY0e0",name:"Punkt_0_1",withLabel:!1,visible:!1,fixed:!0}),this.create("line",[e,t],{id:this.id+"gXLe0",name:"X-Achse",withLabel:!1,visible:!1}),this.create("line",[e,r],{id:this.id+"gYLe0",name:"Y-Achse",withLabel:!1,visible:!1}),this},resizeContainer:function(e,t,r,n){var s,o,a;return o=this.canvasWidth,a=this.canvasHeight,n||(s=this.getBoundingBox()),this.canvasWidth=Math.max(parseFloat(e),q.Z.eps),this.canvasHeight=Math.max(parseFloat(t),q.Z.eps),r||(this.containerObj.style.width=this.canvasWidth+"px",this.containerObj.style.height=this.canvasHeight+"px"),this.renderer.resize(this.canvasWidth,this.canvasHeight),n?this.moveOrigin(this.origin.scrCoords[1]+(this.canvasWidth-o)/2,this.origin.scrCoords[2]+(this.canvasHeight-a)/2):this.setBoundingBox(s,this.keepaspectratio,"keep"),this},showDependencies:function(){var e,t,r,n,s;for(e in t="<p>\n",this.objects)if(this.objects.hasOwnProperty(e)){for(r in s=0,this.objects[e].childElements)this.objects[e].childElements.hasOwnProperty(r)&&(s+=1);for(r in s>=0&&(t+="<strong>"+this.objects[e].id+":</strong> "),this.objects[e].childElements)this.objects[e].childElements.hasOwnProperty(r)&&(t+=this.objects[e].childElements[r].id+"("+this.objects[e].childElements[r].name+"), ");t+="<p>\n"}return t+="</p>\n",(n=window.open()).document.open(),n.document.write(t),n.document.close(),this},showXML:function(){var e=window.open("");return e.document.open(),e.document.write("<pre>"+d.Z.escapeHTML(this.xmlString)+"</pre>"),e.document.close(),this},prepareUpdate:function(){var e,t,r=this.objectsList.length;for(e=0;e<r;e++)(t=this.objectsList[e]).needsUpdate=t.needsRegularUpdate||this.needsFullUpdate;for(e in this.groups)this.groups.hasOwnProperty(e)&&((t=this.groups[e]).needsUpdate=t.needsRegularUpdate||this.needsFullUpdate);return this},updateElements:function(e){var t,r;for(e=this.select(e),t=0;t<this.objectsList.length;t++)r=this.objectsList[t],this.needsFullUpdate&&r.elementClass===Y.Z.OBJECT_CLASS_TEXT&&r.updateSize(),r.update(!d.Z.exists(e)||r.id!==e.id).updateVisibility();for(t in this.groups)this.groups.hasOwnProperty(t)&&this.groups[t].update(e);return this},updateRenderer:function(){var e,t=this.objectsList.length;if(this.renderer){if("canvas"===this.renderer.type)this.updateRendererCanvas();else for(e=0;e<t;e++)this.objectsList[e].updateRenderer();return this}},updateRendererCanvas:function(){var e,t,r,n,s,o=this.objectsList.length,a=this.options.layer,l=this.options.layer.numlayers,u=Number.NEGATIVE_INFINITY;for(r=0;r<l;r++){for(s in n=Number.POSITIVE_INFINITY,a)a.hasOwnProperty(s)&&a[s]>u&&a[s]<n&&(n=a[s]);for(u=n,e=0;e<o;e++)(t=this.objectsList[e]).visProp.layer===n&&t.prepareUpdate().updateRenderer()}return this},addHook:function(e,t,r){return D.Z.deprecated("Board.addHook()","Board.on()"),t=d.Z.def(t,"update"),r=d.Z.def(r,this),this.hooks.push([t,e]),this.on(t,e,r),this.hooks.length-1},addEvent:D.Z.shortcut(D.Z.Board.prototype,"on"),removeHook:function(e){return D.Z.deprecated("Board.removeHook()","Board.off()"),this.hooks[e]&&(this.off(this.hooks[e][0],this.hooks[e][1]),this.hooks[e]=null),this},removeEvent:D.Z.shortcut(D.Z.Board.prototype,"off"),updateHooks:function(e){var t=Array.prototype.slice.call(arguments,0);return D.Z.deprecated("Board.updateHooks()","Board.triggerEventHandlers()"),t[0]=d.Z.def(t[0],"update"),this.triggerEventHandlers([t[0]],arguments),this},addChild:function(e){return d.Z.exists(e)&&d.Z.exists(e.containerObj)&&(this.dependentBoards.push(e),this.update()),this},removeChild:function(e){var t;for(t=this.dependentBoards.length-1;t>=0;t--)this.dependentBoards[t]===e&&this.dependentBoards.splice(t,1);return this},update:function(e){var t,r,n,s,o;if(this.inUpdate||this.isSuspendedUpdate)return this;for(this.inUpdate=!0,"all"===this.attr.minimizereflow&&this.containerObj&&"vml"!==this.renderer.type&&(o=this.document.activeElement,s=this.renderer.removeToInsertLater(this.containerObj)),"svg"===this.attr.minimizereflow&&"svg"===this.renderer.type&&(o=this.document.activeElement,s=this.renderer.removeToInsertLater(this.renderer.svgRoot)),this.prepareUpdate().updateElements(e).updateConditions(),this.renderer.suspendRedraw(this),this.updateRenderer(),this.renderer.unsuspendRedraw(),this.triggerEventHandlers(["update"],[]),s&&(s(),o.focus()),r=this.dependentBoards.length,t=0;t<r;t++)d.Z.exists(n=this.dependentBoards[t])&&n!==this&&(n.updateQuality=this.updateQuality,n.prepareUpdate().updateElements().updateConditions(),n.renderer.suspendRedraw(),n.updateRenderer(),n.renderer.unsuspendRedraw(),n.triggerEventHandlers(["update"],[]));return this.inUpdate=!1,this},fullUpdate:function(){return this.needsFullUpdate=!0,this.update(),this.needsFullUpdate=!1,this},addGrid:function(){return this.create("grid",[]),this},removeGrids:function(){var e;for(e=0;e<this.grids.length;e++)this.removeObject(this.grids[e]);return this.grids.length=0,this.update(),this},create:function(e,t,r){var n,s;for(e=e.toLowerCase(),d.Z.exists(t)||(t=[]),d.Z.exists(r)||(r={}),s=0;s<t.length;s++)d.Z.isString(t[s])&&("text"!==e||2!==s)&&("solidofrevolution3d"!==e||2!==s)&&("input"!==e&&"checkbox"!==e&&"button"!==e||2!==s&&3!==s)&&"curve"!==e&&"functiongraph"!==e&&(t[s]=this.select(t[s]));if(!d.Z.isFunction(D.Z.elements[e]))throw new Error("JSXGraph: create: Unknown element type given: "+e);return n=D.Z.elements[e](this,t,r),d.Z.exists(n)?(n.prepareUpdate&&n.update&&n.updateRenderer&&n.fullUpdate(),n):(D.Z.debug("JSXGraph: create: failure creating "+e),n)},createElement:function(){return D.Z.deprecated("Board.createElement()","Board.create()"),this.create.apply(this,arguments)},clearTraces:function(){var e;for(e=0;e<this.objectsList.length;e++)this.objectsList[e].clearTrace();return this.numTraces=0,this},suspendUpdate:function(){return this.inUpdate||(this.isSuspendedUpdate=!0),this},unsuspendUpdate:function(){return this.isSuspendedUpdate&&(this.isSuspendedUpdate=!1,this.fullUpdate()),this},setBoundingBox:function(e,t,r){var n,s,o,a,h,g,y,E,w,l=0,u=0,c=1,T=le.Z.getDimensions(this.container,this.document);return d.Z.isArray(e)?(e[0]<this.maxboundingbox[0]||e[1]>this.maxboundingbox[1]||e[2]>this.maxboundingbox[2]||e[3]<this.maxboundingbox[3]||(d.Z.exists(r)||(r="reset"),o=this.unitX,a=this.unitY,this.canvasWidth=parseFloat(T.width),this.canvasHeight=parseFloat(T.height),s=this.canvasWidth,n=this.canvasHeight,t?(h=o/a,"keep"===r&&(c=this.zoomX/this.zoomY),E=o*(g=e[2]-e[0]),w=a*(y=e[1]-e[3]),s>=n?E>=w?(this.unitY=n/y,this.unitX=this.unitY*h):(this.unitY=n/Math.abs(g)*q.Z.sign(y)/c,this.unitX=this.unitY*h):w>E?(this.unitX=s/g,this.unitY=this.unitX/h):(this.unitX=s/Math.abs(y)*q.Z.sign(g)*c,this.unitY=this.unitX/h),l=.5*(s/this.unitX-g),u=.5*(n/this.unitY-y),this.keepaspectratio=!0):(this.unitX=s/(e[2]-e[0]),this.unitY=n/(e[1]-e[3]),this.keepaspectratio=!1),this.moveOrigin(-this.unitX*(e[0]-l),this.unitY*(e[1]+u)),"update"===r?(this.zoomX*=this.unitX/o,this.zoomY*=this.unitY/a):"reset"===r&&(this.zoomX=d.Z.exists(this.attr.zoomx)?this.attr.zoomx:1,this.zoomY=d.Z.exists(this.attr.zoomy)?this.attr.zoomy:1)),this):this},getBoundingBox:function(){var e=new ge.Z(Y.Z.COORDS_BY_SCREEN,[0,0],this).usrCoords,t=new ge.Z(Y.Z.COORDS_BY_SCREEN,[this.canvasWidth,this.canvasHeight],this).usrCoords;return[e[1],e[2],t[1],t[2]]},_set:function(e,t){e=e.toLocaleLowerCase(),null===t||!d.Z.isObject(t)||d.Z.exists(t.id)||d.Z.exists(t.name)?this.attr[e]=t:d.Z.mergeAttr(this.attr[e],t)},setAttribute:function(e){var t,r,n,s,o,a,l,u={};for(t=0;t<arguments.length;t++)d.Z.isString(r=arguments[t])?(n=r.split(":"),u[d.Z.trim(n[0])]=d.Z.trim(n[1])):d.Z.isArray(r)?u[r[0]]=r[1]:D.Z.extend(u,r);for(t in u)switch(u.hasOwnProperty(t)&&(s=t.replace(/\s+/g,"").toLowerCase(),o=u[t]),o=(!o.toLowerCase||"false"!==o.toLowerCase())&&o,a=this.attr[s],s){case"axis":!1===o&&d.Z.exists(this.defaultAxes)&&(this.defaultAxes.x.setAttribute({visible:!1}),this.defaultAxes.y.setAttribute({visible:!1}));break;case"boundingbox":this.setBoundingBox(o,this.keepaspectratio),this._set(s,o);break;case"defaultaxes":d.Z.exists(this.defaultAxes.x)&&d.Z.exists(o.x)&&this.defaultAxes.x.setAttribute(o.x),d.Z.exists(this.defaultAxes.y)&&d.Z.exists(o.y)&&this.defaultAxes.y.setAttribute(o.y);break;case"description":this.document.getElementById(this.container+"_ARIAdescription").innerHTML=o,this._set(s,o);break;case"title":this.document.getElementById(this.container+"_ARIAlabel").innerHTML=o,this._set(s,o);break;case"keepaspectratio":this._set(s,o),a=this.getBoundingBox(),this.setBoundingBox([0,this.canvasHeight,this.canvasWidth,0],!1,"keep"),this.setBoundingBox(a,o,"keep");break;case"document":case"maxboundingbox":this[s]=o,this._set(s,o);break;case"zoomx":case"zoomy":this[s]=o,this._set(s,o),this.setZoom(this.attr.zoomx,this.attr.zoomy);break;case"registerevents":case"registerfullscreenevent":case"registerresizeevent":case"renderer":break;case"fullscreen":case"screenshot":(l=this.containerObj.ownerDocument.getElementById(this.container+"_navigation_"+s))&&d.Z.exists(o.symbol)&&(l.innerHTML=d.Z.evaluate(o.symbol)),this._set(s,o);break;case"selection":o.visible=!1,o.withLines=!1,o.vertices={visible:!1},this._set(s,o);break;case"showcopyright":"svg"===this.renderer.type&&((l=this.containerObj.ownerDocument.getElementById(this.renderer.uniqName("licenseText")))?l.style.display=d.Z.evaluate(o)?"inline":"none":d.Z.evaluate(o)&&this.renderer.displayCopyright(Y.Z.licenseText,parseInt(this.options.text.fontSize,10)));default:d.Z.exists(this.attr[s])&&this._set(s,o)}return this.containerObj.ownerDocument.getElementById(this.container+"_navigationbar").remove(),this.renderer.drawNavigationBar(this,this.attr.navbar),this.triggerEventHandlers(["attribute"],[u,this]),this.fullUpdate(),this},addAnimation:function(e){var t=this;return this.animationObjects[e.id]=e,this.animationIntervalCode||(this.animationIntervalCode=window.setInterval(function(){t.animate()},e.board.attr.animationdelay)),this},stopAllAnimation:function(){var e;for(e in this.animationObjects)this.animationObjects.hasOwnProperty(e)&&d.Z.exists(this.animationObjects[e])&&(this.animationObjects[e]=null,delete this.animationObjects[e]);return window.clearInterval(this.animationIntervalCode),delete this.animationIntervalCode,this},animate:function(){var e,t,r,n,s,o,a,l,u=0,c=null;for(t in this.animationObjects)if(this.animationObjects.hasOwnProperty(t)&&d.Z.exists(this.animationObjects[t])){if(u+=1,(r=this.animationObjects[t]).animationPath&&(n=d.Z.isFunction(r.animationPath)?r.animationPath((new Date).getTime()-r.animationStart):r.animationPath.pop(),!d.Z.exists(n)||!d.Z.isArray(n)&&isNaN(n)?delete r.animationPath:(r.setPositionDirectly(Y.Z.COORDS_BY_USER,n),r.fullUpdate(),c=r)),r.animationData){for(s in a=0,r.animationData)r.animationData.hasOwnProperty(s)&&(o=r.animationData[s].pop(),d.Z.exists(o)?(a+=1,(e={})[s]=o,r.setAttribute(e)):delete r.animationData[o]);0===a&&delete r.animationData}!d.Z.exists(r.animationData)&&!d.Z.exists(r.animationPath)&&(this.animationObjects[t]=null,delete this.animationObjects[t],d.Z.exists(r.animationCallback)&&(l=r.animationCallback,r.animationCallback=null,l()))}return 0===u?(window.clearInterval(this.animationIntervalCode),delete this.animationIntervalCode):this.update(c),this},migratePoint:function(e,t,r){var n,s,o,a,l,u,c=!1;for(s in e=this.select(e),t=this.select(t),d.Z.exists(e.label)&&(u=e.label.id,c=!0,this.removeObject(e.label)),e.childElements)if(e.childElements.hasOwnProperty(s)){for(o in a=!1,n=e.childElements[s])n.hasOwnProperty(o)&&n[o]===e&&(n[o]=t,a=!0);for(a&&delete e.childElements[s],l=0;l<n.parents.length;l++)n.parents[l]===e.id&&(n.parents[l]=t.id);t.addChild(n)}return r&&(c&&(delete t.childElements[u],delete t.descendants[u]),t.label&&this.removeObject(t.label),delete this.elementsByName[t.name],t.name=e.name,c&&t.createLabel()),this.removeObject(e),d.Z.exists(t.name)&&""!==t.name&&(this.elementsByName[t.name]=t),this.fullUpdate(),this},emulateColorblindness:function(e){var t,r;if(d.Z.exists(e)||(e="none"),this.currentCBDef===e)return this;for(t in this.objects)this.objects.hasOwnProperty(t)&&(r=this.objects[t],"none"!==e?("none"===this.currentCBDef&&(r.visPropOriginal={strokecolor:r.visProp.strokecolor,fillcolor:r.visProp.fillcolor,highlightstrokecolor:r.visProp.highlightstrokecolor,highlightfillcolor:r.visProp.highlightfillcolor}),r.setAttribute({strokecolor:Fi.Z.rgb2cb(d.Z.evaluate(r.visPropOriginal.strokecolor),e),fillcolor:Fi.Z.rgb2cb(d.Z.evaluate(r.visPropOriginal.fillcolor),e),highlightstrokecolor:Fi.Z.rgb2cb(d.Z.evaluate(r.visPropOriginal.highlightstrokecolor),e),highlightfillcolor:Fi.Z.rgb2cb(d.Z.evaluate(r.visPropOriginal.highlightfillcolor),e)})):d.Z.exists(r.visPropOriginal)&&D.Z.extend(r.visProp,r.visPropOriginal));return this.currentCBDef=e,this.update(),this},select:function(e,t){var r,n,s,o,a=e;if(null===a)return a;if(d.Z.isString(a)&&""!==a)d.Z.exists(this.objects[a])?a=this.objects[a]:d.Z.exists(this.elementsByName[a])?a=this.elementsByName[a]:d.Z.exists(this.groups[a])&&(a=this.groups[a]);else if(!t&&(d.Z.isFunction(a)||d.Z.isObject(a)&&!d.Z.isFunction(a.setAttribute))){for(n={},o=(r=d.Z.filterElements(this.objectsList,a)).length,s=0;s<o;s++)n[r[s].id]=r[s];a=new Sp(n)}else d.Z.isObject(a)&&d.Z.exists(a.id)&&!d.Z.exists(this.objects[a.id])&&(a=null);return a},hasPoint:function(e,t){var r=e,n=t,s=this.getBoundingBox();return d.Z.exists(e)&&d.Z.isArray(e.usrCoords)&&(r=e.usrCoords[1],n=e.usrCoords[2]),!!(d.Z.isNumber(r)&&d.Z.isNumber(n)&&s[0]<r&&r<s[2]&&s[1]>n&&n>s[3])},updateCSSTransforms:function(){var e=this.containerObj,t=e,r=e;if(this.cssTransMat=le.Z.getCSSTransformMatrix(t),d.Z.exists(t.getRootNode)){for(t=t.parentNode===t.getRootNode()?t.parentNode.host:t.parentNode;t;)this.cssTransMat=q.Z.matMatMult(le.Z.getCSSTransformMatrix(t),this.cssTransMat),t=t.parentNode===t.getRootNode()?t.parentNode.host:t.parentNode;this.cssTransMat=q.Z.inverse(this.cssTransMat)}else{for(t=t.offsetParent;t;){for(this.cssTransMat=q.Z.matMatMult(le.Z.getCSSTransformMatrix(t),this.cssTransMat),r=r.parentNode;r!==t;)this.cssTransMat=q.Z.matMatMult(le.Z.getCSSTransformMatrix(t),this.cssTransMat),r=r.parentNode;t=t.offsetParent}this.cssTransMat=q.Z.inverse(this.cssTransMat)}return this},startSelectionMode:function(){this.selectingMode=!0,this.selectionPolygon.setAttribute({visible:!0}),this.selectingBox=[[0,0],[0,0]],this._setSelectionPolygonFromBox(),this.selectionPolygon.fullUpdate()},stopSelectionMode:function(){return this.selectingMode=!1,this.selectionPolygon.setAttribute({visible:!1}),[this.selectionPolygon.vertices[0].coords,this.selectionPolygon.vertices[2].coords]},_startSelecting:function(e){this.isSelecting=!0,this.selectingBox=[[e[0],e[1]],[e[0],e[1]]],this._setSelectionPolygonFromBox()},_moveSelecting:function(e){this.isSelecting&&(this.selectingBox[1]=[e[0],e[1]],this._setSelectionPolygonFromBox(),this.selectionPolygon.fullUpdate())},_stopSelecting:function(e){var t=this.getMousePosition(e);this.isSelecting=!1,this.selectingBox[1]=[t[0],t[1]],this._setSelectionPolygonFromBox()},_setSelectionPolygonFromBox:function(){var e=this.selectingBox[0],t=this.selectingBox[1];this.selectionPolygon.vertices[0].setPositionDirectly(D.Z.COORDS_BY_SCREEN,[e[0],e[1]]),this.selectionPolygon.vertices[1].setPositionDirectly(D.Z.COORDS_BY_SCREEN,[e[0],t[1]]),this.selectionPolygon.vertices[2].setPositionDirectly(D.Z.COORDS_BY_SCREEN,[t[0],t[1]]),this.selectionPolygon.vertices[3].setPositionDirectly(D.Z.COORDS_BY_SCREEN,[t[0],e[1]])},_testForSelection:function(e){this._isRequiredKeyPressed(e,"selection")&&(d.Z.exists(this.selectionPolygon)||this._createSelectionPolygon(this.attr),this.startSelectionMode())},_createSelectionPolygon:function(e){var t;return d.Z.exists(this.selectionPolygon)||!0===(t=d.Z.copyAttributes(e,Rt.Z,"board","selection")).enabled&&(this.selectionPolygon=this.create("polygon",[[0,0],[0,0],[0,0],[0,0]],t)),this},__evt__attribute:function(e){},__evt__down:function(e){},__evt__mousedown:function(e){},__evt__pendown:function(e){},__evt__pointerdown:function(e){},__evt__touchstart:function(e){},__evt__up:function(e){},__evt__mouseup:function(e){},__evt__pointerup:function(e){},__evt__touchend:function(e){},__evt__move:function(e,t){},__evt__mousemove:function(e,t){},__evt__penmove:function(e,t){},__evt__pointermove:function(e,t){},__evt__touchmove:function(e,t){},__evt__keymove:function(e,t){},__evt__hit:function(e,t,r){},__evt__mousehit:function(e,t,r){},__evt__update:function(){},__evt__boundingbox:function(){},__evt__startselecting:function(){},__evt__mousestartselecting:function(){},__evt__pointerstartselecting:function(){},__evt__touchstartselecting:function(){},__evt__stopselecting:function(){},__evt__mousestopselecting:function(){},__evt__pointerstopselecting:function(){},__evt__touchstopselecting:function(){},__evt__moveselecting:function(){},__evt__mousemoveselecting:function(){},__evt__pointermoveselecting:function(){},__evt__touchmoveselecting:function(){},__evt:function(){},toFullscreen:function(e){var t,r,n,s=this.document;return this._fullscreen_inner_id=e=e||this.container,n=s.getElementById(e),s.getElementById(t="fullscreenwrap_"+e)?r=s.getElementById(t):((r=document.createElement("div")).classList.add("JXG_wrap_private"),r.setAttribute("id",t),n.parentNode.insertBefore(r,n),r.appendChild(n)),r.requestFullscreen=r.requestFullscreen||r.webkitRequestFullscreen||r.mozRequestFullScreen||r.msRequestFullscreen,null===(void 0!==s.fullscreenElement?s.fullscreenElement:void 0!==s.webkitFullscreenElement?s.webkitFullscreenElement:s.msFullscreenElement)?r.requestFullscreen&&r.requestFullscreen():d.Z.exists(document.exitFullscreen)?document.exitFullscreen():d.Z.exists(document.webkitExitFullscreen)&&document.webkitExitFullscreen(),this},fullscreenListener:function(e){var t,r,n,s=this.document;if(d.Z.exists(t=this._fullscreen_inner_id)){if(n=void 0!==s.fullscreenElement?s.fullscreenElement:void 0!==s.webkitFullscreenElement?s.webkitFullscreenElement:s.msFullscreenElement,r=s.getElementById(t),n)r._cssFullscreenStore={id:n.id,isFullscreen:!0,margin:r.style.margin},r.style.margin="",le.Z.scaleJSXGraphDiv(n.id,t,s,d.Z.evaluate(this.attr.fullscreen.scale)),n=null;else if(d.Z.exists(r._cssFullscreenStore)){try{s.styleSheets[s.styleSheets.length-1].deleteRule(0)}catch{console.log("JSXGraph: Could not remove CSS rules for full screen mode")}r._cssFullscreenStore.isFullscreen=!1,r.style.margin=r._cssFullscreenStore.margin}this.updateCSSTransforms()}},addLogEntry:function(e,t,r){var n,s,o=this.userLog.length-1;return d.Z.exists(t.elementClass)&&(s=t.id),d.Z.evaluate(this.attr.logging.enabled)&&(n=(new Date).getTime(),o>=0&&this.userLog[o].type===e&&this.userLog[o].id===s&&n-this.userLog[o].end<500?(this.userLog[o].end=n,this.userLog[o].endpos=r):this.userLog.push({type:e,id:s,start:n,startpos:r,end:n,endpos:r,bbox:this.getBoundingBox(),canvas:[this.canvasWidth,this.canvasHeight],zoom:[this.zoomX,this.zoomY]})),this},createRoulette:function(e,t,r,n,s,o,a){var l=this;return new function(){var N,c=0,h=0,g=0,y=r,E=Qe.Z.root(function(ne){var ce=e.X(y),he=e.Y(y),ye=t.X(ne),be=t.Y(ne);return(ce-ye)*(ce-ye)+(he-be)*(he-be)},[0,2*Math.PI]),w=0,T=0,L=l.create("transform",[function(){return c}],{type:"rotate"}),R=l.create("transform",[function(){return c},function(){return e.X(y)},function(){return e.Y(y)}],{type:"rotate"}),H=l.create("transform",[function(){return h},function(){return g}],{type:"translate"}),V=function(ne,ce,he){var ye=Qe.Z.D(ne.X)(ce),be=Qe.Z.D(ne.Y)(ce),re=Qe.Z.D(ne.X)(he),We=Qe.Z.D(ne.Y)(he),Te=Qe.Z.D(ne.X)(.5*(ce+he)),Re=Qe.Z.D(ne.Y)(.5*(ce+he)),lt=Math.sqrt(ye*ye+be*be),Ge=Math.sqrt(re*re+We*We);return(lt+4*Math.sqrt(Te*Te+Re*Re)+Ge)*(he-ce)/6},U=function(ne){return N-V(t,E,ne)},Q=Math.PI/18,oe=9*Q,te=null;return this.rolling=function(){var ne,ce,he,ye,be;N=V(e,y,w=y+s*n),T=Qe.Z.root(U,E),ne=new lo(e.X(w),e.Y(w)),ce=new lo(t.X(T),t.Y(T)),he=new lo(Qe.Z.D(e.X)(w),Qe.Z.D(e.Y)(w)),ye=new lo(Qe.Z.D(t.X)(T),Qe.Z.D(t.Y)(T)),be=lo.C.div(he,ye),c=Math.atan2(be.imaginary,be.real),be.div(lo.C.abs(be)),be.mult(ce),h=ne.real-be.real,g=ne.imaginary-be.imaginary,c<-Q&&c>-oe?(c=-Q,R.applyOnce(a)):c>Q&&c<oe?(c=Q,R.applyOnce(a)):(L.applyOnce(a),H.applyOnce(a),y=w,E=T),l.update()},this.start=function(){return o>0&&(te=window.setInterval(this.rolling,o)),this},this.stop=function(){return window.clearInterval(te),this},this}}});const Op=D.Z.Board;D.Z.SVGRenderer=function(e,t){var r;for(this.type="svg",this.isIE=-1!==navigator.appVersion.indexOf("MSIE")||navigator.userAgent.match(/Trident\//),this.svgRoot=null,this.svgNamespace="http://www.w3.org/2000/svg",this.xlinkNamespace="http://www.w3.org/1999/xlink",this.container=e,this.container.style.MozUserSelect="none",this.container.style.userSelect="none",this.container.style.overflow="hidden",""===this.container.style.position&&(this.container.style.position="relative"),this.svgRoot=this.container.ownerDocument.createElementNS(this.svgNamespace,"svg"),this.svgRoot.style.overflow="hidden",this.svgRoot.style.display="block",this.resize(t.width,t.height),this.container.appendChild(this.svgRoot),this.defs=this.container.ownerDocument.createElementNS(this.svgNamespace,"defs"),this.svgRoot.appendChild(this.defs),this.createShadowFilter=function(n,s,o,a,l,u){var h,g,y,E,c=this.container.ownerDocument.createElementNS(this.svgNamespace,"filter");return c.setAttributeNS(null,"id",n),c.setAttributeNS(null,"width","300%"),c.setAttributeNS(null,"height","300%"),c.setAttributeNS(null,"filterUnits","userSpaceOnUse"),(h=this.container.ownerDocument.createElementNS(this.svgNamespace,"feOffset")).setAttributeNS(null,"in","SourceGraphic"),h.setAttributeNS(null,"result","offOut"),h.setAttributeNS(null,"dx",u[0]),h.setAttributeNS(null,"dy",u[1]),c.appendChild(h),(g=this.container.ownerDocument.createElementNS(this.svgNamespace,"feColorMatrix")).setAttributeNS(null,"in","offOut"),g.setAttributeNS(null,"result","colorOut"),g.setAttributeNS(null,"type","matrix"),"none"===s||!d.Z.isArray(s)||s.length<3?g.setAttributeNS(null,"values","0.1 0 0 0 0  0 0.1 0 0 0  0 0 0.1 0 0  0 0 0 "+o+" 0"):(s[0]/=255,s[1]/=255,s[2]/=255,g.setAttributeNS(null,"values",a+" 0 0 0 "+s[0]+"  0 "+a+" 0 0 "+s[1]+"  0 0 "+a+" 0 "+s[2]+"  0 0 0 "+o+" 0")),c.appendChild(g),(y=this.container.ownerDocument.createElementNS(this.svgNamespace,"feGaussianBlur")).setAttributeNS(null,"in","colorOut"),y.setAttributeNS(null,"result","blurOut"),y.setAttributeNS(null,"stdDeviation",l),c.appendChild(y),(E=this.container.ownerDocument.createElementNS(this.svgNamespace,"feBlend")).setAttributeNS(null,"in","SourceGraphic"),E.setAttributeNS(null,"in2","blurOut"),E.setAttributeNS(null,"mode","normal"),c.appendChild(E),c},this.uniqName=function(){return this.container.id+"_"+Array.prototype.slice.call(arguments).join("_")},this.toURL=function(){var n=Array.prototype.slice.call(arguments).join("");return d.Z.exists(CSS)&&d.Z.exists(CSS.escape)&&(n=CSS.escape(n)),"url(#"+n+")"},this.defs.appendChild(this.createShadowFilter(this.uniqName("f1"),"none",1,.1,3,[5,5])),this.layer=[],r=0;r<Rt.Z.layer.numlayers;r++)this.layer[r]=this.container.ownerDocument.createElementNS(this.svgNamespace,"g"),this.svgRoot.appendChild(this.layer[r]);try{this.foreignObjLayer=this.container.ownerDocument.createElementNS(this.svgNamespace,"foreignObject"),this.foreignObjLayer.setAttribute("display","none"),this.foreignObjLayer.setAttribute("x",0),this.foreignObjLayer.setAttribute("y",0),this.foreignObjLayer.setAttribute("width","100%"),this.foreignObjLayer.setAttribute("height","100%"),this.foreignObjLayer.setAttribute("id",this.uniqName("foreignObj")),this.svgRoot.appendChild(this.foreignObjLayer),this.supportsForeignObject=!0}catch{this.supportsForeignObject=!1}},D.Z.SVGRenderer.prototype=new fc,D.Z.extend(D.Z.SVGRenderer.prototype,{_createArrowHead:function(e,t,r){var n,s,a,l,o=e.id+"Triangle";return d.Z.exists(t)&&(o+=t),(n=this.createPrim("marker",o)).setAttributeNS(null,"stroke",d.Z.evaluate(e.visProp.strokecolor)),n.setAttributeNS(null,"stroke-opacity",d.Z.evaluate(e.visProp.strokeopacity)),n.setAttributeNS(null,"fill",d.Z.evaluate(e.visProp.strokecolor)),n.setAttributeNS(null,"fill-opacity",d.Z.evaluate(e.visProp.strokeopacity)),n.setAttributeNS(null,"stroke-width",0),n.setAttributeNS(null,"orient","auto"),n.setAttributeNS(null,"markerUnits","strokeWidth"),s=this.container.ownerDocument.createElementNS(this.svgNamespace,"path"),l=5,"End"===t?(a=0,2===r?s.setAttributeNS(null,"d","M 10,0 L 0,5 L 10,10 L 5,5 z"):3===r?s.setAttributeNS(null,"d","M 0,0 L 3.33,0 L 3.33,10 L 0,10 z"):4===r?(l=3.31,s.setAttributeNS(null,"d","M 0.00,3.31 C 3.53,3.84 7.13,4.50 10.00,6.63 C 9.33,5.52 8.67,4.42 8.00,3.31 C 8.67,2.21 9.33,1.10 10.00,0.00 C 7.13,2.13 3.53,2.79 0.00,3.31")):5===r?(l=3.28,s.setAttributeNS(null,"d","M 0.00,3.28 C 3.39,4.19 6.81,5.07 10.00,6.55 C 9.38,5.56 9.00,4.44 9.00,3.28 C 9.00,2.11 9.38,0.99 10.00,0.00 C 6.81,1.49 3.39,2.37 0.00,3.28")):6===r?(l=2.84,s.setAttributeNS(null,"d","M 0.00,2.84 C 3.39,3.59 6.79,4.35 10.00,5.68 C 9.67,4.73 9.33,3.78 9.00,2.84 C 9.33,1.89 9.67,0.95 10.00,0.00 C 6.79,1.33 3.39,2.09 0.00,2.84")):7===r?(l=5.2,s.setAttributeNS(null,"d","M 0.00,5.20 C 4.04,5.20 7.99,6.92 10.00,10.39 M 10.00,0.00 C 7.99,3.47 4.04,5.20 0.00,5.20")):s.setAttributeNS(null,"d","M 10,0 L 0,5 L 10,10 z"),e.elementClass===Y.Z.OBJECT_CLASS_LINE&&(a=2===r?4.9:3===r?3.3:4===r||5===r||6===r?6.66:7===r?0:10)):(a=10,2===r?s.setAttributeNS(null,"d","M 0,0 L 10,5 L 0,10 L 5,5 z"):3===r?(a=3.3,s.setAttributeNS(null,"d","M 0,0 L 3.33,0 L 3.33,10 L 0,10 z")):4===r?(l=3.31,s.setAttributeNS(null,"d","M 10.00,3.31 C 6.47,3.84 2.87,4.50 0.00,6.63 C 0.67,5.52 1.33,4.42 2.00,3.31 C 1.33,2.21 0.67,1.10 0.00,0.00 C 2.87,2.13 6.47,2.79 10.00,3.31")):5===r?(l=3.28,s.setAttributeNS(null,"d","M 10.00,3.28 C 6.61,4.19 3.19,5.07 0.00,6.55 C 0.62,5.56 1.00,4.44 1.00,3.28 C 1.00,2.11 0.62,0.99 0.00,0.00 C 3.19,1.49 6.61,2.37 10.00,3.28")):6===r?(l=2.84,s.setAttributeNS(null,"d","M 10.00,2.84 C 6.61,3.59 3.21,4.35 0.00,5.68 C 0.33,4.73 0.67,3.78 1.00,2.84 C 0.67,1.89 0.33,0.95 0.00,0.00 C 3.21,1.33 6.61,2.09 10.00,2.84")):7===r?(l=5.2,s.setAttributeNS(null,"d","M 10.00,5.20 C 5.96,5.20 2.01,6.92 0.00,10.39 M 0.00,0.00 C 2.01,3.47 5.96,5.20 10.00,5.20")):s.setAttributeNS(null,"d","M 0,0 L 10,5 L 0,10 z"),e.elementClass===Y.Z.OBJECT_CLASS_LINE&&(a=2===r?5.1:3===r?.02:4===r||5===r||6===r?3.33:7===r?10:.05)),7===r&&(n.setAttributeNS(null,"fill","none"),n.setAttributeNS(null,"stroke-width",1)),n.setAttributeNS(null,"refY",l),n.setAttributeNS(null,"refX",a),n.appendChild(s),n},_setArrowColor:function(e,t,r,n,s){e&&(d.Z.isString(t)&&this._setAttribute(7!==s?function(){e.setAttributeNS(null,"stroke",t),e.setAttributeNS(null,"fill",t),e.setAttributeNS(null,"stroke-opacity",r),e.setAttributeNS(null,"fill-opacity",r)}:function(){e.setAttributeNS(null,"fill","none"),e.setAttributeNS(null,"stroke",t),e.setAttributeNS(null,"stroke-opacity",r)},n.visPropOld.fillcolor),this.isIE&&n.rendNode.parentNode.insertBefore(n.rendNode,n.rendNode))},_setArrowWidth:function(e,t,r,n){var s,o;e&&(o=(s=t)*n,e.setAttributeNS(null,"viewBox","0 0 "+10*s+" "+10*s),e.setAttributeNS(null,"markerHeight",o),e.setAttributeNS(null,"markerWidth",o),e.setAttributeNS(null,"display","inherit"),this.isIE&&r.parentNode.insertBefore(r,r))},updateTicks:function(e){var t,r,n,s,o,a,c,h,l="",u=e.ticks.length,g=!0;for(t=0;t<u;t++){for(c=(o=(n=e.ticks[t])[0]).length,h=" M "+o[0]+" "+(a=n[1])[0],d.Z.isNumber(o[0])||(g=!1),r=1;g&&r<c;++r)d.Z.isNumber(o[r])?h+=" L "+o[r]+" "+a[r]:g=!1;g&&(l+=h)}d.Z.exists(s=e.rendNode)||(s=this.createPrim("path",e.id),this.appendChildPrim(s,d.Z.evaluate(e.visProp.layer)),e.rendNode=s),s.setAttributeNS(null,"stroke",d.Z.evaluate(e.visProp.strokecolor)),s.setAttributeNS(null,"fill","none"),s.setAttributeNS(null,"stroke-opacity",d.Z.evaluate(e.visProp.strokeopacity)),s.setAttributeNS(null,"stroke-width",d.Z.evaluate(e.visProp.strokewidth)),this.updatePathPrim(s,l,e.board)},displayCopyright:function(e,t){var n,r=this.createPrim("text","licenseText");r.setAttributeNS(null,"x","20px"),r.setAttributeNS(null,"y",2+t+"px"),r.setAttributeNS(null,"style","font-family:Arial,Helvetica,sans-serif; font-size:"+t+"px; fill:#356AA0;  opacity:0.3;"),n=this.container.ownerDocument.createTextNode(e),r.appendChild(n),this.appendChildPrim(r,0)},drawInternalText:function(e){var t=this.createPrim("text",e.id);return t.style.whiteSpace="nowrap",e.rendNodeText=this.container.ownerDocument.createTextNode(""),t.appendChild(e.rendNodeText),this.appendChildPrim(t,d.Z.evaluate(e.visProp.layer)),t},updateInternalText:function(e){var r,t=e.plaintext,n=e.getAnchorX(),s=e.getAnchorY();e.rendNode.getAttributeNS(null,"class")!==e.visProp.cssclass&&(e.rendNode.setAttributeNS(null,"class",d.Z.evaluate(e.visProp.cssclass)),e.needsSizeUpdate=!0),isNaN(e.coords.scrCoords[1]+e.coords.scrCoords[2])||(e.visPropOld.left!==n+(r=e.coords.scrCoords[1])&&(e.rendNode.setAttributeNS(null,"x",r+"px"),"left"===n?e.rendNode.setAttributeNS(null,"text-anchor","start"):"right"===n?e.rendNode.setAttributeNS(null,"text-anchor","end"):"middle"===n&&e.rendNode.setAttributeNS(null,"text-anchor","middle"),e.visPropOld.left=n+r),e.visPropOld.top!==s+(r=e.coords.scrCoords[2])&&(e.rendNode.setAttributeNS(null,"y",r+.5*this.vOffsetText+"px"),"bottom"===s?e.rendNode.setAttributeNS(null,"dominant-baseline","text-after-edge"):"top"===s?e.rendNode.setAttributeNS(null,"dy","1.6ex"):"middle"===s&&e.rendNode.setAttributeNS(null,"dy","0.6ex"),e.visPropOld.top=s+r)),e.htmlStr!==t&&(e.rendNodeText.data=t,e.htmlStr=t),this.transformImage(e,e.transformations)},updateInternalTextStyle:function(e,t,r,n){this.setObjectFillColor(e,t,r)},drawImage:function(e){var t=this.createPrim("image",e.id);t.setAttributeNS(null,"preserveAspectRatio","none"),this.appendChildPrim(t,d.Z.evaluate(e.visProp.layer)),e.rendNode=t,this.updateImage(e)},transformImage:function(e,t){var r,n,a,l,s=e.rendNode,o="";if(t.length>0&&-1===(r=[(n=this.joinTransforms(e,t))[1][1],n[2][1],n[1][2],n[2][2],n[1][0],n[2][0]].join(",")).indexOf("NaN"))if(o+=" matrix("+r+") ",e.elementClass===Y.Z.OBJECT_CLASS_TEXT&&"html"===e.visProp.display){switch(s.style.transform=o,a=-e.coords.scrCoords[1],l=-e.coords.scrCoords[2],d.Z.evaluate(e.visProp.anchorx)){case"right":a+=e.size[0];break;case"middle":a+=.5*e.size[0]}switch(d.Z.evaluate(e.visProp.anchory)){case"bottom":l+=e.size[1];break;case"middle":l+=.5*e.size[1]}s.style["transform-origin"]=a+"px "+l+"px"}else s.setAttributeNS(null,"transform",o)},updateImageURL:function(e){var t=d.Z.evaluate(e.url);return e._src!==t&&(e.imgIsLoaded=!1,e.rendNode.setAttributeNS(this.xlinkNamespace,"xlink:href",t),e._src=t,!0)},updateImageStyle:function(e,t){var r=d.Z.evaluate(t?e.visProp.highlightcssclass:e.visProp.cssclass);e.rendNode.setAttributeNS(null,"class",r)},drawForeignObject:function(e){e.rendNode=this.appendChildPrim(this.createPrim("foreignObject",e.id),d.Z.evaluate(e.visProp.layer)),this.appendNodesToElement(e,"foreignObject"),this.updateForeignObject(e)},updateForeignObject:function(e){e.rendNode.style.overflow=e._useUserSize?"hidden":"visible",this.updateRectPrim(e.rendNode,e.coords.scrCoords[1],e.coords.scrCoords[2]-e.size[1],e.size[0],e.size[1]),e.rendNode.innerHTML=e.content,this._updateVisual(e,{stroke:!0,dash:!0},!0)},appendChildPrim:function(e,t){return d.Z.exists(t)?t>=Rt.Z.layer.numlayers&&(t=Rt.Z.layer.numlayers-1):t=0,this.layer[t].appendChild(e),e},createPrim:function(e,t){var r=this.container.ownerDocument.createElementNS(this.svgNamespace,e);return r.setAttributeNS(null,"id",this.uniqName(t)),r.style.position="absolute","path"===e&&(r.setAttributeNS(null,"stroke-linecap","round"),r.setAttributeNS(null,"stroke-linejoin","round"),r.setAttributeNS(null,"fill-rule","evenodd")),r},remove:function(e){d.Z.exists(e)&&d.Z.exists(e.parentNode)&&e.parentNode.removeChild(e)},setLayer:function(e,t){d.Z.exists(t)?t>=Rt.Z.layer.numlayers&&(t=Rt.Z.layer.numlayers-1):t=0,this.layer[t].appendChild(e.rendNode)},makeArrows:function(e,t){var r,n=t.evFirst,s=t.evLast;e.visPropOld.firstarrow!==n||e.visPropOld.lastarrow!==s?(n?d.Z.exists(r=e.rendNodeTriangleStart)?this.defs.appendChild(r):(r=this._createArrowHead(e,"End",t.typeFirst),this.defs.appendChild(r),e.rendNodeTriangleStart=r,e.rendNode.setAttributeNS(null,"marker-start",this.toURL(this.container.id,"_",e.id,"TriangleEnd"))):d.Z.exists(r=e.rendNodeTriangleStart)&&this.remove(r),s?d.Z.exists(r=e.rendNodeTriangleEnd)?this.defs.appendChild(r):(r=this._createArrowHead(e,"Start",t.typeLast),this.defs.appendChild(r),e.rendNodeTriangleEnd=r,e.rendNode.setAttributeNS(null,"marker-end",this.toURL(this.container.id,"_",e.id,"TriangleStart"))):d.Z.exists(r=e.rendNodeTriangleEnd)&&this.remove(r),e.visPropOld.firstarrow=n,e.visPropOld.lastarrow=s):this.isIE&&e.visPropCalc.visible&&(n||s)&&e.rendNode.parentNode.insertBefore(e.rendNode,e.rendNode)},updateEllipsePrim:function(e,t,r,n,s){var o;o=2e5,t=Math.abs(t)<o?t:o*t/Math.abs(t),r=Math.abs(r)<o?r:o*r/Math.abs(r),n=Math.abs(n)<o?n:o*n/Math.abs(n),s=Math.abs(s)<o?s:o*s/Math.abs(s),e.setAttributeNS(null,"cx",t),e.setAttributeNS(null,"cy",r),e.setAttributeNS(null,"rx",Math.abs(n)),e.setAttributeNS(null,"ry",Math.abs(s))},updateLinePrim:function(e,t,r,n,s){var o;o=2e5,isNaN(t+r+n+s)||(t=Math.abs(t)<o?t:o*t/Math.abs(t),r=Math.abs(r)<o?r:o*r/Math.abs(r),n=Math.abs(n)<o?n:o*n/Math.abs(n),s=Math.abs(s)<o?s:o*s/Math.abs(s),e.setAttributeNS(null,"x1",t),e.setAttributeNS(null,"y1",r),e.setAttributeNS(null,"x2",n),e.setAttributeNS(null,"y2",s))},updatePathPrim:function(e,t){""===t&&(t="M 0 0"),e.setAttributeNS(null,"d",t)},updatePathStringPoint:function(e,t,r){var n="",s=e.coords.scrCoords,o=t*Math.sqrt(3)*.5,a=.5*t;return"x"===r?n=" M "+(s[1]-t)+" "+(s[2]-t)+" L "+(s[1]+t)+" "+(s[2]+t)+" M "+(s[1]+t)+" "+(s[2]-t)+" L "+(s[1]-t)+" "+(s[2]+t):"+"===r?n=" M "+(s[1]-t)+" "+s[2]+" L "+(s[1]+t)+" "+s[2]+" M "+s[1]+" "+(s[2]-t)+" L "+s[1]+" "+(s[2]+t):"|"===r?n=" M "+s[1]+" "+(s[2]-t)+" L "+s[1]+" "+(s[2]+t):"-"===r?n=" M "+(s[1]-t)+" "+s[2]+" L "+(s[1]+t)+" "+s[2]:"<>"===r?n=" M "+(s[1]-t)+" "+s[2]+" L "+s[1]+" "+(s[2]+t)+" L "+(s[1]+t)+" "+s[2]+" L "+s[1]+" "+(s[2]-t)+" Z ":"^"===r?n=" M "+s[1]+" "+(s[2]-t)+" L "+(s[1]-o)+" "+(s[2]+a)+" L "+(s[1]+o)+" "+(s[2]+a)+" Z ":"v"===r?n=" M "+s[1]+" "+(s[2]+t)+" L "+(s[1]-o)+" "+(s[2]-a)+" L "+(s[1]+o)+" "+(s[2]-a)+" Z ":">"===r?n=" M "+(s[1]+t)+" "+s[2]+" L "+(s[1]-a)+" "+(s[2]-o)+" L "+(s[1]-a)+" "+(s[2]+o)+" Z ":"<"===r&&(n=" M "+(s[1]-t)+" "+s[2]+" L "+(s[1]+a)+" "+(s[2]-o)+" L "+(s[1]+a)+" "+(s[2]+o)+" Z "),n},updatePathStringPrim:function(e){var t,r,n,s=" M ",l=s,u=5e3,c="";if(e.numberPoints<=0)return"";if(n=Math.min(e.points.length,e.numberPoints),1===e.bezierDegree)for(t=0;t<n;t++)r=e.points[t].scrCoords,isNaN(r[1])||isNaN(r[2])?l=s:(r[1]=Math.max(Math.min(r[1],u),-u),r[2]=Math.max(Math.min(r[2],u),-u),c+=l+r[1]+" "+r[2],l=" L ");else if(3===e.bezierDegree)for(t=0;t<n;)r=e.points[t].scrCoords,isNaN(r[1])||isNaN(r[2])?l=s:(c+=l+r[1]+" "+r[2]," C "===l&&(c+=" "+(r=e.points[t+=1].scrCoords)[1]+" "+r[2],c+=" "+(r=e.points[t+=1].scrCoords)[1]+" "+r[2]),l=" C "),t+=1;return c},updatePathStringBezierPrim:function(e){var t,r,n,s,o,a,l,u=" M ",h=u,g=5e3,y="",E=d.Z.evaluate(e.visProp.strokewidth),w="plot"!==d.Z.evaluate(e.visProp.curvetype);if(e.numberPoints<=0)return"";for(w&&e.board.options.curve.RDPsmoothing&&(e.points=Qe.Z.RamerDouglasPeucker(e.points,.5)),l=Math.min(e.points.length,e.numberPoints),r=1;r<3;r++)for(h=u,t=0;t<l;t++)s=e.points[t].scrCoords,isNaN(s[1])||isNaN(s[2])?h=u:(s[1]=Math.max(Math.min(s[1],g),-g),s[2]=Math.max(Math.min(s[2],g),-g),y+=h===u?h+s[1]+" "+s[2]:[h,o+.333*(s[1]-o)+E*((n=2*r)*Math.random()-r)," ",a+.333*(s[2]-a)+E*(n*Math.random()-r)," ",o+.666*(s[1]-o)+E*(n*Math.random()-r)," ",a+.666*(s[2]-a)+E*(n*Math.random()-r)," ",s[1]," ",s[2]].join(""),h=" C ",o=s[1],a=s[2]);return y},updatePolygonPrim:function(e,t){var r,s,n="",o=t.vertices.length;for(e.setAttributeNS(null,"stroke","none"),e.setAttributeNS(null,"fill-rule","evenodd"),"polygonalchain"===t.elType&&o++,r=0;r<o-1;r++){if(!t.vertices[r].isReal)return void e.setAttributeNS(null,"points","");n=n+(s=t.vertices[r].coords.scrCoords)[1]+","+s[2],r<o-2&&(n+=" ")}-1===n.indexOf("NaN")&&e.setAttributeNS(null,"points",n)},updateRectPrim:function(e,t,r,n,s){e.setAttributeNS(null,"x",t),e.setAttributeNS(null,"y",r),e.setAttributeNS(null,"width",n),e.setAttributeNS(null,"height",s)},setPropertyPrim:function(e,t,r){"stroked"!==t&&e.setAttributeNS(null,t,r)},display:function(e,t){var r;e&&e.rendNode&&(e.visPropOld.visible=t,r=e.rendNode,t?(r.setAttributeNS(null,"display","inline"),r.style.visibility="inherit"):(r.setAttributeNS(null,"display","none"),r.style.visibility="hidden"))},show:function(e){D.Z.deprecated("Board.renderer.show()","Board.renderer.display()"),this.display(e,!0)},hide:function(e){D.Z.deprecated("Board.renderer.hide()","Board.renderer.display()"),this.display(e,!1)},setBuffering:function(e,t){e.rendNode.setAttribute("buffered-rendering",t)},setDashStyle:function(e){var t=d.Z.evaluate(e.visProp.dash),n=d.Z.evaluate(e.visProp.dashscale)?.5*d.Z.evaluate(e.visProp.strokewidth):1,s=e.rendNode;t>0?s.setAttributeNS(null,"stroke-dasharray",this.dashArray[t-1].map(function(o){return o*n}).join(",")):s.hasAttributeNS(null,"stroke-dasharray")&&s.removeAttributeNS(null,"stroke-dasharray")},setGradient:function(e){var r,n,s,t=e.rendNode,o=d.Z.evaluate(e.visProp.gradient);"linear"===o||"radial"===o?(r=this.createPrim(o+"Gradient",e.id+"_gradient"),n=this.createPrim("stop",e.id+"_gradient1"),s=this.createPrim("stop",e.id+"_gradient2"),r.appendChild(n),r.appendChild(s),this.defs.appendChild(r),t.setAttributeNS(null,"style","fill:"+this.toURL(this.container.id+"_"+e.id+"_gradient")),e.gradNode1=n,e.gradNode2=s,e.gradNode=r):t.removeAttributeNS(null,"style")},updateGradientAngle:function(e,t){var r=1,n=Math.cos(t),s=Math.sin(t);Math.abs(n)>Math.abs(s)?r/=Math.abs(n):r/=Math.abs(s),n>=0?(e.setAttributeNS(null,"x1",0),e.setAttributeNS(null,"x2",n*r)):(e.setAttributeNS(null,"x1",-n*r),e.setAttributeNS(null,"x2",0)),s>=0?(e.setAttributeNS(null,"y1",0),e.setAttributeNS(null,"y2",s*r)):(e.setAttributeNS(null,"y1",-s*r),e.setAttributeNS(null,"y2",0))},updateGradientCircle:function(e,t,r,n,s,o,a){e.setAttributeNS(null,"cx",100*t+"%"),e.setAttributeNS(null,"cy",100*r+"%"),e.setAttributeNS(null,"r",100*n+"%"),e.setAttributeNS(null,"fx",100*s+"%"),e.setAttributeNS(null,"fy",100*o+"%"),e.setAttributeNS(null,"fr",100*a+"%")},updateGradient:function(e){var t,r,n=e.gradNode1,s=e.gradNode2,o=d.Z.evaluate(e.visProp.gradient);!d.Z.exists(n)||!d.Z.exists(s)||(r=(r=d.Z.evaluate(e.visProp.fillopacity))>0?r:0,t=d.Z.evaluate(e.visProp.fillcolor),n.setAttributeNS(null,"style","stop-color:"+t+";stop-opacity:"+r),s.setAttributeNS(null,"style","stop-color:"+d.Z.evaluate(e.visProp.gradientsecondcolor)+";stop-opacity:"+d.Z.evaluate(e.visProp.gradientsecondopacity)),n.setAttributeNS(null,"offset",100*d.Z.evaluate(e.visProp.gradientstartoffset)+"%"),s.setAttributeNS(null,"offset",100*d.Z.evaluate(e.visProp.gradientendoffset)+"%"),"linear"===o?this.updateGradientAngle(e.gradNode,d.Z.evaluate(e.visProp.gradientangle)):"radial"===o&&this.updateGradientCircle(e.gradNode,d.Z.evaluate(e.visProp.gradientcx),d.Z.evaluate(e.visProp.gradientcy),d.Z.evaluate(e.visProp.gradientr),d.Z.evaluate(e.visProp.gradientfx),d.Z.evaluate(e.visProp.gradientfy),d.Z.evaluate(e.visProp.gradientfr)))},setObjectTransition:function(e,t){var n,o,a,s=[],l=0,u=["rendNode","rendNodeTriangleStart","rendNodeTriangleEnd"];if(void 0===t&&(t=d.Z.evaluate(e.visProp.transitionduration)),n=d.Z.evaluate(e.visProp.transitionproperties),t!==e.visPropOld.transitionduration||n!==e.visPropOld.transitionproperties){for(d.Z.exists(n)&&(l=n.length),a=0;a<l;a++)s.push(n[a]+" "+t+"ms");for(o=s.join(", "),l=u.length,a=0;a<l;++a)e[u[a]]&&(e[u[a]].style.transition=o);e.visPropOld.transitionduration=t,e.visPropOld.transitionproperties=n}},_setAttribute:function(e,t){""===t?e():window.setTimeout(e,1)},setObjectFillColor:function(e,t,r,n){var s,o,a,l,u=d.Z.evaluate(t),c=d.Z.evaluate(r),h=d.Z.evaluate(e.visProp.gradient);c=c>0?c:0,(e.visPropOld.fillcolor!==u||e.visPropOld.fillopacity!==c||null!==h)&&(d.Z.exists(u)&&!1!==u&&(9!==u.length?(o=u,l=c):(a=Fi.Z.rgba2rgbo(u),o=a[0],l=c*a[1]),s=void 0===n?e.rendNode:n,"none"!==o&&this._setAttribute(function(){s.setAttributeNS(null,"fill",o)},e.visPropOld.fillcolor),e.type===D.Z.OBJECT_TYPE_IMAGE?this._setAttribute(function(){s.setAttributeNS(null,"opacity",l)},e.visPropOld.fillopacity):("none"===o?(l=0,s.setAttributeNS(null,"pointer-events","visibleStroke")):s.setAttributeNS(null,"pointer-events","visiblePainted"),this._setAttribute(function(){s.setAttributeNS(null,"fill-opacity",l)},e.visPropOld.fillopacity)),("linear"===h||"radial"===h)&&this.updateGradient(e)),e.visPropOld.fillcolor=u,e.visPropOld.fillopacity=c)},setObjectStrokeColor:function(e,t,r){var s,o,l,u,n=d.Z.evaluate(t),a=d.Z.evaluate(r);a=a>0?a:0,(e.visPropOld.strokecolor!==n||e.visPropOld.strokeopacity!==a)&&(d.Z.exists(n)&&!1!==n&&(9!==n.length?(s=n,l=a):(o=Fi.Z.rgba2rgbo(n),s=o[0],l=a*o[1]),u=e.rendNode,e.elementClass===Y.Z.OBJECT_CLASS_TEXT?"html"===d.Z.evaluate(e.visProp.display)?this._setAttribute(function(){u.style.color=s,u.style.opacity=l},e.visPropOld.strokecolor):this._setAttribute(function(){u.setAttributeNS(null,"style","fill:"+s),u.setAttributeNS(null,"style","fill-opacity:"+l)},e.visPropOld.strokecolor):this._setAttribute(function(){u.setAttributeNS(null,"stroke",s),u.setAttributeNS(null,"stroke-opacity",l)},e.visPropOld.strokecolor),(e.elementClass===Y.Z.OBJECT_CLASS_CURVE||e.elementClass===Y.Z.OBJECT_CLASS_LINE)&&(d.Z.evaluate(e.visProp.firstarrow)&&this._setArrowColor(e.rendNodeTriangleStart,s,l,e,e.visPropCalc.typeFirst),d.Z.evaluate(e.visProp.lastarrow)&&this._setArrowColor(e.rendNodeTriangleEnd,s,l,e,e.visPropCalc.typeLast))),e.visPropOld.strokecolor=n,e.visPropOld.strokeopacity=a)},setObjectStrokeWidth:function(e,t){var r,n=d.Z.evaluate(t);isNaN(n)||e.visPropOld.strokewidth===n||(this.setPropertyPrim(r=e.rendNode,"stroked","true"),d.Z.exists(n)&&this.setPropertyPrim(r,"stroke-width",n+"px"),e.visPropOld.strokewidth=n)},setLineCap:function(e){var t=d.Z.evaluate(e.visProp.linecap);void 0===t||""===t||e.visPropOld.linecap===t||!d.Z.exists(e.rendNode)||(this.setPropertyPrim(e.rendNode,"stroke-linecap",t),e.visPropOld.linecap=t)},setShadow:function(e){var r,n,s,o,a,l,u,c,t=d.Z.evaluate(e.visProp.shadow),h=!0,g=!1;(r=JSON.stringify(t))!==e.visPropOld.shadow&&("boolean"==typeof t?(h=!0,g=t,n="none",s=3,o=.1,a=[5,5],l=1):d.Z.evaluate(t.enabled)?(h=!1,g=!0,n=D.Z.rgbParser(d.Z.evaluate(t.color)),s=d.Z.evaluate(t.blur),o=d.Z.evaluate(t.blend),a=d.Z.evaluate(t.offset),l=d.Z.evaluate(t.opacity)):g=!1,d.Z.exists(e.rendNode)&&(g?h?e.rendNode.setAttributeNS(null,"filter",this.toURL(this.container.id+"_f1")):((c=this.container.ownerDocument.getElementById(u))&&this.defs.removeChild(c),this.defs.appendChild(this.createShadowFilter(u=e.rendNode.id+"_f1",n,l,o,s,a)),e.rendNode.setAttributeNS(null,"filter",this.toURL(u))):e.rendNode.removeAttributeNS(null,"filter")),e.visPropOld.shadow=r)},suspendRedraw:function(){},unsuspendRedraw:function(){},resize:function(e,t){this.svgRoot.setAttribute("width",parseFloat(e)),this.svgRoot.setAttribute("height",parseFloat(t))},createTouchpoints:function(e){var t,s;for(this.touchpoints=[],t=0;t<e;t++)s=this.createPrim("path","touchpoint1_"+t),this.appendChildPrim(s,19),s.setAttributeNS(null,"d","M 0 0"),this.touchpoints.push(s),this.setPropertyPrim(s,"stroked","true"),this.setPropertyPrim(s,"stroke-width","1px"),s.setAttributeNS(null,"stroke","#000000"),s.setAttributeNS(null,"stroke-opacity",1),s.setAttributeNS(null,"display","none"),s=this.createPrim("ellipse","touchpoint2_"+t),this.appendChildPrim(s,19),this.updateEllipsePrim(s,0,0,0,0),this.touchpoints.push(s),this.setPropertyPrim(s,"stroked","true"),this.setPropertyPrim(s,"stroke-width","1px"),s.setAttributeNS(null,"stroke","#000000"),s.setAttributeNS(null,"stroke-opacity",1),s.setAttributeNS(null,"fill","#ffffff"),s.setAttributeNS(null,"fill-opacity",0),s.setAttributeNS(null,"display","none")},showTouchpoint:function(e){this.touchpoints&&e>=0&&2*e<this.touchpoints.length&&(this.touchpoints[2*e].setAttributeNS(null,"display","inline"),this.touchpoints[2*e+1].setAttributeNS(null,"display","inline"))},hideTouchpoint:function(e){this.touchpoints&&e>=0&&2*e<this.touchpoints.length&&(this.touchpoints[2*e].setAttributeNS(null,"display","none"),this.touchpoints[2*e+1].setAttributeNS(null,"display","none"))},updateTouchpoint:function(e,t){var r,n;this.touchpoints&&e>=0&&2*e<this.touchpoints.length&&(this.touchpoints[2*e].setAttributeNS(null,"d","M "+((r=t[0])-37)+" "+(n=t[1])+" L "+(r+37)+" "+n+" M "+r+" "+(n-37)+" L "+r+" "+(n+37)),this.updateEllipsePrim(this.touchpoints[2*e+1],t[0],t[1],25,25))},_getValuesOfDOMElements:function(e){var t=[];if(1===e.nodeType)for(e=e.firstChild;e;)void 0!==e.id&&void 0!==e.value&&t.push([e.id,e.value]),t=t.concat(this._getValuesOfDOMElements(e)),e=e.nextSibling;return t},_getDataUri:function(e,t){var r=new Image;r.onload=function(){var n=document.createElement("canvas");n.width=this.naturalWidth,n.height=this.naturalHeight,n.getContext("2d").drawImage(this,0,0),t(n.toDataURL("image/png")),n.remove()},r.src=e},_getImgDataURL:function(e){var t,r,n,s,o,a;if((r=(t=e.getElementsByTagName("image")).length)>0)for(n=document.createElement("canvas"),a=0;a<r;a++){t[a].setAttribute("crossorigin","anonymous"),s=n.getContext("2d"),n.width=t[a].getAttribute("width"),n.height=t[a].getAttribute("height");try{s.drawImage(t[a],0,0,n.width,n.height),o=n.toDataURL(),t[a].setAttribute("xlink:href",o)}catch(l){console.log("CORS problem! Image can not be used",l)}}return!0},dumpToDataURI:function(e){var n,s,o,t=this.svgRoot,r=window.btoa||cc.encode,a=[];if(this.container.hasChildNodes()&&d.Z.exists(this.foreignObjLayer)&&!e)for(this.foreignObjLayer.setAttribute("display","inline");t.nextSibling;)a=a.concat(this._getValuesOfDOMElements(t.nextSibling)),this.foreignObjLayer.appendChild(t.nextSibling);if(this._getImgDataURL(t),t.setAttribute("xmlns","http://www.w3.org/2000/svg"),n=(new XMLSerializer).serializeToString(t),!0!==e)for(o=a.length,s=0;s<o;s++)n=n.replace('id="'+a[s][0]+'"','id="'+a[s][0]+'" value="'+a[s][1]+'"');if((n.match(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g)||[]).length>1&&(n=n.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,"")),n=(n=n.replace(/&nbsp;/g," ")).replace(/url\(&quot;(.*)&quot;\)/g,"url($1)"),d.Z.exists(this.foreignObjLayer)&&this.foreignObjLayer.hasChildNodes()){for(;this.foreignObjLayer.firstChild;)this.container.appendChild(this.foreignObjLayer.firstChild);this.foreignObjLayer.setAttribute("display","none")}return"data:image/svg+xml;base64,"+r(unescape(encodeURIComponent(n)))},dumpToCanvas:function(e,t,r,n){var s,o,a,l;return(a=this.container.ownerDocument.getElementById(e)).width=a.width,l=a.getContext("2d"),void 0!==t&&void 0!==r&&(a.style.width=parseFloat(t)+"px",a.style.height=parseFloat(r)+"px",a.setAttribute("width",parseFloat(t)),a.setAttribute("height",parseFloat(r))),o=new Image,s=this.dumpToDataURI(n),o.src=s,"Promise"in window?new Promise(function(c,h){try{o.onload=function(){l.drawImage(o,0,0,t,r),c()}}catch(g){h(g)}}):(o.onload=function(){window.setTimeout(function(){try{l.drawImage(o,0,0,t,r)}catch{console.log("screenshots not longer supported on IE")}},200)},this)},screenshot:function(e,t,r){var n,a,l,u,c,h,g,y,w,T,N,R,s=this.container.ownerDocument,o=this.container.parentNode,E=e.attr.screenshot,L=!1;return"no"===this.type||(g=E.scale*this.container.getBoundingClientRect().width,y=E.scale*this.container.getBoundingClientRect().height,void 0===t||""===t?(L=!0,(u=new Image).style.width=g+"px",u.style.height=y+"px"):(L=!1,u=s.getElementById(t)),L&&((n=s.createElement("div")).style.cssText=E.css,n.style.width=g+"px",n.style.height=y+"px",n.style.zIndex=this.container.style.zIndex+120,n.style.position="absolute",n.style.top=this.container.offsetTop+"px",n.style.left=this.container.offsetLeft+"px"),a=s.createElement("canvas"),l=Math.random().toString(36).substr(2,5),a.setAttribute("id",l),a.setAttribute("width",g),a.setAttribute("height",y),a.style.width=g+"px",a.style.height=g+"px",a.style.display="none",o.appendChild(a),L&&(c=s.createElement("span"),h=s.createTextNode("\u2716"),c.style.cssText=E.cssButton,c.appendChild(h),c.onclick=function(){n.parentNode.removeChild(n)},n.appendChild(u),n.appendChild(c),o.insertBefore(n,this.container.nextSibling)),w=s.getElementById(this.uniqName("navigationbar")),d.Z.exists(w)&&(T=w.style.display,w.style.display="none",N=this.removeToInsertLater(w)),R=function(){u.src=a.toDataURL("image/png"),o.removeChild(a)},"Promise"in window?this.dumpToCanvas(l,g,y,r).then(R):(this.dumpToCanvas(l,g,y,r),window.setTimeout(R,200)),d.Z.exists(w)&&(w.style.display=T,N())),this}});const CR=D.Z.SVGRenderer;D.Z.VMLRenderer=function(e){this.type="vml",this.container=e,this.container.style.overflow="hidden",""===this.container.style.position&&(this.container.style.position="relative"),this.container.onselectstart=function(){return!1},this.resolution=10,d.Z.exists(D.Z.vmlStylesheet)||(e.ownerDocument.namespaces.add("jxgvml","urn:schemas-microsoft-com:vml"),D.Z.vmlStylesheet=this.container.ownerDocument.createStyleSheet(),D.Z.vmlStylesheet.addRule(".jxgvml","behavior:url(#default#VML)"));try{e.ownerDocument.namespaces.jxgvml||e.ownerDocument.namespaces.add("jxgvml","urn:schemas-microsoft-com:vml"),this.createNode=function(t){return e.ownerDocument.createElement("<jxgvml:"+t+' class="jxgvml">')}}catch{this.createNode=function(r){return e.ownerDocument.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="jxgvml">')}}this.dashArray=["Solid","1 1","ShortDash","Dash","LongDash","ShortDashDot","LongDashDot"]},D.Z.VMLRenderer.prototype=new fc,D.Z.extend(D.Z.VMLRenderer.prototype,{_setAttr:function(e,t,r,n){try{8===this.container.ownerDocument.documentMode?e[t]=r:e.setAttribute(t,r,n)}catch{D.Z.debug("_setAttr: "+t+" "+r+"<br>\n")}},updateTicks:function(e){var t,r,n,s,o,a=this.resolution,l=[];for(r=e.ticks.length,t=0;t<r;t++)o=(n=e.ticks[t])[1],d.Z.isNumber((s=n[0])[0])&&d.Z.isNumber(s[1])&&l.push(" m "+Math.round(a*s[0])+", "+Math.round(a*o[0])+" l "+Math.round(a*s[1])+", "+Math.round(a*o[1])+" ");d.Z.exists(e.rendNode)||(e.rendNode=this.createPrim("path",e.id),this.appendChildPrim(e.rendNode,d.Z.evaluate(e.visProp.layer))),this._setAttr(e.rendNode,"stroked","true"),this._setAttr(e.rendNode,"strokecolor",d.Z.evaluate(e.visProp.strokecolor),1),this._setAttr(e.rendNode,"strokeweight",d.Z.evaluate(e.visProp.strokewidth)),this._setAttr(e.rendNodeStroke,"opacity",100*d.Z.evaluate(e.visProp.strokeopacity)+"%"),this.updatePathPrim(e.rendNode,l,e.board)},displayCopyright:function(e,t){var r,n;(r=this.createNode("textbox")).style.position="absolute",this._setAttr(r,"id",this.container.id+"_licenseText"),r.style.left=20,r.style.top=2,r.style.fontSize=t,r.style.color="#356AA0",r.style.fontFamily="Arial,Helvetica,sans-serif",this._setAttr(r,"opacity","30%"),r.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11='1.0', sizingMethod='auto expand', enabled = false) progid:DXImageTransform.Microsoft.Alpha(opacity = 30, enabled = true)",n=this.container.ownerDocument.createTextNode(e),r.appendChild(n),this.appendChildPrim(r,0)},drawInternalText:function(e){var t;return(t=this.createNode("textbox")).style.position="absolute",e.rendNodeText=this.container.ownerDocument.createTextNode(""),t.appendChild(e.rendNodeText),this.appendChildPrim(t,9),t.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11='1.0', sizingMethod='auto expand', enabled = false) progid:DXImageTransform.Microsoft.Alpha(opacity = 100, enabled = false)",t},updateInternalText:function(e){var t,o,a,l,u,c,r=e.plaintext,n=this.joinTransforms(e,e.transformations),s=[0,0],h=e.rendNode,g=[],y=e.getAnchorX(),E=e.getAnchorY();if(!isNaN(e.coords.scrCoords[1]+e.coords.scrCoords[2])){for("right"===y?s[0]=1:"middle"===y&&(s[0]=.5),"bottom"===E?s[1]=1:"middle"===E&&(s[1]=.5),g[0]=q.Z.matVecMult(n,[1,e.coords.scrCoords[1]-s[0]*e.size[0],e.coords.scrCoords[2]+(1-s[1])*e.size[1]+this.vOffsetText]),g[0][1]/=g[0][0],g[0][2]/=g[0][0],g[1]=q.Z.matVecMult(n,[1,e.coords.scrCoords[1]+(1-s[0])*e.size[0],e.coords.scrCoords[2]+(1-s[1])*e.size[1]+this.vOffsetText]),g[1][1]/=g[1][0],g[1][2]/=g[1][0],g[2]=q.Z.matVecMult(n,[1,e.coords.scrCoords[1]+(1-s[0])*e.size[0],e.coords.scrCoords[2]-s[1]*e.size[1]+this.vOffsetText]),g[2][1]/=g[2][0],g[2][2]/=g[2][0],g[3]=q.Z.matVecMult(n,[1,e.coords.scrCoords[1]-s[0]*e.size[0],e.coords.scrCoords[2]-s[1]*e.size[1]+this.vOffsetText]),g[3][1]/=g[3][0],g[3][2]/=g[3][0],o=g[0][1],l=g[0][1],a=g[0][2],u=g[0][2],c=1;c<4;c++)o=Math.max(o,g[c][1]),l=Math.min(l,g[c][1]),a=Math.max(a,g[c][2]),u=Math.min(u,g[c][2]);t=1===s[0]?Math.floor(e.board.canvasWidth-o):Math.floor(l),e.visPropOld.left!==y+t&&(1===s[0]?(e.rendNode.style.right=t+"px",e.rendNode.style.left="auto"):(e.rendNode.style.left=t+"px",e.rendNode.style.right="auto"),e.visPropOld.left=y+t),t=1===s[1]?Math.floor(e.board.canvasHeight-a):Math.floor(u),e.visPropOld.top!==E+t&&(1===s[1]?(e.rendNode.style.bottom=t+"px",e.rendNode.style.top="auto"):(e.rendNode.style.top=t+"px",e.rendNode.style.bottom="auto"),e.visPropOld.top=E+t)}e.htmlStr!==r&&(e.rendNodeText.data=r,e.htmlStr=r),h.filters.item(0).M11=n[1][1],h.filters.item(0).M12=n[1][2],h.filters.item(0).M21=n[2][1],h.filters.item(0).M22=n[2][2],h.filters.item(0).enabled=!0},drawImage:function(e){var t;(t=this.container.ownerDocument.createElement("img")).style.position="absolute",this._setAttr(t,"id",this.container.id+"_"+e.id),this.container.appendChild(t),this.appendChildPrim(t,d.Z.evaluate(e.visProp.layer)),t.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11='1.0', sizingMethod='auto expand') progid:DXImageTransform.Microsoft.Alpha(opacity = 100, enabled = false)",e.rendNode=t,this.updateImage(e)},transformImage:function(e,t){var r,n,s,o,a,l,u=e.rendNode,c=[];if(t.length>0){for(r=this.joinTransforms(e,t),c[0]=q.Z.matVecMult(r,e.coords.scrCoords),c[0][1]/=c[0][0],c[0][2]/=c[0][0],c[1]=q.Z.matVecMult(r,[1,e.coords.scrCoords[1]+e.size[0],e.coords.scrCoords[2]]),c[1][1]/=c[1][0],c[1][2]/=c[1][0],c[2]=q.Z.matVecMult(r,[1,e.coords.scrCoords[1]+e.size[0],e.coords.scrCoords[2]-e.size[1]]),c[2][1]/=c[2][0],c[2][2]/=c[2][0],c[3]=q.Z.matVecMult(r,[1,e.coords.scrCoords[1],e.coords.scrCoords[2]-e.size[1]]),c[3][1]/=c[3][0],c[3][2]/=c[3][0],n=c[0][1],o=c[0][1],s=c[0][2],a=c[0][2],l=1;l<4;l++)n=Math.max(n,c[l][1]),o=Math.min(o,c[l][1]),s=Math.max(s,c[l][2]),a=Math.min(a,c[l][2]);u.style.left=Math.floor(o)+"px",u.style.top=Math.floor(a)+"px",u.filters.item(0).M11=r[1][1],u.filters.item(0).M12=r[1][2],u.filters.item(0).M21=r[2][1],u.filters.item(0).M22=r[2][2],u.filters.item(0).enabled=!0}},updateImageURL:function(e){var t=d.Z.evaluate(e.url);this._setAttr(e.rendNode,"src",t)},appendChildPrim:function(e,t){return d.Z.exists(t)||(t=0),e.style.zIndex=t,this.container.appendChild(e),e},appendNodesToElement:function(e,t){("shape"===t||"path"===t||"polygon"===t)&&(e.rendNodePath=this.getElementById(e.id+"_path")),e.rendNodeFill=this.getElementById(e.id+"_fill"),e.rendNodeStroke=this.getElementById(e.id+"_stroke"),e.rendNodeShadow=this.getElementById(e.id+"_shadow"),e.rendNode=this.getElementById(e.id)},createPrim:function(e,t){var r,n,s=this.createNode("fill"),o=this.createNode("stroke"),a=this.createNode("shadow");return this._setAttr(s,"id",this.container.id+"_"+t+"_fill"),this._setAttr(o,"id",this.container.id+"_"+t+"_stroke"),this._setAttr(a,"id",this.container.id+"_"+t+"_shadow"),"circle"===e||"ellipse"===e?((r=this.createNode("oval")).appendChild(s),r.appendChild(o),r.appendChild(a)):"polygon"===e||"path"===e||"shape"===e||"line"===e?((r=this.createNode("shape")).appendChild(s),r.appendChild(o),r.appendChild(a),n=this.createNode("path"),this._setAttr(n,"id",this.container.id+"_"+t+"_path"),r.appendChild(n)):((r=this.createNode(e)).appendChild(s),r.appendChild(o),r.appendChild(a)),r.style.position="absolute",r.style.left="0px",r.style.top="0px",this._setAttr(r,"id",this.container.id+"_"+t),r},remove:function(e){d.Z.exists(e)&&e.removeNode(!0)},makeArrows:function(e){var t,r=d.Z.evaluate(e.visProp.firstarrow),n=d.Z.evaluate(e.visProp.lastarrow);e.visPropOld.firstarrow===r&&e.visPropOld.lastarrow===n||(r?(this._setAttr(t=e.rendNodeStroke,"startarrow","block"),this._setAttr(t,"startarrowlength","long")):d.Z.exists(t=e.rendNodeStroke)&&this._setAttr(t,"startarrow","none"),n?(this._setAttr(t=e.rendNodeStroke,"id",this.container.id+"_"+e.id+"stroke"),this._setAttr(t,"endarrow","block"),this._setAttr(t,"endarrowlength","long")):d.Z.exists(t=e.rendNodeStroke)&&this._setAttr(t,"endarrow","none"),e.visPropOld.firstarrow=r,e.visPropOld.lastarrow=n)},updateEllipsePrim:function(e,t,r,n,s){e.style.left=Math.floor(t-n)+"px",e.style.top=Math.floor(r-s)+"px",e.style.width=Math.floor(2*Math.abs(n))+"px",e.style.height=Math.floor(2*Math.abs(s))+"px"},updateLinePrim:function(e,t,r,n,s,o){var a,l=this.resolution;isNaN(t+r+n+s)||(a=["m ",Math.floor(l*t),", ",Math.floor(l*r)," l ",Math.floor(l*n),", ",Math.floor(l*s)],this.updatePathPrim(e,a,o))},updatePathPrim:function(e,t,r){var n=r.canvasWidth,s=r.canvasHeight;t.length<=0&&(t=["m 0,0"]),e.style.width=n,e.style.height=s,this._setAttr(e,"coordsize",[Math.floor(this.resolution*n),Math.floor(this.resolution*s)].join(",")),this._setAttr(e,"path",t.join(""))},updatePathStringPoint:function(e,t,r){var n=[],s=Math.round,o=e.coords.scrCoords,a=t*Math.sqrt(3)*.5,l=.5*t,u=this.resolution;return"x"===r?n.push([" m ",s(u*(o[1]-t)),", ",s(u*(o[2]-t))," l ",s(u*(o[1]+t)),", ",s(u*(o[2]+t))," m ",s(u*(o[1]+t)),", ",s(u*(o[2]-t))," l ",s(u*(o[1]-t)),", ",s(u*(o[2]+t))].join("")):"+"===r?n.push([" m ",s(u*(o[1]-t)),", ",s(u*o[2])," l ",s(u*(o[1]+t)),", ",s(u*o[2])," m ",s(u*o[1]),", ",s(u*(o[2]-t))," l ",s(u*o[1]),", ",s(u*(o[2]+t))].join("")):"<>"===r?n.push([" m ",s(u*(o[1]-t)),", ",s(u*o[2])," l ",s(u*o[1]),", ",s(u*(o[2]+t))," l ",s(u*(o[1]+t)),", ",s(u*o[2])," l ",s(u*o[1]),", ",s(u*(o[2]-t))," x e "].join("")):"^"===r?n.push([" m ",s(u*o[1]),", ",s(u*(o[2]-t))," l ",s(u*(o[1]-a)),", ",s(u*(o[2]+l))," l ",s(u*(o[1]+a)),", ",s(u*(o[2]+l))," x e "].join("")):"v"===r?n.push([" m ",s(u*o[1]),", ",s(u*(o[2]+t))," l ",s(u*(o[1]-a)),", ",s(u*(o[2]-l))," l ",s(u*(o[1]+a)),", ",s(u*(o[2]-l))," x e "].join("")):">"===r?n.push([" m ",s(u*(o[1]+t)),", ",s(u*o[2])," l ",s(u*(o[1]-l)),", ",s(u*(o[2]-a))," l ",s(u*(o[1]-l)),", ",s(u*(o[2]+a))," l ",s(u*(o[1]+t)),", ",s(u*o[2])].join("")):"<"===r&&n.push([" m ",s(u*(o[1]-t)),", ",s(u*o[2])," l ",s(u*(o[1]+l)),", ",s(u*(o[2]-a))," l ",s(u*(o[1]+l)),", ",s(u*(o[2]+a))," x e "].join("")),n},updatePathStringPrim:function(e){var t,r,n=[],s=this.resolution,o=Math.round,a=" m ",c=a,h=Math.min(e.numberPoints,8192);if(e.numberPoints<=0)return"";if(h=Math.min(h,e.points.length),1===e.bezierDegree)for(t=0;t<h;t++)r=e.points[t].scrCoords,isNaN(r[1])||isNaN(r[2])?c=a:(r[1]>2e4?r[1]=2e4:r[1]<-2e4&&(r[1]=-2e4),r[2]>2e4?r[2]=2e4:r[2]<-2e4&&(r[2]=-2e4),n.push([c,o(s*r[1]),", ",o(s*r[2])].join("")),c=" l ");else if(3===e.bezierDegree)for(t=0;t<h;)r=e.points[t].scrCoords,isNaN(r[1])||isNaN(r[2])?c=a:(n.push([c,o(s*r[1]),", ",o(s*r[2])].join(""))," c "===c&&(n.push([" ",o(s*(r=e.points[t+=1].scrCoords)[1]),", ",o(s*r[2])].join("")),n.push([" ",o(s*(r=e.points[t+=1].scrCoords)[1]),", ",o(s*r[2])].join(""))),c=" c "),t+=1;return n.push(" e"),n},updatePathStringBezierPrim:function(e){var t,r,n,s,o,a,l=[],u=d.Z.evaluate(e.visProp.strokewidth),c=this.resolution,h=Math.round,g=" m ",E=g,w="plot"!==d.Z.evaluate(e.visProp.curvetype),T=Math.min(e.numberPoints,8192);if(e.numberPoints<=0)return"";for(w&&e.board.options.curve.RDPsmoothing&&(e.points=Qe.Z.RamerDouglasPeucker(e.points,1)),T=Math.min(T,e.points.length),r=1;r<3;r++)for(E=g,t=0;t<T;t++)s=e.points[t].scrCoords,isNaN(s[1])||isNaN(s[2])?E=g:(s[1]>2e4?s[1]=2e4:s[1]<-2e4&&(s[1]=-2e4),s[2]>2e4?s[2]=2e4:s[2]<-2e4&&(s[2]=-2e4),l.push(E===g?[E,h(c*s[1])," ",h(c*s[2])].join(""):[E,h(c*(o+.333*(s[1]-o)+u*((n=2*r)*Math.random()-r)))," ",h(c*(a+.333*(s[2]-a)+u*(n*Math.random()-r)))," ",h(c*(o+.666*(s[1]-o)+u*(n*Math.random()-r)))," ",h(c*(a+.666*(s[2]-a)+u*(n*Math.random()-r)))," ",h(c*s[1])," ",h(c*s[2])].join("")),E=" c ",o=s[1],a=s[2]);return l.push(" e"),l},updatePolygonPrim:function(e,t){var r,o,n=t.vertices.length,s=this.resolution,a=[];if(this._setAttr(e,"stroked","false"),o=t.vertices[0].coords.scrCoords,!isNaN(o[1]+o[2])){for(a.push(["m ",Math.floor(s*o[1]),",",Math.floor(s*o[2])," l "].join("")),r=1;r<n-1;r++){if(!t.vertices[r].isReal)return void this.updatePathPrim(e,"",t.board);if(o=t.vertices[r].coords.scrCoords,isNaN(o[1]+o[2]))return;a.push(Math.floor(s*o[1])+","+Math.floor(s*o[2])),r<n-2&&a.push(", ")}a.push(" x e"),this.updatePathPrim(e,a,t.board)}},updateRectPrim:function(e,t,r,n,s){e.style.left=Math.floor(t)+"px",e.style.top=Math.floor(r)+"px",n>=0&&(e.style.width=n+"px"),s>=0&&(e.style.height=s+"px")},setPropertyPrim:function(e,t,r){var s,n="";switch(t){case"stroke":n="strokecolor";break;case"stroke-width":n="strokeweight";break;case"stroke-dasharray":n="dashstyle"}""!==n&&(s=d.Z.evaluate(r),this._setAttr(e,n,s))},display:function(e,t){e&&e.rendNode&&(e.visPropOld.visible=t,e.rendNode.style.visibility=t?"inherit":"hidden")},show:function(e){D.Z.deprecated("Board.renderer.show()","Board.renderer.display()"),e&&e.rendNode&&(e.rendNode.style.visibility="inherit")},hide:function(e){D.Z.deprecated("Board.renderer.hide()","Board.renderer.display()"),e&&e.rendNode&&(e.rendNode.style.visibility="hidden")},setDashStyle:function(e,t){t.dash>=0&&this._setAttr(e.rendNodeStroke,"dashstyle",this.dashArray[t.dash])},setGradient:function(e){var t=e.rendNodeFill,r=d.Z.evaluate(e.visProp.gradient);"linear"===r?(this._setAttr(t,"type","gradient"),this._setAttr(t,"color2",d.Z.evaluate(e.visProp.gradientsecondcolor)),this._setAttr(t,"opacity2",d.Z.evaluate(e.visProp.gradientsecondopacity)),this._setAttr(t,"angle",d.Z.evaluate(e.visProp.gradientangle))):"radial"===r?(this._setAttr(t,"type","gradientradial"),this._setAttr(t,"color2",d.Z.evaluate(e.visProp.gradientsecondcolor)),this._setAttr(t,"opacity2",d.Z.evaluate(e.visProp.gradientsecondopacity)),this._setAttr(t,"focusposition",100*d.Z.evaluate(e.visProp.gradientpositionx)+"%,"+100*d.Z.evaluate(e.visProp.gradientpositiony)+"%"),this._setAttr(t,"focussize","0,0")):this._setAttr(t,"type","solid")},setObjectFillColor:function(e,t,r){var s,o,l,n=d.Z.evaluate(t),a=d.Z.evaluate(r),u=e.rendNode;a=a>0?a:0,(e.visPropOld.fillcolor!==n||e.visPropOld.fillopacity!==a)&&(d.Z.exists(n)&&!1!==n&&(9!==n.length?(s=n,l=a):(s=(o=Fi.Z.rgba2rgbo(n))[0],l=a*o[1]),"none"===s||!1===s?this._setAttr(e.rendNode,"filled","false"):(this._setAttr(e.rendNode,"filled","true"),this._setAttr(e.rendNode,"fillcolor",s),d.Z.exists(l)&&e.rendNodeFill&&this._setAttr(e.rendNodeFill,"opacity",100*l+"%")),e.type===Y.Z.OBJECT_TYPE_IMAGE&&u.filters.length>1&&(u.filters.item(1).opacity=Math.round(100*l),u.filters.item(1).enabled=!0)),e.visPropOld.fillcolor=n,e.visPropOld.fillopacity=a)},setObjectStrokeColor:function(e,t,r){var s,o,l,c,n=d.Z.evaluate(t),a=d.Z.evaluate(r),u=e.rendNode;a=a>0?a:0,(e.visPropOld.strokecolor!==n||e.visPropOld.strokeopacity!==a)&&(d.Z.exists(n)&&!1!==n&&(9!==n.length?(s=n,l=a):(s=(o=t.rgba2rgbo(n))[0],l=a*o[1]),e.elementClass===Y.Z.OBJECT_CLASS_TEXT?(u.filters.length>1&&(u.filters.item(1).opacity=Math.round(100*l),u.filters.item(1).enabled=!0),u.style.color=s):(!1!==s&&(this._setAttr(u,"stroked","true"),this._setAttr(u,"strokecolor",s)),c=e.rendNodeStroke,d.Z.exists(l)&&e.type!==Y.Z.OBJECT_TYPE_IMAGE&&this._setAttr(c,"opacity",100*l+"%"))),e.visPropOld.strokecolor=n,e.visPropOld.strokeopacity=a)},setObjectStrokeWidth:function(e,t){var n,r=d.Z.evaluate(t);isNaN(r)||e.visPropOld.strokewidth===r||(this.setPropertyPrim(n=e.rendNode,"stroked","true"),d.Z.exists(r)&&(this.setPropertyPrim(n,"stroke-width",r),0===r&&d.Z.exists(e.rendNodeStroke)&&this._setAttr(n,"stroked","false")),e.visPropOld.strokewidth=r)},setShadow:function(e){var t=e.rendNodeShadow,r=d.Z.evaluate(e.visProp.shadow);!t||e.visPropOld.shadow===r||(r?(this._setAttr(t,"On","True"),this._setAttr(t,"Offset","3pt,3pt"),this._setAttr(t,"Opacity","60%"),this._setAttr(t,"Color","#aaaaaa")):this._setAttr(t,"On","False"),e.visPropOld.shadow=r)},suspendRedraw:function(){this.container.style.display="none"},unsuspendRedraw:function(){this.container.style.display=""}});const bR=D.Z.VMLRenderer;var PR="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");D.Z.Util=D.Z.Util||{},D.Z.Util.genUUID=function(e){var t,r,n=[],s=0;for(""!==(e=e||"")&&"-"!==e.substr(e.length-1)&&(e+="-"),r=0;r<36;r++)8===r||13===r||18===r||23===r?n[r]="-":14===r?n[r]="4":(s<=2&&(s=33554432+16777216*Math.random()|0),t=15&s,s>>=4,n[r]=PR[19===r?3&t|8:t]);return e+n.join("")};const ZR=D.Z.Util;D.Z.CanvasRenderer=function(e,t){if(this.type="canvas",this.canvasRoot=null,this.suspendHandle=null,this.canvasId=ZR.genUUID(),this.canvasNamespace=null,le.Z.isBrowser)this.container=e,this.container.style.MozUserSelect="none",this.container.style.userSelect="none",this.container.style.overflow="hidden",""===this.container.style.position&&(this.container.style.position="relative"),this.container.innerHTML=['<canvas id="',this.canvasId,'" width="',t.width,'px" height="',t.height,'px"></canvas>'].join(""),this.canvasRoot=this.container.ownerDocument.getElementById(this.canvasId),this.canvasRoot.style.display="block",this.context=this.canvasRoot.getContext("2d");else if(le.Z.isNode())try{this.canvasRoot=D.Z.createCanvas(500,500),this.context=this.canvasRoot.getContext("2d")}catch{throw new Error('JXG.createCanvas not available.\nInstall the npm package `canvas`\nand call:\n    import { createCanvas } from "canvas";\n    JXG.createCanvas = createCanvas;\n')}},D.Z.CanvasRenderer.prototype=new fc,D.Z.extend(D.Z.CanvasRenderer.prototype,{_drawPolygon:function(e,t,r){var n,s=e.length,o=this.context;if(s>0){if(r&&(o.lineWidth=0),o.beginPath(),o.moveTo(e[0][0],e[0][1]),1===t)for(n=1;n<s;n++)o.lineTo(e[n][0],e[n][1]);else for(n=1;n<s;n+=3)o.bezierCurveTo(e[n][0],e[n][1],e[n+1][0],e[n+1][1],e[n+2][0],e[n+2][1]);r?(o.lineTo(e[0][0],e[0][1]),o.closePath(),o.fill("evenodd")):o.stroke()}},_fill:function(e){var t=this.context;t.save(),this._setColor(e,"fill")&&t.fill("evenodd"),t.restore()},_rotatePoint:function(e,t,r){return[t*Math.cos(e)-r*Math.sin(e),t*Math.sin(e)+r*Math.cos(e)]},_rotateShape:function(e,t){var r,n=[],s=e.length;if(s<=0)return e;for(r=0;r<s;r++)n.push(this._rotatePoint(t,e[r][0],e[r][1]));return n},updateGradientAngle:function(e,t){var a,l,u,c,h,g,N,L,r=1,n=Math.cos(-t),s=Math.sin(-t),o=e.getBoundingBox();return Math.abs(n)>Math.abs(s)?r/=Math.abs(n):r/=Math.abs(s),n>=0?(u=0,c=n*r):(u=-n*r,c=0),s>=0?(h=0,g=s*r):(h=-s*r,g=0),a=new ge.Z(Y.Z.COORDS_BY_USER,[o[0],o[1]],e.board),l=new ge.Z(Y.Z.COORDS_BY_USER,[o[2],o[3]],e.board),this.context.createLinearGradient(a.scrCoords[1]+(N=l.scrCoords[1]-a.scrCoords[1])*u,a.scrCoords[2]+(L=l.scrCoords[2]-a.scrCoords[2])*h,a.scrCoords[1]+N*c,a.scrCoords[2]+L*g)},updateGradientCircle:function(e,t,r,n,s,o,a){var u,c,N,L,l=e.getBoundingBox();return u=new ge.Z(Y.Z.COORDS_BY_USER,[l[0],l[1]],e.board),c=new ge.Z(Y.Z.COORDS_BY_USER,[l[2],l[3]],e.board),this.context.createRadialGradient(u.scrCoords[1]+(N=c.scrCoords[1]-u.scrCoords[1])*s,c.scrCoords[2]+(L=u.scrCoords[2]-c.scrCoords[2])*o,a*(N+L)*.5,u.scrCoords[1]+N*t,c.scrCoords[2]+L*r,n*(N+L)*.5)},updateGradient:function(e){var t,r,s,n=d.Z.evaluate(e.visProp.gradient);return r=(r=d.Z.evaluate(e.visProp.fillopacity))>0?r:0,t=d.Z.evaluate(e.visProp.fillcolor),"linear"===n?s=this.updateGradientAngle(e,d.Z.evaluate(e.visProp.gradientangle)):"radial"===n&&(s=this.updateGradientCircle(e,d.Z.evaluate(e.visProp.gradientcx),d.Z.evaluate(e.visProp.gradientcy),d.Z.evaluate(e.visProp.gradientr),d.Z.evaluate(e.visProp.gradientfx),d.Z.evaluate(e.visProp.gradientfy),d.Z.evaluate(e.visProp.gradientfr))),s.addColorStop(d.Z.evaluate(e.visProp.gradientstartoffset),t),s.addColorStop(d.Z.evaluate(e.visProp.gradientendoffset),d.Z.evaluate(e.visProp.gradientsecondcolor)),s},_setColor:function(e,t,r){var o,a,l,u,c,h,g,y,n=!0,s=e.visProp;return t=t||"stroke",r=r||t,o=this._getHighlighted(e),"linear"===(y=d.Z.evaluate(e.visProp.gradient))||"radial"===y?(this.context[r+"Style"]=this.updateGradient(e),n):("none"!==(l=d.Z.evaluate(s[o+t+"color"]))&&!1!==l?(h=(h=d.Z.evaluate(s[o+t+"opacity"]))>0?h:0,9!==l.length?(c=l,g=h):(c=(u=Fi.Z.rgba2rgbo(l))[0],g=h*u[1]),this.context.globalAlpha=g,this.context[r+"Style"]=c):n=!1,a=parseFloat(d.Z.evaluate(s[o+"strokewidth"])),"stroke"===t&&!isNaN(a)&&(0===a?this.context.globalAlpha=0:this.context.lineWidth=a),"stroke"===t&&void 0!==s.linecap&&""!==s.linecap&&(this.context.lineCap=s.linecap),n)},_stroke:function(e){var t=this.context,r=d.Z.evaluate(e.visProp.dash),s=d.Z.evaluate(e.visProp.dashscale)?.5*d.Z.evaluate(e.visProp.strokewidth):1;t.save(),r>0?t.setLineDash&&t.setLineDash(this.dashArray[r-1].map(function(o){return o*s})):this.context.lineDashArray=[],this._setColor(e,"stroke")&&t.stroke(),t.restore()},_translateShape:function(e,t,r){var n,s=[],o=e.length;if(o<=0)return e;for(n=0;n<o;n++)s.push([e[n][0]+t,e[n][1]+r]);return s},drawPoint:function(e){var t=d.Z.evaluate(e.visProp.face),r=d.Z.evaluate(e.visProp.size),n=e.coords.scrCoords,s=r*Math.sqrt(3)*.5,o=.5*r,a=parseFloat(d.Z.evaluate(e.visProp.strokewidth))/2,l=this.context;if(e.visPropCalc.visible)switch(t){case"cross":case"x":l.beginPath(),l.moveTo(n[1]-r,n[2]-r),l.lineTo(n[1]+r,n[2]+r),l.moveTo(n[1]+r,n[2]-r),l.lineTo(n[1]-r,n[2]+r),l.lineCap="round",l.lineJoin="round",l.closePath(),this._stroke(e);break;case"circle":case"o":l.beginPath(),l.arc(n[1],n[2],r+1+a,0,2*Math.PI,!1),l.closePath(),this._fill(e),this._stroke(e);break;case"square":case"[]":if(r<=0)break;l.save(),this._setColor(e,"stroke","fill")&&l.fillRect(n[1]-r-a,n[2]-r-a,2*r+3*a,2*r+3*a),l.restore(),l.save(),this._setColor(e,"fill"),l.fillRect(n[1]-r+a,n[2]-r+a,2*r-a,2*r-a),l.restore();break;case"plus":case"+":l.beginPath(),l.moveTo(n[1]-r,n[2]),l.lineTo(n[1]+r,n[2]),l.moveTo(n[1],n[2]-r),l.lineTo(n[1],n[2]+r),l.lineCap="round",l.lineJoin="round",l.closePath(),this._stroke(e);break;case"divide":case"|":l.beginPath(),l.moveTo(n[1],n[2]-r),l.lineTo(n[1],n[2]+r),l.lineCap="round",l.lineJoin="round",l.closePath(),this._stroke(e);break;case"minus":case"-":l.beginPath(),l.moveTo(n[1]-r,n[2]),l.lineTo(n[1]+r,n[2]),l.lineCap="round",l.lineJoin="round",l.closePath(),this._stroke(e);break;case"diamond":case"<>":l.beginPath(),l.moveTo(n[1]-r,n[2]),l.lineTo(n[1],n[2]+r),l.lineTo(n[1]+r,n[2]),l.lineTo(n[1],n[2]-r),l.closePath(),this._fill(e),this._stroke(e);break;case"triangleup":case"A":case"a":case"^":l.beginPath(),l.moveTo(n[1],n[2]-r),l.lineTo(n[1]-s,n[2]+o),l.lineTo(n[1]+s,n[2]+o),l.closePath(),this._fill(e),this._stroke(e);break;case"triangledown":case"v":l.beginPath(),l.moveTo(n[1],n[2]+r),l.lineTo(n[1]-s,n[2]-o),l.lineTo(n[1]+s,n[2]-o),l.closePath(),this._fill(e),this._stroke(e);break;case"triangleleft":case"<":l.beginPath(),l.moveTo(n[1]-r,n[2]),l.lineTo(n[1]+o,n[2]-s),l.lineTo(n[1]+o,n[2]+s),l.closePath(),this._fill(e),this._stroke(e);break;case"triangleright":case">":l.beginPath(),l.moveTo(n[1]+r,n[2]),l.lineTo(n[1]-o,n[2]-s),l.lineTo(n[1]-o,n[2]+s),l.closePath(),this._fill(e),this._stroke(e)}},updatePoint:function(e){this.drawPoint(e)},drawArrows:function(e,t,r,n,s){var o,a,l,u,c,h,g,y,N,L,V,U,Q,ne,ce,he,ye,be,E=this.context,T=1,R=1,H=1,re=s.evFirst,We=s.evLast;if("none"!==d.Z.evaluate(e.visProp.strokecolor)&&(re||We)){if(e.elementClass===Y.Z.OBJECT_CLASS_LINE)o=t.scrCoords[1],a=t.scrCoords[2],l=r.scrCoords[1],u=r.scrCoords[2],ye=be=Math.atan2(u-a,l-o);else{if(o=e.points[0].scrCoords[1],a=e.points[0].scrCoords[2],(he=e.points.length-1)<1)return;l=e.points[e.points.length-1].scrCoords[1],u=e.points[e.points.length-1].scrCoords[2],ne=e.points[he].scrCoords[1]-e.points[he-1].scrCoords[1],ce=e.points[he].scrCoords[2]-e.points[he-1].scrCoords[2],re&&(ye=Math.atan2(e.points[1].scrCoords[2]-e.points[0].scrCoords[2],e.points[1].scrCoords[1]-e.points[0].scrCoords[1])),We&&(be=Math.atan2(ce,ne))}if(c=d.Z.evaluate(e.visProp[n+"strokewidth"]),re)if(h=c*s.sizeFirst,N=T=s.typeFirst,2===T)y=[[h,.5*-h],[0,0],[h,.5*h],[.5*h,0]];else if(3===T)y=[[h/3,.5*-h],[0,.5*-h],[0,.5*h],[h/3,.5*h]];else if(4===T)for(h/=10,R=3,Q=(y=[[10,3.31],[6.47,3.84],[2.87,4.5],[0,6.63],[.67,5.52],[1.33,4.42],[2,3.31],[1.33,2.21],[.67,1.1],[0,0],[2.87,2.13],[6.47,2.79],[10,3.31]]).length,U=0;U<Q;U++)y[U][0]*=-h,y[U][1]*=h,y[U][0]+=10*h,y[U][1]-=3.31*h;else if(5===T)for(h/=10,R=3,Q=(y=[[10,3.28],[6.61,4.19],[3.19,5.07],[0,6.55],[.62,5.56],[1,4.44],[1,3.28],[1,2.11],[.62,.99],[0,0],[3.19,1.49],[6.61,2.37],[10,3.28]]).length,U=0;U<Q;U++)y[U][0]*=-h,y[U][1]*=h,y[U][0]+=10*h,y[U][1]-=3.28*h;else if(6===T)for(h/=10,R=3,Q=(y=[[10,2.84],[6.61,3.59],[3.21,4.35],[0,5.68],[.33,4.73],[.67,3.78],[1,2.84],[.67,1.89],[.33,.95],[0,0],[3.21,1.33],[6.61,2.09],[10,2.84]]).length,U=0;U<Q;U++)y[U][0]*=-h,y[U][1]*=h,y[U][0]+=10*h,y[U][1]-=2.84*h;else if(7===T)for(h=c,R=3,Q=(y=[[0,10.39],[2.01,6.92],[5.96,5.2],[10,5.2],[5.96,5.2],[2.01,3.47],[0,0]]).length,U=0;U<Q;U++)y[U][0]*=-h,y[U][1]*=h,y[U][0]+=10*h,y[U][1]-=5.2*h;else y=[[h,.5*-h],[0,0],[h,.5*h]];if(We)if(h=c*s.sizeLast,L=T=s.typeLast,2===T)g=[[-h,.5*-h],[0,0],[-h,.5*h],[.5*-h,0]];else if(3===T)g=[[-h/3,.5*-h],[0,.5*-h],[0,.5*h],[-h/3,.5*h]];else if(4===T)for(h/=10,H=3,Q=(g=[[10,3.31],[6.47,3.84],[2.87,4.5],[0,6.63],[.67,5.52],[1.33,4.42],[2,3.31],[1.33,2.21],[.67,1.1],[0,0],[2.87,2.13],[6.47,2.79],[10,3.31]]).length,U=0;U<Q;U++)g[U][0]*=h,g[U][1]*=h,g[U][0]-=10*h,g[U][1]-=3.31*h;else if(5===T)for(h/=10,H=3,Q=(g=[[10,3.28],[6.61,4.19],[3.19,5.07],[0,6.55],[.62,5.56],[1,4.44],[1,3.28],[1,2.11],[.62,.99],[0,0],[3.19,1.49],[6.61,2.37],[10,3.28]]).length,U=0;U<Q;U++)g[U][0]*=h,g[U][1]*=h,g[U][0]-=10*h,g[U][1]-=3.28*h;else if(6===T)for(h/=10,H=3,Q=(g=[[10,2.84],[6.61,3.59],[3.21,4.35],[0,5.68],[.33,4.73],[.67,3.78],[1,2.84],[.67,1.89],[.33,.95],[0,0],[3.21,1.33],[6.61,2.09],[10,2.84]]).length,U=0;U<Q;U++)g[U][0]*=h,g[U][1]*=h,g[U][0]-=10*h,g[U][1]-=2.84*h;else if(7===T)for(h=c,H=3,Q=(g=[[0,10.39],[2.01,6.92],[5.96,5.2],[10,5.2],[5.96,5.2],[2.01,3.47],[0,0]]).length,U=0;U<Q;U++)g[U][0]*=h,g[U][1]*=h,g[U][0]-=10*h,g[U][1]-=5.2*h;else g=[[-h,.5*-h],[0,0],[-h,.5*h]];E.save(),this._setColor(e,"stroke","fill")&&(this._setColor(e,"stroke"),re&&(V=7!==N,this._drawPolygon(this._translateShape(this._rotateShape(y,ye),o,a),R,V)),We&&(V=7!==L,this._drawPolygon(this._translateShape(this._rotateShape(g,be),l,u),H,V))),E.restore()}},drawLine:function(e){var t,r,a,l,u,n=new ge.Z(Y.Z.COORDS_BY_USER,e.point1.coords.usrCoords,e.board),s=new ge.Z(Y.Z.COORDS_BY_USER,e.point2.coords.usrCoords,e.board),o=null;e.visPropCalc.visible&&(a=this._getHighlighted(e),l=d.Z.evaluate(e.visProp[a+"strokewidth"]),((u=this.getArrowHeadData(e,l,a)).evFirst||u.evLast)&&(o=-4),fe.Z.calcStraight(e,n,s,o),this.handleTouchpoints(e,n,s,u),t=new ge.Z(Y.Z.COORDS_BY_USER,n.usrCoords,e.board),r=new ge.Z(Y.Z.COORDS_BY_USER,s.usrCoords,e.board),this.getPositionArrowHead(e,n,s,u),this.context.beginPath(),this.context.moveTo(n.scrCoords[1],n.scrCoords[2]),this.context.lineTo(s.scrCoords[1],s.scrCoords[2]),this._stroke(e),(u.evFirst||u.evLast)&&this.drawArrows(e,t,r,a,u))},updateLine:function(e){this.drawLine(e)},drawTicks:function(){},updateTicks:function(e){var t,r,n,s,a,l,o=e.ticks.length,u=this.context;for(u.beginPath(),t=0;t<o;t++)for(a=(n=(r=e.ticks[t])[0]).length,u.moveTo(n[0],(s=r[1])[0]),l=1;l<a;++l)u.lineTo(n[l],s[l]);u.lineCap="round",this._stroke(e)},drawCurve:function(e){var t,r,n;d.Z.evaluate(e.visProp.handdrawing)?this.updatePathStringBezierPrim(e):this.updatePathStringPrim(e),e.numberPoints>1&&(t=this._getHighlighted(e),r=d.Z.evaluate(e.visProp[t+"strokewidth"]),((n=this.getArrowHeadData(e,r,t)).evFirst||n.evLast)&&this.drawArrows(e,null,null,t,n))},updateCurve:function(e){this.drawCurve(e)},drawEllipse:function(e){var t=e.center.coords.scrCoords[1],r=e.center.coords.scrCoords[2],n=e.board.unitX,s=e.board.unitY,o=2*e.Radius(),a=2*e.Radius(),l=o*n,u=a*s,c=t-l/2,h=r-u/2,g=l/2*.5522848,y=u/2*.5522848,E=c+l,w=h+u,T=c+l/2,N=h+u/2,L=this.context;o>0&&a>0&&!isNaN(t+r)&&(L.beginPath(),L.moveTo(c,N),L.bezierCurveTo(c,N-y,T-g,h,T,h),L.bezierCurveTo(T+g,h,E,N-y,E,N),L.bezierCurveTo(E,N+y,T+g,w,T,w),L.bezierCurveTo(T-g,w,c,N+y,c,N),L.closePath(),this._fill(e),this._stroke(e))},updateEllipse:function(e){return this.drawEllipse(e)},displayCopyright:function(e,t){var r=this.context;r.save(),r.font=t+"px Arial",r.fillStyle="#aaa",r.lineWidth=.5,r.fillText(e,10,2+t),r.restore()},drawInternalText:function(e){var t=d.Z.evaluate(e.visProp.fontsize),r=d.Z.evaluate(e.visProp.fontunit),n=e.getAnchorX(),s=e.getAnchorY(),o=this.context;return o.save(),this._setColor(e,"stroke","fill")&&!isNaN(e.coords.scrCoords[1]+e.coords.scrCoords[2])&&(o.font=(t>0?t:0)+r+" Arial",this.transformImage(e,e.transformations),"left"===n?o.textAlign="left":"right"===n?o.textAlign="right":"middle"===n&&(o.textAlign="center"),"bottom"===s?o.textBaseline="bottom":"top"===s?o.textBaseline="top":"middle"===s&&(o.textBaseline="middle"),o.fillText(e.plaintext,e.coords.scrCoords[1],e.coords.scrCoords[2])),o.restore(),null},updateInternalText:function(e){this.drawInternalText(e)},setObjectStrokeColor:function(e,t,r){var s,o,l,u,n=d.Z.evaluate(t),a=d.Z.evaluate(r);a=a>0?a:0,(e.visPropOld.strokecolor!==n||e.visPropOld.strokeopacity!==a)&&(d.Z.exists(n)&&!1!==n&&(9!==n.length?(s=n,l=a):(s=(o=Fi.Z.rgba2rgbo(n))[0],l=a*o[1]),u=e.rendNode,e.elementClass===Y.Z.OBJECT_CLASS_TEXT&&"html"===d.Z.evaluate(e.visProp.display)&&(u.style.color=s,u.style.opacity=l)),e.visPropOld.strokecolor=n,e.visPropOld.strokeopacity=a)},drawImage:function(e){e.rendNode=new Image,e._src="",this.updateImage(e)},updateImage:function(e){var t=this.context,r=d.Z.evaluate(e.visProp.fillopacity),n=d.Z.bind(function(){e.imgIsLoaded=!0,!(e.size[0]<=0||e.size[1]<=0)&&(t.save(),t.globalAlpha=r,this.transformImage(e,e.transformations),t.drawImage(e.rendNode,e.coords.scrCoords[1],e.coords.scrCoords[2]-e.size[1],e.size[0],e.size[1]),t.restore())},this);this.updateImageURL(e)?e.rendNode.onload=n:e.imgIsLoaded&&n()},transformImage:function(e,t){var r,n,s,o,a,u=this.context;if(t.length>0)if(r=this.joinTransforms(e,t),e.elementClass===Y.Z.OBJECT_CLASS_TEXT&&"html"===e.visProp.display){if(-1===(n=" matrix("+[r[1][1],r[2][1],r[1][2],r[2][2],r[1][0],r[2][0]].join(",")+") ").indexOf("NaN")){switch((a=e.rendNode).style.transform=n,s=-e.coords.scrCoords[1],o=-e.coords.scrCoords[2],d.Z.evaluate(e.visProp.anchorx)){case"right":s+=e.size[0];break;case"middle":s+=.5*e.size[0]}switch(d.Z.evaluate(e.visProp.anchory)){case"bottom":o+=e.size[1];break;case"middle":o+=.5*e.size[1]}a.style["transform-origin"]=s+"px "+o+"px"}}else Math.abs(Qe.Z.det(r))>=q.Z.eps&&u.transform(r[1][1],r[2][1],r[1][2],r[2][2],r[1][0],r[2][0])},updateImageURL:function(e){var t;return t=d.Z.evaluate(e.url),e._src!==t&&(e.imgIsLoaded=!1,e.rendNode.src=t,e._src=t,!0)},remove:function(e){d.Z.exists(e)&&d.Z.exists(e.parentNode)&&e.parentNode.removeChild(e)},updatePathStringPrim:function(e){var t,r,n,s,o,a="M",c=a,h=5e3,g=this.context;if(!(e.numberPoints<=0)){if(o=Math.min(e.points.length,e.numberPoints),g.beginPath(),1===e.bezierDegree)for(t=0;t<o;t++)r=e.points[t].scrCoords,isNaN(r[1])||isNaN(r[2])?c=a:(r[1]>h?r[1]=h:r[1]<-h&&(r[1]=-h),r[2]>h?r[2]=h:r[2]<-h&&(r[2]=-h),c===a?g.moveTo(r[1],r[2]):g.lineTo(r[1],r[2]),c="L");else if(3===e.bezierDegree)for(t=0;t<o;)r=e.points[t].scrCoords,isNaN(r[1])||isNaN(r[2])?c=a:(c===a?g.moveTo(r[1],r[2]):g.bezierCurveTo(r[1],r[2],(n=e.points[t+=1].scrCoords)[1],n[2],(s=e.points[t+=1].scrCoords)[1],s[2]),c="C"),t+=1;g.lineCap="round",this._fill(e),this._stroke(e)}},updatePathStringBezierPrim:function(e){var t,r,n,s,o,a,l,u="M",h=u,g=5e3,y=d.Z.evaluate(e.visProp.strokewidth),E="plot"!==d.Z.evaluate(e.visProp.curvetype),w=this.context;if(!(e.numberPoints<=0)){for(E&&e.board.options.curve.RDPsmoothing&&(e.points=Qe.Z.RamerDouglasPeucker(e.points,.5)),l=Math.min(e.points.length,e.numberPoints),w.beginPath(),r=1;r<3;r++)for(h=u,t=0;t<l;t++)s=e.points[t].scrCoords,isNaN(s[1])||isNaN(s[2])?h=u:(s[1]>g?s[1]=g:s[1]<-g&&(s[1]=-g),s[2]>g?s[2]=g:s[2]<-g&&(s[2]=-g),h===u?w.moveTo(s[1],s[2]):w.bezierCurveTo(o+.333*(s[1]-o)+y*((n=2*r)*Math.random()-r),a+.333*(s[2]-a)+y*(n*Math.random()-r),o+.666*(s[1]-o)+y*(n*Math.random()-r),a+.666*(s[2]-a)+y*(n*Math.random()-r),s[1],s[2]),h="C",o=s[1],a=s[2]);w.lineCap="round",this._fill(e),this._stroke(e)}},updatePolygonPrim:function(e,t){var r,n,s,o=t.vertices.length,a=this.context,l=!0;if(!(o<=0)&&t.visPropCalc.visible){for("polygonalchain"===t.elType&&o++,a.beginPath(),n=0;!t.vertices[n].isReal&&n<o-1;)n++,l=!1;for(a.moveTo((r=t.vertices[n].coords.scrCoords)[1],r[2]),s=n;s<o-1;s++)t.vertices[s].isReal||(l=!1),a.lineTo((r=t.vertices[s].coords.scrCoords)[1],r[2]);a.closePath(),l&&this._fill(t)}},display:function(e,t){e&&e.rendNode&&(e.visPropOld.visible=t,e.rendNode.style.visibility=t?"inherit":"hidden")},show:function(e){D.Z.deprecated("Board.renderer.show()","Board.renderer.display()"),d.Z.exists(e.rendNode)&&(e.rendNode.style.visibility="inherit")},hide:function(e){D.Z.deprecated("Board.renderer.hide()","Board.renderer.display()"),d.Z.exists(e.rendNode)&&(e.rendNode.style.visibility="hidden")},setGradient:function(e){var t;t=(t=d.Z.evaluate(e.visProp.fillopacity))>0?t:0},setShadow:function(e){e.visPropOld.shadow!==e.visProp.shadow&&(e.visPropOld.shadow=e.visProp.shadow)},highlight:function(e){return e.elementClass===Y.Z.OBJECT_CLASS_TEXT&&"html"===d.Z.evaluate(e.visProp.display)?this.updateTextStyle(e,!0):(e.board.prepareUpdate(),e.board.renderer.suspendRedraw(e.board),e.board.updateRenderer(),e.board.renderer.unsuspendRedraw()),this},noHighlight:function(e){return e.elementClass===Y.Z.OBJECT_CLASS_TEXT&&"html"===d.Z.evaluate(e.visProp.display)?this.updateTextStyle(e,!1):(e.board.prepareUpdate(),e.board.renderer.suspendRedraw(e.board),e.board.updateRenderer(),e.board.renderer.unsuspendRedraw()),this},suspendRedraw:function(e){this.context.save(),this.context.clearRect(0,0,this.canvasRoot.width,this.canvasRoot.height),e&&e.attr.showcopyright&&this.displayCopyright(D.Z.licenseText,12)},unsuspendRedraw:function(){this.context.restore()},resize:function(e,t){this.container?(this.canvasRoot.style.width=parseFloat(e)+"px",this.canvasRoot.style.height=parseFloat(t)+"px",this.canvasRoot.setAttribute("width",2*parseFloat(e)+"px"),this.canvasRoot.setAttribute("height",2*parseFloat(t)+"px")):(this.canvasRoot.width=2*parseFloat(e),this.canvasRoot.height=2*parseFloat(t)),this.context=this.canvasRoot.getContext("2d"),this.context.scale(2,2)},removeToInsertLater:function(){return function(){}}});const DR=D.Z.CanvasRenderer;D.Z.NoRenderer=function(){this.enhancedRendering=!1,this.type="no"},D.Z.extend(D.Z.NoRenderer.prototype,{drawPoint:function(e){},updatePoint:function(e){},changePointStyle:function(e){},drawLine:function(e){},updateLine:function(e){},drawTicks:function(e){},updateTicks:function(e){},drawCurve:function(e){},updateCurve:function(e){},drawEllipse:function(e){},updateEllipse:function(e){},drawPolygon:function(e){},updatePolygon:function(e){},displayCopyright:function(e,t){},drawInternalText:function(e){},updateInternalText:function(e){},drawText:function(e){},updateText:function(e){},updateTextStyle:function(e,t){},updateInternalTextStyle:function(e,t,r){},drawImage:function(e){},updateImage:function(e){},transformImage:function(e,t){},updateImageURL:function(e){},appendChildPrim:function(e,t){},appendNodesToElement:function(e,t){},createPrim:function(e,t){return null},remove:function(e){},makeArrows:function(e){},updateEllipsePrim:function(e,t,r,n,s){},updateLinePrim:function(e,t,r,n,s,o){},updatePathPrim:function(e,t,r){},updatePathStringPoint:function(e,t,r){},updatePathStringPrim:function(e){},updatePathStringBezierPrim:function(e){},updatePolygonPrim:function(e,t){},updateRectPrim:function(e,t,r,n,s){},setPropertyPrim:function(e,t,r){},display:function(e,t){e&&(e.visPropOld.visible=t)},show:function(e){},hide:function(e){},setBuffering:function(e,t){},setDashStyle:function(e){},setDraft:function(e){},removeDraft:function(e){},setGradient:function(e){},updateGradient:function(e){},setObjectTransition:function(e,t){},setObjectFillColor:function(e,t,r){},setObjectStrokeColor:function(e,t,r){},setObjectStrokeWidth:function(e,t){},setShadow:function(e){},highlight:function(e){},noHighlight:function(e){},suspendRedraw:function(){},unsuspendRedraw:function(){},drawNavigationBar:function(e){},getElementById:function(e){return null},resize:function(e,t){},removeToInsertLater:function(){return function(){}}}),D.Z.NoRenderer.prototype=new fc;const wR=D.Z.NoRenderer;D.Z.JSXGraph={rendererType:(Rt.Z.board.renderer="no",le.Z.supportsVML()&&(Rt.Z.board.renderer="vml",document.onmousemove=function(){var e;return document.body&&(e=document.body.scrollLeft,e+=document.body.scrollTop),e}),le.Z.supportsCanvas()&&(Rt.Z.board.renderer="canvas"),le.Z.supportsSVG()&&(Rt.Z.board.renderer="svg"),le.Z.isNode()&&le.Z.supportsCanvas()&&(Rt.Z.board.renderer="canvas"),(le.Z.isNode()||"no"===Rt.Z.renderer)&&(Rt.Z.text.display="internal",Rt.Z.infobox.display="internal"),Rt.Z.board.renderer),initRenderer:function(e,t,r,n){var s;if((!d.Z.exists(r)||!1===r)&&"object"==typeof document&&(r=document),"object"==typeof r&&null!==e)for(s=r.getElementById(e);s.firstChild;)s.removeChild(s.firstChild);else s=e;return(void 0===n||"auto"===n)&&(n=this.rendererType),"svg"===n?new CR(s,t):"vml"===n?new bR(s):"canvas"===n?new DR(s,t):new wR},_setAttributes:function(e){var s,o,t=d.Z.copyAttributes(e,Rt.Z,"board"),r=["drag","fullscreen","intl","keyboard","logging","navbar","pan","resize","screenshot","selection","zoom"],n=r.length;for(s=0;s<n;s++)t[o=r[s]]=d.Z.copyAttributes(t,Rt.Z,"board",o);return t.movetarget=e.moveTarget||e.movetarget||Rt.Z.board.moveTarget,t},_fillBoard:function(e,t,r){e.initInfobox(t.infobox),e.maxboundingbox=t.maxboundingbox,e.resizeContainer(r.width,r.height,!0,!0),e._createSelectionPolygon(t),e.renderer.drawNavigationBar(e,t.navbar),D.Z.boards[e.id]=e},_setARIA:function(e,t){var n,s,o,a,l,u,r=t.document;if("object"!=typeof r){if(!le.Z.isBrowser)return;r=document}a=(s=r.getElementById(e)).parentNode,l=e+"_ARIAlabel",u=e+"_ARIAdescription",(o=(n=s.ownerDocument).createElement("div")).innerHTML=t.title,o.setAttribute("id",l),o.style.display="none",a.insertBefore(o,s),(o=n.createElement("div")).innerHTML=t.description,o.setAttribute("id",u),o.style.display="none",a.insertBefore(o,s),s.setAttribute("aria-labelledby",l),s.setAttribute("aria-describedby",u)},_removeARIANodes:function(e){var t,r,n;"object"==typeof(n=e.document||document)&&(r=e.containerObj.getAttribute("aria-labelledby"),(t=n.getElementById(r))&&t.parentNode&&t.parentNode.removeChild(t),r=e.containerObj.getAttribute("aria-describedby"),(t=n.getElementById(r))&&t.parentNode&&t.parentNode.removeChild(t))},initBoard:function(e,t){var r,n,s,o,a,l,h,g,y,E,w,T,N,L,u=0,c=0;return E=this._setAttributes(t=t||{}),g=le.Z.getDimensions(e,E.document),E.unitx||E.unity?(r=d.Z.def(E.originx,150),n=d.Z.def(E.originy,150),s=d.Z.def(E.unitx,50),o=d.Z.def(E.unity,50)):((y=E.boundingbox)[0]<E.maxboundingbox[0]&&(y[0]=E.maxboundingbox[0]),y[1]>E.maxboundingbox[1]&&(y[1]=E.maxboundingbox[1]),y[2]>E.maxboundingbox[2]&&(y[2]=E.maxboundingbox[2]),y[3]<E.maxboundingbox[3]&&(y[3]=E.maxboundingbox[3]),a=Math.max(parseInt(g.width,10),q.Z.eps),l=Math.max(parseInt(g.height,10),q.Z.eps),d.Z.exists(y)&&E.keepaspectratio?(s=a/(y[2]-y[0]),o=l/(y[1]-y[3]),Math.abs(s)<Math.abs(o)?c=.5*(l/(o=Math.abs(s)*o/Math.abs(o))-(y[1]-y[3])):u=.5*(a/(s=Math.abs(o)*s/Math.abs(s))-(y[2]-y[0]))):(s=a/(y[2]-y[0]),o=l/(y[1]-y[3])),r=-s*(y[0]-u),n=o*(y[1]+c)),h=this.initRenderer(e,g,E.document,E.renderer),this._setARIA(e,E),(L=new Op(e,h,E.id,[r,n],E.zoomx,E.zoomy,s,o,g.width,g.height,E)).keepaspectratio=E.keepaspectratio,this._fillBoard(L,E,g),L.suspendUpdate(),E.axis&&(T=d.Z.deepCopy(Rt.Z.board.defaultAxes.x,w="object"==typeof E.axis?E.axis:{}),N=d.Z.deepCopy(Rt.Z.board.defaultAxes.y,w),E.defaultaxes.x&&(T=d.Z.deepCopy(T,E.defaultaxes.x)),E.defaultaxes.y&&(N=d.Z.deepCopy(N,E.defaultaxes.y)),L.defaultAxes={},L.defaultAxes.x=L.create("axis",[[0,0],[1,0]],T),L.defaultAxes.y=L.create("axis",[[0,0],[0,1]],N)),E.grid&&L.create("grid",[],"object"==typeof E.grid?E.grid:{}),L.unsuspendUpdate(),L},loadBoardFromFile:function(e,t,r,n,s){var o,a,l,u;return o=this._setAttributes(n=n||{}),u=le.Z.getDimensions(e,o.document),a=this.initRenderer(e,u,o.document,o.renderer),this._setARIA(e,o),l=new Op(e,a,"",[150,150],1,1,50,50,u.width,u.height,o),this._fillBoard(l,o,u),Bb.parseFileContent(t,l,r,!0,o.encoding||"iso-8859-1",s),l},loadBoardFromString:function(e,t,r,n,s){var o,a,l,u;return o=this._setAttributes(n=n||{}),u=le.Z.getDimensions(e,o.document),a=this.initRenderer(e,u,o.document,o.renderer),this._setARIA(e,o),l=new Op(e,a,"",[150,150],1,1,50,50,u.width,u.height,o),this._fillBoard(l,o,u),Bb.parseString(t,l,r,!0,s),l},freeBoard:function(e){var t;for(t in"string"==typeof e&&(e=D.Z.boards[e]),this._removeARIANodes(e),e.removeEventHandlers(),e.suspendUpdate(),e.objects)e.objects.hasOwnProperty(t)&&e.objects[t].remove();for(;e.containerObj.firstChild;)e.containerObj.removeChild(e.containerObj.firstChild);for(t in e.objects)e.objects.hasOwnProperty(t)&&delete e.objects[t];delete e.renderer,e.jc.creator.clearCache(),delete e.jc,delete D.Z.boards[e.id]},registerElement:function(e,t){D.Z.deprecated("JXG.JSXGraph.registerElement()","JXG.registerElement()"),D.Z.registerElement(e,t)}},le.Z.isBrowser&&"object"==typeof window&&"object"==typeof document&&le.Z.addEvent(window,"load",function(){var e,t,r,n,s,o,a,l,u,c,h,g,y,E,w,T,N,L,R=!1,H=document.getElementsByTagName("script"),V=function(Q,oe,te){var ne=D.Z.JSXGraph.initBoard(s,{boundingbox:te,keepaspectratio:!0,grid:w,axis:E,showReload:!0});if(oe.toLowerCase().indexOf("script")>-1)ne.construct(Q);else try{ne.jc.parse(Q)}catch(ce){D.Z.debug(ce)}return ne},U=function(Q,oe,te,ne){return function(){var ce;D.Z.JSXGraph.freeBoard(Q),(ce=V(oe,te,ne)).reload=U(ce,oe,te,ne)}};for(t=0;t<H.length;t++)if(e=H[t].getAttribute("type",!1),d.Z.exists(e)&&("text/jessiescript"===e.toLowerCase()||"jessiescript"===e.toLowerCase()||"text/jessiecode"===e.toLowerCase()||"jessiecode"===e.toLowerCase())){if(g=H[t].getAttribute("class",!1)||"",l=H[t].getAttribute("width",!1)||"",u=H[t].getAttribute("height",!1)||"",c=H[t].getAttribute("maxwidth",!1)||"100%",h=H[t].getAttribute("aspectratio",!1)||"1/1",y=H[t].getAttribute("boundingbox",!1)||"-5, 5, 5, -5",s=H[t].getAttribute("container",!1),N=H[t].getAttribute("src",!1),4!==(y=y.split(",")).length)y=[-5,5,5,-5];else for(r=0;r<y.length;r++)y[r]=parseFloat(y[r]);if(E=d.Z.str2Bool(H[t].getAttribute("axis",!1)||"false"),w=d.Z.str2Bool(H[t].getAttribute("grid",!1)||"false"),d.Z.exists(s))n=document.getElementById(s);else{s="jessiescript_autgen_jxg_"+t,(n=document.createElement("div")).setAttribute("id",s),a=""!==l?"width:"+l+";":"",a+=""!==u?"height:"+u+";":"",a+=""!==c?"max-width:"+c+";":"",n.setAttribute("style",a+=""!==h?"aspect-ratio:"+h+";":""),n.setAttribute("class","jxgbox "+g);try{document.body.insertBefore(n,H[t])}catch{"object"==typeof jQuery&&jQuery(n).insertBefore(H[t])}}T="",d.Z.exists(N)?(R=!0,(L=new XMLHttpRequest).open("GET",N),L.overrideMimeType("text/plain; charset=x-user-defined"),L.addEventListener("load",function(){if(!(this.status<400))throw new Error("\nJSXGraph: failed to load file",N,":",this.responseText);(o=V(T=this.responseText+"\n"+T,e,y)).reload=U(o,T,e,y)}),L.addEventListener("error",function(Q){throw new Error("\nJSXGraph: failed to load file",N,":",Q)}),L.send()):R=!1,document.getElementById(s)?(T=(T=H[t].innerHTML).replace(/<!\[CDATA\[/g,"").replace(/\]\]>/g,""),H[t].innerHTML=T,R||((o=V(T,e,y)).reload=U(o,T,e,y))):D.Z.debug("JSXGraph: Apparently the div injection failed. Can't create a board, sorry.")}},window);var vi=$(461),uo=$(823);D.Z.Point=function(e,t,r){this.constructor(e,r,Y.Z.OBJECT_TYPE_POINT,Y.Z.OBJECT_CLASS_POINT),this.element=this.board.select(r.anchor),this.coordsConstructor(t),this.elType="point",this.id=this.board.setId(this,"P"),this.board.renderer.drawPoint(this),this.board.finalizeAdding(this),this.createGradient(),this.createLabel()},D.Z.Point.prototype=new vi.Z,d.Z.copyPrototypeMethods(D.Z.Point,uo.Z,"coordsConstructor"),D.Z.extend(D.Z.Point.prototype,{hasPoint:function(e,t){var n,s,r=this.coords.scrCoords,a=d.Z.evaluate(this.visProp.sizeunit);return s=d.Z.isObject(d.Z.evaluate(this.visProp.precision))?d.Z.evaluate(this.visProp.precision[this.board._inputDevice]):this.board.options.precision.hasPoint,n=parseFloat(d.Z.evaluate(this.visProp.size)),"user"===a&&(n*=Math.sqrt(Math.abs(this.board.unitX*this.board.unitY))),(n+=.5*parseFloat(d.Z.evaluate(this.visProp.strokewidth)))<s&&(n=s),Math.abs(r[1]-e)<n+2&&Math.abs(r[2]-t)<n+2},update:function(e){return this.needsUpdate?(this.updateCoords(e),d.Z.evaluate(this.visProp.trace)&&this.cloneToBackground(!0),this):this},updateTransform:function(e){var t,r;if(0===this.transformations.length||null===this.baseElement)return this;for(this===this.baseElement?(t=this.transformations[0].apply(this.baseElement,"self"),this.coords.setCoordinates(Y.Z.COORDS_BY_USER,t)):t=this.transformations[0].apply(this.baseElement),this.coords.setCoordinates(Y.Z.COORDS_BY_USER,t),r=1;r<this.transformations.length;r++)this.coords.setCoordinates(Y.Z.COORDS_BY_USER,this.transformations[r].apply(this));return this},updateRenderer:function(){return this.updateRendererGeneric("updatePoint"),this},bounds:function(){return this.coords.usrCoords.slice(1).concat(this.coords.usrCoords.slice(1))},makeIntersection:function(e,t,r,n){var s;e=this.board.select(e),t=this.board.select(t),s=fe.Z.intersectionFunction(this.board,e,t,r,n,this.visProp.alwaysintersect),this.addConstraint([s]);try{e.addChild(this),t.addChild(this)}catch{throw new Error("JSXGraph: Can't create 'intersection' with parent types '"+typeof e+"' and '"+typeof t+"'.")}this.type=Y.Z.OBJECT_TYPE_INTERSECTION,this.elType="intersection",this.parents=[e.id,t.id,r,n],this.generatePolynomial=function(){var o=e.generatePolynomial(this),a=t.generatePolynomial(this);return 0===o.length||0===a.length?[]:[o[0],a[0]]},this.prepareUpdate().update()},setStyle:function(e){return this.visProp.face=["cross","cross","cross","circle","circle","circle","circle","square","square","square","plus","plus","plus"][e],this.visProp.size=[2,3,4,1,2,3,4,2,3,4,2,3,4][e],this.board.renderer.changePointStyle(this),this},normalizeFace:function(e){return D.Z.deprecated("Point.normalizeFace()","JXG.normalizePointFace()"),Rt.Z.normalizePointFace(e)},face:function(e){D.Z.deprecated("Point.face()","Point.setAttribute()"),this.setAttribute({face:e})},size:function(e){D.Z.deprecated("Point.size()","Point.setAttribute()"),this.setAttribute({size:e})},isOn:function(e,t){var r,n;return t=t||q.Z.eps,d.Z.isPoint(e)?this.Dist(e)<t:e.elementClass===Y.Z.OBJECT_CLASS_LINE?("segment"!==e.elType||d.Z.evaluate(this.visProp.alwaysintersect)||(r=D.Z.Math.Geometry.projectCoordsToSegment(this.coords.usrCoords,e.point1.coords.usrCoords,e.point2.coords.usrCoords))[1]>=0&&r[1]<=1)&&fe.Z.distPointLine(this.coords.usrCoords,e.stdform)<t:e.elementClass===Y.Z.OBJECT_CLASS_CIRCLE?d.Z.evaluate(e.visProp.hasinnerpoints)?this.Dist(e.center)<e.Radius()+t:Math.abs(this.Dist(e.center)-e.Radius())<t:e.elementClass===Y.Z.OBJECT_CLASS_CURVE?(n=fe.Z.projectPointToCurve(this,e,this.board)[0],fe.Z.distance(this.coords.usrCoords,n.usrCoords,3)<t):e.type===Y.Z.OBJECT_TYPE_POLYGON?!(!d.Z.evaluate(e.visProp.hasinnerpoints)||!e.pnpoly(this.coords.usrCoords[1],this.coords.usrCoords[2],D.Z.COORDS_BY_USER))||(r=fe.Z.projectCoordsToPolygon(this.coords.usrCoords,e),fe.Z.distance(this.coords.usrCoords,r,3)<t):e.type===Y.Z.OBJECT_TYPE_TURTLE&&(n=fe.Z.projectPointToTurtle(this,e,this.board),fe.Z.distance(this.coords.usrCoords,n.usrCoords,3)<t)},cloneToBackground:function(){var e={};return e.id=this.id+"T"+this.numTraces,this.numTraces+=1,e.coords=this.coords,e.visProp=d.Z.deepCopy(this.visProp,this.visProp.traceattributes,!0),e.visProp.layer=this.board.options.layer.trace,e.elementClass=Y.Z.OBJECT_CLASS_POINT,e.board=this.board,d.Z.clearVisPropOld(e),e.visPropCalc={visible:d.Z.evaluate(e.visProp.visible)},this.board.renderer.drawPoint(e),this.traces[e.id]=e.rendNode,this}}),D.Z.createPoint=function(e,t,r){var n,s;if(s=d.Z.copyAttributes(r,e.options,"point"),!(n=uo.Z.create(D.Z.Point,e,t,s)))throw new Error("JSXGraph: Can't create point with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [x,y], [z,x,y], [element,transformation]");return n},D.Z.createGlider=function(e,t,r){var n,s,o=d.Z.copyAttributes(r,e.options,"glider");return s=1===t.length?[0,0]:t.slice(0,2),(n=e.create("point",s,o)).makeGlider(t[t.length-1]),n},D.Z.createIntersectionPoint=function(e,t,r){var n,s,o,a,l,u,c=d.Z.copyAttributes(r,e.options,"intersection");t.push(0,0),s=e.select(t[0]),o=e.select(t[1]),l=t[2]||0,u=t[3]||0,n=e.create("point",[0,0,0],c),a=fe.Z.intersectionFunction(e,s,o,l,u,n.visProp.alwaysintersect),n.addConstraint([a]);try{s.addChild(n),o.addChild(n)}catch{throw new Error("JSXGraph: Can't create 'intersection' with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.")}return n.type=Y.Z.OBJECT_TYPE_INTERSECTION,n.elType="intersection",n.setParents([s.id,o.id]),n.intersectionNumbers=[l,u],n.getParents=function(){return this.parents.concat(this.intersectionNumbers)},n.generatePolynomial=function(){var h=s.generatePolynomial(n),g=o.generatePolynomial(n);return 0===h.length||0===g.length?[]:[h[0],g[0]]},n},D.Z.createOtherIntersectionPoint=function(e,t,r){var n,s,o,a;if(3!==t.length||!d.Z.isPoint(t[2])||t[0].elementClass!==Y.Z.OBJECT_CLASS_LINE&&t[0].elementClass!==Y.Z.OBJECT_CLASS_CIRCLE||t[1].elementClass!==Y.Z.OBJECT_CLASS_LINE&&t[1].elementClass!==Y.Z.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create 'other intersection point' with parent types '"+typeof t[0]+"',  '"+typeof t[1]+"'and  '"+typeof t[2]+"'.\nPossible parent types: [circle|line,circle|line,point]");return s=e.select(t[0]),o=e.select(t[1]),a=e.select(t[2]),(n=e.create("point",[function(){var l=fe.Z.meet(s.stdform,o.stdform,0,s.board);return Math.abs(a.X()-l.usrCoords[1])>q.Z.eps||Math.abs(a.Y()-l.usrCoords[2])>q.Z.eps||Math.abs(a.Z()-l.usrCoords[0])>q.Z.eps?l:fe.Z.meet(s.stdform,o.stdform,1,s.board)}],r)).type=Y.Z.OBJECT_TYPE_INTERSECTION,n.elType="otherintersection",n.setParents([s.id,o.id,a]),s.addChild(n),o.addChild(n),n.generatePolynomial=function(){var l=s.generatePolynomial(n),u=o.generatePolynomial(n);return 0===l.length||0===u.length?[]:[l[0],u[0]]},n},D.Z.createPolePoint=function(e,t,r){var n,s,o,a,l,u,c;if(t.length>1&&(a=t[0].type===Y.Z.OBJECT_TYPE_CONIC||t[0].elementClass===Y.Z.OBJECT_CLASS_CIRCLE,l=t[1].type===Y.Z.OBJECT_TYPE_CONIC||t[1].elementClass===Y.Z.OBJECT_CLASS_CIRCLE,u=t[0].elementClass===Y.Z.OBJECT_CLASS_LINE,c=t[1].elementClass===Y.Z.OBJECT_CLASS_LINE),2!==t.length||!(a&&c||u&&l))throw new Error("JSXGraph: Can't create 'pole point' with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent type: [conic|circle,line], [line,conic|circle]");return c?(s=e.select(t[0]),o=e.select(t[1])):(s=e.select(t[1]),o=e.select(t[0])),(n=e.create("point",[function(){var h=s.quadraticform,g=o.stdform.slice(0,3);return[D.Z.Math.Numerics.det([g,h[1],h[2]]),D.Z.Math.Numerics.det([h[0],g,h[2]]),D.Z.Math.Numerics.det([h[0],h[1],g])]}],r)).elType="polepoint",n.setParents([s.id,o.id]),s.addChild(n),o.addChild(n),n},D.Z.registerElement("point",D.Z.createPoint),D.Z.registerElement("glider",D.Z.createGlider),D.Z.registerElement("intersection",D.Z.createIntersectionPoint),D.Z.registerElement("otherintersection",D.Z.createOtherIntersectionPoint),D.Z.registerElement("polepoint",D.Z.createPolePoint);const MR=D.Z.Point;D.Z.Line=function(e,t,r,n){this.constructor(e,n,Y.Z.OBJECT_TYPE_LINE,Y.Z.OBJECT_CLASS_LINE),this.point1=this.board.select(t),this.point2=this.board.select(r),this.ticks=[],this.defaultTicks=null,this.parentPolygon=null,this.id=this.board.setId(this,"L"),this.board.renderer.drawLine(this),this.board.finalizeAdding(this),this.elType="line",this.point1._is_new?(this.addChild(this.point1),delete this.point1._is_new):this.point1.addChild(this),this.point2._is_new?(this.addChild(this.point2),delete this.point2._is_new):this.point2.addChild(this),this.inherits.push(this.point1,this.point2),this.updateStdform(),this.createLabel(),this.methodMap=D.Z.deepCopy(this.methodMap,{point1:"point1",point2:"point2",getSlope:"getSlope",getRise:"getRise",getYIntersect:"getRise",getAngle:"getAngle",Slope:"Slope",L:"L",length:"L"})},D.Z.Line.prototype=new vi.Z,D.Z.extend(D.Z.Line.prototype,{hasPoint:function(e,t){var s,o,a,l,u,c,h,g,r=[],n=[1,e,t],E=d.Z.evaluate(this.visProp.strokewidth);return g=d.Z.isObject(d.Z.evaluate(this.visProp.precision))?d.Z.evaluate(this.visProp.precision[this.board._inputDevice]):this.board.options.precision.hasPoint,g+=.5*E,r[0]=this.stdform[0]-this.stdform[1]*this.board.origin.scrCoords[1]/this.board.unitX+this.stdform[2]*this.board.origin.scrCoords[2]/this.board.unitY,r[1]=this.stdform[1]/this.board.unitX,r[2]=this.stdform[2]/-this.board.unitY,s=fe.Z.distPointLine(n,r),!(isNaN(s)||s>g||(!d.Z.evaluate(this.visProp.straightfirst)||!d.Z.evaluate(this.visProp.straightlast))&&(a=this.point1.coords,l=this.point2.coords,o=q.Z.crossProduct(o=[0,r[1],r[2]],n),(o=q.Z.crossProduct(o,r))[1]/=o[0],o[2]/=o[0],o[0]=1,o=new ge.Z(Y.Z.COORDS_BY_SCREEN,o.slice(1),this.board).usrCoords,u=a.distance(Y.Z.COORDS_BY_USER,l),a=a.usrCoords.slice(0),l=l.usrCoords.slice(0),u<q.Z.eps?c=0:(u===Number.POSITIVE_INFINITY&&(u=1/q.Z.eps,Math.abs(l[0])<q.Z.eps?(u/=fe.Z.distance([0,0,0],l),l=[1,a[1]+l[1]*u,a[2]+l[2]*u]):(u/=fe.Z.distance([0,0,0],a),a=[1,l[1]+a[1]*u,l[2]+a[2]*u])),u=l[h=1]-a[h],Math.abs(u)<q.Z.eps&&(u=l[h=2]-a[h]),c=(o[h]-a[h])/u),!d.Z.evaluate(this.visProp.straightfirst)&&c<0||!d.Z.evaluate(this.visProp.straightlast)&&c>1))},update:function(){var e;return this.needsUpdate?(this.constrained&&(d.Z.isFunction(this.funps)?(e=this.funps())&&e.length&&2===e.length&&(this.point1=e[0],this.point2=e[1]):(d.Z.isFunction(this.funp1)&&(e=this.funp1(),d.Z.isPoint(e)?this.point1=e:e&&e.length&&2===e.length&&this.point1.setPositionDirectly(Y.Z.COORDS_BY_USER,e)),d.Z.isFunction(this.funp2)&&(e=this.funp2(),d.Z.isPoint(e)?this.point2=e:e&&e.length&&2===e.length&&this.point2.setPositionDirectly(Y.Z.COORDS_BY_USER,e)))),this.updateSegmentFixedLength(),this.updateStdform(),d.Z.evaluate(this.visProp.trace)&&this.cloneToBackground(!0),this):this},updateSegmentFixedLength:function(){var e,t,r,n,s,o,a,l;return this.hasFixedLength?(e=this.point1.Dist(this.point2),t=this.fixedLength(),r=this.fixedLengthOldCoords[0].distance(Y.Z.COORDS_BY_USER,this.point1.coords),n=this.fixedLengthOldCoords[1].distance(Y.Z.COORDS_BY_USER,this.point2.coords),(r>q.Z.eps||n>q.Z.eps||e!==t)&&(s=this.point1.isDraggable&&this.point1.type!==Y.Z.OBJECT_TYPE_GLIDER&&!d.Z.evaluate(this.point1.visProp.fixed),o=this.point2.isDraggable&&this.point2.type!==Y.Z.OBJECT_TYPE_GLIDER&&!d.Z.evaluate(this.point2.visProp.fixed),e>q.Z.eps?r>n&&o||r<=n&&o&&!s?(this.point2.setPositionDirectly(Y.Z.COORDS_BY_USER,[this.point1.X()+(this.point2.X()-this.point1.X())*t/e,this.point1.Y()+(this.point2.Y()-this.point1.Y())*t/e]),this.point2.fullUpdate()):(r<=n&&s||r>n&&s&&!o)&&(this.point1.setPositionDirectly(Y.Z.COORDS_BY_USER,[this.point2.X()+(this.point1.X()-this.point2.X())*t/e,this.point2.Y()+(this.point1.Y()-this.point2.Y())*t/e]),this.point1.fullUpdate()):(a=Math.random()-.5,l=Math.random()-.5,e=Math.sqrt(a*a+l*l),o?(this.point2.setPositionDirectly(Y.Z.COORDS_BY_USER,[this.point1.X()+a*t/e,this.point1.Y()+l*t/e]),this.point2.fullUpdate()):s&&(this.point1.setPositionDirectly(Y.Z.COORDS_BY_USER,[this.point2.X()+a*t/e,this.point2.Y()+l*t/e]),this.point1.fullUpdate())),this.fixedLengthOldCoords[0].setCoordinates(Y.Z.COORDS_BY_USER,this.point1.coords.usrCoords),this.fixedLengthOldCoords[1].setCoordinates(Y.Z.COORDS_BY_USER,this.point2.coords.usrCoords)),this):this},updateStdform:function(){var e=q.Z.crossProduct(this.point1.coords.usrCoords,this.point2.coords.usrCoords);this.stdform[0]=e[0],this.stdform[1]=e[1],this.stdform[2]=e[2],this.stdform[3]=0,this.normalize()},updateRenderer:function(){return this.needsUpdate?(this.visPropCalc.visible&&(this.isReal=!isNaN(this.point1.coords.usrCoords[1]+this.point1.coords.usrCoords[2]+this.point2.coords.usrCoords[1]+this.point2.coords.usrCoords[2])&&q.Z.innerProduct(this.stdform,this.stdform,3)>=q.Z.eps*q.Z.eps,this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer.updateLine(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},generatePolynomial:function(e){var t=this.point1.symbolic.x,r=this.point1.symbolic.y,n=this.point2.symbolic.x,s=this.point2.symbolic.y,o=e.symbolic.x,a=e.symbolic.y;return[["(",r,")*(",o,")-(",r,")*(",n,")+(",a,")*(",n,")-(",t,")*(",a,")+(",t,")*(",s,")-(",o,")*(",s,")"].join("")]},getRise:function(){return Math.abs(this.stdform[2])>=q.Z.eps?-this.stdform[0]/this.stdform[2]:1/0},Slope:function(){return Math.abs(this.stdform[2])>=q.Z.eps?-this.stdform[1]/this.stdform[2]:1/0},getSlope:function(){return this.Slope()},getAngle:function(){return Math.atan2(-this.stdform[1],this.stdform[2])},setStraight:function(e,t){return this.visProp.straightfirst=e,this.visProp.straightlast=t,this.board.renderer.updateLine(this),this},getTextAnchor:function(){return new ge.Z(Y.Z.COORDS_BY_USER,[.5*(this.point2.X()+this.point1.X()),.5*(this.point2.Y()+this.point1.Y())],this.board)},setLabelRelativeCoords:function(e){d.Z.exists(this.label)&&(this.label.relativeCoords=new ge.Z(Y.Z.COORDS_BY_SCREEN,[e[0],-e[1]],this.board))},getLabelAnchor:function(){var e,t,r=0,n=new ge.Z(Y.Z.COORDS_BY_USER,this.point1.coords.usrCoords,this.board),s=new ge.Z(Y.Z.COORDS_BY_USER,this.point2.coords.usrCoords,this.board),o=d.Z.evaluate(this.visProp.straightfirst),a=d.Z.evaluate(this.visProp.straightlast);if((o||a)&&fe.Z.calcStraight(this,n,s,0),n=n.scrCoords,s=s.scrCoords,!d.Z.exists(this.label))return new ge.Z(Y.Z.COORDS_BY_SCREEN,[NaN,NaN],this.board);switch(d.Z.evaluate(this.label.visProp.position)){case"last":e=s[1],t=s[2];break;case"first":e=n[1],t=n[2];break;case"lft":case"llft":case"ulft":n[1]<=s[1]?(e=n[1],t=n[2]):(e=s[1],t=s[2]);break;case"rt":case"lrt":case"urt":n[1]>s[1]?(e=n[1],t=n[2]):(e=s[1],t=s[2]);break;default:e=.5*(n[1]+s[1]),t=.5*(n[2]+s[2])}return(o||a)&&(d.Z.exists(this.label)&&(r=d.Z.evaluate(this.label.visProp.fontsize)),Math.abs(e)<q.Z.eps?e=r:this.board.canvasWidth+q.Z.eps>e&&e>this.board.canvasWidth-r-q.Z.eps&&(e=this.board.canvasWidth-r),q.Z.eps+r>t&&t>-q.Z.eps?t=r:this.board.canvasHeight+q.Z.eps>t&&t>this.board.canvasHeight-r-q.Z.eps&&(t=this.board.canvasHeight-r)),new ge.Z(Y.Z.COORDS_BY_SCREEN,[e,t],this.board)},cloneToBackground:function(){var t,r,n,e={};return e.id=this.id+"T"+this.numTraces,e.elementClass=Y.Z.OBJECT_CLASS_LINE,this.numTraces++,e.point1=this.point1,e.point2=this.point2,e.stdform=this.stdform,e.board=this.board,e.visProp=d.Z.deepCopy(this.visProp,this.visProp.traceattributes,!0),e.visProp.layer=this.board.options.layer.trace,d.Z.clearVisPropOld(e),e.visPropCalc={visible:d.Z.evaluate(e.visProp.visible)},r=this.getSlope(),t=this.getRise(),e.getSlope=function(){return r},e.getRise=function(){return t},n=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawLine(e),this.board.renderer.enhancedRendering=n,this.traces[e.id]=e.rendNode,this},addTransform:function(e){var t,r=d.Z.isArray(e)?e:[e],n=r.length;for(t=0;t<n;t++)this.point1.transformations.push(r[t]),this.point2.transformations.push(r[t]);return this},snapToGrid:function(e){var t,r,n,o,a,l,u,c;return d.Z.evaluate(this.visProp.snaptogrid)?this.parents.length<3?(this.point1.handleSnapToGrid(!0,!0),this.point2.handleSnapToGrid(!0,!0)):d.Z.exists(e)&&(u=d.Z.evaluate(this.visProp.snapsizex),c=d.Z.evaluate(this.visProp.snapsizey),a=(t=new ge.Z(Y.Z.COORDS_BY_SCREEN,[e.Xprev,e.Yprev],this.board)).usrCoords[1],l=t.usrCoords[2],u<=0&&this.board.defaultAxes&&this.board.defaultAxes.x.defaultTicks&&(u=(o=this.board.defaultAxes.x.defaultTicks).ticksDelta*(d.Z.evaluate(o.visProp.minorticks)+1)),c<=0&&this.board.defaultAxes&&this.board.defaultAxes.y.defaultTicks&&(c=(o=this.board.defaultAxes.y.defaultTicks).ticksDelta*(d.Z.evaluate(o.visProp.minorticks)+1)),u>0&&c>0&&(r=fe.Z.projectPointToLine({coords:t},this,this.board),n=ln.Z.subtract([1,Math.round(a/u)*u,Math.round(l/c)*c],r.usrCoords),this.board.create("transform",n.slice(1),{type:"translate"}).applyOnce([this.point1,this.point2]))):(this.point1.handleSnapToGrid(!1,!0),this.point2.handleSnapToGrid(!1,!0)),this},snapToPoints:function(){var e=d.Z.evaluate(this.visProp.snaptopoints);return this.parents.length<3&&(this.point1.handleSnapToPoints(e),this.point2.handleSnapToPoints(e)),this},X:function(e){var t,r=this.stdform[2];return t=Math.abs(this.point1.coords.usrCoords[0])>q.Z.eps?this.point1.coords.usrCoords[1]:this.point2.coords.usrCoords[1],e=2*(e-.5),(1-Math.abs(e))*t-e*r},Y:function(e){var t,r=this.stdform[1];return t=Math.abs(this.point1.coords.usrCoords[0])>q.Z.eps?this.point1.coords.usrCoords[2]:this.point2.coords.usrCoords[2],e=2*(e-.5),(1-Math.abs(e))*t+e*r},Z:function(e){var t=Math.abs(this.point1.coords.usrCoords[0])>q.Z.eps?this.point1.coords.usrCoords[0]:this.point2.coords.usrCoords[0];return e=2*(e-.5),(1-Math.abs(e))*t},L:function(){return this.point1.Dist(this.point2)},minX:function(){return 0},maxX:function(){return 1},bounds:function(){var e=this.point1.coords.usrCoords,t=this.point2.coords.usrCoords;return[Math.min(e[1],t[1]),Math.max(e[2],t[2]),Math.max(e[1],t[1]),Math.min(e[2],t[2])]},remove:function(){this.removeAllTicks(),vi.Z.prototype.remove.call(this)}}),D.Z.createLine=function(e,t,r){var n,s,o,a,l,u,y,c=[],h=!1,g=!1;if(2===t.length){if(u=d.Z.copyAttributes(r,e.options,"line","point1"),d.Z.isArray(t[0])&&t[0].length>1)o=e.create("point",t[0],u);else if(d.Z.isString(t[0])||d.Z.isPoint(t[0]))o=e.select(t[0]);else if(d.Z.isFunction(t[0])&&d.Z.isPoint(t[0]()))o=t[0](),g=!0;else if(d.Z.isFunction(t[0])&&t[0]().length&&t[0]().length>=2)o=D.Z.createPoint(e,t[0](),u),g=!0;else{if(!d.Z.isObject(t[0])||!d.Z.isTransformationOrArray(t[1]))throw new Error("JSXGraph: Can't create line with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]");h=!0,o=e.create("point",[t[0].point1,t[1]],u)}if(u=d.Z.copyAttributes(r,e.options,"line","point2"),h)a=e.create("point",[t[0].point2,t[1]],u);else if(d.Z.isArray(t[1])&&t[1].length>1)a=e.create("point",t[1],u);else if(d.Z.isString(t[1])||d.Z.isPoint(t[1]))a=e.select(t[1]);else if(d.Z.isFunction(t[1])&&d.Z.isPoint(t[1]()))a=t[1](),g=!0;else{if(!(d.Z.isFunction(t[1])&&t[1]().length&&t[1]().length>=2))throw new Error("JSXGraph: Can't create line with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]");a=D.Z.createPoint(e,t[1](),u),g=!0}u=d.Z.copyAttributes(r,e.options,"line"),s=new D.Z.Line(e,o,a,u),g?(s.constrained=!0,s.funp1=t[0],s.funp2=t[1]):h||(s.isDraggable=!0),s.setParents([o.id,a.id])}else if(3===t.length){for(y=!0,l=0;l<3;l++)if(d.Z.isNumber(t[l]))c[l]=d.Z.createFunction(t[l]);else{if(!d.Z.isFunction(t[l]))throw new Error("JSXGraph: Can't create line with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"' and '"+typeof t[2]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]");c[l]=t[l],y=!1}u=d.Z.copyAttributes(r,e.options,"line","point1"),o=e.create("point",y?[c[2]()*c[2]()+c[1]()*c[1](),c[2]()-c[1]()*c[0]()+c[2](),-c[1]()-c[2]()*c[0]()-c[1]()]:[function(){return.5*(c[2]()*c[2]()+c[1]()*c[1]())},function(){return.5*(c[2]()-c[1]()*c[0]()+c[2]())},function(){return.5*(-c[1]()-c[2]()*c[0]()-c[1]())}],u),u=d.Z.copyAttributes(r,e.options,"line","point2"),a=e.create("point",y?[c[2]()*c[2]()+c[1]()*c[1](),-c[1]()*c[0]()+c[2](),-c[2]()*c[0]()-c[1]()]:[function(){return c[2]()*c[2]()+c[1]()*c[1]()},function(){return-c[1]()*c[0]()+c[2]()},function(){return-c[2]()*c[0]()-c[1]()}],u),o.prepareUpdate().update(),a.prepareUpdate().update(),u=d.Z.copyAttributes(r,e.options,"line"),(s=new D.Z.Line(e,o,a,u)).isDraggable=y,s.setParents([o,a])}else if(1===t.length&&d.Z.isFunction(t[0])&&2===t[0]().length&&d.Z.isPoint(t[0]()[0])&&d.Z.isPoint(t[0]()[1]))n=t[0](),u=d.Z.copyAttributes(r,e.options,"line"),(s=new D.Z.Line(e,n[0],n[1],u)).constrained=!0,s.funps=t[0],s.setParents(n);else{if(!(1===t.length&&d.Z.isFunction(t[0])&&3===t[0]().length&&d.Z.isNumber(t[0]()[0])&&d.Z.isNumber(t[0]()[1])&&d.Z.isNumber(t[0]()[2])))throw new Error("JSXGraph: Can't create line with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]");n=t[0],u=d.Z.copyAttributes(r,e.options,"line","point1"),o=e.create("point",[function(){var E=n();return[.5*(E[2]*E[2]+E[1]*E[1]),.5*(E[2]-E[1]*E[0]+E[2]),.5*(-E[1]-E[2]*E[0]-E[1])]}],u),u=d.Z.copyAttributes(r,e.options,"line","point2"),a=e.create("point",[function(){var E=n();return[E[2]*E[2]+E[1]*E[1],-E[1]*E[0]+E[2],-E[2]*E[0]-E[1]]}],u),u=d.Z.copyAttributes(r,e.options,"line"),(s=new D.Z.Line(e,o,a,u)).constrained=!0,s.funps=t[0],s.setParents([o,a])}return s},D.Z.registerElement("line",D.Z.createLine),D.Z.createSegment=function(e,t,r){var n,s;if(r.straightFirst=!1,r.straightLast=!1,s=d.Z.copyAttributes(r,e.options,"segment"),n=e.create("line",t.slice(0,2),s),3===t.length){if(n.hasFixedLength=!0,d.Z.isNumber(t[2]))n.fixedLength=function(){return t[2]};else{if(!d.Z.isFunction(t[2]))throw new Error("JSXGraph: Can't create segment with third parent type '"+typeof t[2]+"'.\nPossible third parent types: number or function");n.fixedLength=t[2]}n.getParents=function(){return this.parents.concat(this.fixedLength())},n.fixedLengthOldCoords=[],n.fixedLengthOldCoords[0]=new ge.Z(Y.Z.COORDS_BY_USER,n.point1.coords.usrCoords.slice(1,3),e),n.fixedLengthOldCoords[1]=new ge.Z(Y.Z.COORDS_BY_USER,n.point2.coords.usrCoords.slice(1,3),e)}return n.elType="segment",n},D.Z.registerElement("segment",D.Z.createSegment),D.Z.createArrow=function(e,t,r){var n,s;return r.straightFirst=!1,r.straightLast=!1,s=d.Z.copyAttributes(r,e.options,"arrow"),(n=e.create("line",t,s)).type=Y.Z.OBJECT_TYPE_VECTOR,n.elType="arrow",n},D.Z.registerElement("arrow",D.Z.createArrow),D.Z.createAxis=function(e,t,r){var n,s,o,a,l;if(!d.Z.isArray(t[0])&&!d.Z.isPoint(t[0])||!d.Z.isArray(t[1])&&!d.Z.isPoint(t[1]))throw new Error("JSXGraph: Can't create axis with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]]");for(a in n=d.Z.copyAttributes(r,e.options,"axis"),(o=e.create("line",t,n)).type=Y.Z.OBJECT_TYPE_AXIS,o.isDraggable=!1,o.point1.isDraggable=!1,o.point2.isDraggable=!1,o.ancestors)o.ancestors.hasOwnProperty(a)&&(o.ancestors[a].type=Y.Z.OBJECT_TYPE_AXISPOINT);return s=d.Z.copyAttributes(r,e.options,"axis","ticks"),l=d.Z.exists(s.ticksdistance)?s.ticksdistance:d.Z.isArray(s.ticks)?s.ticks:1,o.defaultTicks=e.create("ticks",[o,l],s),o.defaultTicks.dump=!1,o.elType="axis",o.subs={ticks:o.defaultTicks},o.inherits.push(o.defaultTicks),o},D.Z.registerElement("axis",D.Z.createAxis),D.Z.createTangent=function(e,t,r){var n,s,o,a,l,u;if(1===t.length)s=(n=t[0]).slideObject;else{if(2!==t.length)throw new Error("JSXGraph: Can't create tangent with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [glider], [point,line|curve|circle|conic]");if(d.Z.isPoint(t[0]))n=t[0],s=t[1];else{if(!d.Z.isPoint(t[1]))throw new Error("JSXGraph: Can't create tangent with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [glider], [point,line|curve|circle|conic]");s=t[0],n=t[1]}}if(u=d.Z.copyAttributes(r,e.options,"tangent"),s.elementClass===Y.Z.OBJECT_CLASS_LINE?(l=e.create("line",[s.point1,s.point2],u)).glider=n:s.elementClass===Y.Z.OBJECT_CLASS_CURVE&&s.type!==Y.Z.OBJECT_TYPE_CONIC?"plot"!==d.Z.evaluate(s.visProp.curvetype)?(l=e.create("line",[function(){var c=s.X,h=s.Y;return-n.X()*Qe.Z.D(h)(n.position)+n.Y()*Qe.Z.D(c)(n.position)},function(){return Qe.Z.D(s.Y)(n.position)},function(){return-Qe.Z.D(s.X)(n.position)}],u),n.addChild(l),l.glider=n):(l=e.create("line",[function(){var h,g,y,E,w,T,N,L,R,H,c=Math.floor(n.position);if(1===s.bezierDegree)c===s.numberPoints-1&&c--;else{if(3!==s.bezierDegree)return 0;c=3*Math.floor(n.position*(s.numberPoints-1)/3),y=(n.position*(s.numberPoints-1)-c)/3,c>=s.numberPoints-1&&(c=s.numberPoints-4,y=1)}return c<0?1:(1===s.bezierDegree?(h=s.points[c].usrCoords,g=s.points[c+1].usrCoords):(L=(1-y)*(1-y)*((w=s.points[c+1].usrCoords)[1]-(E=s.points[c].usrCoords)[1])+2*(1-y)*y*((T=s.points[c+2].usrCoords)[1]-w[1])+y*y*((N=s.points[c+3].usrCoords)[1]-T[1]),R=(1-y)*(1-y)*(w[2]-E[2])+2*(1-y)*y*(T[2]-w[2])+y*y*(N[2]-T[2]),H=Math.sqrt(L*L+R*R),g=[1,(h=n.coords.usrCoords)[1]+(L/=H),h[2]+(R/=H)]),h[2]*g[1]-h[1]*g[2])},function(){var h,g,y,E,w,T,N,L,R,H,c=Math.floor(n.position);if(1===s.bezierDegree)c===s.numberPoints-1&&c--;else{if(3!==s.bezierDegree)return 0;c=3*Math.floor(n.position*(s.numberPoints-1)/3),y=(n.position*(s.numberPoints-1)-c)/3,c>=s.numberPoints-1&&(c=s.numberPoints-4,y=1)}return c<0?0:(1===s.bezierDegree?(h=s.points[c].usrCoords,g=s.points[c+1].usrCoords):(L=(1-y)*(1-y)*((w=s.points[c+1].usrCoords)[1]-(E=s.points[c].usrCoords)[1])+2*(1-y)*y*((T=s.points[c+2].usrCoords)[1]-w[1])+y*y*((N=s.points[c+3].usrCoords)[1]-T[1]),R=(1-y)*(1-y)*(w[2]-E[2])+2*(1-y)*y*(T[2]-w[2])+y*y*(N[2]-T[2]),H=Math.sqrt(L*L+R*R),g=[1,(h=n.coords.usrCoords)[1]+(L/=H),h[2]+(R/=H)]),g[2]-h[2])},function(){var h,g,y,E,w,T,N,L,R,H,c=Math.floor(n.position);if(1===s.bezierDegree)c===s.numberPoints-1&&c--;else{if(3!==s.bezierDegree)return 0;c=3*Math.floor(n.position*(s.numberPoints-1)/3),y=(n.position*(s.numberPoints-1)-c)/3,c>=s.numberPoints-1&&(c=s.numberPoints-4,y=1)}return c<0?0:(1===s.bezierDegree?(h=s.points[c].usrCoords,g=s.points[c+1].usrCoords):(L=(1-y)*(1-y)*((w=s.points[c+1].usrCoords)[1]-(E=s.points[c].usrCoords)[1])+2*(1-y)*y*((T=s.points[c+2].usrCoords)[1]-w[1])+y*y*((N=s.points[c+3].usrCoords)[1]-T[1]),R=(1-y)*(1-y)*(w[2]-E[2])+2*(1-y)*y*(T[2]-w[2])+y*y*(N[2]-T[2]),H=Math.sqrt(L*L+R*R),g=[1,(h=n.coords.usrCoords)[1]+(L/=H),h[2]+(R/=H)]),h[1]-g[1])}],u),n.addChild(l),l.glider=n):s.type===Y.Z.OBJECT_TYPE_TURTLE?(l=e.create("line",[function(){var c=Math.floor(n.position);for(o=0;o<s.objects.length;o++)if((a=s.objects[o]).type===Y.Z.OBJECT_TYPE_CURVE){if(c<a.numberPoints)break;c-=a.numberPoints}return c===a.numberPoints-1&&c--,c<0?1:a.Y(c)*a.X(c+1)-a.X(c)*a.Y(c+1)},function(){var c=Math.floor(n.position);for(o=0;o<s.objects.length;o++)if((a=s.objects[o]).type===Y.Z.OBJECT_TYPE_CURVE){if(c<a.numberPoints)break;c-=a.numberPoints}return c===a.numberPoints-1&&c--,c<0?0:a.Y(c+1)-a.Y(c)},function(){var c=Math.floor(n.position);for(o=0;o<s.objects.length;o++)if((a=s.objects[o]).type===Y.Z.OBJECT_TYPE_CURVE){if(c<a.numberPoints)break;c-=a.numberPoints}return c===a.numberPoints-1&&c--,c<0?0:a.X(c)-a.X(c+1)}],u),n.addChild(l),l.glider=n):(s.elementClass===Y.Z.OBJECT_CLASS_CIRCLE||s.type===Y.Z.OBJECT_TYPE_CONIC)&&(l=e.create("line",[function(){return q.Z.matVecMult(s.quadraticform,n.coords.usrCoords)[0]},function(){return q.Z.matVecMult(s.quadraticform,n.coords.usrCoords)[1]},function(){return q.Z.matVecMult(s.quadraticform,n.coords.usrCoords)[2]}],u),n.addChild(l),l.glider=n),!d.Z.exists(l))throw new Error("JSXGraph: Couldn't create tangent with the given parents.");return l.elType="tangent",l.type=Y.Z.OBJECT_TYPE_TANGENT,l.setParents(t),l},D.Z.createRadicalAxis=function(e,t,r){var n,s,o;if(2!==t.length||t[0].elementClass!==Y.Z.OBJECT_CLASS_CIRCLE||t[1].elementClass!==Y.Z.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create 'radical axis' with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent type: [circle,circle]");return s=e.select(t[0]),o=e.select(t[1]),(n=e.create("line",[function(){var a=s.stdform,l=o.stdform;return q.Z.matVecMult(q.Z.transpose([a.slice(0,3),l.slice(0,3)]),[l[3],-a[3]])}],r)).elType="radicalaxis",n.setParents([s.id,o.id]),s.addChild(n),o.addChild(n),n},D.Z.createPolarLine=function(e,t,r){var n,s,o,a,l,u,c;if(t.length>1&&(a=t[0].type===Y.Z.OBJECT_TYPE_CONIC||t[0].elementClass===Y.Z.OBJECT_CLASS_CIRCLE,l=t[1].type===Y.Z.OBJECT_TYPE_CONIC||t[1].elementClass===Y.Z.OBJECT_CLASS_CIRCLE,u=d.Z.isPoint(t[0]),c=d.Z.isPoint(t[1])),2!==t.length||!(a&&c||u&&l))throw new Error("JSXGraph: Can't create 'polar line' with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent type: [conic|circle,point], [point,conic|circle]");return c?(s=e.select(t[0]),o=e.select(t[1])):(s=e.select(t[1]),o=e.select(t[0])),(n=e.create("tangent",[s,o],r)).elType="polarline",n},D.Z.registerElement("tangent",D.Z.createTangent),D.Z.registerElement("polar",D.Z.createTangent),D.Z.registerElement("radicalaxis",D.Z.createRadicalAxis),D.Z.registerElement("polarline",D.Z.createPolarLine),D.Z.Group=function(e,t,r,n,s){var o,a,l,u;for(this.board=e,this.objects={},o=this.board.numObjects,this.board.numObjects+=1,this.id=""!==t&&d.Z.exists(t)?t:this.board.id+"Group"+o,this.board.groups[this.id]=this,this.type=Y.Z.OBJECT_TYPE_POINT,this.elementClass=Y.Z.OBJECT_CLASS_POINT,this.name=""!==r&&d.Z.exists(r)?r:"group_"+this.board.generateName(this),delete this.type,this.coords={},this.needsRegularUpdate=s.needsregularupdate,this.rotationCenter="centroid",this.scaleCenter=null,this.rotationPoints=[],this.translationPoints=[],this.scalePoints=[],this.scaleDirections={},this.parents=[],a=d.Z.isArray(n)?n:Array.prototype.slice.call(arguments,3),l=0;l<a.length;l++)u=this.board.select(a[l]),!d.Z.evaluate(u.visProp.fixed)&&d.Z.exists(u.coords)&&this.addPoint(u);this.methodMap={ungroup:"ungroup",add:"addPoint",addPoint:"addPoint",addPoints:"addPoints",addGroup:"addGroup",remove:"removePoint",removePoint:"removePoint",setAttribute:"setAttribute",setProperty:"setAttribute"}},D.Z.extend(D.Z.Group.prototype,{ungroup:function(){var e,t,r;for(e in this.objects)this.objects.hasOwnProperty(e)&&d.Z.isArray((t=this.objects[e].point).groups)&&(r=d.Z.indexOf(t.groups,this.id))>=0&&delete t.groups[r];return this.objects={},this},addParents:function(e){var t,r,n;for(r=(n=d.Z.isArray(e)?e:arguments).length,t=0;t<r;++t)d.Z.isId(this.board,n[t])?this.parents.push(n[t]):d.Z.exists(n[t].id)&&this.parents.push(n[t].id);this.parents=d.Z.uniqueArray(this.parents)},setParents:function(e){return this.parents=[],this.addParents(e),this},getParents:function(){return d.Z.isArray(this.parents)?this.parents:[]},_updateCoordsCache:function(e){var t;""!==e&&d.Z.exists(this.objects[e])&&(this.coords[(t=this.objects[e].point).id]={usrCoords:t.coords.usrCoords.slice(0)})},update:function(){var e,t,r,n,s,o,a,l,u,c,h=null;if(!this.needsUpdate)return this;if("nothing"===(e=this._update_find_drag_type()).action)return this._updateCoordsCache(e.id),this;if(h=this.objects[e.id].point,"translation"===e.action)u=[h.coords.usrCoords[1]-this.coords[e.id].usrCoords[1],h.coords.usrCoords[2]-this.coords[e.id].usrCoords[2]];else if("rotation"===e.action||"scaling"===e.action){if(d.Z.isPoint(this[r="rotation"===e.action?"rotationCenter":"scaleCenter"]))c=this[r].coords.usrCoords.slice(1);else if("centroid"===this[r])c=this._update_centroid_center();else if(d.Z.isArray(this[r]))c=this[r];else{if(!d.Z.isFunction(this[r]))return this;c=this[r]()}if("rotation"===e.action)l=fe.Z.rad(this.coords[e.id].usrCoords.slice(1),c,this.objects[e.id].point),(u=this.board.create("transform",[l,c[0],c[1]],{type:"rotate"})).update();else{if("scaling"!==e.action)return this;if(s=fe.Z.distance(this.coords[e.id].usrCoords.slice(1),c),Math.abs(s)<q.Z.eps)return this;s=fe.Z.distance(h.coords.usrCoords.slice(1),c)/s,o=this.scaleDirections[e.id].indexOf("x")>=0?s:1,a=this.scaleDirections[e.id].indexOf("y")>=0?s:1,(u=this.board.create("transform",[1,0,0,c[0]*(1-o),o,0,c[1]*(1-a),0,a],{type:"generic"})).update()}}for(t in this._update_apply_transformation(e,u),this.needsUpdate=!1,this.objects)if(this.objects.hasOwnProperty(t))for(n in this.objects[t].descendants)this.objects[t].descendants.hasOwnProperty(n)&&(this.objects[t].descendants.needsUpdate=this.objects[t].descendants.needsRegularUpdate||this.board.needsFullUpdate);for(t in this.board.updateElements(e),this.objects)this.objects.hasOwnProperty(t)&&this._updateCoordsCache(t);return this},_update_find_drag_type:function(){var e,t,s,r="nothing",n=[];for(e in this.objects)this.objects.hasOwnProperty(e)&&(t=this.objects[e].point).coords.distance(Y.Z.COORDS_BY_USER,this.coords[e])>q.Z.eps&&n.push(t.id);return 0===n.length?{action:r,id:"",changed:n}:(t=this.objects[s=n[0]].point,n.length>1?r="translation":d.Z.isInArray(this.rotationPoints,t)&&d.Z.exists(this.rotationCenter)?r="rotation":d.Z.isInArray(this.scalePoints,t)&&d.Z.exists(this.scaleCenter)?r="scaling":d.Z.isInArray(this.translationPoints,t)&&(r="translation"),{action:r,id:s,changed:n})},_update_centroid_center:function(){var e,t,r;for(r in e=[0,0],t=0,this.coords)this.coords.hasOwnProperty(r)&&(e[0]+=this.coords[r].usrCoords[1],e[1]+=this.coords[r].usrCoords[2],++t);return t>0&&(e[0]/=t,e[1]/=t),e},_update_apply_transformation:function(e,t){var r,n;for(r in this.objects)this.objects.hasOwnProperty(r)&&(d.Z.exists(this.board.objects[r])?(n=this.objects[r].point).id!==e.id?"translation"===e.action?d.Z.isInArray(e.changed,n.id)||n.coords.setCoordinates(Y.Z.COORDS_BY_USER,[this.coords[r].usrCoords[1]+t[0],this.coords[r].usrCoords[2]+t[1]]):("rotation"===e.action||"scaling"===e.action)&&t.applyOnce([n]):("rotation"===e.action||"scaling"===e.action)&&n.coords.setCoordinates(Y.Z.COORDS_BY_USER,q.Z.matVecMult(t.matrix,this.coords[n.id].usrCoords)):delete this.objects[r])},addPoint:function(e){return this.objects[e.id]={point:this.board.select(e)},this._updateCoordsCache(e.id),this.translationPoints.push(e),e.groups.push(this.id),e.groups=d.Z.uniqueArray(e.groups),this},addPoints:function(e){var t;for(t=0;t<e.length;t++)this.addPoint(e[t]);return this},addGroup:function(e){var t;for(t in e.objects)e.objects.hasOwnProperty(t)&&this.addPoint(e.objects[t].point);return this},removePoint:function(e){return delete this.objects[e.id],this},setRotationCenter:function(e){return this.rotationCenter=e,this},setRotationPoints:function(e){return this._setActionPoints("rotation",e)},addRotationPoint:function(e){return this._addActionPoint("rotation",e)},removeRotationPoint:function(e){return this._removeActionPoint("rotation",e)},setTranslationPoints:function(e){return this._setActionPoints("translation",e)},addTranslationPoint:function(e){return this._addActionPoint("translation",e)},removeTranslationPoint:function(e){return this._removeActionPoint("translation",e)},setScaleCenter:function(e){return this.scaleCenter=e,this},setScalePoints:function(e,t){var r,n,s;for(s=(r=d.Z.isArray(e)?e:arguments).length,n=0;n<s;++n)this.scaleDirections[this.board.select(r[n]).id]=t||"xy";return this._setActionPoints("scale",e)},addScalePoint:function(e,t){return this._addActionPoint("scale",e),this.scaleDirections[this.board.select(e).id]=t||"xy",this},removeScalePoint:function(e){return this._removeActionPoint("scale",e)},_setActionPoints:function(e,t){var r,n,s;for(s=(r=d.Z.isArray(t)?t:arguments).length,this[e+"Points"]=[],n=0;n<s;++n)this._addActionPoint(e,r[n]);return this},_addActionPoint:function(e,t){return this[e+"Points"].push(this.board.select(t)),this},_removeActionPoint:function(e,t){var r=this[e+"Points"].indexOf(this.board.select(t));return r>-1&&this[e+"Points"].splice(r,1),this},setProperty:function(){D.Z.deprecated("Group.setProperty","Group.setAttribute()"),this.setAttribute.apply(this,arguments)},setAttribute:function(){var e;for(e in this.objects)this.objects.hasOwnProperty(e)&&this.objects[e].point.setAttribute.apply(this.objects[e].point,arguments);return this}}),D.Z.createGroup=function(e,t,r){var n=d.Z.copyAttributes(r,e.options,"group"),s=new D.Z.Group(e,n.id,n.name,t,n);return s.elType="group",s.setParents(t),s},D.Z.registerElement("group",D.Z.createGroup),D.Z.Circle=function(e,t,r,n,s){this.constructor(e,s,Y.Z.OBJECT_TYPE_CIRCLE,Y.Z.OBJECT_CLASS_CIRCLE),this.method=t,this.midpoint=this.board.select(r),this.center=this.board.select(r),this.point2=null,this.radius=0,this.line=null,this.circle=null,this.points=[],"twoPoints"===t?(this.point2=e.select(n),this.radius=this.Radius()):"pointRadius"===t?(this.gxtterm=n,this.updateRadius=d.Z.createFunction(n,this.board,null,!0),this.updateRadius(),this.addParentsFromJCFunctions([this.updateRadius])):"pointLine"===t?(this.line=e.select(n),this.radius=this.line.point1.coords.distance(Y.Z.COORDS_BY_USER,this.line.point2.coords)):"pointCircle"===t&&(this.circle=e.select(n),this.radius=this.circle.Radius()),this.id=this.board.setId(this,"C"),this.board.renderer.drawEllipse(this),this.board.finalizeAdding(this),this.createGradient(),this.elType="circle",this.createLabel(),d.Z.exists(this.center._is_new)?(this.addChild(this.center),delete this.center._is_new):this.center.addChild(this),"pointRadius"===t?this.notifyParents(n):"pointLine"===t?this.line.addChild(this):"pointCircle"===t?this.circle.addChild(this):"twoPoints"===t&&(d.Z.exists(this.point2._is_new)?(this.addChild(this.point2),delete this.point2._is_new):this.point2.addChild(this)),this.methodMap=d.Z.deepCopy(this.methodMap,{setRadius:"setRadius",getRadius:"getRadius",Area:"Area",area:"Area",radius:"Radius",center:"center",line:"line",point2:"point2"})},D.Z.Circle.prototype=new vi.Z,D.Z.extend(D.Z.Circle.prototype,{hasPoint:function(e,t){var r,l,u,c,s=this.center.coords.usrCoords,o=new ge.Z(Y.Z.COORDS_BY_SCREEN,[e,t],this.board),a=this.Radius();return r=d.Z.isObject(d.Z.evaluate(this.visProp.precision))?d.Z.evaluate(this.visProp.precision[this.board._inputDevice]):this.board.options.precision.hasPoint,l=s[1]-o.usrCoords[1],u=s[2]-o.usrCoords[2],c=Math.sqrt(l*l+u*u),r+=.5*d.Z.evaluate(this.visProp.strokewidth),r/=Math.sqrt(Math.abs(this.board.unitX*this.board.unitY)),d.Z.evaluate(this.visProp.hasinnerpoints)?c<a+r:Math.abs(c-a)<r},generatePolynomial:function(e){var t=this.center.symbolic.x,r=this.center.symbolic.y,n=e.symbolic.x,s=e.symbolic.y,o=this.generateRadiusSquared();return""===o?[]:["(("+n+")-("+t+"))^2 + (("+s+")-("+r+"))^2 - ("+o+")"]},generateRadiusSquared:function(){var a="";return"twoPoints"===this.method?a="(("+this.point2.symbolic.x+")-("+this.center.symbolic.x+"))^2 + (("+this.point2.symbolic.y+")-("+this.center.symbolic.y+"))^2":"pointRadius"===this.method?d.Z.isNumber(this.radius)&&(a=(this.radius*this.radius).toString()):"pointLine"===this.method?a="(("+this.line.point1.symbolic.x+")-("+this.line.point2.symbolic.x+"))^2 + (("+this.line.point1.symbolic.y+")-("+this.line.point2.symbolic.y+"))^2":"pointCircle"===this.method&&(a=this.circle.Radius()),a},update:function(){var e,t,r,n,s,o;if(this.needsUpdate)for(d.Z.evaluate(this.visProp.trace)&&this.cloneToBackground(!0),"pointLine"===this.method?this.radius=this.line.point1.coords.distance(Y.Z.COORDS_BY_USER,this.line.point2.coords):"pointCircle"===this.method?this.radius=this.circle.Radius():"pointRadius"===this.method&&(this.radius=this.updateRadius()),this.updateStdform(),this.updateQuadraticform(),e=this.center.coords.usrCoords[1]/(r=this.center.coords.usrCoords[0]),t=this.center.coords.usrCoords[2]/r,r/=r,n=this.Radius(),s=.551915024494,this.numberPoints=13,this.dataX=[e+n,e+n,e+n*s,e,e-n*s,e-n,e-n,e-n,e-n*s,e,e+n*s,e+n,e+n],this.dataY=[t,t+n*s,t+n,t+n,t+n,t+n*s,t,t-n*s,t-n,t-n,t-n,t-n*s,t],this.bezierDegree=3,o=0;o<this.numberPoints;o++)this.points[o]=new ge.Z(Y.Z.COORDS_BY_USER,[this.dataX[o],this.dataY[o]],this.board);return this},updateQuadraticform:function(){var e=this.center,t=e.X(),r=e.Y(),n=this.Radius();this.quadraticform=[[t*t+r*r-n*n,-t,-r],[-t,1,0],[-r,0,1]]},updateStdform:function(){this.stdform[3]=.5,this.stdform[4]=this.Radius(),this.stdform[1]=-this.center.coords.usrCoords[1],this.stdform[2]=-this.center.coords.usrCoords[2],isFinite(this.stdform[4])||(this.stdform[0]=d.Z.exists(this.point2)?-(this.stdform[1]*this.point2.coords.usrCoords[1]+this.stdform[2]*this.point2.coords.usrCoords[2]):0),this.normalize()},updateRenderer:function(){return this.needsUpdate?(this.visPropCalc.visible&&(this.isReal=!isNaN(this.center.coords.usrCoords[1]+this.center.coords.usrCoords[2]+this.Radius())&&this.center.isReal,this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer.updateEllipse(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},notifyParents:function(e){d.Z.isString(e)&&Fb.Z.findDependencies(this,e,this.board)},setRadius:function(e){return this.updateRadius=d.Z.createFunction(e,this.board,null,!0),this.addParentsFromJCFunctions([this.updateRadius]),this.board.update(),this},Radius:function(e){return d.Z.exists(e)?(this.setRadius(e),this.Radius()):"twoPoints"===this.method?d.Z.cmpArrays(this.point2.coords.usrCoords,[0,0,0])||d.Z.cmpArrays(this.center.coords.usrCoords,[0,0,0])?NaN:this.center.Dist(this.point2):"pointLine"===this.method||"pointCircle"===this.method?this.radius:"pointRadius"===this.method?this.updateRadius():NaN},getRadius:function(){return D.Z.deprecated("Circle.getRadius()","Circle.Radius()"),this.Radius()},getTextAnchor:function(){return this.center.coords},getLabelAnchor:function(){var e,t,r=this.Radius(),n=this.center.coords.usrCoords,s=.7071067811865;switch(d.Z.evaluate(this.visProp.label.position)){case"lft":e=n[1]-r,t=n[2];break;case"llft":e=n[1]-s*r,t=n[2]-s*r;break;case"rt":e=n[1]+r,t=n[2];break;case"lrt":e=n[1]+s*r,t=n[2]-s*r;break;case"urt":e=n[1]+s*r,t=n[2]+s*r;break;case"top":e=n[1],t=n[2]+r;break;case"bot":e=n[1],t=n[2]-r;break;default:e=n[1]-s*r,t=n[2]+s*r}return new ge.Z(Y.Z.COORDS_BY_USER,[e,t],this.board)},cloneToBackground:function(){var e,t=this.Radius(),r={id:this.id+"T"+this.numTraces,elementClass:Y.Z.OBJECT_CLASS_CIRCLE,center:{coords:this.center.coords},Radius:function(){return t},getRadius:function(){return t},board:this.board,visProp:d.Z.deepCopy(this.visProp,this.visProp.traceattributes,!0)};return r.visProp.layer=this.board.options.layer.trace,this.numTraces++,d.Z.clearVisPropOld(r),r.visPropCalc={visible:d.Z.evaluate(r.visProp.visible)},e=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawEllipse(r),this.board.renderer.enhancedRendering=e,this.traces[r.id]=r.rendNode,this},addTransform:function(e){var t,r=d.Z.isArray(e)?e:[e],n=r.length;for(t=0;t<n;t++)this.center.transformations.push(r[t]),"twoPoints"===this.method&&this.point2.transformations.push(r[t]);return this},snapToGrid:function(){var e=d.Z.evaluate(this.visProp.snaptogrid);return this.center.handleSnapToGrid(e,!0),"twoPoints"===this.method&&this.point2.handleSnapToGrid(e,!0),this},snapToPoints:function(){var e=d.Z.evaluate(this.visProp.snaptopoints);return this.center.handleSnapToPoints(e),"twoPoints"===this.method&&this.point2.handleSnapToPoints(e),this},X:function(e){return this.Radius()*Math.cos(2*e*Math.PI)+this.center.coords.usrCoords[1]},Y:function(e){return this.Radius()*Math.sin(2*e*Math.PI)+this.center.coords.usrCoords[2]},Z:function(e){return 1},minX:function(){return 0},maxX:function(){return 1},Area:function(){var e=this.Radius();return e*e*Math.PI},Perimeter:function(){return 2*this.Radius()*Math.PI},bounds:function(){var e=this.center.coords.usrCoords,t=this.Radius();return[e[1]-t,e[2]+t,e[1]+t,e[2]-t]},getParents:function(){return 1===this.parents.length?this.parents.concat(this.radius):this.parents}}),D.Z.createCircle=function(e,t,r){var n,s,o,a,l,c=["center","point2"];if(s=[],l=e.select(t[0]),d.Z.isObject(l)&&l.elementClass===Y.Z.OBJECT_CLASS_CIRCLE&&d.Z.isTransformationOrArray(t[1]))return a=d.Z.copyAttributes(r,e.options,"circle"),(n=D.Z.createEllipse(e,[l.center,l.center,function(){return 2*l.Radius()}],a)).addTransform(t[1]),n;for(o=0;o<t.length;o++)if(d.Z.isPointType(e,t[o])){if(!1===(s=s.concat(d.Z.providePoints(e,[t[o]],r,"circle",[c[o]])))[s.length-1])throw new Error("JSXGraph: Can't create circle from this type. Please provide a point type.")}else s.push(t[o]);if(a=d.Z.copyAttributes(r,e.options,"circle"),2===s.length&&d.Z.isPoint(s[0])&&d.Z.isPoint(s[1]))n=new D.Z.Circle(e,"twoPoints",s[0],s[1],a);else if((d.Z.isNumber(s[0])||d.Z.isFunction(s[0])||d.Z.isString(s[0]))&&d.Z.isPoint(s[1]))n=new D.Z.Circle(e,"pointRadius",s[1],s[0],a);else if((d.Z.isNumber(s[1])||d.Z.isFunction(s[1])||d.Z.isString(s[1]))&&d.Z.isPoint(s[0]))n=new D.Z.Circle(e,"pointRadius",s[0],s[1],a);else if(s[0].elementClass===Y.Z.OBJECT_CLASS_CIRCLE&&d.Z.isPoint(s[1]))n=new D.Z.Circle(e,"pointCircle",s[1],s[0],a);else if(s[1].elementClass===Y.Z.OBJECT_CLASS_CIRCLE&&d.Z.isPoint(s[0]))n=new D.Z.Circle(e,"pointCircle",s[0],s[1],a);else if(s[0].elementClass===Y.Z.OBJECT_CLASS_LINE&&d.Z.isPoint(s[1]))n=new D.Z.Circle(e,"pointLine",s[1],s[0],a);else if(s[1].elementClass===Y.Z.OBJECT_CLASS_LINE&&d.Z.isPoint(s[0]))n=new D.Z.Circle(e,"pointLine",s[0],s[1],a);else{if(!(3===t.length&&d.Z.isPoint(s[0])&&d.Z.isPoint(s[1])&&d.Z.isPoint(s[2])))throw new Error("JSXGraph: Can't create circle with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [point,point], [point,number], [point,function], [point,circle], [point,point,point], [circle,transformation]");if(!D.Z.elements.circumcircle)throw new Error("JSXGraph: Can't create circle with three points. Please include the circumcircle element (element/composition).");n=D.Z.elements.circumcircle(e,s,a)}for(n.isDraggable=!0,n.setParents(s),n.elType="circle",o=0;o<s.length;o++)d.Z.isPoint(s[o])&&n.inherits.push(s[o]);return n},D.Z.registerElement("circle",D.Z.createCircle);const jb=D.Z.Circle;D.Z.createEllipse=function(e,t,r){var n,s,o,a,l,u,c,h=[],g=d.Z.copyAttributes(r,e.options,"conic","foci"),y=d.Z.copyAttributes(r,e.options,"conic","center"),E=d.Z.copyAttributes(r,e.options,"conic");for(u=0;u<2;u++)if(t[u].length>1)h[u]=e.create("point",t[u],g);else if(d.Z.isPoint(t[u]))h[u]=e.select(t[u]);else if(d.Z.isFunction(t[u])&&d.Z.isPoint(t[u]()))h[u]=t[u]();else{if(!d.Z.isString(t[u]))throw new Error("JSXGraph: Can't create Ellipse with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [point,point,point], [point,point,number|function]");h[u]=e.select(t[u])}if(d.Z.isNumber(t[2]))l=d.Z.createFunction(t[2],e);else if(d.Z.isFunction(t[2])&&d.Z.isNumber(t[2]()))l=t[2];else{if(d.Z.isPoint(t[2]))a=e.select(t[2]);else if(t[2].length>1)a=e.create("point",t[2],g);else if(d.Z.isFunction(t[2])&&d.Z.isPoint(t[2]()))a=t[2]();else{if(!d.Z.isString(t[2]))throw new Error("JSXGraph: Can't create Ellipse with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"' and '"+typeof t[2]+"'.\nPossible parent types: [point,point,point], [point,point,number|function]");a=e.select(t[2])}l=function(){return a.Dist(h[0])+a.Dist(h[1])}}for(d.Z.exists(t[4])||(t[4]=2*Math.PI),d.Z.exists(t[3])||(t[3]=0),o=e.create("point",[function(){return.5*(h[0].X()+h[1].X())},function(){return.5*(h[0].Y()+h[1].Y())}],y),(s=e.create("curve",[function(w){return 0},function(w){return 0},t[3],t[4]],E)).majorAxis=l,c=s.hasPoint,n=function(w,T){var N,L,R,H,V,U,Q,oe,te;T||(L=(N=l())*N,R=h[0].X(),H=h[0].Y(),V=h[1].X(),U=h[1].Y(),s.quadraticform=[[(te=(L-R*R-H*H+V*V+U*U)/(2*N))*te-V*V-U*U,te*(Q=R-V)/N+V,te*(oe=H-U)/N+U],[te*Q/N+V,Q*Q/L-1,Q*oe/L],[te*oe/N+U,Q*oe/L,oe*oe/L-1]])},s.X=function(w,T){var N=l(),L=h[1].Dist(h[0]),R=.5*(L*L-N*N)/(L*Math.cos(w)-N),H=Math.atan2(h[1].Y()-h[0].Y(),h[1].X()-h[0].X());return T||n(0,T),h[0].X()+Math.cos(H+w)*R},s.Y=function(w,T){var N=l(),L=h[1].Dist(h[0]),R=.5*(L*L-N*N)/(L*Math.cos(w)-N),H=Math.atan2(h[1].Y()-h[0].Y(),h[1].X()-h[0].X());return h[0].Y()+Math.sin(H+w)*R},s.midpoint=s.center=o,s.type=Y.Z.OBJECT_TYPE_CONIC,s.subs={center:s.center},s.inherits.push(s.center,h[0],h[1]),d.Z.isPoint(a)&&s.inherits.push(a),s.hasPoint=function(w,T){var N,L,R,H;return d.Z.evaluate(this.visProp.hasinnerpoints)?(N=h[0].coords,L=h[1].coords,R=this.majorAxis(),(H=new ge.Z(Y.Z.COORDS_BY_SCREEN,[w,T],this.board)).distance(Y.Z.COORDS_BY_USER,N)+H.distance(Y.Z.COORDS_BY_USER,L)<=R):c.apply(this,arguments)},o.addChild(s),u=0;u<2;u++)d.Z.isPoint(h[u])&&h[u].addChild(s);return d.Z.isPoint(a)&&a.addChild(s),s.setParents(t),s},D.Z.createHyperbola=function(e,t,r){var n,s,o,a,l,u,c=[],h=d.Z.copyAttributes(r,e.options,"conic","foci"),g=d.Z.copyAttributes(r,e.options,"conic","center"),y=d.Z.copyAttributes(r,e.options,"conic");for(u=0;u<2;u++)if(t[u].length>1)c[u]=e.create("point",t[u],h);else if(d.Z.isPoint(t[u]))c[u]=e.select(t[u]);else if(d.Z.isFunction(t[u])&&d.Z.isPoint(t[u]()))c[u]=t[u]();else{if(!d.Z.isString(t[u]))throw new Error("JSXGraph: Can't create Hyperbola with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [point,point,point], [point,point,number|function]");c[u]=e.select(t[u])}if(d.Z.isNumber(t[2]))l=d.Z.createFunction(t[2],e);else if(d.Z.isFunction(t[2])&&d.Z.isNumber(t[2]()))l=t[2];else{if(d.Z.isPoint(t[2]))a=e.select(t[2]);else if(t[2].length>1)a=e.create("point",t[2],h);else if(d.Z.isFunction(t[2])&&d.Z.isPoint(t[2]()))a=t[2]();else{if(!d.Z.isString(t[2]))throw new Error("JSXGraph: Can't create Hyperbola with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"' and '"+typeof t[2]+"'.\nPossible parent types: [point,point,point], [point,point,number|function]");a=e.select(t[2])}l=function(){return a.Dist(c[0])-a.Dist(c[1])}}for(d.Z.exists(t[4])||(t[4]=1.0001*Math.PI),d.Z.exists(t[3])||(t[3]=-1.0001*Math.PI),o=e.create("point",[function(){return.5*(c[0].X()+c[1].X())},function(){return.5*(c[0].Y()+c[1].Y())}],g),(s=e.create("curve",[function(E){return 0},function(E){return 0},t[3],t[4]],y)).majorAxis=l,n=function(E,w){var T,N,L,R,H,V,U,Q,oe;w||(N=(T=l())*T,L=c[0].X(),R=c[0].Y(),H=c[1].X(),V=c[1].Y(),s.quadraticform=[[(oe=(N-L*L-R*R+H*H+V*V)/(2*T))*oe-H*H-V*V,oe*(U=L-H)/T+H,oe*(Q=R-V)/T+V],[oe*U/T+H,U*U/N-1,U*Q/N],[oe*Q/T+V,U*Q/N,Q*Q/N-1]])},s.X=function(E,w){var T=l(),N=c[1].Dist(c[0]),L=.5*(N*N-T*T)/(N*Math.cos(E)+T),R=Math.atan2(c[1].Y()-c[0].Y(),c[1].X()-c[0].X());return w||n(0,w),c[0].X()+Math.cos(R+E)*L},s.Y=function(E,w){var T=l(),N=c[1].Dist(c[0]),L=.5*(N*N-T*T)/(N*Math.cos(E)+T),R=Math.atan2(c[1].Y()-c[0].Y(),c[1].X()-c[0].X());return c[0].Y()+Math.sin(R+E)*L},s.midpoint=s.center=o,s.subs={center:s.center},s.inherits.push(s.center,c[0],c[1]),d.Z.isPoint(a)&&s.inherits.push(a),s.type=Y.Z.OBJECT_TYPE_CONIC,o.addChild(s),u=0;u<2;u++)d.Z.isPoint(c[u])&&c[u].addChild(s);return d.Z.isPoint(a)&&a.addChild(s),s.setParents(t),s},D.Z.createParabola=function(e,t,r){var n,s,o,g,a=t[0],l=t[1],u=d.Z.copyAttributes(r,e.options,"conic","foci"),c=d.Z.copyAttributes(r,e.options,"conic","center"),h=d.Z.copyAttributes(r,e.options,"conic");if(t[0].length>1)a=e.create("point",t[0],u);else if(d.Z.isPoint(t[0]))a=e.select(t[0]);else if(d.Z.isFunction(t[0])&&d.Z.isPoint(t[0]()))a=t[0]();else{if(!d.Z.isString(t[0]))throw new Error("JSXGraph: Can't create Parabola with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [point,line]");a=e.select(t[0])}return d.Z.isArray(l)&&2===l.length&&(g=d.Z.copyAttributes(r,e.options,"conic","line"),l=e.create("line",l,g)),d.Z.exists(t[3])||(t[3]=2*Math.PI),d.Z.exists(t[2])||(t[2]=0),o=e.create("point",[function(){return fe.Z.projectPointToLine(a,l,e).usrCoords}],c),(s=e.create("curve",[function(y){return 0},function(y){return 0},t[2],t[3]],h)).midpoint=s.center=o,s.subs={center:s.center},s.inherits.push(s.center),n=function(y,E){var w,T,N,L,R,H;E||(N=l.stdform[0],L=(w=l.stdform[1])*w+(T=l.stdform[2])*T,R=a.X(),H=a.Y(),s.quadraticform=[[N*N-L*(R*R+H*H),N*w+L*R,N*T+L*H],[N*w+L*R,-T*T,w*T],[N*T+L*H,w*T,-w*w]])},s.X=function(y,E){var w,N=l.getAngle(),L=fe.Z.distPointLine(a.coords.usrCoords,l.stdform),R=l.point1.coords.usrCoords,H=l.point2.coords.usrCoords,V=a.coords.usrCoords;return 0===R[0]?R=[1,H[1]+l.stdform[2],H[2]-l.stdform[1]]:0===H[0]&&(H=[1,R[1]+l.stdform[2],R[2]-l.stdform[1]]),w=((H[1]-R[1])*(V[2]-R[2])-(H[2]-R[2])*(V[1]-R[1])>=0?1:-1)*L/(1-Math.sin(y)),E||n(0,E),a.X()+Math.cos(y+N)*w},s.Y=function(y,E){var w,N=l.getAngle(),L=fe.Z.distPointLine(a.coords.usrCoords,l.stdform),R=l.point1.coords.usrCoords,H=l.point2.coords.usrCoords,V=a.coords.usrCoords;return 0===R[0]?R=[1,H[1]+l.stdform[2],H[2]-l.stdform[1]]:0===H[0]&&(H=[1,R[1]+l.stdform[2],R[2]-l.stdform[1]]),w=((H[1]-R[1])*(V[2]-R[2])-(H[2]-R[2])*(V[1]-R[1])>=0?1:-1)*L/(1-Math.sin(y)),a.Y()+Math.sin(y+N)*w},s.type=Y.Z.OBJECT_TYPE_CONIC,o.addChild(s),d.Z.isPoint(a)&&(a.addChild(s),s.inherits.push(a)),l.addChild(s),s.setParents(t),s},D.Z.createConic=function(e,t,r){var n,s,o,a,l,u,c,h,g,y,E,w,T,N,L=[[1,0,0],[0,1,0],[0,0,1]],R=[[1,0,0],[0,1,0],[0,0,1]],H=[],V=[],U=d.Z.copyAttributes(r,e.options,"conic","point"),Q=d.Z.copyAttributes(r,e.options,"conic","center"),oe=d.Z.copyAttributes(r,e.options,"conic");if(5===t.length)N=!0;else{if(6!==t.length)throw new Error("JSXGraph: Can't create generic Conic with "+t.length+" parameters.");N=!1}if(N)for(w=0;w<5;w++)if(t[w].length>1)H[w]=e.create("point",t[w],U);else if(d.Z.isPoint(t[w]))H[w]=e.select(t[w]);else if(d.Z.isFunction(t[w])&&d.Z.isPoint(t[w]()))H[w]=t[w]();else{if(!d.Z.isString(t[w]))throw new Error("JSXGraph: Can't create Conic section with parent types '"+typeof t[w]+"'.\nPossible parent types: [point,point,point,point,point], [a00,a11,a22,a01,a02,a12]");H[w]=e.select(t[w])}else(T=[[0,0,0],[0,0,0],[0,0,0]])[0][0]=d.Z.isFunction(t[2])?function(){return t[2]()}:function(){return t[2]},T[0][1]=d.Z.isFunction(t[4])?function(){return t[4]()}:function(){return t[4]},T[0][2]=d.Z.isFunction(t[5])?function(){return t[5]()}:function(){return t[5]},T[1][1]=d.Z.isFunction(t[0])?function(){return t[0]()}:function(){return t[0]},T[1][2]=d.Z.isFunction(t[3])?function(){return t[3]()}:function(){return t[3]},T[2][2]=d.Z.isFunction(t[1])?function(){return t[1]()}:function(){return t[1]};if(l=function(te){var ne,ce;for(ne=0;ne<3;ne++)for(ce=ne;ce<3;ce++)te[ne][ce]+=te[ce][ne];for(ne=0;ne<3;ne++)for(ce=0;ce<ne;ce++)te[ne][ce]=te[ce][ne];return te},a=function(te,ne){var ce,he,ye=[[0,0,0],[0,0,0],[0,0,0]];for(ce=0;ce<3;ce++)for(he=0;he<3;he++)ye[ce][he]=te[ce]*ne[he];return l(ye)},o=function(te,ne,ce){var he,ye,be,re,We,Te=[[0,0,0],[0,0,0],[0,0,0]];for(We=q.Z.matVecMult(ne,ce),be=q.Z.innerProduct(ce,We),We=q.Z.matVecMult(te,ce),re=q.Z.innerProduct(ce,We),he=0;he<3;he++)for(ye=0;ye<3;ye++)Te[he][ye]=be*te[he][ye]-re*ne[he][ye];return Te},s=e.create("curve",[function(te){return 0},function(te){return 0},0,2*Math.PI],oe),n=function(te,ne){var ce,he,ye,be;if(!ne){if(N){for(ce=0;ce<5;ce++)V[ce]=H[ce].coords.usrCoords;y=a(q.Z.crossProduct(V[0],V[1]),q.Z.crossProduct(V[2],V[3])),E=a(q.Z.crossProduct(V[0],V[2]),q.Z.crossProduct(V[1],V[3])),R=o(y,E,V[4])}else for(ce=0;ce<3;ce++)for(he=ce;he<3;he++)R[ce][he]=T[ce][he](),he>ce&&(R[he][ce]=R[ce][he]);for(s.quadraticform=R,(u=Qe.Z.Jacobi(R))[0][0][0]<0&&(u[0][0][0]*=-1,u[0][1][1]*=-1,u[0][2][2]*=-1),ce=0;ce<3;ce++){for(ye=0,he=0;he<3;he++)ye+=u[1][he][ce]*u[1][he][ce];ye=Math.sqrt(ye)}L=u[1],g=Math.sqrt(Math.abs(u[0][0][0])),c=Math.sqrt(Math.abs(u[0][1][1])),h=Math.sqrt(Math.abs(u[0][2][2]))}return u[0][1][1]<=0&&u[0][2][2]<=0?be=q.Z.matVecMult(L,[1/g,Math.cos(te)/c,Math.sin(te)/h]):u[0][1][1]<=0&&u[0][2][2]>0?be=q.Z.matVecMult(L,[Math.cos(te)/g,1/c,Math.sin(te)/h]):u[0][2][2]<0&&(be=q.Z.matVecMult(L,[Math.sin(te)/g,Math.cos(te)/c,1/h])),d.Z.exists(be)?(be[1]/=be[0],be[2]/=be[0],be[0]=1):be=[1,NaN,NaN],be},s.X=function(te,ne){return n(te,ne)[1]},s.Y=function(te,ne){return n(te,ne)[2]},s.midpoint=e.create("point",[function(){var te=s.quadraticform;return[te[1][1]*te[2][2]-te[1][2]*te[1][2],te[1][2]*te[0][2]-te[2][2]*te[0][1],te[0][1]*te[1][2]-te[1][1]*te[0][2]]}],Q),s.type=Y.Z.OBJECT_TYPE_CONIC,s.center=s.midpoint,s.subs={center:s.center},s.inherits.push(s.center),s.inherits=s.inherits.concat(H),N){for(w=0;w<5;w++)d.Z.isPoint(H[w])&&H[w].addChild(s);s.setParents(t)}return s.addChild(s.center),s},D.Z.registerElement("ellipse",D.Z.createEllipse),D.Z.registerElement("hyperbola",D.Z.createHyperbola),D.Z.registerElement("parabola",D.Z.createParabola),D.Z.registerElement("conic",D.Z.createConic),D.Z.Polygon=function(e,t,r){this.constructor(e,r,Y.Z.OBJECT_TYPE_POLYGON,Y.Z.OBJECT_CLASS_AREA);var n,s,o,a,l,u=d.Z.copyAttributes(r,e.options,"polygon","borders");for(this.withLines=r.withlines,this.attr_line=u,this.vertices=[],n=0;n<t.length;n++)this.vertices[n]=this.board.select(t[n]),this.vertices[n]._is_new&&(delete this.vertices[n]._is_new,this.vertices[n]._is_new_pol=!0);if(this.vertices.length>0&&this.vertices[this.vertices.length-1].id!==this.vertices[0].id&&this.vertices.push(this.vertices[0]),this.borders=[],this.withLines)for(o=this.vertices.length-1,a=0;a<o;a++)n=(a+1)%o,u.id=u.ids&&u.ids[n],u.name=u.names&&u.names[n],u.strokecolor=d.Z.isArray(u.colors)&&u.colors[n%u.colors.length]||u.strokecolor,u.visible=d.Z.exists(r.borders.visible)?r.borders.visible:r.visible,!1===u.strokecolor&&(u.strokecolor="none"),(s=e.create("segment",[this.vertices[n],this.vertices[n+1]],u)).dump=!1,this.borders[n]=s,s.parentPolygon=this,this.addChild(s);for(this.inherits.push(this.vertices,this.borders),this.id=this.board.setId(this,"Py"),n=0;n<this.vertices.length-1;n++)l=this.board.select(this.vertices[n]),d.Z.exists(l._is_new_pol)?(this.addChild(l),delete l._is_new_pol):l.addChild(this);this.board.renderer.drawPolygon(this),this.board.finalizeAdding(this),this.createGradient(),this.elType="polygon",this.createLabel(),this.methodMap=D.Z.deepCopy(this.methodMap,{borders:"borders",vertices:"vertices",A:"Area",Area:"Area",Perimeter:"Perimeter",L:"Perimeter",Length:"Perimeter",boundingBox:"boundingBox",bounds:"bounds",addPoints:"addPoints",insertPoints:"insertPoints",removePoints:"removePoints"})},D.Z.Polygon.prototype=new vi.Z,D.Z.extend(D.Z.Polygon.prototype,{pnpoly:function(e,t,r){return fe.Z.pnpoly(e,t,this.vertices,r)},hasPoint:function(e,t){var r,n;if(d.Z.evaluate(this.visProp.hasinnerpoints)&&this.pnpoly(e,t))return!0;for(n=this.borders.length,r=0;r<n;r++)if(this.borders[r].hasPoint(e,t))return!0;return!1},updateRenderer:function(){var e,t;if(!this.needsUpdate)return this;if(this.visPropCalc.visible){for(t=this.vertices.length-("polygonalchain"===this.elType?0:1),this.isReal=!0,e=0;e<t;++e)if(!this.vertices[e].isReal){this.isReal=!1;break}if(!this.isReal)for(e in this.updateVisibility(!1),this.childElements)this.childElements.hasOwnProperty(e)&&this.childElements[e].setDisplayRendNode(!1)}return this.visPropCalc.visible&&this.board.renderer.updatePolygon(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this},getTextAnchor:function(){var e,t,r,n,s;if(0===this.vertices.length)return new ge.Z(Y.Z.COORDS_BY_USER,[1,0,0],this.board);for(r=e=this.vertices[0].X(),n=t=this.vertices[0].Y(),s=0;s<this.vertices.length;s++)this.vertices[s].X()<e&&(e=this.vertices[s].X()),this.vertices[s].X()>r&&(r=this.vertices[s].X()),this.vertices[s].Y()>t&&(t=this.vertices[s].Y()),this.vertices[s].Y()<n&&(n=this.vertices[s].Y());return new ge.Z(Y.Z.COORDS_BY_USER,[.5*(e+r),.5*(t+n)],this.board)},getLabelAnchor:D.Z.shortcut(D.Z.Polygon.prototype,"getTextAnchor"),cloneToBackground:function(){var t,e={};return e.id=this.id+"T"+this.numTraces,this.numTraces++,e.vertices=this.vertices,e.visProp=d.Z.deepCopy(this.visProp,this.visProp.traceattributes,!0),e.visProp.layer=this.board.options.layer.trace,e.board=this.board,d.Z.clearVisPropOld(e),e.visPropCalc={visible:d.Z.evaluate(e.visProp.visible)},t=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawPolygon(e),this.board.renderer.enhancedRendering=t,this.traces[e.id]=e.rendNode,this},hideElement:function(e){var t;if(D.Z.deprecated("Element.hideElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!1,this.board.renderer.display(this,!1),!e)for(t=0;t<this.borders.length;t++)this.borders[t].hideElement();this.hasLabel&&d.Z.exists(this.label)&&(this.label.hiddenByParent=!0,this.label.visPropCalc.visible&&this.label.hideElement())},showElement:function(e){var t;if(D.Z.deprecated("Element.showElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!0,this.board.renderer.display(this,!0),!e)for(t=0;t<this.borders.length;t++)this.borders[t].showElement().updateRenderer();return d.Z.exists(this.label)&&this.hasLabel&&this.label.hiddenByParent&&(this.label.hiddenByParent=!1,this.label.visPropCalc.visible||this.label.showElement().updateRenderer()),this},Area:function(){return Math.abs(fe.Z.signedPolygon(this.vertices,!0))},Perimeter:function(){var e,t=this.vertices.length,r=0;for(e=1;e<t;++e)r+=this.vertices[e].Dist(this.vertices[e-1]);return r},L:function(){return this.Perimeter()},boundingBox:function(){var t,r,e=[0,0,0,0],n=this.vertices.length-1;if(0===n)return e;for(e[0]=this.vertices[0].X(),e[2]=e[0],e[1]=this.vertices[0].Y(),e[3]=e[1],t=1;t<n;++t)(r=this.vertices[t].X())<e[0]?e[0]=r:r>e[2]&&(e[2]=r),(r=this.vertices[t].Y())>e[1]?e[1]=r:r<e[3]&&(e[3]=r);return e},bounds:function(){return this.boundingBox()},remove:function(){var e;for(e=0;e<this.borders.length;e++)this.board.removeObject(this.borders[e]);vi.Z.prototype.remove.call(this)},findPoint:function(e){var t;if(!d.Z.isPoint(e))return-1;for(t=0;t<this.vertices.length;t++)if(this.vertices[t].id===e.id)return t;return-1},addPoints:function(e){var r=Array.prototype.slice.call(arguments);return this.insertPoints.apply(this,["polygonalchain"===this.elType?this.vertices.length-1:this.vertices.length-2].concat(r))},insertPoints:function(e,t){var r,n,s,o,a;if(0===arguments.length)return this;if(s=this.vertices.length-1,"polygon"===this.elType&&s--,e<-1||e>s)return this;for(n=arguments.length-1,r=1;r<n+1;r++)(a=d.Z.providePoints(this.board,[arguments[r]],{},"polygon",["vertices"])[0])._is_new&&(this.addChild(a),delete a._is_new),this.vertices.splice(e+r,0,a);if(this.withLines)for(o=e+1,"polygon"===this.elType?e<0?(this.vertices[this.vertices.length-1]=this.vertices[0],this.borders[this.borders.length-1].point2=this.vertices[this.vertices.length-1]):this.borders[e].point2=this.vertices[o]:e>=0&&(e<this.borders.length?this.borders[e].point2=this.vertices[o]:o=e),r=o;r<o+n;r++)this.borders.splice(r,0,this.board.create("segment",[this.vertices[r],this.vertices[r+1]],this.attr_line));return this.inherits=[],this.inherits.push(this.vertices,this.borders),this.board.update(),this},removePoints:function(e){var t,r,n,s,o=[],a=[],l=[],u=[];for("polygon"===this.elType&&(s=this.vertices.pop()),t=0;t<arguments.length;t++)d.Z.isPoint(n=arguments[t])&&(n=this.findPoint(n)),d.Z.isNumber(n)&&n>-1&&n<this.vertices.length&&-1===d.Z.indexOf(l,n)&&l.push(n);if(0===l.length)return"polygon"===this.elType&&this.vertices.push(s),this;for(t=0;t<l.length;t++)this.vertices[l[t]].removeChild(this);for(l=l.sort(),o=this.vertices.slice(),a=this.borders.slice(),this.withLines&&u.push([l[l.length-1]]),t=l.length-1;t>-1;t--)o[l[t]]=-1,this.withLines&&l.length>1&&l[t]-1>l[t-1]&&(u[u.length-1][1]=l[t],u.push([l[t-1]]));for(this.withLines&&(u[u.length-1][1]=l[0]),this.vertices=[],t=0;t<o.length;t++)d.Z.isPoint(o[t])&&this.vertices.push(o[t]);if("polygon"===this.elType&&this.vertices.length>1&&this.vertices[this.vertices.length-1].id!==this.vertices[0].id&&this.vertices.push(this.vertices[0]),this.withLines){for(t=0;t<u.length;t++){for(r=u[t][1]-1;r<u[t][0]+1;r++)r<0?"polygon"===this.elType&&(this.board.removeObject(this.borders[a.length-1]),a[a.length-1]=-1):r<a.length&&(this.board.removeObject(this.borders[r]),a[r]=-1);0!==u[t][1]&&u[t][0]!==o.length-1&&(a[u[t][0]-1]=this.board.create("segment",[o[u[t][1]-1],o[u[t][0]+1]],this.attr_line))}for(this.borders=[],t=0;t<a.length;t++)-1!==a[t]&&this.borders.push(a[t]);"polygon"===this.elType&&this.vertices.length>2&&(u[0][1]===this.vertices.length-1||0===u[u.length-1][1])&&this.borders.push(this.board.create("segment",[this.vertices[this.vertices.length-2],this.vertices[0]],this.attr_line))}return this.inherits=[],this.inherits.push(this.vertices,this.borders),this.board.update(),this},getParents:function(){return this.setParents(this.vertices),this.parents},getAttributes:function(){var t,e=vi.Z.prototype.getAttributes.call(this);if(this.withLines)for(e.lines=e.lines||{},e.lines.ids=[],e.lines.colors=[],t=0;t<this.borders.length;t++)e.lines.ids.push(this.borders[t].id),e.lines.colors.push(this.borders[t].visProp.strokecolor);return e},snapToGrid:function(){var e,t;for(t=!!d.Z.evaluate(this.visProp.snaptogrid),e=0;e<this.vertices.length;e++)this.vertices[e].handleSnapToGrid(t,!0)},setPositionDirectly:function(e,t,r){var n,o,a,l=new ge.Z(e,t,this.board),u=new ge.Z(e,r,this.board);for(a=this.vertices.length-1,o=0;o<a;o++)if(!this.vertices[o].draggable())return this;return n=ln.Z.subtract(l.usrCoords,u.usrCoords),this.board.create("transform",n.slice(1),{type:"translate"}).applyOnce(this.vertices.slice(0,-1)),this},sutherlandHodgman:function(e){var o,l,u,c,h,g,y,t=D.Z.Math.Geometry.sortVertices(this.vertices),r=D.Z.Math.Geometry.sortVertices(e.vertices),n=t.length-1,s=r.length-1,a=[],E=function(w,T,N){return(T[1]-w[1])*(N[2]-w[2])-(T[2]-w[2])*(N[1]-w[1])>=0};for(u=0;u<s;u++)a.push(r[u]);for(u=0;u<n;u++)for(l=a.slice(0),a=[],h=l[(o=l.length)-1],c=0;c<o;c++)E(t[u],t[u+1],g=l[c])?(E(t[u],t[u+1],h)||((y=D.Z.Math.Geometry.meetSegmentSegment(h,g,t[u],t[u+1]))[0][1]/=y[0][0],y[0][2]/=y[0][0],y[0][0]=1,a.push(y[0])),a.push(g)):E(t[u],t[u+1],h)&&((y=D.Z.Math.Geometry.meetSegmentSegment(h,g,t[u],t[u+1]))[0][1]/=y[0][0],y[0][2]/=y[0][0],y[0][0]=1,a.push(y[0])),h=g;return a},intersect:function(e){return this.sutherlandHodgman(e)}}),D.Z.createPolygon=function(e,t,r){var n,s,o,a,u,c,l=[],h=!1;if(d.Z.copyAttributes(r,e.options,"polygon"),null===(a=e.select(t[0]))&&(a=t[0]),d.Z.isObject(a)&&a.type===Y.Z.OBJECT_TYPE_POLYGON&&d.Z.isTransformationOrArray(t[1]))for(h=!0,o=a.vertices.length-1,c=d.Z.copyAttributes(r,e.options,"polygon","vertices"),s=0;s<o;s++)c.withlabel&&(c.name=""===a.vertices[s].name?"":a.vertices[s].name+"'"),l.push(e.create("point",[a.vertices[s],t[1]],c));else if(!1===(l=d.Z.providePoints(e,t,r,"polygon",["vertices"])))throw new Error("JSXGraph: Can't create polygon / polygonalchain with parent types other than 'point' and 'coordinate arrays' or a function returning an array of coordinates. Alternatively, a polygon and a transformation can be supplied");if(u=d.Z.copyAttributes(r,e.options,"polygon"),(n=new D.Z.Polygon(e,l,u)).isDraggable=!0,h)for(n.prepareUpdate().update().updateVisibility().updateRenderer(),o=a.vertices.length-1,s=0;s<o;s++)l[s].prepareUpdate().update().updateVisibility().updateRenderer();return n},D.Z.createRegularPolygon=function(e,t,r){var n,s,o,l,u,c,h,a=[];if(d.Z.isNumber(o=t[(u=t.length)-1])&&(3!==t.length||o<3))throw new Error("JSXGraph: A regular polygon needs two point types and a number > 2 as input.");if(d.Z.isNumber(e.select(o))?(u--,c=!1):(o=u,c=!0),!1===(a=d.Z.providePoints(e,t.slice(0,u),r,"regularpolygon",["vertices"])))throw new Error("JSXGraph: Can't create regular polygon with parent types other than 'point' and 'coordinate arrays' or a function returning an array of coordinates");for(h=d.Z.copyAttributes(r,e.options,"regularpolygon","vertices"),s=2;s<o;s++)l=e.create("transform",[Math.PI*(2-(o-2)/o),a[s-1]],{type:"rotate"}),c?(a[s].addTransform(a[s-2],l),a[s].fullUpdate()):(d.Z.isArray(h.ids)&&h.ids.length>=o-2&&(h.id=h.ids[s-2]),a[s]=e.create("point",[a[s-2],l],h),a[s].type=Y.Z.OBJECT_TYPE_CAS,a[s].isDraggable=!0,a[s].visProp.fixed=!1);return h=d.Z.copyAttributes(r,e.options,"regularpolygon"),(n=e.create("polygon",a,h)).elType="regularpolygon",n},D.Z.createPolygonalChain=function(e,t,r){var n,s;return n=d.Z.copyAttributes(r,e.options,"polygonalchain"),(s=e.create("polygon",t,n)).elType="polygonalchain",s.vertices.pop(),e.removeObject(s.borders[s.borders.length-1]),s.borders.pop(),s},D.Z.registerElement("polygon",D.Z.createPolygon),D.Z.registerElement("regularpolygon",D.Z.createRegularPolygon),D.Z.registerElement("polygonalchain",D.Z.createPolygonalChain);const SR=D.Z.Polygon;D.Z.Curve=function(e,t,r){this.constructor(e,r,Y.Z.OBJECT_TYPE_CURVE,Y.Z.OBJECT_CLASS_CURVE),this.points=[],this.numberPoints=d.Z.evaluate(this.visProp.numberpointshigh),this.bezierDegree=1,this.dataX=null,this.dataY=null,this.ticks=[],this.qdt=null,this.varname=d.Z.exists(t[0])?t[0]:"x",this.xterm=t[1],this.yterm=t[2],this.generateTerm(this.varname,this.xterm,this.yterm,t[3],t[4]),this.updateCurve(),this.id=this.board.setId(this,"G"),this.board.renderer.drawCurve(this),this.board.finalizeAdding(this),this.createGradient(),this.elType="curve",this.createLabel(),d.Z.isString(this.xterm)&&this.notifyParents(this.xterm),d.Z.isString(this.yterm)&&this.notifyParents(this.yterm),this.methodMap=d.Z.deepCopy(this.methodMap,{generateTerm:"generateTerm",setTerm:"generateTerm",move:"moveTo",moveTo:"moveTo"})},D.Z.Curve.prototype=new vi.Z,D.Z.extend(D.Z.Curve.prototype,{minX:function(){return"polar"===d.Z.evaluate(this.visProp.curvetype)?0:new ge.Z(Y.Z.COORDS_BY_SCREEN,[.1*-this.board.canvasWidth,0],this.board,!1).usrCoords[1]},maxX:function(){return"polar"===d.Z.evaluate(this.visProp.curvetype)?2*Math.PI:new ge.Z(Y.Z.COORDS_BY_SCREEN,[1.1*this.board.canvasWidth,0],this.board,!1).usrCoords[1]},X:function(e){return NaN},Y:function(e){return NaN},Z:function(e){return 1},hasPoint:function(e,t,r){var n,s,o,a,l,u,c,h,E,w,L,V,U,Q,oe,y=[],T=d.Z.evaluate(this.visProp.numberpointslow),N=(this.maxX()-this.minX())/T,H=1/0;if(L=d.Z.isObject(d.Z.evaluate(this.visProp.precision))?d.Z.evaluate(this.visProp.precision[this.board._inputDevice]):this.board.options.precision.hasPoint,e=(s=new ge.Z(Y.Z.COORDS_BY_SCREEN,[e,t],this.board,!1)).usrCoords[1],t=s.usrCoords[2],1===this.bezierDegree&&d.Z.evaluate(this.visProp.hasinnerpoints)&&0!==fe.Z.windingNumber([1,e,t],this.points,!0))return!0;if(L+=.5*d.Z.evaluate(this.visProp.strokewidth),L*=L,V=this.board.unitX*this.board.unitX,U=this.board.unitY*this.board.unitY,oe=this.minX(),this.maxX(),d.Z.exists(this._visibleArea)&&(N=(this._visibleArea[1]-(oe=this._visibleArea[0]))/T),"parameter"===(Q=d.Z.evaluate(this.visProp.curvetype))||"polar"===Q)for(this.transformations.length>0&&(this.updateTransformMatrix(),a=q.Z.inverse(this.transformMat),e=(l=q.Z.matVecMult(a,[1,e,t]))[1],t=l[2]),u=0,n=oe;u<T;u++){if((H=(e-(c=this.X(n,!0)))*(e-c)*V+(t-(h=this.Y(n,!0)))*(t-h)*U)<=L)return!0;n+=N}else if("plot"===Q||"functiongraph"===Q){for((!d.Z.exists(r)||r<0)&&(r=0),d.Z.exists(this.qdt)&&d.Z.evaluate(this.visProp.useqdt)&&3!==this.bezierDegree?o=(E=(w=this.qdt.query(new ge.Z(Y.Z.COORDS_BY_USER,[e,t],this.board))).points).length:(E=this.points,o=this.numberPoints-1),u=r;u<o;u++)if(3===this.bezierDegree?y=fe.Z.projectCoordsToBeziersegment([1,e,t],this,u):w?(E[u].prev&&(y=fe.Z.projectCoordsToSegment([1,e,t],E[u].prev.usrCoords,E[u].usrCoords)),E[u].next&&E[u+1]!==E[u].next&&(y=fe.Z.projectCoordsToSegment([1,e,t],E[u].usrCoords,E[u].next.usrCoords))):y=fe.Z.projectCoordsToSegment([1,e,t],E[u].usrCoords,E[u+1].usrCoords),y[1]>=0&&y[1]<=1&&(e-y[0][1])*(e-y[0][1])*V+(t-y[0][2])*(t-y[0][2])*U<=L)return!0;return!1}return H<L},allocatePoints:function(){var e,t;if(t=this.numberPoints,this.points.length<this.numberPoints)for(e=this.points.length;e<t;e++)this.points[e]=new ge.Z(Y.Z.COORDS_BY_USER,[0,0],this.board,!1)},update:function(){return this.needsUpdate&&(d.Z.evaluate(this.visProp.trace)&&this.cloneToBackground(!0),this.updateCurve()),this},updateRenderer:function(){return this.needsUpdate?(this.visPropCalc.visible&&(this.isReal=Hr.checkReal(this.points),this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer.updateCurve(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},updateDataArray:function(){},updateCurve:function(){var e,t,r,n,s,o,a=this.visProp.plotversion,l=!1;if(this.updateTransformMatrix(),this.updateDataArray(),t=this.minX(),r=this.maxX(),d.Z.exists(this.dataX))for(this.numberPoints=this.dataX.length,e=this.numberPoints,this.allocatePoints(),o=0;o<e;o++)n=o,d.Z.exists(this.dataY)?(s=o,this.points[o].setCoordinates(Y.Z.COORDS_BY_USER,[this.dataX[o],this.dataY[o]],!1)):(s=this.X(n),this.points[o].setCoordinates(Y.Z.COORDS_BY_USER,[this.dataX[o],this.Y(s,l)],!1)),this.points[o]._t=o,l=!0;else if(d.Z.evaluate(this.visProp.doadvancedplot)?1===a||d.Z.evaluate(this.visProp.doadvancedplotold)?Hr.updateParametricCurveOld(this,t,r):2===a?Hr.updateParametricCurve_v2(this,t,r):3===a?Hr.updateParametricCurve_v3(this,t,r):4===a?Hr.updateParametricCurve_v4(this,t,r):Hr.updateParametricCurve_v2(this,t,r):(this.numberPoints=d.Z.evaluate(this.board.updateQuality===this.board.BOARD_QUALITY_HIGH?this.visProp.numberpointshigh:this.visProp.numberpointslow),this.allocatePoints(),Hr.updateParametricCurveNaive(this,t,r,this.numberPoints)),e=this.numberPoints,d.Z.evaluate(this.visProp.useqdt)&&this.board.updateQuality===this.board.BOARD_QUALITY_HIGH)for(this.qdt=new mR(this.board.getBoundingBox()),o=0;o<this.points.length;o++)this.qdt.insert(this.points[o]),o>0&&(this.points[o].prev=this.points[o-1]),o<e-1&&(this.points[o].next=this.points[o+1]);for("plot"!==d.Z.evaluate(this.visProp.curvetype)&&d.Z.evaluate(this.visProp.rdpsmoothing)&&(this.points=Qe.Z.RamerDouglasPeucker(this.points,.2),this.numberPoints=this.points.length),e=this.numberPoints,o=0;o<e;o++)this.updateTransform(this.points[o]);return this},updateTransformMatrix:function(){var e,t,r=this.transformations.length;for(this.transformMat=[[1,0,0],[0,1,0],[0,0,1]],t=0;t<r;t++)(e=this.transformations[t]).update(),this.transformMat=q.Z.matMatMult(e.matrix,this.transformMat);return this},updateTransform:function(e){var t;return this.transformations.length>0&&(t=q.Z.matVecMult(this.transformMat,e.usrCoords),e.setCoordinates(Y.Z.COORDS_BY_USER,t,!1,!0)),e},addTransform:function(e){var t,r=d.Z.isArray(e)?e:[e],n=r.length;for(t=0;t<n;t++)this.transformations.push(r[t]);return this},interpolationFunctionFromArray:function(e){var t="data"+e,r=this;return function(n,s){var o,a,l,u,c=r[t],h=c.length,y=[];if(isNaN(n))return NaN;if(n<0)return d.Z.isFunction(c[0])?c[0]():c[0];if(3===r.bezierDegree){if(n>=(h-1)/3)return d.Z.isFunction(c[c.length-1])?c[c.length-1]():c[c.length-1];for(o=3*Math.floor(n),u=1-(l=n%1),a=0;a<4;a++)y[a]=d.Z.isFunction(c[o+a])?c[o+a]():c[o+a];return u*u*(u*y[0]+3*l*y[1])+(3*u*y[2]+l*y[3])*l*l}if((o=n>h-2?h-2:parseInt(Math.floor(n),10))===n)return d.Z.isFunction(c[o])?c[o]():c[o];for(a=0;a<2;a++)y[a]=d.Z.isFunction(c[o+a])?c[o+a]():c[o+a];return y[0]+(y[1]-y[0])*(n-o)}},generateTerm:function(e,t,r,n,s){var o,a;d.Z.isArray(t)?(this.dataX=t,this.numberPoints=this.dataX.length,this.X=this.interpolationFunctionFromArray.apply(this,["X"]),this.visProp.curvetype="plot",this.isDraggable=!0):(this.X=d.Z.createFunction(t,this.board,e),d.Z.isString(t)?this.visProp.curvetype="functiongraph":(d.Z.isFunction(t)||d.Z.isNumber(t))&&(this.visProp.curvetype="parameter"),this.isDraggable=!0),d.Z.isArray(r)?(this.dataY=r,this.Y=this.interpolationFunctionFromArray.apply(this,["Y"])):this.Y=d.Z.createFunction(r,this.board,e),d.Z.isFunction(t)&&d.Z.isArray(r)&&(o=d.Z.createFunction(r[0],this.board,""),a=d.Z.createFunction(r[1],this.board,""),this.X=function(l){return t(l)*Math.cos(l)+o()},this.X.deps=o.deps,this.Y=function(l){return t(l)*Math.sin(l)+a()},this.Y.deps=a.deps,this.visProp.curvetype="polar"),d.Z.exists(n)&&(this.minX=d.Z.createFunction(n,this.board,"")),d.Z.exists(s)&&(this.maxX=d.Z.createFunction(s,this.board,"")),this.addParentsFromJCFunctions([this.X,this.Y,this.minX,this.maxX])},notifyParents:function(e){var t,r,s,n=!1;for(t in s={xterm:1,yterm:1})if(s.hasOwnProperty(t)&&this.hasOwnProperty(t)&&this[t].origin)for(r in n=!0,this[t].origin.deps)this[t].origin.deps.hasOwnProperty(r)&&this[t].origin.deps[r].addChild(this);n||Fb.Z.findDependencies(this,e,this.board)},getLabelAnchor:function(){var e,t,r,n=.05*this.board.canvasWidth,s=.05*this.board.canvasHeight,o=.95*this.board.canvasWidth,a=.95*this.board.canvasHeight;switch(d.Z.evaluate(this.visProp.label.position)){case"ulft":t=n,r=s;break;case"llft":t=n,r=a;break;case"rt":t=o,r=.5*a;break;case"lrt":t=o,r=a;break;case"urt":t=o,r=s;break;case"top":t=.5*o,r=s;break;case"bot":t=.5*o,r=a;break;default:t=n,r=.5*a}return e=new ge.Z(Y.Z.COORDS_BY_SCREEN,[t,r],this.board,!1),fe.Z.projectCoordsToCurve(e.usrCoords[1],e.usrCoords[2],0,this,this.board)[0]},cloneToBackground:function(){var e,t={id:this.id+"T"+this.numTraces,elementClass:Y.Z.OBJECT_CLASS_CURVE,points:this.points.slice(0),bezierDegree:this.bezierDegree,numberPoints:this.numberPoints,board:this.board,visProp:d.Z.deepCopy(this.visProp,this.visProp.traceattributes,!0)};return t.visProp.layer=this.board.options.layer.trace,t.visProp.curvetype=this.visProp.curvetype,this.numTraces++,d.Z.clearVisPropOld(t),t.visPropCalc={visible:d.Z.evaluate(t.visProp.visible)},e=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawCurve(t),this.board.renderer.enhancedRendering=e,this.traces[t.id]=t.rendNode,this},bounds:function(){var o,a,l,e=1/0,t=-1/0,r=1/0,n=-1/0,s=this.points.length;if(3===this.bezierDegree){for(o=0;o<s;o++)this.points[o].X=d.Z.bind(function(){return this.usrCoords[1]},this.points[o]),this.points[o].Y=d.Z.bind(function(){return this.usrCoords[2]},this.points[o]);return l=(a=Qe.Z.bezier(this.points))[3](),e=Qe.Z.fminbr(function(u){return a[0](u)},[0,l]),t=Qe.Z.fminbr(function(u){return-a[0](u)},[0,l]),r=Qe.Z.fminbr(function(u){return a[1](u)},[0,l]),n=Qe.Z.fminbr(function(u){return-a[1](u)},[0,l]),e=a[0](e),t=a[0](t),r=a[1](r),[e,n=a[1](n),t,r]}for(o=0;o<s;o++)e>this.points[o].usrCoords[1]&&(e=this.points[o].usrCoords[1]),t<this.points[o].usrCoords[1]&&(t=this.points[o].usrCoords[1]),r>this.points[o].usrCoords[2]&&(r=this.points[o].usrCoords[2]),n<this.points[o].usrCoords[2]&&(n=this.points[o].usrCoords[2]);return[e,n,t,r]},getParents:function(){var e=[this.xterm,this.yterm,this.minX(),this.maxX()];return 0!==this.parents.length&&(e=this.parents),e},moveTo:function(e){var r;return this.points.length>0&&!d.Z.evaluate(this.visProp.fixed)&&(r=this.points[0],this.setPosition(Y.Z.COORDS_BY_USER,3===e.length?[e[0]-r.usrCoords[0],e[1]-r.usrCoords[1],e[2]-r.usrCoords[2]]:[e[0]-r.usrCoords[1],e[1]-r.usrCoords[2]])),this},getTransformationSource:function(){var e,t;return d.Z.exists(this._transformationSource)&&(t=this._transformationSource).elementClass===Y.Z.OBJECT_CLASS_CURVE&&(e=!0),[e,t]},pnpoly:function(e,t,r){var n,s,o,a,l,u,c=this.points,h=!1;for(r===Y.Z.COORDS_BY_USER?(a=(u=new ge.Z(Y.Z.COORDS_BY_USER,[e,t],this.board)).scrCoords[1],l=u.scrCoords[2]):(a=e,l=t),n=0,s=(o=this.points.length)-2;n<o-1;s=n++)c[n].scrCoords[2]>l!=c[s].scrCoords[2]>l&&a<(c[s].scrCoords[1]-c[n].scrCoords[1])*(l-c[n].scrCoords[2])/(c[s].scrCoords[2]-c[n].scrCoords[2])+c[n].scrCoords[1]&&(h=!h);return h}}),D.Z.createCurve=function(e,t,r){var n,s,o=d.Z.copyAttributes(r,e.options,"curve");return n=e.select(t[0],!0),d.Z.isTransformationOrArray(t[1])&&d.Z.isObject(n)&&(n.type===Y.Z.OBJECT_TYPE_CURVE||n.type===Y.Z.OBJECT_TYPE_ANGLE||n.type===Y.Z.OBJECT_TYPE_ARC||n.type===Y.Z.OBJECT_TYPE_CONIC||n.type===Y.Z.OBJECT_TYPE_SECTOR)?(n.type===Y.Z.OBJECT_TYPE_SECTOR?o=d.Z.copyAttributes(r,e.options,"sector"):n.type===Y.Z.OBJECT_TYPE_ARC?o=d.Z.copyAttributes(r,e.options,"arc"):n.type===Y.Z.OBJECT_TYPE_ANGLE?(d.Z.exists(r.withLabel)||(r.withLabel=!1),o=d.Z.copyAttributes(r,e.options,"angle")):o=d.Z.copyAttributes(r,e.options,"curve"),o=d.Z.copyAttributes(o,e.options,"curve"),(s=new D.Z.Curve(e,["x",[],[]],o)).updateDataArray=function(){var a,l=n.numberPoints;for(this.bezierDegree=n.bezierDegree,this.dataX=[],this.dataY=[],a=0;a<l;a++)this.dataX.push(n.points[a].usrCoords[1]),this.dataY.push(n.points[a].usrCoords[2]);return this},s.addTransform(t[1]),n.addChild(s),s.setParents([n]),s._transformationSource=n,s):(o=d.Z.copyAttributes(r,e.options,"curve"),new D.Z.Curve(e,["x"].concat(t),o))},D.Z.registerElement("curve",D.Z.createCurve),D.Z.createFunctiongraph=function(e,t,r){var n,s=["x","x"].concat(t);return(n=d.Z.copyAttributes(r,e.options,"curve")).curvetype="functiongraph",new D.Z.Curve(e,s,n)},D.Z.registerElement("functiongraph",D.Z.createFunctiongraph),D.Z.registerElement("plot",D.Z.createFunctiongraph),D.Z.createSpline=function(e,t,r){var n,s,o;return s=function(){var a,l=[],u=[];return[function(c,h){var g,y,E;if(!h){if(l=[],u=[],2===t.length&&d.Z.isArray(t[0])&&d.Z.isArray(t[1])&&t[0].length===t[1].length)for(g=0;g<t[0].length;g++)d.Z.isFunction(t[0][g])?l.push(t[0][g]()):l.push(t[0][g]),d.Z.isFunction(t[1][g])?u.push(t[1][g]()):u.push(t[1][g]);else for(g=0;g<t.length;g++)if(d.Z.isPoint(t[g]))l.push(t[g].X()),u.push(t[g].Y());else if(d.Z.isArray(t[g])&&2===t[g].length)for(y=0;y<t.length;y++)d.Z.isFunction(t[y][0])?l.push(t[y][0]()):l.push(t[y][0]),d.Z.isFunction(t[y][1])?u.push(t[y][1]()):u.push(t[y][1]);else d.Z.isFunction(t[g])&&2===t[g]().length&&(E=t[g](),l.push(E[0]),u.push(E[1]));a=Qe.Z.splineDef(l,u)}return Qe.Z.splineEval(c,l,u,a)},function(){return l[0]},function(){return l[l.length-1]}]},(r=d.Z.copyAttributes(r,e.options,"curve")).curvetype="functiongraph",o=s(),(n=new D.Z.Curve(e,["x","x",o[0],o[1],o[2]],r)).setParents(t),n.elType="spline",n},D.Z.registerElement("spline",D.Z.createSpline),D.Z.createCardinalSpline=function(e,t,r){var n,s,o,u,c,h,g,y,E="\nPossible parent types: [points:array, tau:number|function, type:string]";if(!d.Z.exists(t[0])||!d.Z.isArray(t[0]))throw new Error("JSXGraph: JXG.createCardinalSpline: argument 1 'points' has to be array of points or coordinate pairs"+E);if(!d.Z.exists(t[1])||!d.Z.isNumber(t[1])&&!d.Z.isFunction(t[1]))throw new Error("JSXGraph: JXG.createCardinalSpline: argument 2 'tau' has to be number between [0,1] or function'"+E);if(!d.Z.exists(t[2])||!d.Z.isString(t[2]))throw new Error("JSXGraph: JXG.createCardinalSpline: argument 3 'type' has to be string 'uniform' or 'centripetal'"+E);if(r=d.Z.copyAttributes(r,e.options,"curve"),(r=d.Z.copyAttributes(r,e.options,"cardinalspline")).curvetype="parameter",u=t[0],c=[],!r.isarrayofcoordinates&&2===u.length&&d.Z.isArray(u[0])&&d.Z.isArray(u[1])&&u[0].length===u[1].length)for(h=0;h<u[0].length;h++)c[h]=[],d.Z.isFunction(u[0][h])?c[h].push(u[0][h]()):c[h].push(u[0][h]),d.Z.isFunction(u[1][h])?c[h].push(u[1][h]()):c[h].push(u[1][h]);else for(h=0;h<u.length;h++)d.Z.isString(u[h])?c.push(e.select(u[h])):d.Z.isPoint(u[h])?c.push(u[h]):d.Z.isArray(u[h])&&2===u[h].length?(c[h]=[],d.Z.isFunction(u[h][0])?c[h].push(u[h][0]()):c[h].push(u[h][0]),d.Z.isFunction(u[h][1])?c[h].push(u[h][1]()):c[h].push(u[h][1])):d.Z.isFunction(u[h])&&2===u[h]().length&&c.push(t[h]());if(!0===r.createpoints)o=d.Z.providePoints(e,c,r,"cardinalspline",["points"]);else for(o=[],s=function(w){return{X:function(){return c[w][0]},Y:function(){return c[w][1]},Dist:function(T){var N=this.X()-T.X(),L=this.Y()-T.Y();return Math.sqrt(N*N+L*L)}}},h=0;h<c.length;h++)d.Z.isPoint(c[h])?o.push(c[h]):o.push(s(h));for(y=["x"].concat(Qe.Z.CardinalSpline(o,t[1],t[2])),n=new D.Z.Curve(e,y,r),g=o.length,n.setParents(o),h=0;h<g;h++)d.Z.isPoint(u=o[h])&&(d.Z.exists(u._is_new)?(n.addChild(u),delete u._is_new):u.addChild(n));return n.elType="cardinalspline",n},D.Z.registerElement("cardinalspline",D.Z.createCardinalSpline),D.Z.createMetapostSpline=function(e,t,r){var n,s,o,a,l,u,c,h,g="\nPossible parent types: [points:array, controls:object";if(!d.Z.exists(t[0])||!d.Z.isArray(t[0]))throw new Error("JSXGraph: JXG.createMetapostSpline: argument 1 'points' has to be array of points or coordinate pairs"+g);if(!d.Z.exists(t[1])||!d.Z.isObject(t[1]))throw new Error("JSXGraph: JXG.createMetapostSpline: argument 2 'controls' has to be a JavaScript object'"+g);if(r=d.Z.copyAttributes(r,e.options,"curve"),(r=d.Z.copyAttributes(r,e.options,"metapostspline")).curvetype="parameter",l=t[0],u=[],!r.isarrayofcoordinates&&2===l.length&&d.Z.isArray(l[0])&&d.Z.isArray(l[1])&&l[0].length===l[1].length)for(c=0;c<l[0].length;c++)u[c]=[],d.Z.isFunction(l[0][c])?u[c].push(l[0][c]()):u[c].push(l[0][c]),d.Z.isFunction(l[1][c])?u[c].push(l[1][c]()):u[c].push(l[1][c]);else for(c=0;c<l.length;c++)d.Z.isString(l[c])?u.push(e.select(l[c])):d.Z.isPoint(l[c])?u.push(l[c]):d.Z.isArray(l[c])&&2===l[c].length?(u[c]=[],d.Z.isFunction(l[c][0])?u[c].push(l[c][0]()):u[c].push(l[c][0]),d.Z.isFunction(l[c][1])?u[c].push(l[c][1]()):u[c].push(l[c][1])):d.Z.isFunction(l[c])&&2===l[c]().length&&u.push(t[c]());if(!0===r.createpoints)o=d.Z.providePoints(e,u,r,"metapostspline",["points"]);else for(o=[],s=function(y){return{X:function(){return u[y][0]},Y:function(){return u[y][1]}}},c=0;c<u.length;c++)d.Z.isPoint(u[c])?o.push(u[c]):o.push(s);for(a=t[1],(n=new D.Z.Curve(e,["t",[],[],0,l.length-1],r)).updateDataArray=function(){var y,E,w=o.length,T=[];for(E=0;E<w;E++)T.push([o[E].X(),o[E].Y()]);y=D.Z.Math.Metapost.curve(T,a),this.dataX=y[0],this.dataY=y[1]},n.bezierDegree=3,h=o.length,n.setParents(o),c=0;c<h;c++)d.Z.isPoint(o[c])&&o[c].addChild(n);return n.elType="metapostspline",n},D.Z.registerElement("metapostspline",D.Z.createMetapostSpline),D.Z.createRiemannsum=function(e,t,r){var n,s,o,a,l,u;if((u=d.Z.copyAttributes(r,e.options,"riemannsum")).curvetype="plot",o=t[0],n=d.Z.createFunction(t[1],e,""),!d.Z.exists(n))throw new Error("JSXGraph: JXG.createRiemannsum: argument '2' n has to be number or function.\nPossible parent types: [function,n:number|function,type,start:number|function,end:number|function]");if(s=d.Z.createFunction(t[2],e,"",!1),!d.Z.exists(s))throw new Error("JSXGraph: JXG.createRiemannsum: argument 3 'type' has to be string or function.\nPossible parent types: [function,n:number|function,type,start:number|function,end:number|function]");return a=[[0],[0]].concat(t.slice(3)),(l=e.create("curve",a,u)).sum=0,l.Value=function(){return this.sum},l.updateDataArray=function(){var c=Qe.Z.riemann(o,n(),s(),this.minX(),this.maxX());this.dataX=c[0],this.dataY=c[1],this.sum=c[2]},l.addParentsFromJCFunctions([n,s]),l},D.Z.registerElement("riemannsum",D.Z.createRiemannsum),D.Z.createTracecurve=function(e,t,r){var n,s,o,a;if(2!==t.length)throw new Error("JSXGraph: Can't create trace curve with given parent'\nPossible parent types: [glider, point]");if(s=e.select(t[0]),o=e.select(t[1]),s.type!==Y.Z.OBJECT_TYPE_GLIDER||!d.Z.isPoint(o))throw new Error("JSXGraph: Can't create trace curve with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [glider, point]");return(a=d.Z.copyAttributes(r,e.options,"tracecurve")).curvetype="plot",(n=e.create("curve",[[0],[0]],a)).updateDataArray=function(){var l,u,c,h,g,y,E,w,T,N=a.numberpoints,L=s.position,R=s.slideObject,H=R.minX();for(u=(R.maxX()-H)/N,this.dataX=[],this.dataY=[],R.elementClass!==Y.Z.OBJECT_CLASS_CURVE&&N++,l=0;l<N;l++){for(h in y=R.X(c=H+l*u)/R.Z(c),E=R.Y(c)/R.Z(c),s.setPositionDirectly(Y.Z.COORDS_BY_USER,[y,E]),w=!1,this.board.objects)if(this.board.objects.hasOwnProperty(h)&&((g=this.board.objects[h])===s&&(w=!0),w&&g.needsRegularUpdate&&(T=g.visProp.trace,g.visProp.trace=!1,g.needsUpdate=!0,g.update(!0),g.visProp.trace=T,g===o)))break;this.dataX[l]=o.X(),this.dataY[l]=o.Y()}for(h in s.position=L,w=!1,this.board.objects)if(this.board.objects.hasOwnProperty(h)&&((g=this.board.objects[h])===s&&(w=!0),w&&g.needsRegularUpdate&&(T=g.visProp.trace,g.visProp.trace=!1,g.needsUpdate=!0,g.update(!0),g.visProp.trace=T,g===o)))break},n},D.Z.registerElement("tracecurve",D.Z.createTracecurve),D.Z.createStepfunction=function(e,t,r){var n,s;if(2!==t.length)throw new Error("JSXGraph: Can't create step function with given parent'\nPossible parent types: [array, array|function]");return s=d.Z.copyAttributes(r,e.options,"stepfunction"),(n=e.create("curve",t,s)).updateDataArray=function(){var o,a=0,l=this.xterm.length;if(this.dataX=[],this.dataY=[],0!==l)for(this.dataX[a]=this.xterm[0],this.dataY[a]=this.yterm[0],++a,o=1;o<l;++o)this.dataX[a]=this.xterm[o],this.dataY[a]=this.dataY[a-1],++a,this.dataX[a]=this.xterm[o],this.dataY[a]=this.yterm[o],++a},n},D.Z.registerElement("stepfunction",D.Z.createStepfunction),D.Z.createDerivative=function(e,t,r){var n,s,o,a,l;if(1!==t.length&&t[0].class!==Y.Z.OBJECT_CLASS_CURVE)throw new Error("JSXGraph: Can't create derivative curve with given parent'\nPossible parent types: [curve]");return l=d.Z.copyAttributes(r,e.options,"curve"),o=Qe.Z.D((s=t[0]).X),a=Qe.Z.D(s.Y),(n=e.create("curve",[function(u){return s.X(u)},function(u){return a(u)/o(u)},s.minX(),s.maxX()],l)).setParents(s),n},D.Z.registerElement("derivative",D.Z.createDerivative),D.Z.createCurveIntersection=function(e,t,r){var n;if(2!==t.length)throw new Error("JSXGraph: Can't create curve intersection with given parent'\nPossible parent types: [array, array|function]");return(n=e.create("curve",[[],[]],r)).updateDataArray=function(){var s=D.Z.Math.Clip.intersection(t[0],t[1],this.board);this.dataX=s[0],this.dataY=s[1]},n},D.Z.createCurveUnion=function(e,t,r){var n;if(2!==t.length)throw new Error("JSXGraph: Can't create curve union with given parent'\nPossible parent types: [array, array|function]");return(n=e.create("curve",[[],[]],r)).updateDataArray=function(){var s=D.Z.Math.Clip.union(t[0],t[1],this.board);this.dataX=s[0],this.dataY=s[1]},n},D.Z.createCurveDifference=function(e,t,r){var n;if(2!==t.length)throw new Error("JSXGraph: Can't create curve difference with given parent'\nPossible parent types: [array, array|function]");return(n=e.create("curve",[[],[]],r)).updateDataArray=function(){var s=D.Z.Math.Clip.difference(t[0],t[1],this.board);this.dataX=s[0],this.dataY=s[1]},n},D.Z.registerElement("curvedifference",D.Z.createCurveDifference),D.Z.registerElement("curveintersection",D.Z.createCurveIntersection),D.Z.registerElement("curveunion",D.Z.createCurveUnion),D.Z.createBoxPlot=function(e,t,r){var n,s,o,l=d.Z.copyAttributes(r,e.options,"boxplot");if(3!==t.length)throw new Error("JSXGraph: Can't create box plot with given parent'\nPossible parent types: [array, number|function, number|function] containing quantiles, axis, width");if(t[0].length<5)throw new Error("JSXGraph: Can't create box plot with given parent[0]'\nparent[0] has to conatin at least 5 quantiles.");for(n=e.create("curve",[[],[]],l),o=t[0].length,n.Q=[],s=0;s<o;s++)n.Q[s]=d.Z.createFunction(t[0][s],e,null,!0);return n.x=d.Z.createFunction(t[1],e,null,!0),n.w=d.Z.createFunction(t[2],e,null,!0),n.updateDataArray=function(){var u,c,h,g,y,E,w,T,N;w=d.Z.evaluate(this.visProp.smallwidth),T=d.Z.evaluate(this.visProp.dir),h=(N=this.x())-.5*this.w(),g=N-.5*this.w()*w,y=N+.5*this.w(),u=[N,g,E=N+.5*this.w()*w,N,N,h,h,y,y,N,NaN,h,y,NaN,N,N,g,E,N],c=[this.Q[0](),this.Q[0](),this.Q[0](),this.Q[0](),this.Q[1](),this.Q[1](),this.Q[3](),this.Q[3](),this.Q[1](),this.Q[1](),NaN,this.Q[2](),this.Q[2](),NaN,this.Q[3](),this.Q[4](),this.Q[4](),this.Q[4](),this.Q[4]()],"vertical"===T?(this.dataX=u,this.dataY=c):(this.dataX=c,this.dataY=u)},n.addParentsFromJCFunctions([n.Q,n.x,n.w]),n},D.Z.registerElement("boxplot",D.Z.createBoxPlot),D.Z.createArc=function(e,t,r){var n,s,o;if(!1===(o=d.Z.providePoints(e,t,r,"arc",["center","radiusPoint","anglePoint"]))||o.length<3)throw new Error("JSXGraph: Can't create Arc with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"' and '"+typeof t[2]+"'.\nPossible parent types: [point,point,point], [arc, transformation]");return s=d.Z.copyAttributes(r,e.options,"arc"),(n=e.create("curve",[[0],[0]],s)).elType="arc",n.setParents(o),n.type=Y.Z.OBJECT_TYPE_ARC,n.center=o[0],n.radiuspoint=o[1],n.point2=n.radiuspoint,n.anglepoint=o[2],n.point3=n.anglepoint,d.Z.exists(n.center._is_new)?(n.addChild(n.center),delete n.center._is_new):n.center.addChild(n),d.Z.exists(n.radiuspoint._is_new)?(n.addChild(n.radiuspoint),delete n.radiuspoint._is_new):n.radiuspoint.addChild(n),d.Z.exists(n.anglepoint._is_new)?(n.addChild(n.anglepoint),delete n.anglepoint._is_new):n.anglepoint.addChild(n),n.useDirection=s.usedirection,n.updateDataArray=function(){var a,l,c,h,g,y=1,E=this.radiuspoint,w=this.center,T=this.anglepoint,N=d.Z.evaluate(this.visProp.selection);l=fe.Z.rad(E,w,T),("minor"===N&&l>Math.PI||"major"===N&&l<Math.PI)&&(y=-1),this.useDirection&&(((c=o[1].coords.usrCoords)[1]-(g=o[2].coords.usrCoords)[1])*(c[2]-(h=o[3].coords.usrCoords)[2])-(c[2]-g[2])*(c[1]-h[1])<0?(this.radiuspoint=o[1],this.anglepoint=o[2]):(this.radiuspoint=o[2],this.anglepoint=o[1])),a=fe.Z.bezierArc(E=E.coords.usrCoords,w=w.coords.usrCoords,T=T.coords.usrCoords,!1,y),this.dataX=a[0],this.dataY=a[1],this.bezierDegree=3,this.updateStdform(),this.updateQuadraticform()},n.Radius=function(){return this.radiuspoint.Dist(this.center)},n.getRadius=function(){return D.Z.deprecated("Arc.getRadius()","Arc.Radius()"),this.Radius()},n.Value=function(){return this.Radius()*fe.Z.rad(this.radiuspoint,this.center,this.anglepoint)},n.hasPoint=function(a,l){var u,c,h,g,y,E,T=this.Radius();return d.Z.evaluate(this.visProp.hasinnerpoints)?this.hasPointSector(a,l):(E=d.Z.isObject(d.Z.evaluate(this.visProp.precision))?d.Z.evaluate(this.visProp.precision[this.board._inputDevice]):this.board.options.precision.hasPoint,E/=Math.min(Math.abs(this.board.unitX),Math.abs(this.board.unitY)),c=new ge.Z(Y.Z.COORDS_BY_SCREEN,[a,l],this.board),this.transformations.length>0&&(this.updateTransformMatrix(),g=q.Z.inverse(this.transformMat),y=q.Z.matVecMult(g,c.usrCoords),c=new ge.Z(Y.Z.COORDS_BY_USER,y,this.board)),u=this.center.coords.distance(Y.Z.COORDS_BY_USER,c),(h=Math.abs(u-T)<E)&&(h=fe.Z.coordsOnArc(this,c)),h)},n.hasPointSector=function(a,l){var u=new ge.Z(Y.Z.COORDS_BY_SCREEN,[a,l],this.board),c=this.Radius(),g=this.center.coords.distance(Y.Z.COORDS_BY_USER,u)<c;return g&&(g=fe.Z.coordsOnArc(this,u)),g},n.getTextAnchor=function(){return this.center.coords},n.getLabelAnchor=function(){var a,l,u,c,h,g=fe.Z.rad(this.radiuspoint,this.center,this.anglepoint),y=10/this.board.unitX,E=10/this.board.unitY,w=this.point2.coords.usrCoords,T=this.center.coords.usrCoords,N=w[1]-T[1],L=w[2]-T[2],R=d.Z.evaluate(this.visProp.selection),H=this.label?this.label.visProp:this.visProp.label;return("minor"===R&&g>Math.PI||"major"===R&&g<Math.PI)&&(g=-(2*Math.PI-g)),u=(a=new ge.Z(Y.Z.COORDS_BY_USER,[T[1]+Math.cos(.5*g)*N-Math.sin(.5*g)*L,T[2]+Math.sin(.5*g)*N+Math.cos(.5*g)*L],this.board)).usrCoords[1]-T[1],c=a.usrCoords[2]-T[2],h=Math.sqrt(u*u+c*c),H.position=fe.Z.calcLabelQuadrant(fe.Z.rad([1,0],[0,0],l=[T[1]+(u=u*(h+y)/h),T[2]+(c=c*(h+E)/h)])),new ge.Z(Y.Z.COORDS_BY_USER,l,this.board)},n.updateQuadraticform=jb.prototype.updateQuadraticform,n.updateStdform=jb.prototype.updateStdform,n.methodMap=D.Z.deepCopy(n.methodMap,{getRadius:"getRadius",radius:"Radius",center:"center",radiuspoint:"radiuspoint",anglepoint:"anglepoint",Value:"Value"}),n.prepareUpdate().update(),n},D.Z.registerElement("arc",D.Z.createArc),D.Z.createSemicircle=function(e,t,r){var n,s,o,a;if(!1===(a=d.Z.providePoints(e,t,r,"point"))||2!==a.length)throw new Error("JSXGraph: Can't create Semicircle with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [point,point]");return o=d.Z.copyAttributes(r,e.options,"semicircle","center"),(s=e.create("midpoint",a,o)).dump=!1,o=d.Z.copyAttributes(r,e.options,"semicircle"),(n=e.create("arc",[s,a[1],a[0]],o)).elType="semicircle",n.setParents([a[0].id,a[1].id]),n.subs={midpoint:s},n.inherits.push(s),n.midpoint=n.center=s,n},D.Z.registerElement("semicircle",D.Z.createSemicircle),D.Z.createCircumcircleArc=function(e,t,r){var n,s,o,a;if(!1===(a=d.Z.providePoints(e,t,r,"point"))||3!==a.length)throw new Error("JSXGraph: create Circumcircle Arc with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"' and '"+typeof t[2]+"'.\nPossible parent types: [point,point,point]");return o=d.Z.copyAttributes(r,e.options,"circumcirclearc","center"),(s=e.create("circumcenter",a,o)).dump=!1,(o=d.Z.copyAttributes(r,e.options,"circumcirclearc")).usedirection=!0,(n=e.create("arc",[s,a[0],a[2],a[1]],o)).elType="circumcirclearc",n.setParents([a[0].id,a[1].id,a[2].id]),n.subs={center:s},n.inherits.push(s),n.center=s,n},D.Z.registerElement("circumcirclearc",D.Z.createCircumcircleArc),D.Z.createMinorArc=function(e,t,r){return r.selection="minor",D.Z.createArc(e,t,r)},D.Z.registerElement("minorarc",D.Z.createMinorArc),D.Z.createMajorArc=function(e,t,r){return r.selection="major",D.Z.createArc(e,t,r)},D.Z.registerElement("majorarc",D.Z.createMajorArc),D.Z.createSector=function(e,t,r){var n,s,o,l,u,h,a="invalid";if(t[0].elementClass===Y.Z.OBJECT_CLASS_LINE&&t[1].elementClass===Y.Z.OBJECT_CLASS_LINE&&(d.Z.isArray(t[2])||d.Z.isNumber(t[2]))&&(d.Z.isArray(t[3])||d.Z.isNumber(t[3]))&&(d.Z.isNumber(t[4])||d.Z.isFunction(t[4])||d.Z.isString(t[4])))a="2lines";else{if(!1===(h=d.Z.providePoints(e,t,r,"sector",["center","radiusPoint","anglePoint"])))throw new Error("JSXGraph: Can't create Sector with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"' and '"+typeof t[2]+"'.");a="3points"}if(s=d.Z.copyAttributes(r,e.options,"sector"),(n=e.create("curve",[[0],[0]],s)).type=Y.Z.OBJECT_TYPE_SECTOR,n.elType="sector",n.autoRadius=function(){var g=20/n.board.unitX,y=1/0,E=50/n.board.unitX;return d.Z.isPoint(n.center)&&(y=.3333*n.center.Dist(n.point2)),Math.max(g,Math.min(y,E))},"2lines"===a)n.Radius=function(){var g=d.Z.evaluate(t[4]);return"auto"===g?this.autoRadius():g},n.line1=e.select(t[0]),n.line2=e.select(t[1]),n.line1.addChild(n),n.line2.addChild(n),n.setParents(t),n.point1={visProp:{}},n.point2={visProp:{}},n.point3={visProp:{}},l=fe.Z.meetLineLine(n.line1.stdform,n.line2.stdform,0,e),d.Z.isArray(t[2])?(2===t[2].length&&(t[2]=[1].concat(t[2])),u=fe.Z.projectPointToLine({coords:{usrCoords:t[2]}},n.line1,e),u=ln.Z.subtract(u.usrCoords,l.usrCoords),n.direction1=q.Z.innerProduct(u,[0,n.line1.stdform[2],-n.line1.stdform[1]],3)>=0?1:-1):n.direction1=t[2]>=0?1:-1,d.Z.isArray(t[3])?(2===t[3].length&&(t[3]=[1].concat(t[3])),u=fe.Z.projectPointToLine({coords:{usrCoords:t[3]}},n.line2,e),u=ln.Z.subtract(u.usrCoords,l.usrCoords),n.direction2=q.Z.innerProduct(u,[0,n.line2.stdform[2],-n.line2.stdform[1]],3)>=0?1:-1):n.direction2=t[3]>=0?1:-1,n.updateDataArray=function(){var g,y,E,w,N,L,T=[0,0,0];if(T=q.Z.crossProduct((y=this.line1).stdform,(E=this.line2).stdform),Math.abs(T[0])>q.Z.eps*q.Z.eps&&(T[1]/=T[0],T[2]/=T[0],T[0]/=T[0]),g=this.direction1*this.Radius(),w=ln.Z.add(T,[0,g*y.stdform[2],-g*y.stdform[1]]),g=this.direction2*this.Radius(),N=ln.Z.add(T,[0,g*E.stdform[2],-g*E.stdform[1]]),this.point2.coords=new ge.Z(Y.Z.COORDS_BY_USER,w,n.board),this.point1.coords=new ge.Z(Y.Z.COORDS_BY_USER,T,n.board),this.point3.coords=new ge.Z(Y.Z.COORDS_BY_USER,N,n.board),Math.abs(w[0])<q.Z.eps||Math.abs(T[0])<q.Z.eps||Math.abs(N[0])<q.Z.eps)return this.dataX=[NaN],void(this.dataY=[NaN]);L=fe.Z.bezierArc(w,T,N,!0,1),this.dataX=L[0],this.dataY=L[1],this.bezierDegree=3},n.methodMap=D.Z.deepCopy(n.methodMap,{radius:"Radius",getRadius:"Radius",setRadius:"setRadius"});else if("3points"===a){for(n.point1=h[0],n.point2=h[1],n.point3=h[2],o=0;o<3;o++)d.Z.exists(h[o]._is_new)?(n.addChild(h[o]),delete h[o]._is_new):h[o].addChild(n);n.useDirection=r.usedirection,n.setParents(h),d.Z.exists(h[3])&&(n.point4=h[3],n.point4.addChild(n)),n.methodMap=D.Z.deepCopy(n.methodMap,{arc:"arc",center:"center",radiuspoint:"radiuspoint",anglepoint:"anglepoint",radius:"Radius",getRadius:"Radius",setRadius:"setRadius"}),n.updateDataArray=function(){var g,E,w,T,H,N=this.point2,L=this.point1,R=this.point3,V=1,U=d.Z.evaluate(this.visProp.selection);if(!N.isReal||!L.isReal||!R.isReal)return this.dataX=[NaN],void(this.dataY=[NaN]);H=fe.Z.rad(N,L,R),("minor"===U&&H>Math.PI||"major"===U&&H<Math.PI)&&(V=-1),this.useDirection&&d.Z.exists(this.point4)&&((E=this.point2.coords.usrCoords)[1]-(T=this.point3.coords.usrCoords)[1])*(E[2]-(w=this.point4.coords.usrCoords)[2])-(E[2]-T[2])*(E[1]-w[1])>=0&&(R=this.point2,N=this.point3),g=fe.Z.bezierArc(N=N.coords.usrCoords,L=L.coords.usrCoords,R=R.coords.usrCoords,!0,V),this.dataX=g[0],this.dataY=g[1],this.bezierDegree=3},n.Radius=function(){return this.point2.Dist(this.point1)},(s=d.Z.copyAttributes(r,e.options,"sector","arc")).withLabel=!1,s.name+="_arc",n.arc=e.create("arc",[n.point1,n.point2,n.point3],s),n.addChild(n.arc)}return n.center=n.point1,n.radiuspoint=n.point2,n.anglepoint=n.point3,n.hasPointCurve=function(g,y){var E,w,T,N,U,R=new ge.Z(Y.Z.COORDS_BY_SCREEN,[g,y],this.board),H=this.Radius(),V=this.center.coords.distance(Y.Z.COORDS_BY_USER,R),Q=d.Z.evaluate(this.visProp.selection);return N=d.Z.isObject(d.Z.evaluate(this.visProp.precision))?d.Z.evaluate(this.visProp.precision[this.board._inputDevice]):this.board.options.precision.hasPoint,N/=Math.min(Math.abs(this.board.unitX),Math.abs(this.board.unitY)),(U=Math.abs(V-H)<N)&&(E=fe.Z.rad(this.point2,this.center,R.usrCoords.slice(1)),w=0,T=fe.Z.rad(this.point2,this.center,this.point3),("minor"===Q&&T>Math.PI||"major"===Q&&T<Math.PI)&&(w=T,T=2*Math.PI),(E<w||E>T)&&(U=!1)),U},n.hasPointSector=function(g,y){var E,L,R,w=new ge.Z(Y.Z.COORDS_BY_SCREEN,[g,y],this.board),T=this.Radius(),H=this.point1.coords.distance(Y.Z.COORDS_BY_USER,w)<T,V=d.Z.evaluate(this.visProp.selection);return H&&(E=fe.Z.rad(this.radiuspoint,this.center,w.usrCoords.slice(1)),L=0,R=fe.Z.rad(this.radiuspoint,this.center,this.anglepoint),("minor"===V&&R>Math.PI||"major"===V&&R<Math.PI)&&(L=R,R=2*Math.PI),(E<L||E>R)&&(H=!1)),H},n.hasPoint=function(g,y){return d.Z.evaluate(this.visProp.highlightonsector)||d.Z.evaluate(this.visProp.hasinnerpoints)?this.hasPointSector(g,y):this.hasPointCurve(g,y)},n.getTextAnchor=function(){return this.point1.coords},n.getLabelAnchor=function(){var g,y,E,w,T,N=fe.Z.rad(this.point2,this.point1,this.point3),L=13/this.board.unitX,R=13/this.board.unitY,H=this.point2.coords.usrCoords,V=this.point1.coords.usrCoords,U=H[1]-V[1],Q=H[2]-V[2],oe=d.Z.evaluate(this.visProp.selection),te=this.label?this.label.visProp:this.visProp.label;return("minor"===oe&&N>Math.PI||"major"===oe&&N<Math.PI)&&(N=-(2*Math.PI-N)),E=(g=new ge.Z(Y.Z.COORDS_BY_USER,[V[1]+Math.cos(.5*N)*U-Math.sin(.5*N)*Q,V[2]+Math.sin(.5*N)*U+Math.cos(.5*N)*Q],this.board)).usrCoords[1]-V[1],w=g.usrCoords[2]-V[2],T=Math.sqrt(E*E+w*w),te.position=fe.Z.calcLabelQuadrant(fe.Z.rad([1,0],[0,0],y=[V[1]+(E=E*(T+L)/T),V[2]+(w=w*(T+R)/T)])),new ge.Z(Y.Z.COORDS_BY_USER,y,this.board)},n.setRadius=function(g){var E=d.Z.evaluate(g);"undefined"!=("auto"===g||"auto"===E?"auto":d.Z.isNumber(g)?"number":d.Z.isFunction(g)&&!d.Z.isString(E)?"function":"undefined")&&(this.visProp.radius=g),n.Radius=function(){var w=d.Z.evaluate(g);return"auto"===w?this.autoRadius():w}},n.getRadius=function(){return D.Z.deprecated("Sector.getRadius()","Sector.Radius()"),this.Radius()},"3points"===a&&(n.setPositionDirectly=function(g,y,E){var w,N=new ge.Z(g,y,this.board),L=new ge.Z(g,E,this.board);return n.point1.draggable()&&n.point2.draggable()&&n.point3.draggable()?(w=ln.Z.subtract(N.usrCoords,L.usrCoords),this.board.create("transform",w.slice(1),{type:"translate"}).applyOnce([n.point1,n.point2,n.point3]),this):this}),n.prepareUpdate().update(),n},D.Z.registerElement("sector",D.Z.createSector),D.Z.createCircumcircleSector=function(e,t,r){var n,s,o,a;if(!1===(a=d.Z.providePoints(e,t,r,"point")))throw new Error("JSXGraph: Can't create circumcircle sector with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"' and '"+typeof t[2]+"'.");return(s=e.create("circumcenter",a.slice(0,3),o)).dump=!1,o=d.Z.copyAttributes(r,e.options,"circumcirclesector"),(n=e.create("sector",[s,a[0],a[2],a[1]],o)).elType="circumcirclesector",n.setParents(a),n.center=s,n.subs={center:s},n},D.Z.registerElement("circumcirclesector",D.Z.createCircumcircleSector),D.Z.createMinorSector=function(e,t,r){return r.selection="minor",D.Z.createSector(e,t,r)},D.Z.registerElement("minorsector",D.Z.createMinorSector),D.Z.createMajorSector=function(e,t,r){return r.selection="major",D.Z.createSector(e,t,r)},D.Z.registerElement("majorsector",D.Z.createMajorSector),D.Z.createAngle=function(e,t,r){var n,s,o,a,l,u,c="invalid";if(t[0].elementClass===Y.Z.OBJECT_CLASS_LINE&&t[1].elementClass===Y.Z.OBJECT_CLASS_LINE&&(d.Z.isArray(t[2])||d.Z.isNumber(t[2]))&&(d.Z.isArray(t[3])||d.Z.isNumber(t[3])))c="2lines";else{if(!1===(u=d.Z.providePoints(e,t,o={name:""},"point")))throw new Error("JSXGraph: Can't create angle with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"' and '"+typeof t[2]+"'.");c="3points"}if(o=d.Z.copyAttributes(r,e.options,"angle"),(!d.Z.exists(o.name)||""===o.name)&&(o.name=e.generateName({type:Y.Z.OBJECT_TYPE_ANGLE})),s=d.Z.exists(o.radius)?o.radius:0,"2lines"===c?(t.push(s),(n=e.create("sector",t,o)).updateDataArraySector=n.updateDataArray,n.setAngle=function(h){},n.free=function(h){}):((n=e.create("sector",[u[1],u[0],u[2]],o)).arc.visProp.priv=!0,n.point=n.point2=n.radiuspoint=u[0],n.pointsquare=n.point3=n.anglepoint=u[2],n.Radius=function(){var h=d.Z.evaluate(s);return"auto"===h?n.autoRadius():h},n.updateDataArraySector=function(){var T,N,h=this.point2,g=this.point1,y=this.point3,E=this.Radius(),w=g.Dist(h),L=1,R=d.Z.evaluate(this.visProp.selection);N=fe.Z.rad(h,g,y),("minor"===R&&N>Math.PI||"major"===R&&N<Math.PI)&&(L=-1),T=fe.Z.bezierArc(h=[1,(g=g.coords.usrCoords)[1]+((h=h.coords.usrCoords)[1]-g[1])*E/w,g[2]+(h[2]-g[2])*E/w],g,y=[1,g[1]+((y=y.coords.usrCoords)[1]-g[1])*E/w,g[2]+(y[2]-g[2])*E/w],!0,L),this.dataX=T[0],this.dataY=T[1],this.bezierDegree=3},n.setAngle=function(h){var g,y,E,w=this.anglepoint,T=this.radiuspoint;return w.draggable()&&(g=this.board.create("transform",[h,this.center],{type:"rotate"}),w.addTransform(T,g),g.update(),w.moveTo(q.Z.matVecMult(g.matrix,T.coords.usrCoords)),E=d.Z.isFunction(h)?function(){return 2*Math.PI-h()}:function(){return 2*Math.PI-h},y=this.board.create("transform",[E,this.center],{type:"rotate"}),w.coords.on("update",function(){y.update(),T.moveTo(q.Z.matVecMult(y.matrix,w.coords.usrCoords))}),w.setParents(T)),this},n.free=function(){var h=this.anglepoint;return h.transformations.length>0&&(h.transformations.pop(),h.isDraggable=!0,h.parents=[],h.coords.off("update")),this},n.setParents(u)),d.Z.exists(n.visProp.text)&&n.label.setText(d.Z.evaluate(n.visProp.text)),n.elType="angle",n.type=Y.Z.OBJECT_TYPE_ANGLE,n.subs={},n.updateDataArraySquare=function(){var h,g,y,E,w,T,N,R=this.Radius();"2lines"===c&&this.updateDataArraySector(),y=(y=this.point3).coords.usrCoords,E=fe.Z.distance(h=(h=this.point2).coords.usrCoords,g=(g=this.point1).coords.usrCoords,3),w=fe.Z.distance(y,g,3),h=[1,g[1]+(h[1]-g[1])*R/E,g[2]+(h[2]-g[2])*R/E],T=q.Z.crossProduct(y=[1,g[1]+(y[1]-g[1])*R/w,g[2]+(y[2]-g[2])*R/w],g),N=[-h[1]*T[1]-h[2]*T[2],h[0]*T[1],h[0]*T[2]],T=q.Z.crossProduct(h,g),(T=q.Z.crossProduct(N,[-y[1]*T[1]-y[2]*T[2],y[0]*T[1],y[0]*T[2]]))[1]/=T[0],T[2]/=T[0],this.dataX=[g[1],h[1],T[1],y[1],g[1]],this.dataY=[g[2],h[2],T[2],y[2],g[2]],this.bezierDegree=1},n.updateDataArrayNone=function(){this.dataX=[NaN],this.dataY=[NaN],this.bezierDegree=1},n.updateDataArray=function(){var h=d.Z.evaluate(this.visProp.type),g=fe.Z.trueAngle(this.point2,this.point1,this.point3),y=d.Z.evaluate(this.visProp.selection);("minor"===y&&g>180||"major"===y&&g<180)&&(g=360-g),Math.abs(g-90)<d.Z.evaluate(this.visProp.orthosensitivity)+q.Z.eps&&(h=d.Z.evaluate(this.visProp.orthotype)),"none"===h?this.updateDataArrayNone():"square"===h?this.updateDataArraySquare():"sector"===h?this.updateDataArraySector():"sectordot"===h&&(this.updateDataArraySector(),this.dot.visProp.visible||this.dot.setAttribute({visible:!0})),(!this.visProp.visible||"sectordot"!==h&&this.dot.visProp.visible)&&this.dot.setAttribute({visible:!1})},a=d.Z.copyAttributes(r,e.options,"angle","dot"),n.dot=e.create("point",[function(){var h,g,y,E,w,T,N,R;return d.Z.exists(n.dot)&&!n.dot.visProp.visible?[0,0]:(h=n.point2.coords.usrCoords,g=n.point1.coords.usrCoords,y=n.Radius(),E=fe.Z.distance(h,g,3),w=fe.Z.rad(n.point2,n.point1,n.point3),("minor"===(R=d.Z.evaluate(n.visProp.selection))&&w>Math.PI||"major"===R&&w<Math.PI)&&(w=-(2*Math.PI-w)),w*=.5,T=Math.cos(w),N=Math.sin(w),q.Z.matVecMult([[1,0,0],[g[1]-.5*g[1]*T+.5*g[2]*N,.5*T,.5*-N],[g[2]-.5*g[1]*N-.5*g[2]*T,.5*N,.5*T]],h=[1,g[1]+(h[1]-g[1])*y/E,g[2]+(h[2]-g[2])*y/E]))}],a),n.dot.dump=!1,n.subs.dot=n.dot,"2lines"===c)for(l=0;l<2;l++)e.select(t[l]).addChild(n.dot);else for(l=0;l<3;l++)e.select(u[l]).addChild(n.dot);return n.getLabelAnchor=function(){var h,y,E,w,T,N,L,R,g=12,V=d.Z.evaluate(n.visProp.selection),U=this.label?this.label.visProp:this.visProp.label;return d.Z.exists(this.label)&&d.Z.exists(this.label.visProp.fontsize)&&(g=d.Z.evaluate(this.label.visProp.fontsize)),g/=this.board.unitX,y=n.point2.coords.usrCoords,E=n.point1.coords.usrCoords,w=n.Radius(),T=fe.Z.distance(y,E,3),N=fe.Z.rad(n.point2,n.point1,n.point3),("minor"===V&&N>Math.PI||"major"===V&&N<Math.PI)&&(N=-(2*Math.PI-N)),N*=.5,L=Math.cos(N),R=Math.sin(N),(h=q.Z.matVecMult([[1,0,0],[E[1]-.5*E[1]*L+.5*E[2]*R,.5*L,.5*-R],[E[2]-.5*E[1]*R-.5*E[2]*L,.5*R,.5*L]],y=[1,E[1]+(y[1]-E[1])*w/T,E[2]+(y[2]-E[2])*w/T]))[1]/=h[0],h[2]/=h[0],h[0]/=h[0],T=fe.Z.distance(h,E,3),U.position=fe.Z.calcLabelQuadrant(fe.Z.rad([1,0],[0,0],h=[h[0],E[1]+(h[1]-E[1])*(w+g)/T,E[2]+(h[2]-E[2])*(w+g)/T])),new ge.Z(Y.Z.COORDS_BY_USER,h,this.board)},n.Value=function(){return fe.Z.rad(this.point2,this.point1,this.point3)},n.methodMap=d.Z.deepCopy(n.methodMap,{Value:"Value",setAngle:"setAngle",free:"free"}),n},D.Z.registerElement("angle",D.Z.createAngle),D.Z.createNonreflexAngle=function(e,t,r){var n;return r.selection="minor",r=d.Z.copyAttributes(r,e.options,"nonreflexangle"),(n=D.Z.createAngle(e,t,r)).Value=function(){var s=fe.Z.rad(this.point2,this.point1,this.point3);return s<Math.PI?s:2*Math.PI-s},n},D.Z.registerElement("nonreflexangle",D.Z.createNonreflexAngle),D.Z.createReflexAngle=function(e,t,r){var n;return r.selection="major",r=d.Z.copyAttributes(r,e.options,"reflexangle"),(n=D.Z.createAngle(e,t,r)).Value=function(){var s=fe.Z.rad(this.point2,this.point1,this.point3);return s>=Math.PI?s:2*Math.PI-s},n},D.Z.registerElement("reflexangle",D.Z.createReflexAngle),D.Z.createOrthogonalProjection=function(e,t,r){var n,s,o,a;if(t[0]=e.select(t[0]),t[1]=e.select(t[1]),d.Z.isPointType(e,t[0])&&t[1].elementClass===Y.Z.OBJECT_CLASS_LINE)s=d.Z.providePoints(e,[t[0]],r,"point")[0],n=t[1];else{if(!d.Z.isPointType(e,t[1])||t[0].elementClass!==Y.Z.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create perpendicular point with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [point,line]");s=d.Z.providePoints(e,[t[1]],r,"point")[0],n=t[0]}return a=d.Z.copyAttributes(r,e.options,"orthogonalprojection"),o=e.create("point",[function(){return fe.Z.projectPointToLine(s,n,e)}],a),d.Z.exists(s._is_new)?(o.addChild(s),delete s._is_new):s.addChild(o),n.addChild(o),o.elType="orthogonalprojection",o.setParents([s.id,o.id]),o.update(),o.generatePolynomial=function(){var l=n.point1.symbolic.x,u=n.point1.symbolic.y,c=n.point2.symbolic.x,h=n.point2.symbolic.y,g=s.symbolic.x,y=s.symbolic.y,E=o.symbolic.x,w=o.symbolic.y;return["("+u+")*("+E+")-("+u+")*("+c+")+("+w+")*("+c+")-("+l+")*("+w+")+("+l+")*("+h+")-("+E+")*("+h+")","("+y+")*("+u+")-("+y+")*("+h+")-("+w+")*("+u+")+("+w+")*("+h+")+("+g+")*("+l+")-("+g+")*("+c+")-("+E+")*("+l+")+("+E+")*("+c+")"]},o},D.Z.createPerpendicular=function(e,t,r){var n,s,o,a;if(t[0]=e.select(t[0]),t[1]=e.select(t[1]),d.Z.isPointType(e,t[0])&&t[1].elementClass===Y.Z.OBJECT_CLASS_LINE)s=t[1],n=d.Z.providePoints(e,[t[0]],r,"point")[0];else{if(!d.Z.isPointType(e,t[1])||t[0].elementClass!==Y.Z.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create perpendicular with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [line,point]");s=t[0],n=d.Z.providePoints(e,[t[1]],r,"point")[0]}return a=d.Z.copyAttributes(r,e.options,"perpendicular"),(o=D.Z.createLine(e,[function(){return s.stdform[2]*n.X()-s.stdform[1]*n.Y()},function(){return-s.stdform[2]*n.Z()},function(){return s.stdform[1]*n.Z()}],a)).elType="perpendicular",o.setParents([s.id,n.id]),d.Z.exists(n._is_new)?(o.addChild(n),delete n._is_new):n.addChild(o),s.addChild(o),o},D.Z.createPerpendicularPoint=function(e,t,r){var n,s,o;if(t[0]=e.select(t[0]),t[1]=e.select(t[1]),d.Z.isPointType(e,t[0])&&t[1].elementClass===Y.Z.OBJECT_CLASS_LINE)s=d.Z.providePoints(e,[t[0]],r,"point")[0],n=t[1];else{if(!d.Z.isPointType(e,t[1])||t[0].elementClass!==Y.Z.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create perpendicular point with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [point,line]");s=d.Z.providePoints(e,[t[1]],r,"point")[0],n=t[0]}return o=e.create("point",[function(){return fe.Z.perpendicular(n,s,e)[0]}],r),d.Z.exists(s._is_new)?(o.addChild(s),delete s._is_new):s.addChild(o),n.addChild(o),o.elType="perpendicularpoint",o.setParents([s.id,n.id]),o.update(),o.generatePolynomial=function(){var a=n.point1.symbolic.x,l=n.point1.symbolic.y,u=n.point2.symbolic.x,c=n.point2.symbolic.y,h=s.symbolic.x,g=s.symbolic.y,y=o.symbolic.x,E=o.symbolic.y;return["("+l+")*("+y+")-("+l+")*("+u+")+("+E+")*("+u+")-("+a+")*("+E+")+("+a+")*("+c+")-("+y+")*("+c+")","("+g+")*("+l+")-("+g+")*("+c+")-("+E+")*("+l+")+("+E+")*("+c+")+("+h+")*("+a+")-("+h+")*("+u+")-("+y+")*("+a+")+("+y+")*("+u+")"]},o},D.Z.createPerpendicularSegment=function(e,t,r){var n,s,o,a,l;if(t[0]=e.select(t[0]),t[1]=e.select(t[1]),d.Z.isPointType(e,t[0])&&t[1].elementClass===Y.Z.OBJECT_CLASS_LINE)s=t[1],n=d.Z.providePoints(e,[t[0]],r,"point")[0];else{if(!d.Z.isPointType(e,t[1])||t[0].elementClass!==Y.Z.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create perpendicular with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [line,point]");s=t[0],n=d.Z.providePoints(e,[t[1]],r,"point")[0]}return l=d.Z.copyAttributes(r,e.options,"perpendicularsegment","point"),(a=D.Z.createPerpendicularPoint(e,[s,n],l)).dump=!1,d.Z.exists(r.layer)||(r.layer=e.options.layer.line),l=d.Z.copyAttributes(r,e.options,"perpendicularsegment"),(o=D.Z.createLine(e,[function(){return fe.Z.perpendicular(s,n,e)[1]?[a,n]:[n,a]}],l)).point=a,d.Z.exists(n._is_new)?(o.addChild(n),delete n._is_new):n.addChild(o),s.addChild(o),o.elType="perpendicularsegment",o.setParents([n.id,s.id]),o.subs={point:a},o.inherits.push(a),o},D.Z.createMidpoint=function(e,t,r){var n,s,o,a,l;for(a=0;a<t.length;++a)t[a]=e.select(t[a]);if(2===t.length&&d.Z.isPointType(e,t[0])&&d.Z.isPointType(e,t[1]))t=d.Z.providePoints(e,t,r,"point"),n=t[0],s=t[1];else{if(1!==t.length||t[0].elementClass!==Y.Z.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create midpoint.\nPossible parent types: [point,point], [line]");n=t[0].point1,s=t[0].point2}return l=d.Z.copyAttributes(r,e.options,"midpoint"),o=e.create("point",[function(){var u=n.coords.usrCoords[1]+s.coords.usrCoords[1];return isNaN(u)||Math.abs(n.coords.usrCoords[0])<q.Z.eps||Math.abs(s.coords.usrCoords[0])<q.Z.eps?NaN:.5*u},function(){var u=n.coords.usrCoords[2]+s.coords.usrCoords[2];return isNaN(u)||Math.abs(n.coords.usrCoords[0])<q.Z.eps||Math.abs(s.coords.usrCoords[0])<q.Z.eps?NaN:.5*u}],l),d.Z.exists(n._is_new)?(o.addChild(n),delete n._is_new):n.addChild(o),d.Z.exists(s._is_new)?(o.addChild(s),delete s._is_new):s.addChild(o),o.elType="midpoint",o.setParents([n.id,s.id]),o.prepareUpdate().update(),o.generatePolynomial=function(){var u=n.symbolic.x,c=n.symbolic.y,h=s.symbolic.x,g=s.symbolic.y,y=o.symbolic.x,E=o.symbolic.y;return["("+c+")*("+y+")-("+c+")*("+h+")+("+E+")*("+h+")-("+u+")*("+E+")+("+u+")*("+g+")-("+y+")*("+g+")","("+u+")^2 - 2*("+u+")*("+y+")+("+c+")^2-2*("+c+")*("+E+")-("+h+")^2+2*("+h+")*("+y+")-("+g+")^2+2*("+g+")*("+E+")"]},o},D.Z.createParallelPoint=function(e,t,r){var n,s,o,a,l,u;for(l=0;l<t.length;++l)t[l]=e.select(t[l]);if(3===t.length&&d.Z.isPointType(e,t[0])&&d.Z.isPointType(e,t[1])&&d.Z.isPointType(e,t[2]))t=d.Z.providePoints(e,t,r,"point"),n=t[0],s=t[1],o=t[2];else if(d.Z.isPointType(e,t[0])&&t[1].elementClass===Y.Z.OBJECT_CLASS_LINE)o=d.Z.providePoints(e,[t[0]],r,"point")[0],n=t[1].point1,s=t[1].point2;else{if(!d.Z.isPointType(e,t[1])||t[0].elementClass!==Y.Z.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create parallel point with parent types '"+typeof t[0]+"', '"+typeof t[1]+"' and '"+typeof t[2]+"'.\nPossible parent types: [line,point], [point,point,point]");o=d.Z.providePoints(e,[t[1]],r,"point")[0],n=t[0].point1,s=t[0].point2}return u=d.Z.copyAttributes(r,e.options,"parallelpoint"),a=e.create("point",[function(){return o.coords.usrCoords[1]+s.coords.usrCoords[1]-n.coords.usrCoords[1]},function(){return o.coords.usrCoords[2]+s.coords.usrCoords[2]-n.coords.usrCoords[2]}],u),d.Z.exists(n._is_new)?(a.addChild(n),delete n._is_new):n.addChild(a),d.Z.exists(s._is_new)?(a.addChild(s),delete s._is_new):s.addChild(a),d.Z.exists(o._is_new)?(a.addChild(o),delete o._is_new):o.addChild(a),a.elType="parallelpoint",a.setParents([n.id,s.id,o.id]),a.prepareUpdate().update(),a.generatePolynomial=function(){var c=n.symbolic.x,h=n.symbolic.y,g=s.symbolic.x,y=s.symbolic.y,E=o.symbolic.x,w=o.symbolic.y,T=a.symbolic.x,N=a.symbolic.y;return["("+y+")*("+T+")-("+y+")*("+E+")-("+h+")*("+T+")+("+h+")*("+E+")-("+N+")*("+g+")+("+N+")*("+c+")+("+w+")*("+g+")-("+w+")*("+c+")","("+N+")*("+c+")-("+N+")*("+E+")-("+y+")*("+c+")+("+y+")*("+E+")-("+T+")*("+h+")+("+T+")*("+w+")+("+g+")*("+h+")-("+g+")*("+w+")"]},a},D.Z.createParallel=function(e,t,r){var n,s,o,a,l,u,c=1;for(l=0;l<t.length;++l)t[l]=e.select(t[l]);return n=null,3===t.length?(n=(t=d.Z.providePoints(e,t,r,"point"))[2],c=0):d.Z.isPointType(e,t[0])?(n=d.Z.providePoints(e,[t[0]],r,"point")[0],a=function(){return t[1].stdform}):d.Z.isPointType(e,t[1])&&(n=d.Z.providePoints(e,[t[1]],r,"point")[0],a=function(){return t[0].stdform}),d.Z.exists(r.layer)||(r.layer=e.options.layer.line),u=d.Z.copyAttributes(r,e.options,"parallel","point"),(s=1===c?e.create("point",[function(){return q.Z.crossProduct([1,0,0],a())}],u):e.create("parallelpoint",t,u)).isDraggable=!0,u=d.Z.copyAttributes(r,e.options,"parallel"),(o=e.create("line",[n,s],u)).elType="parallel",o.subs={point:s},o.inherits.push(s),o.setParents([t[0].id,t[1].id]),3===t.length&&o.addParents(t[2].id),o.point=s,o},D.Z.createArrowParallel=function(e,t,r){var n,s;try{return(s=d.Z.copyAttributes(r,e.options,"arrowparallel")).firstArrow=!1,s.lastArrow=!0,(n=D.Z.createParallel(e,t,s).setAttribute({straightFirst:!1,straightLast:!1})).elType="arrowparallel",n}catch{throw new Error("JSXGraph: Can't create arrowparallel with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [line,point], [point,point,point]")}},D.Z.createNormal=function(e,t,r){var n,s,o,a,l,u,c,h,g;for(a=0;a<t.length;++a)t[a]=e.select(t[a]);if(1===t.length)s=(n=t[0]).slideObject;else{if(2!==t.length)throw new Error("JSXGraph: Can't create normal with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [point,line], [point,circle], [glider]");if(d.Z.isPointType(e,t[0]))n=d.Z.providePoints(e,[t[0]],r,"point")[0],s=t[1];else{if(!d.Z.isPointType(e,t[1]))throw new Error("JSXGraph: Can't create normal with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [point,line], [point,circle], [glider]");s=t[0],n=d.Z.providePoints(e,[t[1]],r,"point")[0]}}if(c=d.Z.copyAttributes(r,e.options,"normal"),s.elementClass===Y.Z.OBJECT_CLASS_LINE)g=d.Z.copyAttributes(r,e.options,"normal","point"),(h=e.create("point",[function(){var y=q.Z.crossProduct([1,0,0],s.stdform);return[y[0],-y[2],y[1]]}],g)).isDraggable=!0,(o=e.create("line",[n,h],c)).point=h,o.subs={point:h},o.inherits.push(h);else if(s.elementClass===Y.Z.OBJECT_CLASS_CIRCLE)o=e.create("line",[s.midpoint,n],c);else if(s.elementClass===Y.Z.OBJECT_CLASS_CURVE)"plot"!==d.Z.evaluate(s.visProp.curvetype)?(l=s.X,u=s.Y,o=e.create("line",[function(){return-n.X()*Qe.Z.D(l)(n.position)-n.Y()*Qe.Z.D(u)(n.position)},function(){return Qe.Z.D(l)(n.position)},function(){return Qe.Z.D(u)(n.position)}],c)):o=e.create("line",[function(){var w,T,N,L,R,H,V,U,Q,oe,y=Math.floor(n.position),E=n.position-y;if(1===s.bezierdegree)y===s.numberPoints-1&&(y-=1,E=1);else{if(3!==s.bezierDegree)return 0;y=3*Math.floor(n.position*(s.numberPoints-1)/3),N=(n.position*(s.numberPoints-1)-y)/3,y>=s.numberPoints-1&&(y=s.numberPoints-4,N=1)}return y<0?1:1===s.bezierDegree?(s.Y(y)+E*(s.Y(y+1)-s.Y(y)))*(s.Y(y)-s.Y(y+1))-(s.X(y)+E*(s.X(y+1)-s.X(y)))*(s.X(y+1)-s.X(y)):(U=(1-N)*(1-N)*((R=s.points[y+1].usrCoords)[1]-(L=s.points[y].usrCoords)[1])+2*(1-N)*N*((H=s.points[y+2].usrCoords)[1]-R[1])+N*N*((V=s.points[y+3].usrCoords)[1]-H[1]),Q=(1-N)*(1-N)*(R[2]-L[2])+2*(1-N)*N*(H[2]-R[2])+N*N*(V[2]-H[2]),oe=Math.sqrt(U*U+Q*Q),(w=n.coords.usrCoords)[2]*(T=[1,w[1]-(Q/=oe),w[2]+(U/=oe)])[1]-w[1]*T[2])},function(){var E,T,N,L,R,H,V,U,Q,y=Math.floor(n.position);if(1===s.bezierdegree)y===s.numberPoints-1&&(y-=1);else{if(3!==s.bezierDegree)return 0;y=3*Math.floor(n.position*(s.numberPoints-1)/3),T=(n.position*(s.numberPoints-1)-y)/3,y>=s.numberPoints-1&&(y=s.numberPoints-4,T=1)}return y<0?0:1===s.bezierDegree?s.X(y+1)-s.X(y):(V=(1-T)*(1-T)*((L=s.points[y+1].usrCoords)[1]-(N=s.points[y].usrCoords)[1])+2*(1-T)*T*((R=s.points[y+2].usrCoords)[1]-L[1])+T*T*((H=s.points[y+3].usrCoords)[1]-R[1]),U=(1-T)*(1-T)*(L[2]-N[2])+2*(1-T)*T*(R[2]-L[2])+T*T*(H[2]-R[2]),U/=Q=Math.sqrt(V*V+U*U),(E=n.coords.usrCoords)[2]+(V/=Q)-E[2])},function(){var E,T,N,L,R,H,V,U,Q,y=Math.floor(n.position);if(1===s.bezierdegree)y===s.numberPoints-1&&(y-=1);else{if(3!==s.bezierDegree)return 0;y=3*Math.floor(n.position*(s.numberPoints-1)/3),T=(n.position*(s.numberPoints-1)-y)/3,y>=s.numberPoints-1&&(y=s.numberPoints-4,T=1)}return y<0?0:1===s.bezierDegree?s.Y(y+1)-s.Y(y):(V=(1-T)*(1-T)*((L=s.points[y+1].usrCoords)[1]-(N=s.points[y].usrCoords)[1])+2*(1-T)*T*((R=s.points[y+2].usrCoords)[1]-L[1])+T*T*((H=s.points[y+3].usrCoords)[1]-R[1]),U=(1-T)*(1-T)*(L[2]-N[2])+2*(1-T)*T*(R[2]-L[2])+T*T*(H[2]-R[2]),Q=Math.sqrt(V*V+U*U),(E=n.coords.usrCoords)[1]-[E[1]-(U/=Q),V/=Q][0])}],c);else{if(s.type!==Y.Z.OBJECT_TYPE_TURTLE)throw new Error("JSXGraph: Can't create normal with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [point,line], [point,circle], [glider]");o=e.create("line",[function(){var y,E,w=Math.floor(n.position),T=n.position-w;for(E=0;E<s.objects.length;E++)if((y=s.objects[E]).type===Y.Z.OBJECT_TYPE_CURVE){if(w<y.numberPoints)break;w-=y.numberPoints}return w===y.numberPoints-1&&(w-=1,T=1),w<0?1:(y.Y(w)+T*(y.Y(w+1)-y.Y(w)))*(y.Y(w)-y.Y(w+1))-(y.X(w)+T*(y.X(w+1)-y.X(w)))*(y.X(w+1)-y.X(w))},function(){var y,E,w=Math.floor(n.position);for(E=0;E<s.objects.length;E++)if((y=s.objects[E]).type===Y.Z.OBJECT_TYPE_CURVE){if(w<y.numberPoints)break;w-=y.numberPoints}return w===y.numberPoints-1&&(w-=1),w<0?0:y.X(w+1)-y.X(w)},function(){var y,E,w=Math.floor(n.position);for(E=0;E<s.objects.length;E++)if((y=s.objects[E]).type===Y.Z.OBJECT_TYPE_CURVE){if(w<y.numberPoints)break;w-=y.numberPoints}return w===y.numberPoints-1&&(w-=1),w<0?0:y.Y(w+1)-y.Y(w)}],c)}return o.elType="normal",o.setParents(t),d.Z.exists(n._is_new)?(o.addChild(n),delete n._is_new):n.addChild(o),s.addChild(o),o},D.Z.createBisector=function(e,t,r){var n,s,o,a;if(t=d.Z.providePoints(e,t,r,"point"),d.Z.isPoint(t[0])&&d.Z.isPoint(t[1])&&d.Z.isPoint(t[2])){for((a=d.Z.copyAttributes(r,e.options,"bisector","point")).snapToGrid=!1,(n=e.create("point",[function(){return fe.Z.angleBisector(t[0],t[1],t[2],e)}],a)).dump=!1,o=0;o<3;o++)d.Z.exists(t[o]._is_new)?(n.addChild(t[o]),delete t[o]._is_new):t[o].addChild(n);return d.Z.exists(r.layer)||(r.layer=e.options.layer.line),a=d.Z.copyAttributes(r,e.options,"bisector"),(s=D.Z.createLine(e,[t[1],n],a)).point=n,s.elType="bisector",s.setParents(t),s.subs={point:n},s.inherits.push(n),s}throw new Error("JSXGraph: Can't create angle bisector with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [point,point,point]")},D.Z.createAngularBisectorsOfTwoLines=function(e,t,r){var n,s,o,a,l=e.select(t[0]),u=e.select(t[1]);if(l.elementClass!==Y.Z.OBJECT_CLASS_LINE||u.elementClass!==Y.Z.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create angle bisectors of two lines with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [line,line]");return d.Z.exists(r.layer)||(r.layer=e.options.layer.line),o=d.Z.copyAttributes(r,e.options,"bisectorlines","line1"),n=e.create("line",[function(){var c=Math.sqrt(l.stdform[1]*l.stdform[1]+l.stdform[2]*l.stdform[2]),h=Math.sqrt(u.stdform[1]*u.stdform[1]+u.stdform[2]*u.stdform[2]);return l.stdform[0]/c-u.stdform[0]/h},function(){var c=Math.sqrt(l.stdform[1]*l.stdform[1]+l.stdform[2]*l.stdform[2]),h=Math.sqrt(u.stdform[1]*u.stdform[1]+u.stdform[2]*u.stdform[2]);return l.stdform[1]/c-u.stdform[1]/h},function(){var c=Math.sqrt(l.stdform[1]*l.stdform[1]+l.stdform[2]*l.stdform[2]),h=Math.sqrt(u.stdform[1]*u.stdform[1]+u.stdform[2]*u.stdform[2]);return l.stdform[2]/c-u.stdform[2]/h}],o),d.Z.exists(r.layer)||(r.layer=e.options.layer.line),o=d.Z.copyAttributes(r,e.options,"bisectorlines","line2"),s=e.create("line",[function(){var c=Math.sqrt(l.stdform[1]*l.stdform[1]+l.stdform[2]*l.stdform[2]),h=Math.sqrt(u.stdform[1]*u.stdform[1]+u.stdform[2]*u.stdform[2]);return l.stdform[0]/c+u.stdform[0]/h},function(){var c=Math.sqrt(l.stdform[1]*l.stdform[1]+l.stdform[2]*l.stdform[2]),h=Math.sqrt(u.stdform[1]*u.stdform[1]+u.stdform[2]*u.stdform[2]);return l.stdform[1]/c+u.stdform[1]/h},function(){var c=Math.sqrt(l.stdform[1]*l.stdform[1]+l.stdform[2]*l.stdform[2]),h=Math.sqrt(u.stdform[1]*u.stdform[1]+u.stdform[2]*u.stdform[2]);return l.stdform[2]/c+u.stdform[2]/h}],o),a=new Sp({line1:n,line2:s}),n.dump=!1,s.dump=!1,a.elType="bisectorlines",a.setParents([l.id,u.id]),a.subs={line1:n,line2:s},a},D.Z.createCircumcenter=function(e,t,r){var n,s,o,a,l;if(t=d.Z.providePoints(e,t,r,"point"),d.Z.isPoint(t[0])&&d.Z.isPoint(t[1])&&d.Z.isPoint(t[2])){for(o=t[0],a=t[1],l=t[2],n=D.Z.createPoint(e,[function(){return fe.Z.circumcenter(o,a,l,e)}],r),s=0;s<3;s++)d.Z.exists(t[s]._is_new)?(n.addChild(t[s]),delete t[s]._is_new):t[s].addChild(n);return n.elType="circumcenter",n.setParents(t),n.generatePolynomial=function(){var u=o.symbolic.x,c=o.symbolic.y,y=l.symbolic.x,E=l.symbolic.y,w=n.symbolic.x,T=n.symbolic.y;return[["((",w,")-(",u,"))^2+((",T,")-(",c,"))^2-((",w,")-(",a.symbolic.x,"))^2-((",T,")-(",a.symbolic.y,"))^2"].join(""),["((",w,")-(",u,"))^2+((",T,")-(",c,"))^2-((",w,")-(",y,"))^2-((",T,")-(",E,"))^2"].join("")]},n}throw new Error("JSXGraph: Can't create circumcircle midpoint with parent types '"+typeof t[0]+"', '"+typeof t[1]+"' and '"+typeof t[2]+"'.\nPossible parent types: [point,point,point]")},D.Z.createIncenter=function(e,t,r){var n,s,o,a,l;if(!((t=d.Z.providePoints(e,t,r,"point")).length>=3&&d.Z.isPoint(t[0])&&d.Z.isPoint(t[1])&&d.Z.isPoint(t[2])))throw new Error("JSXGraph: Can't create incenter with parent types '"+typeof t[0]+"', '"+typeof t[1]+"' and '"+typeof t[2]+"'.\nPossible parent types: [point,point,point]");for(s=t[0],o=t[1],a=t[2],n=e.create("point",[function(){var u,c,h;return u=Math.sqrt((o.X()-a.X())*(o.X()-a.X())+(o.Y()-a.Y())*(o.Y()-a.Y())),c=Math.sqrt((s.X()-a.X())*(s.X()-a.X())+(s.Y()-a.Y())*(s.Y()-a.Y())),h=Math.sqrt((o.X()-s.X())*(o.X()-s.X())+(o.Y()-s.Y())*(o.Y()-s.Y())),new ge.Z(Y.Z.COORDS_BY_USER,[(u*s.X()+c*o.X()+h*a.X())/(u+c+h),(u*s.Y()+c*o.Y()+h*a.Y())/(u+c+h)],e)}],r),l=0;l<3;l++)d.Z.exists(t[l]._is_new)?(n.addChild(t[l]),delete t[l]._is_new):t[l].addChild(n);return n.elType="incenter",n.setParents(t),n},D.Z.createCircumcircle=function(e,t,r){var n,s,o,a;if(!1===(t=d.Z.providePoints(e,t,r,"point")))throw new Error("JSXGraph: Can't create circumcircle with parent types '"+typeof t[0]+"', '"+typeof t[1]+"' and '"+typeof t[2]+"'.\nPossible parent types: [point,point,point]");try{for(o=d.Z.copyAttributes(r,e.options,"circumcircle","center"),(n=D.Z.createCircumcenter(e,t,o)).dump=!1,d.Z.exists(r.layer)||(r.layer=e.options.layer.circle),o=d.Z.copyAttributes(r,e.options,"circumcircle"),(s=D.Z.createCircle(e,[n,t[0]],o)).elType="circumcircle",s.setParents(t),s.subs={center:n},s.inherits.push(s),a=0;a<3;a++)d.Z.exists(t[a]._is_new)?(s.addChild(t[a]),delete t[a]._is_new):t[a].addChild(s)}catch{throw new Error("JSXGraph: Can't create circumcircle with parent types '"+typeof t[0]+"', '"+typeof t[1]+"' and '"+typeof t[2]+"'.\nPossible parent types: [point,point,point]")}return s},D.Z.createIncircle=function(e,t,r){var n,s,o,a;if(!1===(t=d.Z.providePoints(e,t,r,"point")))throw new Error("JSXGraph: Can't create circumcircle with parent types '"+typeof t[0]+"', '"+typeof t[1]+"' and '"+typeof t[2]+"'.\nPossible parent types: [point,point,point]");try{for(a=d.Z.copyAttributes(r,e.options,"incircle","center"),(s=D.Z.createIncenter(e,t,a)).dump=!1,d.Z.exists(r.layer)||(r.layer=e.options.layer.circle),a=d.Z.copyAttributes(r,e.options,"incircle"),(o=D.Z.createCircle(e,[s,function(){var l=Math.sqrt((t[1].X()-t[2].X())*(t[1].X()-t[2].X())+(t[1].Y()-t[2].Y())*(t[1].Y()-t[2].Y())),u=Math.sqrt((t[0].X()-t[2].X())*(t[0].X()-t[2].X())+(t[0].Y()-t[2].Y())*(t[0].Y()-t[2].Y())),c=Math.sqrt((t[1].X()-t[0].X())*(t[1].X()-t[0].X())+(t[1].Y()-t[0].Y())*(t[1].Y()-t[0].Y())),h=(l+u+c)/2;return Math.sqrt((h-l)*(h-u)*(h-c)/h)}],a)).elType="incircle",o.setParents(t),n=0;n<3;n++)d.Z.exists(t[n]._is_new)?(o.addChild(t[n]),delete t[n]._is_new):t[n].addChild(o);o.center=s,o.subs={center:o.center},o.inherits.push(s)}catch{throw new Error("JSXGraph: Can't create circumcircle with parent types '"+typeof t[0]+"', '"+typeof t[1]+"' and '"+typeof t[2]+"'.\nPossible parent types: [point,point,point]")}return o},D.Z.createReflection=function(e,t,r){var n,s,o,a,l,u,c,h,g="\nPossible parent types: [point|line|curve|polygon|circle|arc|sector, line]";for(u=0;u<t.length;++u)t[u]=e.select(t[u]);if(c=d.Z.copyAttributes(r,e.options,"reflection"),d.Z.isPoint(t[0]))s=d.Z.providePoints(e,[t[0]],h)[0];else{if(t[0].elementClass!==Y.Z.OBJECT_CLASS_CURVE&&t[0].elementClass!==Y.Z.OBJECT_CLASS_LINE&&t[0].type!==Y.Z.OBJECT_TYPE_POLYGON&&t[0].elementClass!==Y.Z.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create reflection element with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'."+g);s=t[0]}if(t[1].elementClass!==Y.Z.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create reflected element with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'."+g);if(l=D.Z.createTransform(e,[n=t[1]],{type:"reflect"}),d.Z.isPoint(s))o=D.Z.createPoint(e,[s,l],c);else if(s.elementClass===Y.Z.OBJECT_CLASS_CURVE)o=D.Z.createCurve(e,[s,l],c);else if(s.elementClass===Y.Z.OBJECT_CLASS_LINE)o=D.Z.createLine(e,[s,l],c);else if(s.type===Y.Z.OBJECT_TYPE_POLYGON)o=D.Z.createPolygon(e,[s,l],c);else{if(s.elementClass!==Y.Z.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create reflected element with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'."+g);"euclidean"===c.type.toLowerCase()?(h=d.Z.copyAttributes(r,e.options,"reflection","center"),(a=D.Z.createPoint(e,[s.center,l],h)).prepareUpdate().update().updateVisibility(d.Z.evaluate(a.visProp.visible)).updateRenderer(),o=D.Z.createCircle(e,[a,function(){return s.Radius()}],c)):o=D.Z.createCircle(e,[s,l],c)}return d.Z.exists(s._is_new)&&(o.addChild(s),delete s._is_new),n.addChild(o),o.elType="reflection",o.addParents(n),o.prepareUpdate().update(),d.Z.isPoint(o)&&(o.generatePolynomial=function(){var y=n.point1.symbolic.x,E=n.point1.symbolic.y,N=s.symbolic.x,L=s.symbolic.y,R=o.symbolic.x,H=o.symbolic.y;return[["((",H,")-(",L,"))*((",E,")-(",n.point2.symbolic.y,"))+((",y,")-(",n.point2.symbolic.x,"))*((",R,")-(",N,"))"].join(""),["((",R,")-(",y,"))^2+((",H,")-(",E,"))^2-((",N,")-(",y,"))^2-((",L,")-(",E,"))^2"].join("")]}),o},D.Z.createMirrorElement=function(e,t,r){var n,s,o,a,l,u,c,h,g="\nPossible parent types: [point|line|curve|polygon|circle|arc|sector, point]";for(s=0;s<t.length;++s)t[s]=e.select(t[s]);if(c=d.Z.copyAttributes(r,e.options,"mirrorelement"),d.Z.isPoint(t[0]))n=d.Z.providePoints(e,[t[0]],c)[0];else{if(t[0].elementClass!==Y.Z.OBJECT_CLASS_CURVE&&t[0].elementClass!==Y.Z.OBJECT_CLASS_LINE&&t[0].type!==Y.Z.OBJECT_TYPE_POLYGON&&t[0].elementClass!==Y.Z.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create mirror element with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'."+g);n=t[0]}if(!d.Z.isPoint(t[1]))throw new Error("JSXGraph: Can't create mirror element with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'."+g);if(h=d.Z.copyAttributes(r,e.options,"mirrorelement","point"),o=d.Z.providePoints(e,[t[1]],h)[0],u=D.Z.createTransform(e,[Math.PI,o],{type:"rotate"}),d.Z.isPoint(n))a=D.Z.createPoint(e,[n,u],c);else if(n.elementClass===Y.Z.OBJECT_CLASS_CURVE)a=D.Z.createCurve(e,[n,u],c);else if(n.elementClass===Y.Z.OBJECT_CLASS_LINE)a=D.Z.createLine(e,[n,u],c);else if(n.type===Y.Z.OBJECT_TYPE_POLYGON)a=D.Z.createPolygon(e,[n,u],c);else{if(n.elementClass!==Y.Z.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create mirror element with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'."+g);"euclidean"===c.type.toLowerCase()?(h=d.Z.copyAttributes(r,e.options,"mirrorelement","center"),(l=D.Z.createPoint(e,[n.center,u],h)).prepareUpdate().update().updateVisibility(d.Z.evaluate(l.visProp.visible)).updateRenderer(),a=D.Z.createCircle(e,[l,function(){return n.Radius()}],c)):a=D.Z.createCircle(e,[n,u],c)}return d.Z.exists(n._is_new)&&(a.addChild(n),delete n._is_new),o.addChild(a),a.elType="mirrorelement",a.addParents(o),a.prepareUpdate().update(),a},D.Z.createMirrorPoint=function(e,t,r){var n=D.Z.createMirrorElement(e,t,r);return n.elType="mirrorpoint",n},D.Z.createIntegral=function(e,t,r){var n,s,o,a,l,u,c,h,g,y,E,w,T,N,R,L=null;if(d.Z.isArray(t[0])&&t[1].elementClass===Y.Z.OBJECT_CLASS_CURVE)n=t[0],s=t[1];else{if(!d.Z.isArray(t[1])||t[0].elementClass!==Y.Z.OBJECT_CLASS_CURVE)throw new Error("JSXGraph: Can't create integral with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [[number|function,number|function],curve]");n=t[1],s=t[0]}return(o=d.Z.copyAttributes(r,e.options,"integral")).withLabel=!1,R=e.create("curve",[[0],[0]],o),l=n[1],d.Z.isFunction(a=n[0])?(c=function(){return s.Y(u())},a=(u=a)()):(u=a,c=s.Y(a)),d.Z.isFunction(l)?(g=function(){return s.Y(h())},l=(h=l)()):(h=l,g=s.Y(l)),o=d.Z.copyAttributes(r,e.options,"integral","curveLeft"),y=e.create("glider",[u,c,s],o),d.Z.isFunction(u)&&y.hideElement(),o=d.Z.copyAttributes(r,e.options,"integral","baseLeft"),E=e.create("point",[function(){return"y"===d.Z.evaluate(R.visProp.axis)?0:y.X()},function(){return"y"===d.Z.evaluate(R.visProp.axis)?y.Y():0}],o),o=d.Z.copyAttributes(r,e.options,"integral","curveRight"),w=e.create("glider",[h,g,s],o),d.Z.isFunction(h)&&w.hideElement(),o=d.Z.copyAttributes(r,e.options,"integral","baseRight"),T=e.create("point",[function(){return"y"===d.Z.evaluate(R.visProp.axis)?0:w.X()},function(){return"y"===d.Z.evaluate(R.visProp.axis)?w.Y():0}],o),!1!==(o=d.Z.copyAttributes(r,e.options,"integral")).withlabel&&"y"!==o.axis&&(o=d.Z.copyAttributes(r,e.options,"integral","label"),o=d.Z.copyAttributes(o,e.options,"label"),N=function(){var H=Qe.Z.NewtonCotes([E.X(),T.X()],s.Y),V=d.Z.evaluate(L.visProp.digits);return"&int; = "+(L.useLocale()?L.formatNumberLocale(H,V):d.Z.toFixed(H,V))},(L=e.create("text",[function(){var H=new ge.Z(Y.Z.COORDS_BY_SCREEN,[d.Z.evaluate(this.visProp.offset[0])+this.board.origin.scrCoords[1],0],this.board,!1),V=this.board.getBoundingBox(),U=.1*(V[2]-V[0]),Q=w.X();return Q<V[0]?Q=V[0]+U:Q>V[2]&&(Q=V[2]-U),Q+H.usrCoords[1]},function(){var H=new ge.Z(Y.Z.COORDS_BY_SCREEN,[0,d.Z.evaluate(this.visProp.offset[1])+this.board.origin.scrCoords[2]],this.board,!1),V=this.board.getBoundingBox(),U=.1*(V[1]-V[3]),Q=w.Y();return Q>V[1]?Q=V[1]-U:Q<V[3]&&(Q=V[3]+U),Q+H.usrCoords[2]},""],o)).setText(N),L.dump=!1,y.addChild(L),w.addChild(L)),y.dump=!1,E.dump=!1,w.dump=!1,T.dump=!1,R.elType="integral",R.setParents([s.id,n]),R.subs={curveLeft:y,baseLeft:E,curveRight:w,baseRight:T},R.inherits.push(y,E,w,T),o.withLabel&&(R.subs.label=L,R.inherits.push(L)),R.Value=function(){return Qe.Z.I([E.X(),T.X()],s.Y)},R.updateDataArray=function(){var H,V,U,Q,oe,te,ne,ce,he;if("y"===d.Z.evaluate(this.visProp.axis)){for(y.Y()<w.Y()?(te=y.X(),ce=y.Y(),ne=w.X(),he=w.Y()):(te=w.X(),ce=w.Y(),ne=y.X(),he=y.Y()),Q=Math.min(te,ne),oe=Math.max(te,ne),H=[0,te],V=[ce,ce],U=0;U<s.numberPoints;U++)ce<=s.points[U].usrCoords[2]&&Q<=s.points[U].usrCoords[1]&&s.points[U].usrCoords[2]<=he&&s.points[U].usrCoords[1]<=oe&&(H.push(s.points[U].usrCoords[1]),V.push(s.points[U].usrCoords[2]));H.push(ne),V.push(he),H.push(0),V.push(he),H.push(0),V.push(ce)}else{for(E.X()<T.X()?(Q=E.X(),oe=T.X()):(Q=T.X(),oe=E.X()),H=[Q,Q],V=[0,s.Y(Q)],U=0;U<s.numberPoints;U++)Q<=s.points[U].usrCoords[1]&&s.points[U].usrCoords[1]<=oe&&(H.push(s.points[U].usrCoords[1]),V.push(s.points[U].usrCoords[2]));H.push(oe),V.push(s.Y(oe)),H.push(oe),V.push(0),H.push(Q),V.push(0)}this.dataX=H,this.dataY=V},y.addChild(R),w.addChild(R),E.addChild(R),T.addChild(R),R.baseLeft=E,R.baseRight=T,R.curveLeft=y,R.curveRight=w,R.methodMap=D.Z.deepCopy(R.methodMap,{curveLeft:"curveLeft",baseLeft:"baseLeft",curveRight:"curveRight",baseRight:"baseRight",Value:"Value"}),R.label=L,R},D.Z.createGrid=function(e,t,r){var n,s;return s=d.Z.copyAttributes(r,e.options,"grid"),(n=e.create("curve",[[null],[null]],s)).elType="grid",n.type=Y.Z.OBJECT_TYPE_GRID,n.updateDataArray=function(){var o,a,l,c,h,g,y=d.Z.evaluate(this.visProp.gridx),E=d.Z.evaluate(this.visProp.gridy);for(h=d.Z.isArray(this.visProp.topleft)?new ge.Z(d.Z.evaluate(this.visProp.tltype)||Y.Z.COORDS_BY_USER,this.visProp.topleft,e):new ge.Z(Y.Z.COORDS_BY_SCREEN,[0,0],e),g=d.Z.isArray(this.visProp.bottomright)?new ge.Z(d.Z.evaluate(this.visProp.brtype)||Y.Z.COORDS_BY_USER,this.visProp.bottomright,e):new ge.Z(Y.Z.COORDS_BY_SCREEN,[e.canvasWidth,e.canvasHeight],e),e.options.grid.hasGrid=!0,n.dataX=[],n.dataY=[],o=Math.floor(h.usrCoords[2]/E)*E,a=Math.ceil(g.usrCoords[2]/E)*E,h.usrCoords[2]<g.usrCoords[2]&&(o=Math.ceil(g.usrCoords[2]/E)*E,a=Math.floor(h.usrCoords[2]/E)*E),c=!(!isFinite(o)||!isFinite(a)||Math.abs(a)>Math.abs(5e3*E)),l=o;c&&l>a-E;l-=E)n.dataX.push(h.usrCoords[1],g.usrCoords[1],NaN),n.dataY.push(l,l,NaN);for(o=Math.ceil(h.usrCoords[1]/y)*y,a=Math.floor(g.usrCoords[1]/y)*y,h.usrCoords[1]>g.usrCoords[1]&&(o=Math.floor(g.usrCoords[1]/y)*y,a=Math.ceil(h.usrCoords[1]/y)*y),c=!(!isFinite(o)||!isFinite(a)||Math.abs(a)>Math.abs(5e3*y)),l=o;c&&l<a+y;l+=y)n.dataX.push(l,l,NaN),n.dataY.push(h.usrCoords[2],g.usrCoords[2],NaN)},n.hasPoint=function(){return!1},e.grids.push(n),n},D.Z.createInequality=function(e,t,r){var n,s,o;if(o=d.Z.copyAttributes(r,e.options,"inequality"),t[0].elementClass===Y.Z.OBJECT_CLASS_LINE)(s=e.create("curve",[[],[]],o)).hasPoint=function(){return!1},s.updateDataArray=function(){var a,l,u,c=e.getBoundingBox(),h=o.inverse?-1:1,y=1.5*Math.max(c[2]-c[0],c[1]-c[3]),E={coords:{usrCoords:[1,(c[0]+c[2])/2,o.inverse?c[1]:c[3]]}},w=t[0].stdform.slice(1),T=w;u=1.5*Math.max(fe.Z.perpendicular(t[0],E,e)[0].distance(Y.Z.COORDS_BY_USER,E.coords),y),u*=h,E={coords:{usrCoords:[1,(c[0]+c[2])/2,(c[1]+c[3])/2]}},E=Math.abs(q.Z.innerProduct(E.coords.usrCoords,t[0].stdform,3))>=q.Z.eps?fe.Z.perpendicular(t[0],E,e)[0].usrCoords:E.coords.usrCoords,this.dataX=[(a=[1,E[1]+w[1]*y,E[2]-w[0]*y])[1],a[1]+w[0]*u,(l=[1,E[1]-T[1]*y,E[2]+T[0]*y])[1]+T[0]*u,l[1],a[1]],this.dataY=[a[2],a[2]+w[1]*u,l[2]+T[1]*u,l[2],a[2]]};else if(t[0].elementClass===Y.Z.OBJECT_CLASS_CURVE&&"functiongraph"===t[0].visProp.curvetype)(s=e.create("curve",[[],[]],o)).updateDataArray=function(){var u,c,h,g,y,T,N,L,R,a=this.board.getBoundingBox(),l=[],E=t[0].minX(),w=t[0].maxX(),H=.3*(a[1]-a[3]);if(u=d.Z.evaluate(this.visProp.inverse)?1:3,this.dataX=[],this.dataY=[],0!==(g=t[0].points.length))for(a[1]+=H,a[3]-=H,h=-1;h<g-1;){for(y=h+1,c=g;y<g;y++)if(t[0].points[y].isReal()){c=y;break}if(c>=g)break;for(y=c,h=g-1;y<g-1;y++)if(!t[0].points[y+1].isReal()){h=y;break}for(L=t[0].points[c].usrCoords[1],R=t[0].points[h].usrCoords[1],T=a[0]<E?E:a[0],N=a[2]>w?w:a[2],T=0===c?T:Math.max(T,L),N=h===g-1?N:Math.min(N,R),N=h===g-1?w:R,(l=[]).push([1,T=0===c?E:L,a[u]]),l.push([1,T,t[0].points[c].usrCoords[2]]),y=c;y<=h;y++)l.push(t[0].points[y].usrCoords);for(l.push([1,N,t[0].points[h].usrCoords[2]]),l.push([1,N,a[u]]),l.push(l[0]),y=0;y<l.length;y++)this.dataX.push(l[y][1]),this.dataY.push(l[y][2]);h<g-1&&(this.dataX.push(NaN),this.dataY.push(NaN))}},s.hasPoint=function(){return!1};else if(n=d.Z.createFunction(t[0]),s.addParentsFromJCFunctions([n]),!d.Z.exists(n))throw new Error("JSXGraph: Can't create area with the given parents.\nPossible parent types: [line], [function]");return s.addParents(t[0]),s},D.Z.registerElement("arrowparallel",D.Z.createArrowParallel),D.Z.registerElement("bisector",D.Z.createBisector),D.Z.registerElement("bisectorlines",D.Z.createAngularBisectorsOfTwoLines),D.Z.registerElement("msector",D.Z.createMsector),D.Z.registerElement("circumcircle",D.Z.createCircumcircle),D.Z.registerElement("circumcirclemidpoint",D.Z.createCircumcenter),D.Z.registerElement("circumcenter",D.Z.createCircumcenter),D.Z.registerElement("incenter",D.Z.createIncenter),D.Z.registerElement("incircle",D.Z.createIncircle),D.Z.registerElement("integral",D.Z.createIntegral),D.Z.registerElement("midpoint",D.Z.createMidpoint),D.Z.registerElement("mirrorelement",D.Z.createMirrorElement),D.Z.registerElement("mirrorpoint",D.Z.createMirrorPoint),D.Z.registerElement("normal",D.Z.createNormal),D.Z.registerElement("orthogonalprojection",D.Z.createOrthogonalProjection),D.Z.registerElement("parallel",D.Z.createParallel),D.Z.registerElement("parallelpoint",D.Z.createParallelPoint),D.Z.registerElement("perpendicular",D.Z.createPerpendicular),D.Z.registerElement("perpendicularpoint",D.Z.createPerpendicularPoint),D.Z.registerElement("perpendicularsegment",D.Z.createPerpendicularSegment),D.Z.registerElement("reflection",D.Z.createReflection),D.Z.registerElement("grid",D.Z.createGrid),D.Z.registerElement("inequality",D.Z.createInequality),D.Z.createLocus=function(e,t,r){var n,s;if(!d.Z.isArray(t)||1!==t.length||!d.Z.isPoint(t[0]))throw new Error("JSXGraph: Can't create locus with parent of type other than point.\nPossible parent types: [point]");return s=t[0],(n=e.create("curve",[[null],[null]],r)).dontCallServer=!1,n.elType="locus",n.setParents([s.id]),n.updateDataArray=function(){var o,a,l;n.board.mode>0||(o=kb.generatePolynomials(e,s,!0).join("|"))!==n.spe&&(n.spe=o,(a=function(u,c,h,g){var y;n.dataX=u,n.dataY=c,n.eq=h,n.ctime=g,n.generatePolynomial=(y=h,function(E){var w,T="("+E.symbolic.x+")",N="("+E.symbolic.y+")",L=[];for(w=0;w<y.length;w++)L[w]=y[w].replace(/\*\*/g,"^").replace(/x/g,T).replace(/y/g,N);return L})})((l=kb.geometricLocusByGroebnerBase(e,s,a)).datax,l.datay,l.polynomial,l.exectime))},n},D.Z.registerElement("locus",D.Z.createLocus),$(436),D.Z.Image=function(e,t,r,n,s){this.constructor(e,r,Y.Z.OBJECT_TYPE_IMAGE,Y.Z.OBJECT_CLASS_OTHER),this.element=this.board.select(r.anchor),this.coordsConstructor(t),this.W=d.Z.createFunction(s[0],this.board,""),this.H=d.Z.createFunction(s[1],this.board,""),this.addParentsFromJCFunctions([this.W,this.H]),this.usrSize=[this.W(),this.H()],this.size=[Math.abs(this.usrSize[0]*e.unitX),Math.abs(this.usrSize[1]*e.unitY)],this.url=n,this.elType="image",this.span=[this.coords.usrCoords.slice(0),[this.coords.usrCoords[0],this.W(),0],[this.coords.usrCoords[0],0,this.H()]],this.id=this.board.setId(this,"Im"),this.board.renderer.drawImage(this),this.board.finalizeAdding(this),this.methodMap=D.Z.deepCopy(this.methodMap,{addTransformation:"addTransform",trans:"addTransform"})},D.Z.Image.prototype=new vi.Z,d.Z.copyPrototypeMethods(D.Z.Image,uo.Z,"coordsConstructor"),D.Z.extend(D.Z.Image.prototype,{hasPoint:function(e,t){var r,n,s,a,l,u,c,h,g=this.transformations.length;return a=d.Z.isObject(d.Z.evaluate(this.visProp.precision))?d.Z.evaluate(this.visProp.precision[this.board._inputDevice]):this.board.options.precision.hasPoint,0===g?(n=this.coords.scrCoords[2]-t,(r=e-this.coords.scrCoords[1])>=-(s=a)&&r-this.size[0]<=s&&n>=-s&&n-this.size[1]<=s):(l=new ge.Z(Y.Z.COORDS_BY_SCREEN,[e,t],this.board),0<=(c=(h=q.Z.innerProduct)(u=[(l=l.usrCoords)[0]-this.span[0][0],l[1]-this.span[0][1],l[2]-this.span[0][2]],this.span[1]))&&c<=h(this.span[1],this.span[1])&&0<=(c=h(u,this.span[2]))&&c<=h(this.span[2],this.span[2]))},update:function(e){return this.needsUpdate?(this.updateCoords(e),this.updateSize(),this.updateSpan(),this):this},updateRenderer:function(){return this.updateRendererGeneric("updateImage")},updateSize:function(){return this.usrSize=[this.W(),this.H()],this.size=[Math.abs(this.usrSize[0]*this.board.unitX),Math.abs(this.usrSize[1]*this.board.unitY)],this},updateSpan:function(){var e,t,r=this.transformations.length,n=[];if(0===r)this.span=[[this.Z(),this.X(),this.Y()],[this.Z(),this.W(),0],[this.Z(),0,this.H()]];else{for(n[0]=[this.Z(),this.X(),this.Y()],n[1]=[this.Z(),this.X()+this.W(),this.Y()],n[2]=[this.Z(),this.X(),this.Y()+this.H()],e=0;e<r;e++)for(t=0;t<3;t++)n[t]=q.Z.matVecMult(this.transformations[e].matrix,n[t]);for(t=0;t<3;t++)n[t][1]/=n[t][0],n[t][2]/=n[t][0],n[t][0]/=n[t][0];for(t=1;t<3;t++)n[t][0]-=n[0][0],n[t][1]-=n[0][1],n[t][2]-=n[0][2];this.span=n}return this},addTransform:function(e){var t;if(d.Z.isArray(e))for(t=0;t<e.length;t++)this.transformations.push(e[t]);else this.transformations.push(e);return this},getParents:function(){var e=[this.url,[this.Z(),this.X(),this.Y()],this.usrSize];return 0!==this.parents.length&&(e=this.parents),e},setSize:function(e,t){return this.W=d.Z.createFunction(e,this.board,""),this.H=d.Z.createFunction(t,this.board,""),this.addParentsFromJCFunctions([this.W,this.H]),this},W:function(){},H:function(){}}),D.Z.createImage=function(e,t,r){var n,s,o=t[0],a=t[1],l=t[2];if(n=d.Z.copyAttributes(r,e.options,"image"),!(s=uo.Z.create(D.Z.Image,e,a,n,o,l)))throw new Error("JSXGraph: Can't create image with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [x,y], [z,x,y], [element,transformation]");return 0!==n.rotate&&s.addRotation(n.rotate),s},D.Z.registerElement("image",D.Z.createImage),D.Z.createSlider=function(e,t,r){var n,s,o,a,l,u,c,h,g,y,E,T,N,L,R,H,V,U,Q,oe,te;return V=(te=d.Z.copyAttributes(r,e.options,"slider")).withticks,H=te.withlabel,U=te.snapwidth,te=d.Z.copyAttributes(r,e.options,"slider","point1"),c=e.create("point",t[0],te),te=d.Z.copyAttributes(r,e.options,"slider","point2"),h=e.create("point",t[1],te),te=d.Z.copyAttributes(r,e.options,"slider","baseline"),(y=e.create("segment",[c,h],te)).updateStdform(),n=c.coords.usrCoords.slice(1),s=h.coords.usrCoords.slice(1),a=t[2][1],u=(l=t[2][2])-(o=t[2][0]),oe=-1===(Q=d.Z.evaluate(U))?a:Math.round(a/Q)*Q,L=n[0]+(s[0]-n[0])*(oe-o)/(l-o),R=n[1]+(s[1]-n[1])*(oe-o)/(l-o),(te=d.Z.copyAttributes(r,e.options,"slider")).withLabel=!1,(g=e.create("glider",[L,R,y],te)).setAttribute({snapwidth:U}),te=d.Z.copyAttributes(r,e.options,"slider","highline"),E=e.create("segment",[c,g],te),g.Value=function(){var ne=this._smax-this._smin,ce=d.Z.evaluate(this.visProp.snapwidth);return-1===ce?this.position*ne+this._smin:Math.round((this.position*ne+this._smin)/ce)*ce},g.methodMap=d.Z.deepCopy(g.methodMap,{Value:"Value",setValue:"setValue",smax:"_smax",smin:"_smin",setMax:"setMax",setMin:"setMin"}),g._smax=l,g._smin=o,g.setMax=function(ne){return this._smax=ne,this},g.setValue=function(ne){var ce=this._smax-this._smin;return this.position=Math.abs(ce)>q.Z.eps?(ne-this._smin)/ce:0,this.position=Math.max(0,Math.min(1,this.position)),this},g.setMin=function(ne){return this._smin=ne,this},H&&(te=d.Z.copyAttributes(r,e.options,"slider","label"),N=e.create("text",[function(){return.05*(h.X()-c.X())+h.X()},function(){return.05*(h.Y()-c.Y())+h.Y()},function(){var ne,ce=d.Z.evaluate(g.visProp.digits),he=d.Z.evaluate(g.visProp.suffixlabel),ye=d.Z.evaluate(g.visProp.unitlabel),be=d.Z.evaluate(g.visProp.postlabel);return 2===ce&&2!==d.Z.evaluate(g.visProp.precision)&&(ce=d.Z.evaluate(g.visProp.precision)),ne=null!==he?he:g.name&&""!==g.name?g.name+" = ":"",g.useLocale()?ne+=g.formatNumberLocale(g.Value(),ce):ne+=d.Z.toFixed(g.Value(),ce),null!==ye&&(ne+=ye),null!==be&&(ne+=be),ne}],te),g.label=N,g.visProp.withlabel=!0,g.hasLabel=!0),g.point1=c,g.point2=h,g.baseline=y,g.highline=E,V&&(te=d.Z.copyAttributes(r,e.options,"slider","ticks"),d.Z.exists(te.generatelabeltext)||(te.generateLabelText=function(ne,ce,he){var be=g.point1.Dist(g.point2),re=g._smin,We=g._smax,Te=this.getDistanceFromZero(ce,ne)*(We-re)/be+re;return be<q.Z.eps||Math.abs(Te)<q.Z.eps?"0":this.formatLabelText(Te)}),T=e.create("ticks",[g.baseline,g.point1.Dist(c)/2,function(ne){var ce=g.point1.Dist(g.point2),he=g.point1.coords.distance(Y.Z.COORDS_BY_USER,ne);return ce<q.Z.eps?0:he/ce*u+o}],te),g.ticks=T),g.remove=function(){H&&e.removeObject(N),e.removeObject(E),e.removeObject(y),e.removeObject(h),e.removeObject(c),MR.prototype.remove.call(g)},c.dump=!1,h.dump=!1,y.dump=!1,E.dump=!1,H&&(N.dump=!1),g.elType="slider",g.parents=t,g.subs={point1:c,point2:h,baseLine:y,highLine:E},g.inherits.push(c,h,y,E),V&&(T.dump=!1,g.subs.ticks=T,g.inherits.push(T)),g.getParents=function(){return[this.point1.coords.usrCoords.slice(1),this.point2.coords.usrCoords.slice(1),[this._smin,this.position*(this._smax-this._smin)+this._smin,this._smax]]},g.baseline.on("up",function(ne){var ce,he;d.Z.evaluate(g.visProp.moveonup)&&!d.Z.evaluate(g.visProp.fixed)&&(ce=y.board.getMousePosition(ne,0),he=new ge.Z(Y.Z.COORDS_BY_SCREEN,ce,this.board),g.moveTo([he.usrCoords[1],he.usrCoords[2]]),g.triggerEventHandlers(["drag"],[ne]))}),g.prepareUpdate().update(),e.isSuspendedUpdate||(g.updateVisibility().updateRenderer(),g.baseline.updateVisibility().updateRenderer(),g.highline.updateVisibility().updateRenderer(),V&&g.ticks.updateVisibility().updateRenderer()),g},D.Z.registerElement("slider",D.Z.createSlider),D.Z.createTapemeasure=function(e,t,r){var n,s,o,a,l,c,h,g,y,E;return n=t[0],s=t[1],o=d.Z.copyAttributes(r,e.options,"tapemeasure","point1"),h=e.create("point",n,o),o=d.Z.copyAttributes(r,e.options,"tapemeasure","point2"),g=e.create("point",s,o),h.setAttribute({ignoredSnapToPoints:[g]}),g.setAttribute({ignoredSnapToPoints:[h]}),o=d.Z.copyAttributes(r,e.options,"tapemeasure"),a=o.withticks,(l=o.withlabel)&&(o.withlabel=!0),c=e.create("segment",[h,g],o),l&&(y=r.name&&""!==r.name?r.name+" = ":"",c.label.setText(function(){var w=d.Z.evaluate(c.label.visProp.digits);return c.label.useLocale()?y+c.label.formatNumberLocale(h.Dist(g),w):y+d.Z.toFixed(h.Dist(g),w)})),a&&(o=d.Z.copyAttributes(r,e.options,"tapemeasure","ticks"),E=e.create("ticks",[c,.1],o),c.inherits.push(E)),c.remove=function(){a&&c.removeTicks(E),e.removeObject(g),e.removeObject(h),vi.Z.prototype.remove.call(this)},c.Value=function(){return h.Dist(g)},h.dump=!1,g.dump=!1,c.elType="tapemeasure",c.getParents=function(){return[[h.X(),h.Y()],[g.X(),g.Y()]]},c.subs={point1:h,point2:g},a&&(E.dump=!1),c.methodMap=D.Z.deepCopy(c.methodMap,{Value:"Value"}),c.prepareUpdate().update(),e.isSuspendedUpdate||(c.updateVisibility().updateRenderer(),c.point1.updateVisibility().updateRenderer(),c.point2.updateVisibility().updateRenderer()),c},D.Z.registerElement("tapemeasure",D.Z.createTapemeasure),D.Z.DataSource=function(){return this.data=[],this.columnHeaders=[],this.rowHeaders=[],this},D.Z.extend(D.Z.DataSource.prototype,{loadFromArray:function(e,t,r){var n,s,o;if(d.Z.isArray(t)&&(this.columnHeaders=t,t=!1),d.Z.isArray(r)&&(this.rowHeaders=r,r=!1),this.data=[],t&&(this.columnHeaders=[]),r&&(this.rowHeaders=[]),d.Z.exists(e)){for(this.data=[],n=0;n<e.length;n++)for(this.data[n]=[],s=0;s<e[n].length;s++)o=e[n][s],this.data[n][s]=parseFloat(o).toString()===o?parseFloat(o):"-"!==o?o:NaN;if(t&&(this.columnHeaders=this.data[0].slice(1),this.data=this.data.slice(1)),r)for(this.rowHeaders=[],n=0;n<this.data.length;n++)this.rowHeaders.push(this.data[n][0]),this.data[n]=this.data[n].slice(1)}return this},loadFromTable:function(e,t,r){var n,s,o,a,l;if(d.Z.isArray(t)&&(this.columnHeaders=t,t=!1),d.Z.isArray(r)&&(this.rowHeaders=r,r=!1),this.data=[],t&&(this.columnHeaders=[]),r&&(this.rowHeaders=[]),e=document.getElementById(e),d.Z.exists(e)){for(n=e.getElementsByTagName("tr"),this.data=[],s=0;s<n.length;s++)for(a=n[s].getElementsByTagName("td"),this.data[s]=[],o=0;o<a.length;o++)l=a[o].innerHTML,this.data[s][o]=parseFloat(l).toString()===l?parseFloat(l):"-"!==l?l:NaN;if(t&&(this.columnHeaders=this.data[0].slice(1),this.data=this.data.slice(1)),r)for(this.rowHeaders=[],s=0;s<this.data.length;s++)this.rowHeaders.push(this.data[s][0]),this.data[s]=this.data[s].slice(1)}return this},addColumn:function(e,t,r){throw new Error("not implemented")},addRow:function(e,t,r){throw new Error("not implemented")},getColumn:function(e){var t,r=[];if(d.Z.isString(e))for(t=0;t<this.columnHeaders.length;t++)if(e===this.columnHeaders[t]){e=t;break}for(t=0;t<this.data.length;t++)this.data[t].length>e&&(r[t]=parseFloat(this.data[t][e]));return r},getRow:function(e){var t,r;if(d.Z.isString(e))for(r=0;r<this.rowHeaders.length;r++)if(e===this.rowHeaders[r]){e=r;break}for(t=[],r=0;r<this.data[e].length;r++)t[r]=this.data[e][r];return t}});const OR=D.Z.DataSource;D.Z.Chart=function(e,t,r){var n,s,o,a,l,u;if(this.constructor(e,r),!d.Z.isArray(t)||0===t.length)throw new Error("JSXGraph: Can't create a chart without data");if(this.elements=[],d.Z.isNumber(t[0]))for(s=t,n=[],o=0;o<s.length;o++)n[o]=o+1;else if(1===t.length&&d.Z.isArray(t[0]))for(n=[],u=d.Z.evaluate(s=t[0]).length,o=0;o<u;o++)n[o]=o+1;else 2===t.length&&(u=Math.min(t[0].length,t[1].length),n=t[0].slice(0,u),s=t[1].slice(0,u));if(d.Z.isArray(s)&&0===s.length)throw new Error("JSXGraph: Can't create charts without data.");for(l=r.chartstyle.replace(/ /g,"").split(","),o=0;o<l.length;o++){switch(l[o]){case"bar":a=this.drawBar(e,n,s,r);break;case"line":a=this.drawLine(e,n,s,r);break;case"fit":a=this.drawFit(e,n,s,r);break;case"spline":a=this.drawSpline(e,n,s,r);break;case"pie":a=this.drawPie(e,s,r);break;case"point":a=this.drawPoints(e,n,s,r);break;case"radar":a=this.drawRadar(e,t,r)}this.elements.push(a)}return this.id=this.board.setId(this,"Chart"),this.elements},D.Z.Chart.prototype=new vi.Z,D.Z.extend(D.Z.Chart.prototype,{drawLine:function(e,t,r,n){return n.fillcolor="none",n.highlightfillcolor="none",e.create("curve",[t,r],n)},drawSpline:function(e,t,r,n){return n.fillColor="none",n.highlightfillcolor="none",e.create("spline",[t,r],n)},drawFit:function(e,t,r,n){var s=n.degree;return s=Math.max(parseInt(s,10),1)||1,n.fillcolor="none",n.highlightfillcolor="none",e.create("functiongraph",[Qe.Z.regressionPolynomial(s,t,r)],n)},drawBar:function(e,t,r,n){var s,a,l,u,c,h,g,y,T,N,E=[],w=[],L=function(H,V){return function(){return t[H]()-V*l}},R={fixed:!0,withLabel:!1,visible:!1,name:""};if((T=d.Z.copyAttributes(n,e.options,"chart"))&&T.width)l=T.width;else{if(t.length<=1)l=1;else for(l=t[1]-t[0],s=1;s<t.length-1;s++)l=t[s+1]-t[s]<l?t[s+1]-t[s]:l;l*=.8}for(N=d.Z.copyAttributes(n,e.options,"chart","label"),s=0;s<t.length;s++)d.Z.isFunction(t[s])?(u=L(s,-.5),c=L(s,0),h=L(s,.5)):(u=t[s]-.5*l,c=t[s],h=t[s]+.5*l),d.Z.isFunction(r[s])?r[s]():r[s],g=r[s],"horizontal"===T.dir?(w[0]=e.create("point",[0,u],R),w[1]=e.create("point",[g,u],R),w[2]=e.create("point",[g,h],R),w[3]=e.create("point",[0,h],R),d.Z.exists(T.labels)&&d.Z.exists(T.labels[s])&&(N.anchorY="middle",(a=e.create("text",[g,c,T.labels[s]],N)).visProp.anchorx=function(H){return function(){return H.X()>=0?"left":"right"}}(a))):(w[0]=e.create("point",[u,0],R),w[1]=e.create("point",[u,g],R),w[2]=e.create("point",[h,g],R),w[3]=e.create("point",[h,0],R),d.Z.exists(T.labels)&&d.Z.exists(T.labels[s])&&(N.anchorX="middle",(a=e.create("text",[c,g,T.labels[s]],N)).visProp.anchory=function(H){return function(){return H.Y()>=0?"bottom":"top"}}(a))),d.Z.isArray(T.colors)&&(T.fillcolor=(y=T.colors)[s%y.length]),E[s]=e.create("polygon",w,T),d.Z.exists(T.labels)&&d.Z.exists(T.labels[s])&&(E[s].text=a);return E},drawPoints:function(e,t,r,n){var s,o=[],a=n.infoboxarray;for(n.fixed=!0,n.name="",s=0;s<t.length;s++)n.infoboxtext=!!a&&a[s%a.length],o[s]=e.create("point",[t[s],r[s]],n);return o},drawPie:function(e,t,r){var n,s,o=[],a=[],u=(ln.Z.sum(t),r.colors),c=r.highlightcolors,h=r.labels,g=r.radius||4,y=g,E=r.center||[0,0],w=E[0],T=E[1],N=function(U,Q,oe){return function(){var te,ne,ce,he=0;for(ne=0;ne<=U;ne++)he+=parseFloat(d.Z.evaluate(t[ne]));for(te=he,ne=U+1;ne<t.length;ne++)te+=parseFloat(d.Z.evaluate(t[ne]));return ce=0!==te?2*Math.PI*he/te:0,y()*Math[Q](ce)+oe}},L=function(U,Q){var oe=-this.point1.coords.usrCoords[1]+this.point2.coords.usrCoords[1],te=-this.point1.coords.usrCoords[2]+this.point2.coords.usrCoords[2];d.Z.exists(this.label)&&(this.label.rendNode.style.fontSize=Q*d.Z.evaluate(this.label.visProp.fontsize)+"px",this.label.fullUpdate()),this.point2.coords=new ge.Z(Y.Z.COORDS_BY_USER,[this.point1.coords.usrCoords[1]+oe*U,this.point1.coords.usrCoords[2]+te*U],this.board),this.fullUpdate()},R=function(){this.highlighted||(this.highlighted=!0,this.board.highlightedObjects[this.id]=this,this.board.renderer.highlight(this),L.call(this,1.1,2))},H=function(){this.highlighted&&(this.highlighted=!1,this.board.renderer.noHighlight(this),L.call(this,.9090909,1))},V={fixed:!0,withLabel:!1,visible:!1,name:""};if(!d.Z.isArray(h))for(h=[],n=0;n<t.length;n++)h[n]="";for(d.Z.isFunction(g)||(y=function(){return g}),r.highlightonsector=r.highlightonsector||!1,r.straightfirst=!1,r.straightlast=!1,s=e.create("point",[w,T],V),o[0]=e.create("point",[function(){return y()+w},function(){return T}],V),n=0;n<t.length;n++)o[n+1]=e.create("point",[N(n,"cos",w),N(n,"sin",T)],V),r.name=h[n],r.withlabel=""!==r.name,r.fillcolor=u&&u[n%u.length],r.labelcolor=u&&u[n%u.length],r.highlightfillcolor=c&&c[n%c.length],a[n]=e.create("sector",[s,o[n],o[n+1]],r),r.highlightonsector&&(a[n].hasPoint=a[n].hasPointSector),r.highlightbysize&&(a[n].highlight=R,a[n].noHighlight=H);return{sectors:a,points:o,midpoint:s}},drawRadar:function(e,t,r){var n,s,o,a,l,u,c,h,g,y,E,w,T,N,L,R,H,V,Q,oe,te,ne,ce,he,ye,be,re,We,Te,Re,lt,Ge,De,Ft,Oe,oi,Ot,ke,st,ve=t.length,vt=function(){var Kt,at,ni,Gt,Ti=d.Z.evaluate(this.visProp.label.offset).slice(0);return Kt=this.point1.X(),at=this.point2.X(),ni=this.point1.Y(),Gt=this.point2.Y(),at<Kt&&(Ti[0]=-Ti[0]),Gt<ni&&(Ti[1]=-Ti[1]),this.setLabelRelativeCoords(Ti),new ge.Z(Y.Z.COORDS_BY_USER,[this.point2.X(),this.point2.Y()],this.board)},Fe=function(Kt,at){var ni,Gt,Ti;return ni=e.create("transform",[-(L[at]-T[at]),0],{type:"translate"}),Gt=e.create("transform",[Q/(R[at]+N[at]-(L[at]-T[at])),1],{type:"scale"}),ni.melt(Gt),Ti=e.create("transform",[Kt],{type:"rotate"}),ni.melt(Ti),ni};if(ve<=0)throw new Error("JSXGraph radar chart: no data");if(!d.Z.exists(o=r.paramarray))throw new Error("JSXGraph radar chart: need paramArray attribute");if((a=o.length)<=1)throw new Error("JSXGraph radar chart: need more than one param in paramArray");for(n=0;n<ve;n++)if(a!==t[n].length)throw new Error("JSXGraph radar chart: use data length equal to number of params ("+t[n].length+" != "+a+")");for(l=[],u=[],s=0;s<a;s++)l[s]=t[0][s],u[s]=l[s];for(n=1;n<ve;n++)for(s=0;s<a;s++)t[n][s]>l[s]&&(l[s]=t[n][s]),t[n][s]<u[s]&&(u[s]=t[n][s]);for(c=[],h=[],n=0;n<ve;n++)c[n]="",h[n]=[];for(g=[],y=[],E=r.startshiftratio||0,w=r.endshiftratio||0,n=0;n<a;n++)g[n]=(l[n]-u[n])*E,y[n]=(l[n]-u[n])*w;if(T=r.startshiftarray||g,N=r.endshiftarray||y,L=r.startarray||u,d.Z.exists(r.start))for(n=0;n<a;n++)L[n]=r.start;if(R=r.endarray||l,d.Z.exists(r.end))for(n=0;n<a;n++)R[n]=r.end;if(T.length!==a)throw new Error("JSXGraph radar chart: start shifts length is not equal to number of parameters");if(N.length!==a)throw new Error("JSXGraph radar chart: end shifts length is not equal to number of parameters");if(L.length!==a)throw new Error("JSXGraph radar chart: starts length is not equal to number of parameters");if(R.length!==a)throw new Error("JSXGraph radar chart: snds length is not equal to number of parameters");for(H=r.labelarray||c,V=r.colors,Q=r.radius||10,st=r.strokewidth||1,d.Z.exists(r.highlightonsector)||(r.highlightonsector=!1),oe={name:r.name,id:r.id,strokewidth:st,polystrokewidth:r.polystrokewidth||st,strokecolor:r.strokecolor||"black",straightfirst:!1,straightlast:!1,fillcolor:r.fillColor||"#FFFF88",fillopacity:r.fillOpacity||.4,highlightfillcolor:r.highlightFillColor||"#FF7400",highlightstrokecolor:r.highlightStrokeColor||"black",gradient:r.gradient||"none"},he=e.create("point",[ne=(te=r.center||[0,0])[0],ce=te[1]],{name:"",fixed:!0,withlabel:!1,visible:!1}),Math,Math,be=ye=r.startangle||0,re=[],We=[],n=0;n<a;n++)for(be+=2*Math.PI/a,Re=Q*Math.cos(be)+ne,lt=Q*Math.sin(be)+ce,re[n]=e.create("point",[Re,lt],{name:"",fixed:!0,withlabel:!1,visible:!1}),We[n]=e.create("line",[he,re[n]],{name:o[n],strokeColor:oe.strokecolor,strokeWidth:oe.strokewidth,strokeOpacity:1,straightFirst:!1,straightLast:!1,withLabel:!0,highlightStrokeColor:oe.highlightstrokecolor}),We[n].getLabelAnchor=vt,Te=Fe(be,n),s=0;s<t.length;s++)h[s][n]=e.create("point",[t[s][n],0],{name:"",fixed:!0,withlabel:!1,visible:!1}),h[s][n].addTransform(h[s][n],Te);for(Ge=[],n=0;n<ve;n++)for(oe.labelcolor=V&&V[n%V.length],oe.strokecolor=V&&V[n%V.length],oe.fillcolor=V&&V[n%V.length],Ge[n]=e.create("polygon",h[n],{withLines:!0,withLabel:!1,fillColor:oe.fillcolor,fillOpacity:oe.fillopacity,highlightFillColor:oe.highlightfillcolor}),s=0;s<a;s++)Ge[n].borders[s].setAttribute("strokecolor:"+V[n%V.length]),Ge[n].borders[s].setAttribute("strokewidth:"+oe.polystrokewidth);switch(r.legendposition||"none"){case"right":this.legend=e.create("legend",[ne+Q+(r.legendleftoffset||2),ce+Q-(r.legendtopoffset||1)],{labels:H,colors:V});break;case"none":break;default:D.Z.debug("Unknown legend position")}if(De=[],r.showcircles){for(Ft=[],n=0;n<6;n++)Ft[n]=20*n;if(Ft[0]="0",(oi=(Oe=r.circlelabelarray||Ft).length)<2)throw new Error("JSXGraph radar chart: too less circles in circleLabelArray");for(Ot=[],Te=Fe(ye+Math.PI/a,0),oe.fillcolor="none",oe.highlightfillcolor="none",oe.strokecolor=r.strokecolor||"black",oe.strokewidth=r.circlestrokewidth||.5,oe.layer=0,ke=(R[0]-L[0])/(oi-1),n=0;n<oi;n++)Ot[n]=e.create("point",[L[0]+n*ke,0],{name:Oe[n],size:0,fixed:!0,withLabel:!0,visible:!0}),Ot[n].addTransform(Ot[n],Te),De[n]=e.create("circle",[he,Ot[n]],oe)}return this.rendNode=Ge[0].rendNode,{circles:De,lines:We,points:h,midpoint:he,polygons:Ge}},updateRenderer:function(){return this},update:function(){return this.needsUpdate&&this.updateDataArray(),this},updateDataArray:function(){return this}}),D.Z.createChart=function(e,t,r){var n,s,o,a,l,c,h,g,y,E,w,T,N,L,R,H,u=[],V=le.Z.isBrowser?e.document.getElementById(t[0]):null;if(1===t.length&&d.Z.isString(t[0])){if(d.Z.exists(V)){if(y=d.Z.copyAttributes(r,e.options,"chart"),n=(V=(new OR).loadFromTable(t[0],y.withheaders,y.withheaders)).data,l=V.columnHeaders,s=V.rowHeaders,E=y.width,w=y.name,T=y.strokecolor,N=y.fillcolor,L=y.highlightstrokecolor,R=y.highlightfillcolor,e.suspendUpdate(),H=n.length,g=[],y.rows&&d.Z.isArray(y.rows)){for(o=0;o<H;o++)for(a=0;a<y.rows.length;a++)if(y.rows[a]===o||y.withheaders&&y.rows[a]===s[o]){g.push(n[o]);break}}else g=n;for(H=g.length,o=0;o<H;o++){if(h=[],y.chartstyle&&-1!==y.chartstyle.indexOf("bar")){for(h.push(1-(c=E||.8)/2+(o+.5)*c/H),a=1;a<g[o].length;a++)h.push(h[a-1]+1);y.width=c/H}w&&w.length===H?y.name=w[o]:y.withheaders&&(y.name=l[o]),y.strokecolor=T&&T.length===H?T[o]:Fi.Z.hsv2rgb((o+1)/H*360,.9,.6),y.fillcolor=N&&N.length===H?N[o]:Fi.Z.hsv2rgb((o+1)/H*360,.9,1),y.highlightstrokecolor=L&&L.length===H?L[o]:Fi.Z.hsv2rgb((o+1)/H*360,.9,1),y.highlightfillcolor=R&&R.length===H?R[o]:Fi.Z.hsv2rgb((o+1)/H*360,.9,.6),y.chartstyle&&-1!==y.chartstyle.indexOf("bar")?u.push(new D.Z.Chart(e,[h,g[o]],y)):u.push(new D.Z.Chart(e,[g[o]],y))}e.unsuspendUpdate()}return u}return y=d.Z.copyAttributes(r,e.options,"chart"),new D.Z.Chart(e,t,y)},D.Z.registerElement("chart",D.Z.createChart),D.Z.Legend=function(e,t,r){var n;if(this.constructor(),n=d.Z.copyAttributes(r,e.options,"legend"),this.board=e,this.coords=new ge.Z(Y.Z.COORDS_BY_USER,t,this.board),this.myAtts={},this.label_array=n.labelarray||n.labels,this.color_array=n.colorarray||n.colors,this.lines=[],this.myAtts.strokewidth=n.strokewidth||5,this.myAtts.straightfirst=!1,this.myAtts.straightlast=!1,this.myAtts.withlabel=!0,this.myAtts.fixed=!0,this.style=n.legendstyle||n.style,"vertical"!==this.style)throw new Error("JSXGraph: Unknown legend style: "+this.style);this.drawVerticalLegend(e,n)},D.Z.Legend.prototype=new vi.Z,D.Z.Legend.prototype.drawVerticalLegend=function(e,t){var r,n=t.linelength||1,s=(t.rowheight||20)/this.board.unitY,o=function(){return this.setLabelRelativeCoords(this.visProp.label.offset),new ge.Z(Y.Z.COORDS_BY_USER,[this.point2.X(),this.point2.Y()],this.board)};for(r=0;r<this.label_array.length;r++)this.myAtts.name=this.label_array[r],this.myAtts.strokecolor=this.color_array[r%this.color_array.length],this.myAtts.highlightstrokecolor=this.color_array[r%this.color_array.length],this.myAtts.label={offset:[10,0],strokeColor:this.color_array[r%this.color_array.length],strokeWidth:this.myAtts.strokewidth},this.lines[r]=e.create("line",[[this.coords.usrCoords[1],this.coords.usrCoords[2]-r*s],[this.coords.usrCoords[1]+n,this.coords.usrCoords[2]-r*s]],this.myAtts),this.lines[r].getLabelAnchor=o,this.lines[r].prepareUpdate().update().updateVisibility(d.Z.evaluate(this.lines[r].visProp.visible)).updateRenderer()},D.Z.createLegend=function(e,t,r){if(!d.Z.exists(t)||2!==t.length)throw new Error("JSXGraph: Legend element needs two numbers as parameters");return new D.Z.Legend(e,t,r)},D.Z.registerElement("legend",D.Z.createLegend),D.Z.Transformation=function(e,t,r){this.elementClass=Y.Z.OBJECT_CLASS_OTHER,this.type=Y.Z.OBJECT_TYPE_TRANSFORMATION,this.matrix=[[1,0,0],[0,1,0],[0,0,1]],this.board=e,this.isNumericMatrix=!1,this.setMatrix(e,t,r),this.methodMap={apply:"apply",applyOnce:"applyOnce",bindTo:"bindTo",bind:"bindTo",melt:"melt"}},D.Z.Transformation.prototype={},D.Z.extend(D.Z.Transformation.prototype,{update:function(){return this},setMatrix:function(e,t,r){var n;for(this.isNumericMatrix=!0,n=0;n<r.length;n++)if("number"!=typeof r[n]){this.isNumericMatrix=!1;break}if("translate"===t){if(2!==r.length)throw new Error("JSXGraph: translate transformation needs 2 parameters.");this.evalParam=d.Z.createEvalFunction(e,r,2),this.update=function(){this.matrix[1][0]=this.evalParam(0),this.matrix[2][0]=this.evalParam(1)}}else if("scale"===t){if(2!==r.length)throw new Error("JSXGraph: scale transformation needs 2 parameters.");this.evalParam=d.Z.createEvalFunction(e,r,2),this.update=function(){this.matrix[1][1]=this.evalParam(0),this.matrix[2][2]=this.evalParam(1)}}else if("reflect"===t)r.length<4&&(r[0]=e.select(r[0])),2===r.length&&(r[1]=e.select(r[1])),4===r.length&&(this.evalParam=d.Z.createEvalFunction(e,r,4)),this.update=function(){var a,l,u,c,h,g,y,E;1===r.length?y=r[0].stdform:2===r.length?y=q.Z.crossProduct(r[1].coords.usrCoords,r[0].coords.usrCoords):4===r.length&&(y=q.Z.crossProduct([1,this.evalParam(2),this.evalParam(3)],[1,this.evalParam(0),this.evalParam(1)])),c=(E=[-(u=y[0])*(a=y[1]),-u*(l=y[2]),a*a+l*l])[0]/E[2],h=E[1]/E[2],this.matrix[1][1]=((a=-y[2])*a-(l=y[1])*l)/(g=E[2]),this.matrix[1][2]=2*a*l/g,this.matrix[2][1]=this.matrix[1][2],this.matrix[2][2]=-this.matrix[1][1],this.matrix[1][0]=c*(1-this.matrix[1][1])-h*this.matrix[1][2],this.matrix[2][0]=h*(1-this.matrix[2][2])-c*this.matrix[2][1]};else if("rotate"===t)3===r.length?this.evalParam=d.Z.createEvalFunction(e,r,3):r.length>0&&r.length<=2&&(this.evalParam=d.Z.createEvalFunction(e,r,1),2===r.length&&!d.Z.isArray(r[1])&&(r[1]=e.select(r[1]))),this.update=function(){var a,l,u=this.evalParam(0),c=Math.cos(u),h=Math.sin(u);this.matrix[1][1]=c,this.matrix[1][2]=-h,this.matrix[2][1]=h,this.matrix[2][2]=c,r.length>1&&(3===r.length?(a=this.evalParam(1),l=this.evalParam(2)):d.Z.isArray(r[1])?(a=r[1][0],l=r[1][1]):(a=r[1].X(),l=r[1].Y()),this.matrix[1][0]=a*(1-c)+l*h,this.matrix[2][0]=l*(1-c)-a*h)};else if("shear"===t){if(2!==r.length)throw new Error("JSXGraph: shear transformation needs 2 parameters.");this.evalParam=d.Z.createEvalFunction(e,r,2),this.update=function(){this.matrix[1][2]=this.evalParam(0),this.matrix[2][1]=this.evalParam(1)}}else if("generic"===t){if(9!==r.length)throw new Error("JSXGraph: generic transformation needs 9 parameters.");this.evalParam=d.Z.createEvalFunction(e,r,9),this.update=function(){this.matrix[0][0]=this.evalParam(0),this.matrix[0][1]=this.evalParam(1),this.matrix[0][2]=this.evalParam(2),this.matrix[1][0]=this.evalParam(3),this.matrix[1][1]=this.evalParam(4),this.matrix[1][2]=this.evalParam(5),this.matrix[2][0]=this.evalParam(6),this.matrix[2][1]=this.evalParam(7),this.matrix[2][2]=this.evalParam(8)}}},apply:function(e,t){return this.update(),d.Z.exists(t)?q.Z.matVecMult(this.matrix,e.initialCoords.usrCoords):q.Z.matVecMult(this.matrix,e.coords.usrCoords)},applyOnce:function(e){var t,r,n;for(d.Z.isArray(e)||(e=[e]),r=e.length,n=0;n<r;n++)this.update(),t=q.Z.matVecMult(this.matrix,e[n].coords.usrCoords),e[n].coords.setCoordinates(Y.Z.COORDS_BY_USER,t)},bindTo:function(e){var t,r;if(d.Z.isArray(e))for(r=e.length,t=0;t<r;t++)e[t].transformations.push(this);else e.transformations.push(this)},setProperty:function(e){D.Z.deprecated("Transformation.setProperty()","Transformation.setAttribute()")},setAttribute:function(e){},melt:function(e){var r,n,s,o,a,l,t=[];for(n=e.matrix.length,s=this.matrix[0].length,r=0;r<n;r++)t[r]=[];for(this.update(),e.update(),r=0;r<n;r++)for(l=0;l<s;l++){for(a=0,o=0;o<n;o++)a+=e.matrix[r][o]*this.matrix[o][l];t[r][l]=a}return this.update=function(){var u=this.matrix.length,c=this.matrix[0].length;for(r=0;r<u;r++)for(l=0;l<c;l++)this.matrix[r][l]=t[r][l]},this},getParents:function(){var e=[[].concat.apply([],this.matrix)];return 0!==this.parents.length&&(e=this.parents),e}}),D.Z.createTransform=function(e,t,r){return new D.Z.Transformation(e,r.type,t)},D.Z.registerElement("transform",D.Z.createTransform),D.Z.Turtle=function(e,t,r){var n,s,o;return this.constructor(e,r,Y.Z.OBJECT_TYPE_TURTLE,Y.Z.OBJECT_CLASS_OTHER),this.turtleIsHidden=!1,this.board=e,this.visProp.curveType="plot",this._attributes=d.Z.copyAttributes(this.visProp,e.options,"turtle"),delete this._attributes.id,n=0,s=0,o=90,0!==t.length&&(3===t.length?(n=t[0],s=t[1],o=t[2]):2===t.length?d.Z.isArray(t[0])?(n=t[0][0],s=t[0][1],o=t[1]):(n=t[0],s=t[1]):(n=t[0][0],s=t[0][1])),this.init(n,s,o),this.methodMap=d.Z.deepCopy(this.methodMap,{forward:"forward",fd:"forward",back:"back",bk:"back",right:"right",rt:"right",left:"left",lt:"left",penUp:"penUp",pu:"penUp",penDown:"penDown",pd:"penDown",clearScreen:"clearScreen",cs:"clearScreen",clean:"clean",setPos:"setPos",home:"home",hideTurtle:"hideTurtle",ht:"hideTurtle",showTurtle:"showTurtle",st:"showTurtle",penSize:"setPenSize",penColor:"setPenColor",getPenColor:"getPenColor",getHighlightPenColor:"getHighlightPenColor",getPenSize:"getPenSize",pushTurtle:"pushTurtle",push:"pushTurtle",popTurtle:"popTurtle",pop:"popTurtle",lookTo:"lookTo",pos:"pos",moveTo:"moveTo",X:"X",Y:"Y"}),this},D.Z.Turtle.prototype=new vi.Z,D.Z.extend(D.Z.Turtle.prototype,{init:function(e,t,r){var n={fixed:!0,name:"",visible:!1,withLabel:!1};this.arrowLen=20/Math.sqrt(this.board.unitX*this.board.unitX+this.board.unitY*this.board.unitY),this.pos=[e,t],this.isPenDown=!0,this.dir=90,this.stack=[],this.objects=[],this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this.turtle=this.board.create("point",this.pos,n),this.objects.push(this.turtle),this.turtle2=this.board.create("point",[this.pos[0],this.pos[1]+this.arrowLen],n),this.objects.push(this.turtle2),this.visProp.arrow.lastArrow=!0,this.visProp.arrow.straightFirst=!1,this.visProp.arrow.straightLast=!1,this.arrow=this.board.create("line",[this.turtle,this.turtle2],this.visProp.arrow),this.objects.push(this.arrow),this.subs={arrow:this.arrow},this.inherits.push(this.arrow),this.right(90-r),this.board.update()},forward:function(e){if(0===e)return this;var t,r=e*Math.cos(this.dir*Math.PI/180),n=e*Math.sin(this.dir*Math.PI/180);return this.turtleIsHidden||((t=this.board.create("transform",[r,n],{type:"translate"})).applyOnce(this.turtle),t.applyOnce(this.turtle2)),this.isPenDown&&this.curve.dataX.length>=8192&&(this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve)),this.pos[0]+=r,this.pos[1]+=n,this.isPenDown&&(this.curve.dataX.push(this.pos[0]),this.curve.dataY.push(this.pos[1])),this.board.update(),this},back:function(e){return this.forward(-e)},right:function(e){return this.dir-=e,this.dir%=360,this.turtleIsHidden||this.board.create("transform",[-e*Math.PI/180,this.turtle],{type:"rotate"}).applyOnce(this.turtle2),this.board.update(),this},left:function(e){return this.right(-e)},penUp:function(){return this.isPenDown=!1,this},penDown:function(){return this.isPenDown=!0,this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this},clean:function(){var e,t;for(e=0;e<this.objects.length;e++)(t=this.objects[e]).type===Y.Z.OBJECT_TYPE_CURVE&&(this.board.removeObject(t),this.objects.splice(e,1));return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this.board.update(),this},clearScreen:function(){var e,r=this.objects.length;for(e=0;e<r;e++)this.board.removeObject(this.objects[e]);return this.init(0,0,90),this},setPos:function(e,t){return this.pos=d.Z.isArray(e)?e:[e,t],this.turtleIsHidden||(this.turtle.setPositionDirectly(Y.Z.COORDS_BY_USER,[e,t]),this.turtle2.setPositionDirectly(Y.Z.COORDS_BY_USER,[e,t+this.arrowLen]),this.board.create("transform",[-(this.dir-90)*Math.PI/180,this.turtle],{type:"rotate"}).applyOnce(this.turtle2)),this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this.board.update(),this},setPenSize:function(e){return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this.copyAttr("strokeWidth",e)),this.objects.push(this.curve),this},setPenColor:function(e){return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this.copyAttr("strokeColor",e)),this.objects.push(this.curve),this},getPenAttribute:function(e){var r=this.objects.length;return d.Z.evaluate(this.objects[4===r?0:r-1].visProp[e])},getPenSize:function(){return this.getPenAttribute("strokewidth")},getPenColor:function(){return this.getPenAttribute("strokecolor")},getHighlightPenColor:function(){return this.getPenAttribute("highlightstrokecolor")},setHighlightPenColor:function(e){return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this.copyAttr("highlightStrokeColor",e)),this.objects.push(this.curve),this},setAttribute:function(e){var t,r,n,s=this.objects.length;for(t=0;t<s;t++)(r=this.objects[t]).type===Y.Z.OBJECT_TYPE_CURVE&&r.setAttribute(e);return n=this.visProp.id,this.visProp=d.Z.deepCopy(this.curve.visProp),this.visProp.id=n,this._attributes=d.Z.deepCopy(this.visProp),delete this._attributes.id,this},copyAttr:function(e,t){return this._attributes[e.toLowerCase()]=t,this._attributes},showTurtle:function(){return this.turtleIsHidden=!1,this.arrow.setAttribute({visible:!0}),this.visProp.arrow.visible=!1,this.setPos(this.pos[0],this.pos[1]),this.board.update(),this},hideTurtle:function(){return this.turtleIsHidden=!0,this.arrow.setAttribute({visible:!1}),this.visProp.arrow.visible=!1,this.board.update(),this},home:function(){return this.pos=[0,0],this.setPos(this.pos[0],this.pos[1]),this},pushTurtle:function(){return this.stack.push([this.pos[0],this.pos[1],this.dir]),this},popTurtle:function(){var e=this.stack.pop();return this.pos[0]=e[0],this.pos[1]=e[1],this.dir=e[2],this.setPos(this.pos[0],this.pos[1]),this},lookTo:function(e){var o;return d.Z.isArray(e)?(o=Math.atan2(e[1]-this.pos[1],e[0]-this.pos[0]),this.right(this.dir-180*o/Math.PI)):d.Z.isNumber(e)&&this.right(this.dir-e),this},moveTo:function(e){var n;return d.Z.isArray(e)&&(this.turtleIsHidden||((n=this.board.create("transform",[e[0]-this.pos[0],e[1]-this.pos[1]],{type:"translate"})).applyOnce(this.turtle),n.applyOnce(this.turtle2)),this.isPenDown&&this.curve.dataX.length>=8192&&(this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve)),this.pos[0]=e[0],this.pos[1]=e[1],this.isPenDown&&(this.curve.dataX.push(this.pos[0]),this.curve.dataY.push(this.pos[1])),this.board.update()),this},fd:function(e){return this.forward(e)},bk:function(e){return this.back(e)},lt:function(e){return this.left(e)},rt:function(e){return this.right(e)},pu:function(){return this.penUp()},pd:function(){return this.penDown()},ht:function(){return this.hideTurtle()},st:function(){return this.showTurtle()},cs:function(){return this.clearScreen()},push:function(){return this.pushTurtle()},pop:function(){return this.popTurtle()},evalAt:function(e,t){var r,n,s,a=this.objects.length;for(r=0,n=0;r<a;r++)if((s=this.objects[r]).elementClass===Y.Z.OBJECT_CLASS_CURVE){if(n<=e&&e<n+s.numberPoints)return s[t](e-n);n+=s.numberPoints}return this[t]()},X:function(e){return d.Z.exists(e)?this.evalAt(e,"X"):this.pos[0]},Y:function(e){return d.Z.exists(e)?this.evalAt(e,"Y"):this.pos[1]},Z:function(e){return 1},minX:function(){return 0},maxX:function(){var e,r=this.objects.length,n=0;for(e=0;e<r;e++)this.objects[e].elementClass===Y.Z.OBJECT_CLASS_CURVE&&(n+=this.objects[e].numberPoints);return n},hasPoint:function(e,t){var r,n;for(r=0;r<this.objects.length;r++)if((n=this.objects[r]).type===Y.Z.OBJECT_TYPE_CURVE&&n.hasPoint(e,t))return!0;return!1}}),D.Z.createTurtle=function(e,t,r){var n;return t=t||[],n=d.Z.copyAttributes(r,e.options,"turtle"),new D.Z.Turtle(e,t,n)},D.Z.registerElement("turtle",D.Z.createTurtle),D.Z.Ticks=function(e,t,r){if(this.constructor(e.board,r,Y.Z.OBJECT_TYPE_TICKS,Y.Z.OBJECT_CLASS_OTHER),this.line=e,this.board=this.line.board,this.fixedTicks=null,this.equidistant=!1,this.labelsData=[],d.Z.isFunction(t))throw this.ticksFunction=t,new Error("Function arguments are no longer supported.");d.Z.isArray(t)?this.fixedTicks=t:this.equidistant=!0,this.ticks=[],this.labels=[],this.labelCounter=0,this.id=this.line.addTicks(this),this.elType="ticks",this.inherits.push(this.labels),this.board.setId(this,"Ti")},D.Z.Ticks.prototype=new vi.Z,D.Z.extend(D.Z.Ticks.prototype,{hasPoint:function(e,t){var r,n,o,s=this.ticks&&this.ticks.length||0;if(o=d.Z.isObject(d.Z.evaluate(this.visProp.precision))?d.Z.evaluate(this.visProp.precision[this.board._inputDevice]):this.board.options.precision.hasPoint,o+=.5*d.Z.evaluate(this.visProp.strokewidth),!d.Z.evaluate(this.line.visProp.scalable)||this.line.elementClass===Y.Z.OBJECT_CLASS_CURVE||0!==this.line.stdform[1]&&0!==this.line.stdform[2]&&this.line.type!==Y.Z.OBJECT_TYPE_AXIS)return!1;for(r=0;r<s;r++)if((n=this.ticks[r])[2]&&!(0===this.line.stdform[1]&&Math.abs(n[0][0]-this.line.point1.coords.scrCoords[1])<q.Z.eps||0===this.line.stdform[2]&&Math.abs(n[1][0]-this.line.point1.coords.scrCoords[2])<q.Z.eps)&&(Math.abs(n[0][0]-n[0][1])>=1||Math.abs(n[1][0]-n[1][1])>=1))if(0===this.line.stdform[1]){if(Math.abs(t-.5*(n[1][0]+n[1][1]))<2*o&&n[0][0]-o<e&&e<n[0][1]+o)return!0}else if(0===this.line.stdform[2]&&Math.abs(e-.5*(n[0][0]+n[0][1]))<2*o&&n[1][0]-o<t&&t<n[1][1]+o)return!0;return!1},setPositionDirectly:function(e,t,r){var n,s,o=new ge.Z(e,t,this.board),a=new ge.Z(e,r,this.board),l=this.board.getBoundingBox();return this.line.type===Y.Z.OBJECT_TYPE_AXIS&&d.Z.evaluate(this.line.visProp.scalable)?(Math.abs(this.line.stdform[1])<q.Z.eps&&Math.abs(o.usrCoords[1]*a.usrCoords[1])>q.Z.eps?(l[0]*=n=a.usrCoords[1]/o.usrCoords[1],l[2]*=n,this.board.setBoundingBox(l,this.board.keepaspectratio,"update")):Math.abs(this.line.stdform[2])<q.Z.eps&&Math.abs(o.usrCoords[2]*a.usrCoords[2])>q.Z.eps&&(l[3]*=s=a.usrCoords[2]/o.usrCoords[2],l[1]*=s,this.board.setBoundingBox(l,this.board.keepaspectratio,"update")),this):this},calculateTicksCoordinates:function(){var e,t,r,n;if(!(this.line.elementClass===Y.Z.OBJECT_CLASS_LINE&&(this.setTicksSizeVariables(),Math.abs(this.dx)<q.Z.eps&&Math.abs(this.dy)<q.Z.eps)))return e=this.getZeroCoordinates(),t=this.line.elementClass===Y.Z.OBJECT_CLASS_LINE?this.getLowerAndUpperBounds(e,"ticksdistance"):{lower:this.line.minX(),upper:this.line.maxX(),a1:0,a2:0,m1:0,m2:0},"polar"===d.Z.evaluate(this.visProp.type)&&(n=this.board.getBoundingBox(),r=Math.max(Math.sqrt(n[0]*n[0]+n[1]*n[1]),Math.sqrt(n[2]*n[2]+n[3]*n[3])),t.upper=r),this.ticks=[],this.labelsData=[],this.equidistant?this.generateEquidistantTicks(e,t):this.generateFixedTicks(e,t),this},setTicksSizeVariables:function(e){var t,r,n,s,o=.5*d.Z.evaluate(this.visProp.majorheight),a=.5*d.Z.evaluate(this.visProp.minorheight);d.Z.exists(e)?(r=this.line.minX(),n=this.line.maxX(),(s=this.line.points.length)<2?(this.dxMaj=0,this.dyMaj=0):q.Z.relDif(e,r)<q.Z.eps?(this.dxMaj=this.line.points[0].usrCoords[2]-this.line.points[1].usrCoords[2],this.dyMaj=this.line.points[1].usrCoords[1]-this.line.points[0].usrCoords[1]):q.Z.relDif(e,n)<q.Z.eps?(this.dxMaj=this.line.points[s-2].usrCoords[2]-this.line.points[s-1].usrCoords[2],this.dyMaj=this.line.points[s-1].usrCoords[1]-this.line.points[s-2].usrCoords[1]):(this.dxMaj=-Qe.Z.D(this.line.Y)(e),this.dyMaj=Qe.Z.D(this.line.X)(e))):(this.dxMaj=this.line.stdform[1],this.dyMaj=this.line.stdform[2]),this.dxMin=this.dxMaj,this.dyMin=this.dyMaj,this.dx=this.dxMaj,this.dy=this.dyMaj,t=Math.sqrt(this.dxMaj*this.dxMaj*this.board.unitX*this.board.unitX+this.dyMaj*this.dyMaj*this.board.unitY*this.board.unitY),this.dxMaj*=o/t*this.board.unitX,this.dyMaj*=o/t*this.board.unitY,this.dxMin*=a/t*this.board.unitX,this.dyMin*=a/t*this.board.unitY,this.minStyle=d.Z.evaluate(this.visProp.minorheight)<0?"infinite":"finite",this.majStyle=d.Z.evaluate(this.visProp.majorheight)<0?"infinite":"finite"},getZeroCoordinates:function(){var e,t,r,n,s,o,l,u,c=d.Z.evaluate(this.visProp.anchor);return this.line.elementClass===Y.Z.OBJECT_CLASS_LINE?this.line.type===Y.Z.OBJECT_TYPE_AXIS?fe.Z.projectPointToLine({coords:{usrCoords:[1,0,0]}},this.line,this.board):(r=this.line.point1.coords.usrCoords[0],e=this.line.point1.coords.usrCoords[1],t=this.line.point1.coords.usrCoords[2],o=this.line.point2.coords.usrCoords[0],n=this.line.point2.coords.usrCoords[1],s=this.line.point2.coords.usrCoords[2],"right"===c?this.line.point2.coords:"middle"===c?new ge.Z(Y.Z.COORDS_BY_USER,[.5*(r+o),.5*(e+n),.5*(t+s)],this.board):d.Z.isNumber(c)?new ge.Z(Y.Z.COORDS_BY_USER,[r+(o-r)*c,e+(n-e)*c,t+(s-t)*c],this.board):this.line.point1.coords):(l=this.line.minX(),u=this.line.maxX(),"right"===c?u:"middle"===c?.5*(l+u):d.Z.isNumber(c)?l*(1-c)+u*c:l)},getLowerAndUpperBounds:function(e,t){var r,n,s,o,a,l,u,c,h,g,y,E,w,T,N,L=10*q.Z.eps,R=d.Z.evaluate(this.line.visProp.straightfirst),H=d.Z.evaluate(this.line.visProp.straightlast),V=d.Z.evaluate(this.visProp.includeboundaries);return this.line.elementClass===Y.Z.OBJECT_CLASS_CURVE?{lower:this.line.minX(),upper:this.line.maxX()}:(a=new ge.Z(Y.Z.COORDS_BY_USER,this.line.point1.coords.usrCoords,this.board),l=new ge.Z(Y.Z.COORDS_BY_USER,this.line.point2.coords.usrCoords,this.board),u=Math.abs(a.usrCoords[0])>=q.Z.eps&&a.scrCoords[1]>=0&&a.scrCoords[1]<=this.board.canvasWidth&&a.scrCoords[2]>=0&&a.scrCoords[2]<=this.board.canvasHeight,c=Math.abs(l.usrCoords[0])>=q.Z.eps&&l.scrCoords[1]>=0&&l.scrCoords[1]<=this.board.canvasWidth&&l.scrCoords[2]>=0&&l.scrCoords[2]<=this.board.canvasHeight,d.Z.exists(t)&&"ticksdistance"===t?(fe.Z.calcStraight(this.line,a,l,0),T=this.getDistanceFromZero(e,a),N=this.getDistanceFromZero(e,l),fe.Z.calcStraight(this.line,a,l,d.Z.evaluate(this.line.visProp.margin)),T=this.getDistanceFromZero(e,a)-T,N=this.getDistanceFromZero(e,l).m2):fe.Z.calcLineDelimitingPoints(this.line,a,l),s=d.Z.evaluate(this.line.visProp.firstarrow),o=d.Z.evaluate(this.line.visProp.lastarrow),E=this.getDistanceFromZero(e,a),w=this.getDistanceFromZero(e,l),(s||o)&&(y=this.board.renderer.getArrowHeadData(this.line,d.Z.evaluate(this.line.visProp.strokewidth),""),this.board.renderer.getPositionArrowHead(this.line,a,l,y)),(h=this.getDistanceFromZero(e,a))<(g=this.getDistanceFromZero(e,l))?(r=h,n=g,!R&&u&&!V&&(r+=L),!H&&c&&!V&&(n-=L)):g<h?(r=g,n=h,!H&&c&&!V&&(r+=L),!R&&u&&!V&&(n-=L)):(r=0,n=0),{lower:r,upper:n,a1:E=h-E,a2:w=h-w,m1:T,m2:N})},getDistanceFromZero:function(e,t){var r,n,a;return r=this.line.point1.coords,n=this.line.point2.coords,a=e.distance(Y.Z.COORDS_BY_USER,t),q.Z.innerProduct([n.usrCoords[0]-r.usrCoords[0],n.usrCoords[1]-r.usrCoords[1],n.usrCoords[2]-r.usrCoords[2]],[t.usrCoords[0]-e.usrCoords[0],t.usrCoords[1]-e.usrCoords[1],t.usrCoords[2]-e.usrCoords[2]],3)<0&&(a*=-1),a},generateEquidistantTicks:function(e,t){var r,s,o,n=q.Z.eps,c=(d.Z.evaluate(this.visProp.minorticksinarrow),d.Z.evaluate(this.visProp.minorticksinarrow),d.Z.evaluate(this.visProp.minorticksinarrow),d.Z.evaluate(this.visProp.minorticks));if(o=this.getDistanceMajorTicks(),this.line.elementClass===Y.Z.OBJECT_CLASS_LINE&&(s=this.getXandYdeltas()),o*=d.Z.evaluate(this.visProp.scale),this.ticksDelta=o/=c+1,!(o<q.Z.eps)){for(r=0,d.Z.evaluate(this.visProp.drawzero)||(r=o);r<=t.upper+n&&(r>=t.lower-n&&this.processTickPosition(e,r,o,s),!(t.upper-(r+=o)>1e4*o)););for(r=-o;r>=t.lower-n&&(r<=t.upper+n&&this.processTickPosition(e,r,o,s),!((r-=o)-t.lower>1e4*o)););}},getDistanceMajorTicks:function(){var e,t,r,n,o,l,u,c;return d.Z.evaluate(this.visProp.insertticks)?(l=((r=this.getLowerAndUpperBounds(this.getZeroCoordinates(),"")).upper-r.lower)/6/(o=d.Z.evaluate(this.visProp.scale)),u=d.Z.evaluate(this.visProp.minticksdistance)/o,c=d.Z.evaluate(this.visProp.minorticks),(n=this.getXandYdeltas()).x*=this.board.unitX,n.y*=this.board.unitY,u/=Math.sqrt(n.x*n.x+n.y*n.y),u*=c+1,2*(e=Math.pow(10,Math.floor(Math.log(u)/Math.LN10)))>=u?e*=2:5*e>=u&&(e*=5),5*(t=Math.pow(10,Math.floor(Math.log(l)/Math.LN10)))<l?t*=5:2*t<l&&(t*=2),e=Math.max(e,t)):d.Z.evaluate(this.visProp.ticksdistance)},processTickPosition:function(e,t,r,n){var s,o,a,l,u,c=d.Z.evaluate(this.visProp.ticksperlabel),h=null;this.line.elementClass===Y.Z.OBJECT_CLASS_LINE?(s=e.usrCoords[1]+t*n.x,o=e.usrCoords[2]+t*n.y):(s=this.line.X(e+t),o=this.line.Y(e+t)),a=new ge.Z(Y.Z.COORDS_BY_USER,[s,o],this.board),this.line.elementClass===Y.Z.OBJECT_CLASS_CURVE&&this.setTicksSizeVariables(h=e+t),a.major=Math.round(t/r)%(d.Z.evaluate(this.visProp.minorticks)+1)==0,c||(c=d.Z.evaluate(this.visProp.minorticks)+1),u=Math.round(t/r)%c==0,3===(l=this.createTickPath(a,a.major)).length&&(this.ticks.push(l),u&&d.Z.evaluate(this.visProp.drawlabels)?this.labelsData.push(this.generateLabelData(this.generateLabelText(a,e,h),a,this.ticks.length)):this.labelsData.push(null))},generateFixedTicks:function(e,t){var r,n,s,o,a,l,c,g,u=q.Z.eps,h=d.Z.isArray(this.visProp.labels),y=d.Z.evaluate(this.visProp.drawlabels);for(this.line.elementClass===Y.Z.OBJECT_CLASS_LINE&&(g=this.getXandYdeltas()),s=0;s<this.fixedTicks.length;s++)this.line.elementClass===Y.Z.OBJECT_CLASS_LINE?(a=e.usrCoords[1]+(c=this.fixedTicks[s])*g.x,l=e.usrCoords[2]+c*g.y):(a=this.line.X(c=e+this.fixedTicks[s]),l=this.line.Y(c)),r=new ge.Z(Y.Z.COORDS_BY_USER,[a,l],this.board),this.line.elementClass===Y.Z.OBJECT_CLASS_CURVE&&this.setTicksSizeVariables(c),3===(o=this.createTickPath(r,!0)).length&&c>=t.lower-u&&c<=t.upper+u&&(this.ticks.push(o),y&&(h||d.Z.exists(this.visProp.labels[s]))?(n=h?d.Z.evaluate(this.visProp.labels[s]):c,this.labelsData.push(this.generateLabelData(this.generateLabelText(r,e,n),r,s))):this.labelsData.push(null))},getXandYdeltas:function(){var e,t,r=this.line.point1.Dist(this.line.point2);return this.line.type===Y.Z.OBJECT_TYPE_AXIS?((e=this.line.point1.coords.usrCoords)[1]>(t=this.line.point2.coords.usrCoords)[1]||Math.abs(e[1]-t[1])<q.Z.eps&&e[2]>t[2])&&(e=this.line.point2.coords.usrCoords,t=this.line.point1.coords.usrCoords):(e=this.line.point1.coords.usrCoords,t=this.line.point2.coords.usrCoords),{x:(t[1]-e[1])/r,y:(t[2]-e[2])/r}},_isInsideCanvas:function(e,t,r){var n=this.board.canvasWidth,s=this.board.canvasHeight;return void 0===r&&(r=0),e[0]>=r&&e[0]<=n-r&&t[0]>=r&&t[0]<=s-r||e[1]>=r&&e[1]<=n-r&&t[1]>=r&&t[1]<=s-r},createTickPath:function(e,t){var r,n,s,o,a,l,u,c,h,E,w,N,L,R,H,V,U,g=[-2e6,-2e6],y=[-2e6,-2e6];if(r=e.scrCoords,t?(o=this.dxMaj,a=this.dyMaj,h=this.majStyle,H=d.Z.evaluate(this.visProp.majortickendings[0])>0,V=d.Z.evaluate(this.visProp.majortickendings[1])>0):(o=this.dxMin,a=this.dyMin,h=this.minStyle,H=d.Z.evaluate(this.visProp.tickendings[0])>0,V=d.Z.evaluate(this.visProp.tickendings[1])>0),n=[-a*r[1]-o*r[2],a,o],t&&"polar"===d.Z.evaluate(this.visProp.type)){if(N=this.board.getBoundingBox(),R=(L=2*Math.PI)/180,r=e.usrCoords,(w=Math.sqrt(r[1]*r[1]+r[2]*r[2]))<Math.max(Math.sqrt(N[0]*N[0]+N[1]*N[1]),Math.sqrt(N[2]*N[2]+N[3]*N[3]))){for(g=[],y=[],E=0;E<=L;E+=R)g.push(this.board.origin.scrCoords[1]+w*Math.cos(E)*this.board.unitX),y.push(this.board.origin.scrCoords[2]+w*Math.sin(E)*this.board.unitY);return[g,y,t]}}else{if("infinite"===h){if(d.Z.evaluate(this.visProp.ignoreinfinitetickendings)&&(H=V=!0),s=fe.Z.meetLineBoard(n,this.board),H&&V)g[0]=s[0].scrCoords[1],g[1]=s[1].scrCoords[1],y[0]=s[0].scrCoords[2],y[1]=s[1].scrCoords[2];else if((U=[q.Z.innerProduct(s[0].usrCoords.slice(1,3),this.line.stdform.slice(1,3))+this.line.stdform[0],q.Z.innerProduct(s[1].usrCoords.slice(1,3),this.line.stdform.slice(1,3))+this.line.stdform[0]])[0]<U[1]&&(s.reverse(),U.reverse()),H){if(U[0]<0)return[];U[1]<0?(g[0]=s[0].scrCoords[1],y[0]=s[0].scrCoords[2],g[1]=r[1],y[1]=r[2]):(g[0]=s[0].scrCoords[1],y[0]=s[0].scrCoords[2],g[1]=s[1].scrCoords[1],y[1]=s[1].scrCoords[2])}else if(V){if(U[1]>0)return[];U[0]>0?(g[0]=r[1],y[0]=r[2],g[1]=s[1].scrCoords[1],y[1]=s[1].scrCoords[2]):(g[0]=s[0].scrCoords[1],y[0]=s[0].scrCoords[2],g[1]=s[1].scrCoords[1],y[1]=s[1].scrCoords[2])}}else c=">"===d.Z.evaluate(this.visProp.face)?Math.PI/4:"<"===d.Z.evaluate(this.visProp.face)?-Math.PI/4:0,l=Math.cos(c)*o-Math.sin(c)*a,u=Math.sin(c)*o+Math.cos(c)*a,g[0]=r[1]+l*H,y[0]=r[2]-u*H,g[1]=r[1],y[1]=r[2],c=-c,l=Math.cos(c)*o-Math.sin(c)*a,u=Math.sin(c)*o+Math.cos(c)*a,g[2]=r[1]-l*V,y[2]=r[2]+u*V;if(this._isInsideCanvas(g,y))return[g,y,t]}return[]},formatLabelText:function(e){var t,r,n=d.Z.evaluate(this.visProp.scalesymbol);return d.Z.isNumber(e)?(r=d.Z.evaluate(this.visProp.digits),this.useLocale()?t=this.formatNumberLocale(e,r):((t=(Math.round(1e11*e)/1e11).toString()).length>d.Z.evaluate(this.visProp.maxlabellength)||-1!==t.indexOf("e"))&&(3!==d.Z.evaluate(this.visProp.precision)&&3===r&&(r=d.Z.evaluate(this.visProp.precision)),t=e.toExponential(r).toString()),d.Z.evaluate(this.visProp.beautifulscientificticklabels)&&(t=this.beautifyScientificNotationLabel(t)),t.indexOf(".")>-1&&-1===t.indexOf("e")&&(t=(t=t.replace(/0+$/,"")).replace(/\.$/,""))):t=e.toString(),n.length>0&&("1"===t?t=n:"-1"===t?t="-"+n:"0"!==t&&(t+=n)),d.Z.evaluate(this.visProp.useunicodeminus)&&(t=t.replace(/-/g,"\u2212")),t},beautifyScientificNotationLabel:function(e){return-1===e.indexOf("e")?e:(parseFloat(e.substring(0,e.indexOf("e")))+e.substring(e.indexOf("e"))).replace(/e(.*)$/g,function(r,n){return"\u202210"+n.replace(/-/g,"\u207b").replace(/\+/g,"").replace(/0/g,"\u2070").replace(/1/g,"\xb9").replace(/2/g,"\xb2").replace(/3/g,"\xb3").replace(/4/g,"\u2074").replace(/5/g,"\u2075").replace(/6/g,"\u2076").replace(/7/g,"\u2077").replace(/8/g,"\u2078").replace(/9/g,"\u2079")})},generateLabelText:function(e,t,r){var s;if(!d.Z.exists(r)){if(s=this.getDistanceFromZero(t,e),Math.abs(s)<q.Z.eps)return"0";r=s/d.Z.evaluate(this.visProp.scale)}return this.formatLabelText(r)},generateLabelData:function(e,t,r){var n,s,o,a;return o=void 0===(a=d.Z.evaluate(this.visProp.label.fontsize))?12:a,this._isInsideCanvas(n=[t.scrCoords[1],t.scrCoords[1]],s=[t.scrCoords[2],t.scrCoords[2]],o*=.5)?(n=d.Z.evaluate(this.visProp.label.offset[0]),s=d.Z.evaluate(this.visProp.label.offset[1]),{x:t.usrCoords[1]+n/this.board.unitX,y:t.usrCoords[2]+s/this.board.unitY,t:e,i:r}):null},update:function(){return this.needsUpdate&&0!==this.board.canvasWidth&&0!==this.board.canvasHeight&&this.calculateTicksCoordinates(),this},updateRenderer:function(){return this.needsUpdate?(this.visPropCalc.visible&&this.board.renderer.updateTicks(this),this.updateRendererLabels(),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},updateRendererLabels:function(){var e,t,r,n,s,o,a,l;for(r=this.labelsData.length,n=this.labels.length,e=0,t=0;e<r;e++)null!==this.labelsData[e]&&(a=this.labelsData[e],t<n?((o=this.labels[t]).setText(a.t),o.setCoords(a.x,a.y),t++):(this.labelCounter+=1,(s=d.Z.deepCopy(s={isLabel:!0,layer:this.board.options.layer.line,highlightStrokeColor:this.board.options.text.strokeColor,highlightStrokeWidth:this.board.options.text.strokeWidth,highlightStrokeOpacity:this.board.options.text.strokeOpacity,priv:this.visProp.priv},this.visProp.label)).id=this.id+a.i+"Label"+this.labelCounter,o=D.Z.createText(this.board,[a.x,a.y,a.t],s),this.addChild(o),o.setParents(this),o.isDraggable=!1,o.dump=!1,this.labels.push(o)),"inherit"===(l=d.Z.evaluate(this.visProp.label.visible))&&(l=this.visPropCalc.visible),o.prepareUpdate().updateVisibility(l).updateRenderer(),o.distanceX=d.Z.evaluate(this.visProp.label.offset[0]),o.distanceY=d.Z.evaluate(this.visProp.label.offset[1]));for(t=r=t;t<n;t++)this.board.renderer.display(this.labels[t],!1),this.labels[t].visProp.visible=this.labels[t].visPropCalc.visible=!1;return this},hideElement:function(){var e;for(D.Z.deprecated("Element.hideElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!1,this.board.renderer.display(this,!1),e=0;e<this.labels.length;e++)d.Z.exists(this.labels[e])&&this.labels[e].hideElement();return this},showElement:function(){var e;for(D.Z.deprecated("Element.showElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!0,this.board.renderer.display(this,!1),e=0;e<this.labels.length;e++)d.Z.exists(this.labels[e])&&this.labels[e].showElement();return this}}),D.Z.createTicks=function(e,t,r){var n,s,o=d.Z.copyAttributes(r,e.options,"ticks");if(s=t.length<2?o.ticksdistance:t[1],t[0].elementClass!==Y.Z.OBJECT_CLASS_LINE&&t[0].elementClass!==Y.Z.OBJECT_CLASS_CURVE)throw new Error("JSXGraph: Can't create Ticks with parent types '"+typeof t[0]+"'.");return n=new D.Z.Ticks(t[0],s,o),d.Z.isFunction(o.generatelabelvalue)&&(n.generateLabelText=o.generatelabelvalue),d.Z.isFunction(o.generatelabeltext)&&(n.generateLabelText=o.generatelabeltext),n.setParents(t[0]),n.isDraggable=!0,n.fullUpdate(t[0].visPropCalc.visible),n},D.Z.createHatchmark=function(e,t,r){var n,s,o,a,u,c=[],h=d.Z.copyAttributes(r,e.options,"hatch");if(t[0].elementClass!==Y.Z.OBJECT_CLASS_LINE&&t[0].elementClass!==Y.Z.OBJECT_CLASS_CURVE||"number"!=typeof t[1])throw new Error("JSXGraph: Can't create Hatch mark with parent types '"+typeof t[0]+"' and '"+typeof t[1]+" and ''"+typeof t[2]+"'.");for(o=-((n=t[1])-1)*(a=h.ticksdistance)*.5,s=0;s<n;s++)c[s]=o+s*a;return(u=e.create("ticks",[t[0],c],h)).elType="hatch",t[0].inherits.push(u),u},D.Z.registerElement("ticks",D.Z.createTicks),D.Z.registerElement("hash",D.Z.createHatchmark),D.Z.registerElement("hatch",D.Z.createHatchmark),D.Z.CA=function(e,t,r){this.node=e,this.createNode=t,this.parser=r},D.Z.extend(D.Z.CA.prototype,{findMapNode:function(e,t){var r,n,s;if("op_assign"===t.value&&t.children[0].value===e)return t.children[1];if(t.children)for(n=t.children.length,r=0;r<n;++r)if(null!==(s=this.findMapNode(e,t.children[r])))return s;return null},setMath:function(e){var t,r;if(("node_op"==e.type&&("op_add"==e.value||"op_sub"==e.value||"op_mul"==e.value||"op_div"==e.value||"op_neg"==e.value||"op_execfun"==e.value||"op_exp"==e.value)||"node_var"==e.type||"node_const"==e.type)&&(e.isMath=!0),e.children)for(r=e.children.length,t=0;t<r;++t)this.setMath(e.children[t])},deriveElementary:function(e,t){var s,r=e.children[0].value,n=e.children[1];switch(r){case"abs":s=this.createNode("node_op","op_div",n[0],this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_mul",d.Z.deepCopy(n[0]),d.Z.deepCopy(n[0]))]));break;case"sqrt":s=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_mul",this.createNode("node_const",2),this.createNode(e.type,e.value,d.Z.deepCopy(e.children[0]),d.Z.deepCopy(e.children[1]))));break;case"sin":s=this.createNode("node_op","op_execfun",this.createNode("node_var","cos"),d.Z.deepCopy(n));break;case"cos":s=this.createNode("node_op","op_neg",this.createNode("node_op","op_execfun",this.createNode("node_var","sin"),d.Z.deepCopy(n)));break;case"tan":s=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_exp",this.createNode("node_op","op_execfun",this.createNode("node_var","cos"),d.Z.deepCopy(n)),this.createNode("node_const",2)));break;case"cot":s=this.createNode("node_op","op_neg",this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_exp",this.createNode("node_op","op_execfun",this.createNode("node_var","sin"),d.Z.deepCopy(n)),this.createNode("node_const",2))));break;case"exp":s=this.createNode(e.type,e.value,d.Z.deepCopy(e.children[0]),d.Z.deepCopy(e.children[1]));break;case"pow":s=this.createNode("node_op","op_mul",this.createNode("node_op","op_execfun",d.Z.deepCopy(e.children[0]),d.Z.deepCopy(e.children[1])),this.createNode("node_op","op_add",this.createNode("node_op","op_mul",this.derivative(e.children[1][0],t),this.createNode("node_op","op_div",d.Z.deepCopy(e.children[1][1]),d.Z.deepCopy(e.children[1][0]))),this.createNode("node_op","op_mul",this.derivative(e.children[1][1],t),this.createNode("node_op","op_execfun",this.createNode("node_var","log"),[d.Z.deepCopy(e.children[1][0])]))));break;case"log":case"ln":s=this.createNode("node_op","op_div",this.createNode("node_const",1),d.Z.deepCopy(n[0]));break;case"log2":case"lb":case"ld":s=this.createNode("node_op","op_mul",this.createNode("node_op","op_div",this.createNode("node_const",1),d.Z.deepCopy(n[0])),this.createNode("node_const",1.4426950408889634));break;case"log10":case"lg":s=this.createNode("node_op","op_mul",this.createNode("node_op","op_div",this.createNode("node_const",1),d.Z.deepCopy(n[0])),this.createNode("node_const",.43429448190325176));break;case"asin":s=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_mul",d.Z.deepCopy(n[0]),d.Z.deepCopy(n[0])))]));break;case"acos":s=this.createNode("node_op","op_neg",this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_mul",d.Z.deepCopy(n[0]),d.Z.deepCopy(n[0])))])));break;case"atan":s=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_add",this.createNode("node_const",1),this.createNode("node_op","op_mul",d.Z.deepCopy(n[0]),d.Z.deepCopy(n[0]))));break;case"acot":s=this.createNode("node_op","op_neg",this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_add",this.createNode("node_const",1),this.createNode("node_op","op_mul",d.Z.deepCopy(n[0]),d.Z.deepCopy(n[0])))));break;case"sinh":s=this.createNode("node_op","op_execfun",this.createNode("node_var","cosh"),[d.Z.deepCopy(n[0])]);break;case"cosh":s=this.createNode("node_op","op_execfun",this.createNode("node_var","sinh"),[d.Z.deepCopy(n[0])]);break;case"tanh":s=this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_exp",this.createNode("node_op","op_execfun",this.createNode("node_var","tanh"),[d.Z.deepCopy(n[0])]),this.createNode("node_const",2)));break;case"asinh":s=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_add",this.createNode("node_op","op_mul",d.Z.deepCopy(n[0]),d.Z.deepCopy(n[0])),this.createNode("node_const",1))]));break;case"acosh":s=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_sub",this.createNode("node_op","op_mul",d.Z.deepCopy(n[0]),d.Z.deepCopy(n[0])),this.createNode("node_const",1))]));break;case"atanh":s=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_mul",d.Z.deepCopy(n[0]),d.Z.deepCopy(n[0]))));break;default:throw s=this.createNode("node_const",0),console.log('Derivative of "'+r+'" not yet implemented'),new Error("Error("+this.line+"): ")}return s},derivative:function(e,t){var r;switch(e.type){case"node_op":switch(e.value){case"op_execfun":r="pow"==e.children[0].value?this.deriveElementary(e,t):0===e.children[1].length?this.createNode("node_const",0):this.createNode("node_op","op_mul",this.deriveElementary(e,t),this.derivative(e.children[1][0],t));break;case"op_div":r=this.createNode("node_op","op_div",this.createNode("node_op","op_sub",this.createNode("node_op","op_mul",this.derivative(e.children[0],t),d.Z.deepCopy(e.children[1])),this.createNode("node_op","op_mul",d.Z.deepCopy(e.children[0]),this.derivative(e.children[1],t))),this.createNode("node_op","op_mul",d.Z.deepCopy(e.children[1]),d.Z.deepCopy(e.children[1])));break;case"op_mul":r=this.createNode("node_op","op_add",this.createNode("node_op","op_mul",d.Z.deepCopy(e.children[0]),this.derivative(e.children[1],t)),this.createNode("node_op","op_mul",this.derivative(e.children[0],t),d.Z.deepCopy(e.children[1])));break;case"op_neg":r=this.createNode("node_op","op_neg",this.derivative(e.children[0],t));break;case"op_add":case"op_sub":r=this.createNode("node_op",e.value,this.derivative(e.children[0],t),this.derivative(e.children[1],t));break;case"op_exp":r=this.createNode("node_op","op_mul",d.Z.deepCopy(e),this.createNode("node_op","op_add",this.createNode("node_op","op_mul",this.derivative(e.children[0],t),this.createNode("node_op","op_div",d.Z.deepCopy(e.children[1]),d.Z.deepCopy(e.children[0]))),this.createNode("node_op","op_mul",this.derivative(e.children[1],t),this.createNode("node_op","op_execfun",this.createNode("node_var","log"),[d.Z.deepCopy(e.children[0])]))))}break;case"node_var":r=this.createNode("node_const",e.value===t?1:0);break;case"node_const":r=this.createNode("node_const",0)}return r},expandDerivatives:function(e,t,r){var n,s,o,a,l,c,h,y,E,w;if(!e)return 0;for(this.line=e.line,this.col=e.col,n=e.children.length,s=0;s<n;++s)if(e.children[s]&&e.children[s].type)e.children[s]=this.expandDerivatives(e.children[s],e,r);else if(d.Z.isArray(e.children[s]))for(o=0;o<e.children[s].length;++o)e.children[s][o]&&e.children[s][o].type&&(e.children[s][o]=this.expandDerivatives(e.children[s][o],e,r));if("node_op"===e.type&&"op_execfun"===e.value&&e.children[0]&&"D"===e.children[0].value){if("node_var"==e.children[1][0].type?(E=(a=this.findMapNode(e.children[1][0].value,r)).children[0],y=e.children[1].length>=2?e.children[1][1].value:a.children[0][0],l=a.children[1]):(l=e.children[1][0],E=["x"],y=e.children[1].length>=2?e.children[1][1].value:"x"),h=l,(w=e.children[1].length>=3?e.children[1][2].value:1)>=1)for(;w>=1;)h=this.derivative(h,y),h=this.removeTrivialNodes(h),w--;c="node_op"==t.type&&"op_assign"==t.value?this.createNode("node_op","op_map",E,h):h,this.setMath(c),e.type=c.type,e.value=c.value,c.children.length>0&&(e.children[0]=c.children[0]),c.children.length>1&&(e.children[1]=c.children[1])}return e},removeTrivialNodes:function(e){var t,r,n,s,o;if(d.Z.isArray(e))for(r=e.length,t=0;t<r;++t)e[t]=this.removeTrivialNodes(e[t]);if("node_op"!=e.type||!e.children)return e;for(r=e.children.length,t=0;t<r;++t){this.mayNotBeSimplified=!1;do{e.children[t]=this.removeTrivialNodes(e.children[t])}while(this.mayNotBeSimplified)}switch(e.value){case"op_map":if(n=e.children[0],"node_var"==(s=e.children[1]).type)for(t=0;t<n.length;++t)if(n[t]==s.value){s.isMath=!0;break}break;case"op_add":if(s=e.children[1],"node_const"==(n=e.children[0]).type&&0===n.value)return s;if("node_const"==s.type&&0===s.value)return n;if("node_const"==n.type&&"node_const"==s.type)return n.value+=s.value,n;break;case"op_mul":if(s=e.children[1],"node_const"==(n=e.children[0]).type&&1==n.value)return s;if("node_const"==s.type&&1==s.value||"node_const"==n.type&&0===n.value)return n;if("node_const"==s.type&&0===s.value||"node_const"==s.type&&0===s.value)return s;if("node_op"==n.type&&"op_neg"==n.value&&"node_op"==s.type&&"op_neg"==s.value)return e.children=[n.children[0],s.children[0]],this.mayNotBeSimplified=!0,e;if("op_neg"==n.value&&"op_neg"!=s.value)return e.type="node_op",e.value="op_neg",e.children=[this.createNode("node_op","op_mul",n.children[0],s)],this.mayNotBeSimplified=!0,e;if("op_neg"!=n.value&&"op_neg"==s.value)return e.type="node_op",e.value="op_neg",e.children=[this.createNode("node_op","op_mul",n,s.children[0])],this.mayNotBeSimplified=!0,e;if("op_div"==n.value&&"node_const"==n.children[0].type&&1==n.children[0].value)return e.type="node_op",e.value="op_div",e.children=[s,n.children[1]],this.mayNotBeSimplified=!0,e;if("op_div"==s.value&&"node_const"==s.children[0].type&&1==s.children[0].value)return e.type="node_op",e.value="op_div",e.children=[n,s.children[1]],this.mayNotBeSimplified=!0,e;if("node_const"!=n.type&&"node_const"==s.type)return e.children=[s,n],this.mayNotBeSimplified=!0,e;if("node_const"!=n.type&&"node_op"==s.type&&"op_neg"==s.value&&"node_const"==s.children[0].type)return e.children=[s,n],this.mayNotBeSimplified=!0,e;if("node_op"==n.type&&"op_execfun"!=n.value&&("node_var"==s.type||"node_op"==s.type&&"op_execfun"==s.value))return e.children=[s,n],this.mayNotBeSimplified=!0,e;if("node_op"!=n.type&&"node_op"==s.type&&"op_neg"==s.value&&"node_var"==s.children[0].type)return e.children=[s,n],this.mayNotBeSimplified=!0,e;if("node_const"!=n.type&&"node_op"==s.type&&("op_mul"==s.value||"op_div"==s.value)&&"node_const"==s.children[0].type)return o=s.children[0],s.children[0]=n,e.children=[o,s],this.mayNotBeSimplified=!0,e;if("node_const"!=s.type&&"node_op"==n.type&&"op_mul"==n.value&&"node_const"==n.children[0].type)return e.children=[n.children[0],this.createNode("node_op","op_mul",n.children[1],s)],this.mayNotBeSimplified=!0,e;if("node_const"==n.type&&"node_const"==s.type)return n.value*=s.value,n;if("node_const"==n.type&&"node_op"==s.type&&("op_mul"==s.value||"op_div"==s.value)&&"node_const"==s.children[0].type)return s.children[0].value*=n.value,s;if(n.hash=this.parser.compile(n),s.hash=this.parser.compile(s),n.hash===s.hash)return e.value="op_exp",e.children[1]=this.createNode("node_const",2),e;if("node_const"==n.type&&"node_op"==s.type&&("op_mul"==s.value||"op_div"==s.value)&&"node_const"==s.children[0].type)return s.children[0].value*=n.value,s;if("node_op"==s.type&&"op_exp"==s.value&&(n.hash||(n.hash=this.parser.compile(n)),s.children[0].hash||(s.children[0].hash=this.parser.compile(s.children[0])),n.hash===s.children[0].hash))return s.children[1]=this.createNode("node_op","op_add",s.children[1],this.createNode("node_const",1)),this.mayNotBeSimplified=!0,s;if("node_op"==n.type&&"op_exp"==n.value&&"node_op"==s.type&&"op_exp"==s.value&&(n.children[0].hash=this.parser.compile(n.children[0]),s.children[0].hash=this.parser.compile(s.children[0]),n.children[0].hash===s.children[0].hash))return n.children[1]=this.createNode("node_op","op_add",n.children[1],s.children[1]),this.mayNotBeSimplified=!0,n;break;case"op_sub":if(s=e.children[1],"node_const"==(n=e.children[0]).type&&0===n.value)return e.value="op_neg",e.children[0]=s,e;if("node_const"==s.type&&0===s.value)return n;if("node_const"==n.type&&"node_const"==s.type&&n.value==s.value)return this.createNode("node_const",0);if("node_var"==n.type&&"node_var"==s.type&&n.value==s.value)return this.createNode("node_const",0);if("node_const"==n.type&&"node_const"==s.type)return n.value-=s.value,n;if("node_op"==n.type&&"op_mul"==n.value&&"node_op"==s.type&&"op_mul"==s.value&&(n.children[1].hash=this.parser.compile(n.children[1]),s.children[1].hash=this.parser.compile(s.children[1]),n.children[1].hash===s.children[1].hash))return e.value="op_mul",e.children=[this.createNode("node_op","op_sub",n.children[0],s.children[0]),n.children[1]],this.mayNotBeSimplified=!0,e;if("node_op"==n.type&&"op_mul"==n.value&&(n.children[1].hash=this.parser.compile(n.children[1]),s.hash=this.parser.compile(s),n.children[1].hash===s.hash))return e.value="op_mul",e.children=[this.createNode("node_op","op_sub",n.children[0],this.createNode("node_const",1)),s],this.mayNotBeSimplified=!0,e;if("node_op"==s.type&&"op_mul"==s.value&&(s.children[1].hash=this.parser.compile(s.children[1]),n.hash=this.parser.compile(n),s.children[1].hash===n.hash))return e.value="op_mul",e.children=[this.createNode("node_op","op_sub",this.createNode("node_const",1),s.children[0]),n],this.mayNotBeSimplified=!0,e;break;case"op_neg":if("node_const"==(n=e.children[0]).type&&0===n.value)return n;if("node_op"==n.type&&"op_neg"==n.value)return n.children[0];break;case"op_div":if(s=e.children[1],"node_const"==(n=e.children[0]).type&&"node_const"==s.type&&n.value==s.value&&0!==n.value)return n.value=1,n;if("node_const"==n.type&&0===n.value&&"node_const"==s.type&&0!==s.value)return n.value=0,n;if("node_const"==n.type&&0===n.value&&("node_op"==s.type||"node_var"==s.type))return e.type="node_const",e.value=0,e;if("node_var"==n.type&&"node_var"==s.type&&n.value==s.value)return this.createNode("node_const",1);if("node_const"==n.type&&0!==n.value&&"node_const"==s.type&&0===s.value)return n.value=n.value>0?1/0:-1/0,n;if("node_op"==n.type&&"op_neg"==n.value&&"node_op"==s.type&&"op_neg"==s.value)return e.children=[n.children[0],s.children[0]],this.mayNotBeSimplified=!0,e;if("op_neg"==n.value&&"op_neg"!=s.value)return e.type="node_op",e.value="op_neg",e.children=[this.createNode("node_op","op_div",n.children[0],s)],this.mayNotBeSimplified=!0,e;if("op_neg"!=n.value&&"op_neg"==s.value)return e.type="node_op",e.value="op_neg",e.children=[this.createNode("node_op","op_div",n,s.children[0])],this.mayNotBeSimplified=!0,e;if("node_op"==n.type&&"op_exp"==n.value&&(s.hash||(s.hash=this.parser.compile(s)),n.children[0].hash||(n.children[0].hash=this.parser.compile(n.children[0])),s.hash===n.children[0].hash))return n.children[1]=this.createNode("node_op","op_sub",n.children[1],this.createNode("node_const",1)),this.mayNotBeSimplified=!0,n;if("node_const"!=s.type&&"node_op"==n.type&&"op_mul"==n.value&&"node_const"==n.children[0].type)return e.value="op_mul",e.children=[n.children[0],this.createNode("node_op","op_div",n.children[1],s)],this.mayNotBeSimplified=!0,e;if("node_op"==n.type&&"op_exp"==n.value&&"node_op"==s.type&&"op_exp"==s.value&&(n.children[0].hash=this.parser.compile(n.children[0]),s.children[0].hash=this.parser.compile(s.children[0]),n.children[0].hash===s.children[0].hash))return n.children[1]=this.createNode("node_op","op_sub",n.children[1],s.children[1]),this.mayNotBeSimplified=!0,n;break;case"op_exp":if(n=e.children[0],"node_const"==(s=e.children[1]).type&&0===s.value)return s.value=1,s;if("node_const"==s.type&&1==s.value||"node_const"==n.type&&1==n.value||"node_const"==n.type&&0===n.value&&"node_const"==s.type&&0!==s.value)return n;if("node_op"==n.type&&"op_exp"==n.value)return e.children=[n.children[0],this.createNode("node_op","op_mul",n.children[1],s)],e}switch(e.value){case"op_add":if(s=e.children[1],"node_const"==(n=e.children[0]).type&&"node_const"==s.type&&n.value==s.value)return n.value+=s.value,n;if("node_var"==n.type&&"node_var"==s.type&&n.value==s.value)return e.children[0]=this.createNode("node_const",2),e.value="op_mul",e;if("node_op"==n.type&&"op_neg"==n.value)return e.value="op_sub",e.children[0]=s,e.children[1]=n.children[0],this.mayNotBeSimplified=!0,e;if("node_op"==s.type&&"op_neg"==s.value)return e.value="op_sub",e.children[1]=s.children[0],this.mayNotBeSimplified=!0,e;if("node_op"==n.type&&"op_mul"==n.value&&"node_op"==s.type&&"op_mul"==s.value&&(n.children[1].hash=this.parser.compile(n.children[1]),s.children[1].hash=this.parser.compile(s.children[1]),n.children[1].hash===s.children[1].hash))return e.value="op_mul",e.children=[this.createNode("node_op","op_add",n.children[0],s.children[0]),n.children[1]],this.mayNotBeSimplified=!0,e;if("node_op"==n.type&&"op_mul"==n.value&&(n.children[1].hash=this.parser.compile(n.children[1]),s.hash=this.parser.compile(s),n.children[1].hash===s.hash))return e.value="op_mul",e.children=[this.createNode("node_op","op_add",n.children[0],this.createNode("node_const",1)),s],this.mayNotBeSimplified=!0,e;if("node_op"==s.type&&"op_mul"==s.value&&(s.children[1].hash=this.parser.compile(s.children[1]),n.hash=this.parser.compile(n),s.children[1].hash===n.hash))return e.value="op_mul",e.children=[this.createNode("node_op","op_add",this.createNode("node_const",1),s.children[0]),n],this.mayNotBeSimplified=!0,e;break;case"op_sub":if(n=e.children[0],"node_op"==(s=e.children[1]).type&&"op_neg"==s.value)return e.value="op_add",e.children[1]=s.children[0],this.mayNotBeSimplified=!0,e;break;case"op_execfun":return this.simplifyElementary(e)}return e},simplifyElementary:function(e){var r=e.children[1];if(0==r.length)return e;switch(e.children[0].value){case"sin":case"tan":if("node_const"==r[0].type&&0===r[0].value||"node_var"==r[0].type&&"PI"==r[0].value||"node_op"==r[0].type&&"op_mul"==r[0].value&&"node_const"==r[0].children[0].type&&r[0].children[0].value%1==0&&"node_var"==r[0].children[1].type&&"PI"==r[0].children[1].value)return e.type="node_const",e.value=0,e;break;case"cos":if("node_const"==r[0].type&&0===r[0].value)return e.type="node_const",e.value=1,e;if("node_var"==r[0].type&&"PI"==r[0].value)return e.type="node_op",e.value="op_neg",e.children=[this.createNode("node_const",1)],e;break;case"exp":if("node_const"==r[0].type&&0===r[0].value)return e.type="node_const",e.value=1,e;break;case"pow":if("node_const"==r[1].type&&0===r[1].value)return e.type="node_const",e.value=1,e}return e}}),D.Z.Dump={addMarkers:function(e,t,r){var n,s,o;for(n in d.Z.isArray(t)||(t=[t]),d.Z.isArray(r)||(r=[r]),s=Math.min(t.length,r.length),t.length=s,r.length=s,e.objects)if(e.objects.hasOwnProperty(n))for(o=0;o<s;o++)e.objects[n][t[o]]=r[o]},deleteMarkers:function(e,t){var r,n,s;for(r in d.Z.isArray(t)||(t=[t]),t.length=n=t.length,e.objects)if(e.objects.hasOwnProperty(r))for(s=0;s<n;s++)delete e.objects[r][t[s]]},str:function(e){return"string"==typeof e&&"function"!==e.substr(0,7)&&(e='"'+e+'"'),e},minimizeObject:function(e,t){var r,n,s,o={},a=d.Z.deepCopy(e),l=[];for(s=1;s<arguments.length;s++)l.push(arguments[s]);for(o=d.Z.deepCopy(o,D.Z.Options.elements,!0),s=l.length;s>0;s--)o=d.Z.deepCopy(o,l[s-1],!0);for(r in o)o.hasOwnProperty(r)&&(n=r.toLowerCase(),"object"!=typeof o[r]&&o[r]===a[n]&&delete a[n]);return a},prepareAttributes:function(e,t){var r,n;for(n in r=this.minimizeObject(t.getAttributes(),D.Z.Options[t.elType]),t.subs)t.subs.hasOwnProperty(n)&&(r[n]=this.minimizeObject(t.subs[n].getAttributes(),D.Z.Options[t.elType][n],D.Z.Options[t.subs[n].elType]),r[n].id=t.subs[n].id,r[n].name=t.subs[n].name);return r.id=t.id,r.name=t.name,r},setBoundingBox:function(e,t,r){return e.push({obj:r,method:"setBoundingBox",params:[t.getBoundingBox(),t.keepaspectratio]}),e},dump:function(e){var t,r,n,s,o=[],l=[],u=e.objectsList.length;for(this.addMarkers(e,"dumped",!1),t=0;t<u;t++)if(n={},!(r=e.objectsList[t]).dumped&&r.dump){for(n.type=r.getType(),n.parents=r.getParents().slice(),"point"===n.type&&1===n.parents[0]&&(n.parents=n.parents.slice(1)),s=0;s<n.parents.length;s++)d.Z.isString(n.parents[s])&&"'"!==n.parents[s][0]&&'"'!==n.parents[s][0]?n.parents[s]='"'+n.parents[s]+'"':d.Z.isArray(n.parents[s])&&(n.parents[s]="["+n.parents[s].toString()+"]");n.attributes=this.prepareAttributes(e,r),"glider"===n.type&&r.onPolygon&&o.push({obj:r.id,prop:"onPolygon",val:!0}),l.push(n)}return this.deleteMarkers(e,"dumped"),{elements:l,props:o,methods:[]}},arrayToParamStr:function(e,t){var r,n=[];for(r=0;r<e.length;r++)n.push(t.call(this,e[r]));return n.join(", ")},toJCAN:function(e){var t,r,n;switch(typeof e){case"object":if(e){if(r=[],d.Z.isArray(e)){for(t=0;t<e.length;t++)r.push(this.toJCAN(e[t]));return"["+r.join(",")+"]"}for(n in e)e.hasOwnProperty(n)&&r.push(n+": "+this.toJCAN(e[n]));return"<<"+r.join(", ")+">> "}return"null";case"string":return"'"+e.replace(/\\/g,"\\\\").replace(/(["'])/g,"\\$1")+"'";case"number":case"boolean":return e.toString();case"null":return"null"}},toJessie:function(e){var t,r,s=this.dump(e),o=[];for(s.methods=this.setBoundingBox(s.methods,e,"$board"),r=s.elements,t=0;t<r.length;t++)r[t].attributes.name.length>0&&o.push("// "+r[t].attributes.name),o.push("s"+t+" = "+r[t].type+"("+r[t].parents.join(", ")+") "+this.toJCAN(r[t].attributes).replace(/\n/,"\\n")+";"),"axis"===r[t].type&&null===e.objects[r[t].attributes.id].defaultTicks&&o.push("s"+t+".removeAllTicks();"),o.push("");for(t=0;t<s.methods.length;t++)o.push(s.methods[t].obj+"."+s.methods[t].method+"("+this.arrayToParamStr(s.methods[t].params,this.toJCAN)+");"),o.push("");for(t=0;t<s.props.length;t++)o.push(s.props[t].obj+"."+s.props[t].prop+" = "+this.toJCAN(s.props[t].val)+";"),o.push("");return o.join("\n")},toJavaScript:function(e){var t,r,n,s=this.dump(e),o=[];for(s.methods=this.setBoundingBox(s.methods,e,"board"),r=s.elements,t=0;t<r.length;t++)o.push('board.create("'+r[t].type+'", ['+r[t].parents.join(", ")+"], "+d.Z.toJSON(r[t].attributes)+");"),"axis"===r[t].type&&null===e.objects[n=r[t].attributes.id].defaultTicks&&o.push('board.objects["'+n+'"].removeTicks(board.objects["'+n+'"].defaultTicks);');for(t=0;t<s.methods.length;t++)o.push(s.methods[t].obj+"."+s.methods[t].method+"("+this.arrayToParamStr(s.methods[t].params,d.Z.toJSON)+");"),o.push("");for(t=0;t<s.props.length;t++)o.push(s.props[t].obj+"."+s.props[t].prop+" = "+d.Z.toJSON(s.props[t].val)+";"),o.push("");return o.join("\n")}},D.Z.createComb=function(e,t,r){var n,s,o,a,l;if(2!==t.length)throw l=t.map(function(u){return"'"+typeof u+"'"}),new Error("JSXGraph: Can't create comb with parent types "+l.join(", ")+".\nPossible parent types: [point,point], [[x1,y1],[x2,y2]]");if(d.Z.isArray(t[0])&&t[0].length>1)a=d.Z.copyAttributes(r,e.options,"comb","point1"),n=e.create("point",t[0],a);else if(d.Z.isString(t[0])||d.Z.isPoint(t[0]))n=e.select(t[0]);else if(d.Z.isFunction(t[0])&&d.Z.isPoint(t[0]()))n=t[0]();else{if(!(d.Z.isFunction(t[0])&&t[0]().length&&t[0]().length>=2))throw new Error("JSXGraph: Can't create comb with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]]");a=d.Z.copyAttributes(r,e.options,"comb","point1"),n=D.Z.createPoint(e,t[0](),a)}if(d.Z.isArray(t[1])&&t[1].length>1)a=d.Z.copyAttributes(r,e.options,"comb","point2"),s=e.create("point",t[1],a);else if(d.Z.isString(t[1])||d.Z.isPoint(t[1]))s=e.select(t[1]);else if(d.Z.isFunction(t[1])&&d.Z.isPoint(t[1]()))s=t[1]();else{if(!(d.Z.isFunction(t[1])&&t[1]().length&&t[1]().length>=2))throw new Error("JSXGraph: Can't create comb with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]]");a=d.Z.copyAttributes(r,e.options,"comb","point2"),s=D.Z.createPoint(e,t[1](),a)}return a=d.Z.copyAttributes(r,e.options,"comb"),(o=e.create("curve",[[0],[0]],a)).updateDataArray=function(){var h,g,y,E,w,T,N,H,V,U,u=0,c=n.Dist(s),L=n,R=s;for(H=d.Z.evaluate(o.visProp.frequency),V=-d.Z.evaluate(o.visProp.angle),U=d.Z.evaluate(o.visProp.width),d.Z.evaluate(o.visProp.reverse)&&(L=s,R=n,V=-V),h=Math.cos(V),g=Math.sin(V),y=(R.X()-L.X())/c,E=(R.Y()-L.Y())/c,h*=U/Math.abs(g),g*=U/Math.abs(g),this.dataX=[],this.dataY=[];u<c;)w=L.X()+y*u,T=L.Y()+E*u,g*=N=Math.min(h,c-u)/Math.abs(h),h*=N,this.dataX.push(w),this.dataY.push(T),this.dataX.push(w+y*h+E*g),this.dataY.push(T-y*g+E*h),this.dataX.push(NaN),this.dataY.push(NaN),u+=H},o},D.Z.registerElement("comb",D.Z.createComb);var Ub_removeSlopeTriangle=function(){SR.prototype.remove.call(this),this.board.removeObject(this.toppoint),this.board.removeObject(this.glider),this.board.removeObject(this.baseline),this.board.removeObject(this.basepoint),this.board.removeObject(this.label),this._isPrivateTangent&&this.board.removeObject(this.tangent)},Ub_Value=function(){return this.tangent.getSlope()};D.Z.createSlopeTriangle=function(e,t,r){var n,s,o,a,l,u,c,h,g,y=!1;if(1===t.length&&t[0].type===Y.Z.OBJECT_TYPE_TANGENT)o=(s=t[0]).glider;else if(1===t.length&&t[0].type===Y.Z.OBJECT_TYPE_GLIDER)o=t[0],g=d.Z.copyAttributes(r,e.options,"slopetriangle","tangent"),s=e.create("tangent",[o],g),y=!0;else{if(2!==t.length||t[0].elementClass!==Y.Z.OBJECT_CLASS_LINE||!d.Z.isPoint(t[1]))throw new Error("JSXGraph: Can't create slope triangle with parent types '"+typeof t[0]+"'.");s=t[0],o=t[1]}return g=d.Z.copyAttributes(r,e.options,"slopetriangle","basepoint"),c=e.create("point",[function(){return[o.X()+1,o.Y()]}],g),g=d.Z.copyAttributes(r,e.options,"slopetriangle","baseline"),u=e.create("line",[o,c],g),g=d.Z.copyAttributes(r,e.options,"slopetriangle","glider"),a=e.create("glider",[o.X()+1,o.Y(),u],g),g=d.Z.copyAttributes(r,e.options,"slopetriangle","toppoint"),l=e.create("point",[function(){return[a.X(),a.Y()+(a.X()-o.X())*s.getSlope()]}],g),(g=d.Z.copyAttributes(r,e.options,"slopetriangle")).borders=d.Z.copyAttributes(g.borders,e.options,"slopetriangle","borders"),(n=e.create("polygon",[o,a,l],g)).Value=Ub_Value,n.tangent=s,n._isPrivateTangent=y,n.borders[2].setArrow(!1,!1),g=d.Z.copyAttributes(r,e.options,"slopetriangle","label"),(h=e.create("text",[function(){return a.X()+.1},function(){return.5*(a.Y()+l.Y())},function(){return""}],g))._setText(function(){var E=d.Z.evaluate(h.visProp.digits);return h.useLocale()?h.formatNumberLocale(n.Value(),E):d.Z.toFixed(n.Value(),E)}),h.fullUpdate(),n.glider=a,n.basepoint=c,n.baseline=u,n.toppoint=l,n.label=h,n.subs={glider:a,basePoint:c,baseLine:u,topPoint:l,label:h},n.inherits.push(a,c,u,l,h),n.methodMap=D.Z.deepCopy(n.methodMap,{tangent:"tangent",glider:"glider",basepoint:"basepoint",baseline:"baseline",toppoint:"toppoint",label:"label",Value:"Value",V:"Value"}),n.remove=Ub_removeSlopeTriangle,n},D.Z.registerElement("slopetriangle",D.Z.createSlopeTriangle);var xR_CheckboxChangeEventHandler=function(){this._value=this.rendNodeCheckbox.checked,this.board.update()};D.Z.createCheckbox=function(e,t,r){var n,o=d.Z.copyAttributes(r,e.options,"checkbox");return(n=e.create("text",[t[0],t[1],'<span style="display:inline"><input type="checkbox" /><label for=""></label></span>'],o)).type=d.Z.OBJECT_TYPE_CHECKBOX,n.rendNodeCheckbox=n.rendNode.childNodes[0].childNodes[0],n.rendNodeLabel=n.rendNode.childNodes[0].childNodes[1],n.rendNodeTag=n.rendNodeCheckbox,n.rendNodeTag.disabled=!!o.disabled,n.rendNodeCheckbox.id=n.rendNode.id+"_checkbox",n.rendNodeLabel.id=n.rendNode.id+"_label",n.rendNodeLabel.setAttribute("for",n.rendNodeCheckbox.id),n.setText(t[2]),n.visPropOld.fontsize="0px",e.renderer.updateTextStyle(n,!1),n.rendNodeCheckbox.checked=o.checked,n._value=o.checked,n.Value=function(){return this._value},n.update=function(){return this.needsUpdate&&(D.Z.Text.prototype.update.call(this),this._value=this.rendNodeCheckbox.checked),this},le.Z.addEvent(n.rendNodeCheckbox,"change",xR_CheckboxChangeEventHandler,n),n},D.Z.registerElement("checkbox",D.Z.createCheckbox);var TR_InputInputEventHandler=function(e){this._value=this.rendNodeInput.value,this.board.update()};D.Z.createInput=function(e,t,r){var n,o=d.Z.copyAttributes(r,e.options,"input");return(n=e.create("text",[t[0],t[1],'<span style="display:inline; white-space:nowrap; padding:0px;"><span></span><input type="text" maxlength="'+o.maxlength+'" style="width:100%"/></span>'],o)).type=d.Z.OBJECT_TYPE_INPUT,n.rendNodeLabel=n.rendNode.childNodes[0].childNodes[0],n.rendNodeInput=n.rendNode.childNodes[0].childNodes[1],n.rendNodeInput.value=t[2],n.rendNodeTag=n.rendNodeInput,n.rendNodeTag.disabled=!!o.disabled,n.rendNodeLabel.id=n.rendNode.id+"_label",n.rendNodeInput.id=n.rendNode.id+"_input",n.setText(t[3]),n._value=t[2],n.update=function(){return this.needsUpdate&&(D.Z.Text.prototype.update.call(this),this._value=this.rendNodeInput.value),this},n.Value=function(){return this._value},n.set=function(a){return this._value=a,this.rendNodeInput.value=a,this},le.Z.addEvent(n.rendNodeInput,"input",TR_InputInputEventHandler,n),le.Z.addEvent(n.rendNodeInput,"mousedown",function(a){d.Z.exists(a.stopPropagation)&&a.stopPropagation()},n),le.Z.addEvent(n.rendNodeInput,"touchstart",function(a){d.Z.exists(a.stopPropagation)&&a.stopPropagation()},n),le.Z.addEvent(n.rendNodeInput,"pointerdown",function(a){d.Z.exists(a.stopPropagation)&&a.stopPropagation()},n),n.visPropOld.fontsize="0px",e.renderer.updateTextStyle(n,!1),n},D.Z.registerElement("input",D.Z.createInput);var AR_ButtonClickEventHandler=function(){this._handler&&this._handler(),this.board.update()};D.Z.createButton=function(e,t,r){var n,o=d.Z.copyAttributes(r,e.options,"button");return(n=e.create("text",[t[0],t[1],'<button type="button" style="width:100%;"></button>'],o)).type=d.Z.OBJECT_TYPE_BUTTON,n.rendNodeButton=n.rendNode.childNodes[0],n.rendNodeButton.id=n.rendNode.id+"_button",n.rendNodeTag=n.rendNodeButton,n.rendNodeTag.disabled=!!o.disabled,n.setText(t[2]),n.visPropOld.fontsize="0px",e.renderer.updateTextStyle(n,!1),t[3]&&(d.Z.isString(t[3])?(n._jc=new D.Z.JessieCode,n._jc.use(e),n._handler=function(){n._jc.parse(t[3])}):n._handler=t[3]),le.Z.addEvent(n.rendNodeButton,"click",AR_ButtonClickEventHandler,n),le.Z.addEvent(n.rendNodeButton,"mousedown",function(a){d.Z.exists(a.stopPropagation)&&a.stopPropagation()},n),le.Z.addEvent(n.rendNodeButton,"touchstart",function(a){d.Z.exists(a.stopPropagation)&&a.stopPropagation()},n),le.Z.addEvent(n.rendNodeButton,"pointerdown",function(a){d.Z.exists(a.stopPropagation)&&a.stopPropagation()},n),n},D.Z.registerElement("button",D.Z.createButton),D.Z.createVectorField=function(e,t,r){var n,s;if(!(t.length>=3&&(d.Z.isArray(t[0])||d.Z.isFunction(t[0])||d.Z.isString(t[0]))&&d.Z.isArray(t[1])&&3===t[1].length&&d.Z.isArray(t[2])&&3===t[2].length))throw new Error("JSXGraph: Can't create vector field with parent types '"+typeof t[0]+"', '"+typeof t[1]+"', '"+typeof t[2]+"'.");return s=d.Z.copyAttributes(r,e.options,"vectorfield"),(n=e.create("curve",[[],[]],s)).elType="vectorfield",n.setF=function(o,a){var l,u;return d.Z.isArray(o)?(l=d.Z.createFunction(o[0],this.board,a),u=d.Z.createFunction(o[1],this.board,a),this.F=function(c,h){return[l(c,h),u(c,h)]}):this.F=d.Z.createFunction(o,n.board,a),this},n.setF(t[0],"x, y"),n.xData=t[1],n.yData=t[2],n.updateDataArray=function(){var o,a,l,u,R,H,V,U,Q,te,ne,ce,he,c=d.Z.evaluate(this.visProp.scale),h=d.Z.evaluate(this.xData[0]),g=d.Z.evaluate(this.xData[1]),E=(d.Z.evaluate(this.xData[2])-h)/g,w=d.Z.evaluate(this.yData[0]),T=d.Z.evaluate(this.yData[1]),L=(d.Z.evaluate(this.yData[2])-w)/T,oe=d.Z.evaluate(this.visProp.arrowhead.enabled);for(oe&&(ne=(te=d.Z.evaluate(this.visProp.arrowhead.size))/e.unitX,ce=te/e.unitY,he=d.Z.evaluate(this.visProp.arrowhead.angle)),this.dataX=[],this.dataY=[],l=0,o=h;l<=g;o+=E,l++)for(u=0,a=w;u<=T;a+=L,u++)R=(V=this.F(o,a))[0]*c,H=V[1]*c,this.dataX.push(o),this.dataY.push(a),this.dataX.push(o+R),this.dataY.push(a+H),oe&&Math.abs(R)+Math.abs(H)>0&&(Q=(U=Math.atan2(H,R))+he,this.dataX.push(o+R-Math.cos(Q)*ne),this.dataY.push(a+H-Math.sin(Q)*ce),this.dataX.push(o+R),this.dataY.push(a+H),Q=U-he,this.dataX.push(o+R-Math.cos(Q)*ne),this.dataY.push(a+H-Math.sin(Q)*ce)),this.dataX.push(NaN),this.dataY.push(NaN)},n.methodMap=d.Z.deepCopy(n.methodMap,{setF:"setF"}),n},D.Z.registerElement("vectorfield",D.Z.createVectorField),D.Z.createSlopeField=function(e,t,r){var n,s,o;if(!(t.length>=3&&(d.Z.isFunction(t[0])||d.Z.isString(t[0]))&&d.Z.isArray(t[1])&&3===t[1].length&&d.Z.isArray(t[2])&&3===t[2].length))throw new Error("JSXGraph: Can't create slope field with parent types '"+typeof t[0]+"', '"+typeof t[1]+"', '"+typeof t[2]+"'.");return s=d.Z.createFunction(t[0],e,"x, y"),t[0]=function(a,l){var u=s(a,l),c=Math.sqrt(1+u*u);return[1/c,u/c]},o=d.Z.copyAttributes(r,e.options,"slopefield"),(n=e.create("vectorfield",t,o)).elType="slopefield",n.setF=function(a,l){var u=d.Z.createFunction(a,n.board,l);this.F=function(c,h){var g=u(c,h),y=Math.sqrt(1+g*g);return[1/y,g/y]}},n.methodMap=d.Z.deepCopy(n.methodMap,{setF:"setF"}),n},D.Z.registerElement("slopefield",D.Z.createSlopeField),D.Z.createSmartLabel=function(e,t,r){var n,s,o,a,l,u;if(0===t.length||[Y.Z.OBJECT_CLASS_POINT,Y.Z.OBJECT_CLASS_LINE,Y.Z.OBJECT_CLASS_CIRCLE].indexOf(t[0].elementClass)<0&&[Y.Z.OBJECT_TYPE_POLYGON,Y.Z.OBJECT_TYPE_ANGLE].indexOf(t[0].type)<0)throw new Error("JSXGraph: Can't create smartlabel with parent types '"+typeof t[0]+"', '"+typeof t[1]+"'.");return a=t[1]||"",(o=t[0]).elementClass===Y.Z.OBJECT_CLASS_POINT?s=d.Z.copyAttributes(r,e.options,"smartlabelpoint"):o.elementClass===Y.Z.OBJECT_CLASS_LINE?((s=d.Z.copyAttributes(r,e.options,"smartlabelline")).rotate=function(){return 180*Math.atan(o.getSlope())/Math.PI},s.visible=function(){return!(o.L()<1.5)}):o.elementClass===Y.Z.OBJECT_CLASS_CIRCLE?(s=d.Z.copyAttributes(r,e.options,"smartlabelcircle")).visible=function(){return!(o.Radius()<1.5)}:o.type===Y.Z.OBJECT_TYPE_POLYGON?s=d.Z.copyAttributes(r,e.options,"smartlabelpolygon"):o.type===Y.Z.OBJECT_TYPE_ANGLE&&((s=d.Z.copyAttributes(r,e.options,"smartlabelangle")).rotate=function(){var c=o.center.coords.usrCoords,h=o.getLabelAnchor().usrCoords,g=180*Math.atan2(h[2]-c[2],h[1]-c[1])/Math.PI;return g>90&&g<270?g+180:g},s.anchorX=function(){var c=o.center.coords.usrCoords,h=o.getLabelAnchor().usrCoords,g=180*Math.atan2(h[2]-c[2],h[1]-c[1])/Math.PI;return g>90&&g<270?"right":"left"}),l=function(c,h,g,y){var E;switch(y){case"length":E=function(){return h.L()};break;case"slope":E=function(){return h.Slope()};break;case"area":E=function(){return h.Area()};break;case"radius":E=function(){return h.Radius()};break;case"perimeter":E=function(){return h.Perimeter()};break;case"rad":E=function(){return h.Value()};break;case"deg":E=function(){return 180*h.Value()/Math.PI};break;default:E=function(){return 0}}return function(){var T,w="",N=d.Z.evaluate(a),L=d.Z.evaluate(c.visProp.digits),R=d.Z.evaluate(c.visProp.unit),H=d.Z.evaluate(c.visProp.prefix),V=d.Z.evaluate(c.visProp.suffix),U=d.Z.evaluate(c.visProp.usemathjax)||d.Z.evaluate(c.visProp.usekatex);return""===N?(T=c.useLocale()?c.formatNumberLocale(E(),L):d.Z.toFixed(E(),L),w=U?["\\(",H,T,"\\,",R,V,"\\)"].join(""):[H,T,R,V].join("")):w=N,w}},o.elementClass===Y.Z.OBJECT_CLASS_POINT?(n=e.create("text",[function(){return o.X()},function(){return o.Y()},""],s),u=function(){var L,R,c="",h=d.Z.evaluate(a),g=d.Z.evaluate(n.visProp.digits),y=d.Z.evaluate(n.visProp.unit),E=d.Z.evaluate(n.visProp.prefix),w=d.Z.evaluate(n.visProp.suffix),T=d.Z.evaluate(n.visProp.dir),N=d.Z.evaluate(n.visProp.usemathjax)||d.Z.evaluate(n.visProp.usekatex);return n.useLocale()?(L=n.formatNumberLocale(o.X(),g),R=n.formatNumberLocale(o.Y(),g)):(L=d.Z.toFixed(o.X(),g),R=d.Z.toFixed(o.Y(),g)),""===h?"row"===T?c=N?["\\(",E,L,"\\,",y," / ",R,"\\,",y,w,"\\)"].join(""):[E,L," ",y," / ",R," ",y,w].join(""):0===T.indexOf("col")&&(c=N?["\\(",E,"\\left(\\array{",L,"\\,",y,"\\\\ ",R,"\\,",y,"}\\right)",w,"\\)"].join(""):[E,L," ",y,"<br/>",R," ",y,w].join("")):c=h,c}):o.elementClass===Y.Z.OBJECT_CLASS_LINE?"length"===s.measure?u=l(n=e.create("text",[function(){return.5*(o.point1.X()+o.point2.X())},function(){return.5*(o.point1.Y()+o.point2.Y())},""],s),o,0,"length"):"slope"===s.measure&&(u=l(n=e.create("text",[function(){return.25*o.point1.X()+.75*o.point2.X()},function(){return.25*o.point1.Y()+.75*o.point2.Y()},""],s),o,0,"slope")):o.elementClass===Y.Z.OBJECT_CLASS_CIRCLE?"radius"===s.measure?u=l(n=e.create("text",[function(){return o.center.X()+.5*o.Radius()},function(){return o.center.Y()},""],s),o,0,"radius"):"area"===s.measure?u=l(n=e.create("text",[function(){return o.center.X()},function(){return o.center.Y()+.5*o.Radius()},""],s),o,0,"area"):("circumference"===s.measure||"perimeter"===s.measure)&&(u=l(n=e.create("text",[function(){return o.getLabelAnchor()},""],s),o,0,"perimeter")):o.type===Y.Z.OBJECT_TYPE_POLYGON?"area"===s.measure?u=l(n=e.create("text",[function(){return o.getTextAnchor()},""],s),o,0,"area"):"perimeter"===s.measure&&(u=l(n=e.create("text",[function(){var c=o.borders.length-1;return c>=0?[.5*(o.borders[c].point1.X()+o.borders[c].point2.X()),.5*(o.borders[c].point1.Y()+o.borders[c].point2.Y())]:o.getTextAnchor()},""],s),o,0,"perimeter")):o.type===Y.Z.OBJECT_TYPE_ANGLE&&(u=l(n=e.create("text",[function(){return o.getLabelAnchor()},""],s),o,0,s.measure)),d.Z.exists(n)&&(n.setText(u),o.addChild(n),n.setParents([o])),n},D.Z.registerElement("smartlabel",D.Z.createSmartLabel),D.Z.ForeignObject=function(e,t,r,n,s){this.constructor(e,r,Y.Z.OBJECT_TYPE_FOREIGNOBJECT,Y.Z.OBJECT_CLASS_OTHER),this.element=this.board.select(r.anchor),this.coordsConstructor(t),this._useUserSize=!1,this.size=[1,1],d.Z.exists(s)&&s.length>0&&(this._useUserSize=!0,this.W=d.Z.createFunction(s[0],this.board,""),this.H=d.Z.createFunction(s[1],this.board,""),this.addParentsFromJCFunctions([this.W,this.H]),this.usrSize=[this.W(),this.H()]),this.content=n,this.elType="foreignobject",this.id=this.board.setId(this,"Im"),this.board.renderer.drawForeignObject(this),this.board.finalizeAdding(this),this.methodMap=D.Z.deepCopy(this.methodMap,{addTransformation:"addTransform",trans:"addTransform"})},D.Z.ForeignObject.prototype=new vi.Z,d.Z.copyPrototypeMethods(D.Z.ForeignObject,uo.Z,"coordsConstructor"),D.Z.extend(D.Z.ForeignObject.prototype,{hasPoint:function(e,t){var r,n,s,a,l,u,c,h,g=this.transformations.length;return a=d.Z.isObject(d.Z.evaluate(this.visProp.precision))?d.Z.evaluate(this.visProp.precision[this.board._inputDevice]):this.board.options.precision.hasPoint,0===g?(n=this.coords.scrCoords[2]-t,(r=e-this.coords.scrCoords[1])>=-(s=a)&&r-this.size[0]<=s&&n>=-s&&n-this.size[1]<=s):(l=new ge.Z(Y.Z.COORDS_BY_SCREEN,[e,t],this.board),0<=(c=(h=q.Z.innerProduct)(u=[(l=l.usrCoords)[0]-this.span[0][0],l[1]-this.span[0][1],l[2]-this.span[0][2]],this.span[1]))&&c<=h(this.span[1],this.span[1])&&0<=(c=h(u,this.span[2]))&&c<=h(this.span[2],this.span[2]))},update:function(e){return this.needsUpdate?(this.updateCoords(e),this.updateSize(),this):this},updateRenderer:function(){return this.updateRendererGeneric("updateForeignObject")},updateSize:function(){var e=[0,0];return this._useUserSize?(this.usrSize=[this.W(),this.H()],this.size=[Math.abs(this.usrSize[0]*this.board.unitX),Math.abs(this.usrSize[1]*this.board.unitY)]):this.rendNode.hasChildNodes()&&(e=this.rendNode.childNodes[0].getBoundingClientRect(),this.size=[e.width,e.height]),this},updateSpan:function(){var e,t,r=this.transformations.length,n=[];if(0===r)this.span=[[this.Z(),this.X(),this.Y()],[this.Z(),this.W(),0],[this.Z(),0,this.H()]];else{for(n[0]=[this.Z(),this.X(),this.Y()],n[1]=[this.Z(),this.X()+this.W(),this.Y()],n[2]=[this.Z(),this.X(),this.Y()+this.H()],e=0;e<r;e++)for(t=0;t<3;t++)n[t]=q.Z.matVecMult(this.transformations[e].matrix,n[t]);for(t=0;t<3;t++)n[t][1]/=n[t][0],n[t][2]/=n[t][0],n[t][0]/=n[t][0];for(t=1;t<3;t++)n[t][0]-=n[0][0],n[t][1]-=n[0][1],n[t][2]-=n[0][2];this.span=n}return this},addTransform:function(e){var t;if(d.Z.isArray(e))for(t=0;t<e.length;t++)this.transformations.push(e[t]);else this.transformations.push(e);return this},getParents:function(){var e=[this.url,[this.Z(),this.X(),this.Y()],this.usrSize];return 0!==this.parents.length&&(e=this.parents),e},setSize:function(e,t){return this.W=d.Z.createFunction(e,this.board,""),this.H=d.Z.createFunction(t,this.board,""),this._useUserSize=!0,this.addParentsFromJCFunctions([this.W,this.H]),this},W:function(){},H:function(){}}),D.Z.createForeignObject=function(e,t,r){var n,s,o=t[0],a=t[1],l=[];if(t.length>=2&&(l=t[2]),n=d.Z.copyAttributes(r,e.options,"foreignobject"),!(s=uo.Z.create(D.Z.ForeignObject,e,a,n,o,l)))throw new Error("JSXGraph: Can't create foreignObject with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [string, [x, y], [w, h]], [string, [x, y]], [element,transformation]");return s},D.Z.registerElement("foreignobject",D.Z.createForeignObject),D.Z.registerElement("fo",D.Z.createForeignObject),D.Z.extend(Rt.Z,{axes3d:{axesPosition:"center",xAxis:{visible:!0,point2:{name:"x"}},yAxis:{visible:!0,point2:{name:"y"}},zAxis:{visible:!0,point2:{name:"z"}},xPlaneRear:{visible:!0,layer:0,mesh3d:{layer:1}},yPlaneRear:{visible:!0,layer:0,mesh3d:{layer:1}},zPlaneRear:{visible:!0,layer:0,mesh3d:{layer:1}},xPlaneFront:{visible:!1,layer:0,mesh3d:{layer:1}},yPlaneFront:{visible:!1,layer:0,mesh3d:{layer:1}},zPlaneFront:{visible:!1,layer:0,mesh3d:{layer:1}},xPlaneRearYAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},xPlaneRearZAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},xPlaneFrontYAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},xPlaneFrontZAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},yPlaneRearXAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},yPlaneRearZAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},yPlaneFrontXAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},yPlaneFrontZAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},zPlaneRearXAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},zPlaneRearYAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},zPlaneFrontXAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},zPlaneFrontYAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1}},axis3d:{highlight:!1,strokecolor:"black",strokeWidth:1,tabindex:null,point1:{visible:!1,name:""},point2:{visible:!1,name:"",label:{visible:!0}}},curve3d:{highlight:!1,tabindex:-1,strokeWidth:1,numberPointsHigh:200},mesh3d:{strokeWidth:1,strokeColor:"#9a9a9a",strokeOpacity:.6,highlight:!1,fillColor:"#9a9a9a",fillOpacity:.1,tabindex:null,visible:"inherit"},line3d:{strokeWidth:1,strokeColor:"black",fixed:!0,tabindex:null,gradient:"linear",gradientSecondColor:"#ffffff",point:{visible:!1,name:""},point1:{visible:!1,name:""},point2:{visible:!1,name:""}},plane3d:{strokeWidth:0,strokeColor:"black",strokeOpacity:1,highlight:!1,tabindex:null,gradient:"linear",gradientSecondColor:"#ffffff",gradientAngle:Math.PI,fillColor:"#a7a7a7",fillOpacity:.6,point:{visible:!1,name:"",fixed:!0}},point3d:{infoboxDigits:"auto",strokeWidth:0,gradient:"radial",gradientSecondColor:"#555555",fillColor:"yellow",highlightStrokeColor:"#555555"},surface3d:{highlight:!1,tabindex:-1,strokeWidth:1,stepsU:30,stepsV:30},view3d:{needsRegularUpdate:!0,verticalDrag:{enabled:!0,key:"shift"}}}),D.Z.View3D=function(e,t,r){this.constructor(e,r,Y.Z.OBJECT_TYPE_VIEW3D,Y.Z.OBJECT_CLASS_3D),this.objects={},this.elementsByName={},this.defaultAxes=null,this.matrix3D=[[1,0,0,0],[0,1,0,0],[0,0,1,0]],this.llftCorner=t[0],this.size=t[1],this.bbox3D=t[2],this.r=-1,this.timeoutAzimuth=null,this.id=this.board.setId(this,"V"),this.board.finalizeAdding(this),this.elType="view3d",this.methodMap=d.Z.deepCopy(this.methodMap,{})},D.Z.View3D.prototype=new vi.Z,D.Z.extend(D.Z.View3D.prototype,{create:function(e,t,r){var n=[];return e.indexOf("3d")>0&&n.push(this),this.board.create(e,n.concat(t),r)},select:function(e,t){var r,n,s,o,a=e;if(null===a)return a;if(d.Z.isString(a)&&""!==a)d.Z.exists(this.objects[a])?a=this.objects[a]:d.Z.exists(this.elementsByName[a])&&(a=this.elementsByName[a]);else if(!t&&(d.Z.isFunction(a)||d.Z.isObject(a)&&!d.Z.isFunction(a.setAttribute))){for(n={},o=(r=d.Z.filterElements(this.objectsList,a)).length,s=0;s<o;s++)n[r[s].id]=r[s];a=new Sp(n)}else d.Z.isObject(a)&&d.Z.exists(a.id)&&!d.Z.exists(this.objects[a.id])&&(a=null);return a},update:function(){var e,t,r,n,s,o;return d.Z.exists(this.el_slide)&&d.Z.exists(this.az_slide)&&this.needsUpdate?(e=this.el_slide.Value(),t=this.r,r=this.az_slide.Value(),n=t*Math.sin(e),s=[[1,0,0],[0,1,0],[0,0,1]],o=[[1,0,0,0],[-.5*(this.bbox3D[0][0]+this.bbox3D[0][1]),1,0,0],[-.5*(this.bbox3D[1][0]+this.bbox3D[1][1]),0,1,0],[-.5*(this.bbox3D[2][0]+this.bbox3D[2][1]),0,0,1]],this.matrix3D=[[1,0,0,0],[0,1,0,0],[0,0,1,0]],this.matrix3D[1][1]=t*Math.cos(r),this.matrix3D[1][2]=-t*Math.sin(r),this.matrix3D[2][1]=n*Math.sin(r),this.matrix3D[2][2]=n*Math.cos(r),this.matrix3D[2][3]=Math.cos(e),s[1][1]=this.size[0]/(this.bbox3D[0][1]-this.bbox3D[0][0]),s[2][2]=this.size[1]/(this.bbox3D[1][1]-this.bbox3D[1][0]),s[1][0]=this.llftCorner[0]+.5*s[1][1]*(this.bbox3D[0][1]-this.bbox3D[0][0]),s[2][0]=this.llftCorner[1]+.5*s[2][2]*(this.bbox3D[1][1]-this.bbox3D[1][0]),this.matrix3D=q.Z.matMatMult(s,q.Z.matMatMult(this.matrix3D,o)),this):this},updateRenderer:function(){return this.needsUpdate=!1,this},removeObject:function(e,t){var r;if(d.Z.isArray(e)){for(r=0;r<e.length;r++)this.removeObject(e[r]);return this}if(e=this.select(e),!d.Z.exists(e)||d.Z.isString(e))return this;try{delete this.objects[e.id]}catch(n){D.Z.debug("View3D "+e.id+": Could not be removed: "+n)}return this.board.removeObject(e,t),this},project3DTo2D:function(e,t,r){var n;return n=3===arguments.length?[1,e,t,r]:3===e.length?[1].concat(e):e,q.Z.matVecMult(this.matrix3D,n)},project2DTo3DPlane:function(e,t,r){var n,s,o,a,l=t.slice(1),u=[1,0,0,0];r=r||[1,0,0,0],a=q.Z.norm(l,3),o=q.Z.innerProduct(r.slice(1),l,3)/a,(n=this.matrix3D.slice(0,3)).push([0].concat(l)),s=e.coords.usrCoords.concat([o]);try{1===n[2][3]&&(n[2][1]=n[2][2]=.001*q.Z.eps),u=q.Z.Numerics.Gauss(n,s)}catch{u=[0,NaN,NaN,NaN]}return u},project2DTo3DVertical:function(e,t){var r=this.matrix3D[2],n=r[3],s=e.coords.usrCoords[2];return s-=r[0]*r[0]+r[1]*t[1]+r[2]*t[2],Math.abs(n)<q.Z.eps?t:t.slice(0,3).concat([s/n])},project3DToCube:function(e){var t=this.bbox3D;return e[1]<t[0][0]&&(e[1]=t[0][0]),e[1]>t[0][1]&&(e[1]=t[0][1]),e[2]<t[1][0]&&(e[2]=t[1][0]),e[2]>t[1][1]&&(e[2]=t[1][1]),e[3]<t[2][0]&&(e[3]=t[2][0]),e[3]>t[2][1]&&(e[3]=t[2][1]),e},intersectionLineCube:function(e,t,r){var n,s,o,a;for(n=r,s=0;s<3;s++)0!==t[s]&&(o=(this.bbox3D[s][0]-e[s])/t[s],a=(this.bbox3D[s][1]-e[s])/t[s],n=r<0?Math.max(n,Math.min(o,a)):Math.min(n,Math.max(o,a)));return n},isInCube:function(e){return e[0]>this.bbox3D[0][0]-q.Z.eps&&e[0]<this.bbox3D[0][1]+q.Z.eps&&e[1]>this.bbox3D[1][0]-q.Z.eps&&e[1]<this.bbox3D[1][1]+q.Z.eps&&e[2]>this.bbox3D[2][0]-q.Z.eps&&e[2]<this.bbox3D[2][1]+q.Z.eps},intersectionPlanePlane:function(e,t,r){var s,o,a,l,n=[[],[]];return s=q.Z.Geometry.meet3Planes(e.normal,e.d,t.normal,r=r||t.d,q.Z.crossProduct(e.normal,t.normal),0),o=q.Z.Geometry.meetPlanePlane(e.vec1,e.vec2,t.vec1,t.vec2),a=this.intersectionLineCube(s,o,1/0),l=q.Z.axpy(a,o,s),this.isInCube(l)&&(n[0]=l),a=this.intersectionLineCube(s,o,-1/0),l=q.Z.axpy(a,o,s),this.isInCube(l)&&(n[1]=l),n},getMesh:function(e,t,r){var n,s,o,a,l,u,c,h=[0,0,0],g=t[2],y=r[2],E=[],w=[];for(u=(d.Z.evaluate(t[1])-d.Z.evaluate(t[0]))/g,c=(d.Z.evaluate(r[1])-d.Z.evaluate(r[0]))/y,n=0;n<=g;n++){for(o=t[0]+u*n,s=0;s<=y;s++)a=r[0]+c*s,h=d.Z.isFunction(e)?e(o,a):[e[0](o,a),e[1](o,a),e[2](o,a)],l=this.project3DTo2D(h),E.push(l[1]),w.push(l[2]);E.push(NaN),w.push(NaN)}for(s=0;s<=y;s++){for(a=r[0]+c*s,n=0;n<=g;n++)o=t[0]+u*n,h=d.Z.isFunction(e)?e(o,a):[e[0](o,a),e[1](o,a),e[2](o,a)],l=this.project3DTo2D(h),E.push(l[1]),w.push(l[2]);E.push(NaN),w.push(NaN)}return[E,w]},animateAzimuth:function(){var e=this.az_slide._smin,r=this.az_slide._smax-e,n=this.az_slide.Value()+.1;this.az_slide.position=(n-e)/r,this.az_slide.position>1&&(this.az_slide.position=0),this.board.update(),this.timeoutAzimuth=setTimeout(function(){this.animateAzimuth()}.bind(this),200)},stopAzimuth:function(){clearTimeout(this.timeoutAzimuth),this.timeoutAzimuth=null},isVerticalDrag:function(){var e=this.board;return!!d.Z.evaluate(this.visProp.verticaldrag.enabled)&&e["_"+d.Z.evaluate(this.visProp.verticaldrag.key)+"Key"]}}),D.Z.createView3D=function(e,t,r){var n,s,o,a,u,c=t[0],h=t[1];return s=d.Z.copyAttributes(r,e.options,"view3d"),(n=new D.Z.View3D(e,t,s)).defaultAxes=n.create("axes3d",t,r),u=h[1],n.az_slide=e.create("slider",[[(o=c[0])-1,(a=c[1])-2],[o+h[0]+1,a-2],[0,1,2*Math.PI]],{style:6,name:"az",point1:{frozen:!0},point2:{frozen:!0}}),n.el_slide=e.create("slider",[[o-1,a],[o-1,a+u],[0,.3,Math.PI/2]],{style:6,name:"el",point1:{frozen:!0},point2:{frozen:!0}}),n.board.highlightInfobox=function(g,y,E){var w,T,N,V,U,R='<span style="color:black; font-size:200%">\u21c4 &nbsp;</span>',H=E.board,Q=null;for(n.isVerticalDrag()&&(R='<span style="color:black; font-size:200%">\u21c5 &nbsp;</span>'),T=0;T<E.parents.length&&!(Q=H.objects[E.parents[T]]).is3D;T++);if(Q){if(N=n.project2DTo3DPlane(Q.element2D,[1,0,0,1],[1,0,0,Q.coords[3]]),!n.isInCube(N))return void n.board.highlightCustomInfobox("",Q);w=d.Z.evaluate(Q.visProp.infoboxdigits),U=n.board.infobox,console.log(U.useLocale()),V="auto"===w?U.useLocale()?[R,"(",U.formatNumberLocale(Q.X())," | ",U.formatNumberLocale(Q.Y())," | ",U.formatNumberLocale(Q.Z()),")"]:[R,"(",d.Z.autoDigits(Q.X())," | ",d.Z.autoDigits(Q.Y())," | ",d.Z.autoDigits(Q.Z()),")"]:U.useLocale()?[R,"(",U.formatNumberLocale(Q.X(),w)," | ",U.formatNumberLocale(Q.Y(),w)," | ",U.formatNumberLocale(Q.Z(),w),")"]:[R,"(",d.Z.toFixed(Q.X(),w)," | ",d.Z.toFixed(Q.Y(),w)," | ",d.Z.toFixed(Q.Z(),w),")"],n.board.highlightCustomInfobox(V.join(""),Q)}else n.board.highlightCustomInfobox("("+g+", "+y+")",E)},n.board.update(),n},D.Z.registerElement("view3d",D.Z.createView3D),D.Z.GeometryElement3D=function(e,t){this.elType=t,this.id=this.board.setId(this,t),this.view=e,this.element2D=null,this.is3D=!0,this.view.objects[this.id]=this,""!==this.name&&(this.view.elementsByName[this.name]=this)},D.Z.extend(D.Z.GeometryElement3D.prototype,{setAttr2D:function(e){var t=e;return t.name=this.name,t},setAttribute:function(e){var t,r,n,s,o,a={};for(t=0;t<arguments.length;t++)d.Z.isString(s=arguments[t])?(o=s.split(":"),a[d.Z.trim(o[0])]=d.Z.trim(o[1])):d.Z.isArray(s)?a[s[0]]=s[1]:D.Z.extend(a,s);for(t in a)if(a.hasOwnProperty(t))switch(r=t.replace(/\s+/g,"").toLowerCase(),n=a[t],r){case"numberpointshigh":case"stepsu":case"stepsv":d.Z.exists(this.visProp[r])&&(!D.Z.Validator[r]||D.Z.Validator[r]&&D.Z.Validator[r](n)||D.Z.Validator[r]&&d.Z.isFunction(n)&&D.Z.Validator[r](n()))&&(n=(!n.toLowerCase||"false"!==n.toLowerCase())&&n,this._set(r,n));break;default:d.Z.exists(this.element2D)&&this.element2D.setAttribute(a)}},getAttribute:function(e){var t;switch(e=e.toLowerCase()){case"numberpointshigh":case"stepsu":case"stepsv":t=this.visProp[e];break;default:d.Z.exists(this.element2D)&&(t=this.element2D.getAttribute(e))}return t},getAttributes:function(){var t,r,e={},n=["numberpointshigh","stepsu","stepsv"],s=n.length;for(d.Z.exists(this.element2D)&&(e=d.Z.merge(this.element2D.getAttributes())),t=0;t<s;t++)d.Z.exists(this.visProp[r=n[t]])&&(e[r]=this.visProp[r]);return e}}),D.Z.createAxes3D=function(e,t,r){var c,h,g,y,E,w,T,N,R,H,V,U,Q,oe,te,ne,ce,n=t[0],s=["x","y","z"],o="Axis",a=["Rear","Front"],l=[0,0,0],u=[0,0,0],he={};if(d.Z.exists(n.bbox3D))for(c=0;c<s.length;c++)l[c]=n.bbox3D[c][0],u[c]=n.bbox3D[c][1];else for(c=0;c<s.length;c++)l[c]=t[1][c],u[c]=t[2][1];for(T=(w=d.Z.copyAttributes(r,e.options,"axes3d")).axesposition,c=0;c<s.length;c++)te=(N=s[c])+o,"center"===T?(R=[0,0,0],(H=[0,0,0])[c]=u[c],he[te]=n.create("axis3d",[R,H],w[te.toLowerCase()])):(te+="Border",R=l.slice(),H=u.slice(),2===c?(R[1]=u[1],H[0]=l[0]):(R[c]=u[c],H[2]=l[2]),H[c]=u[c],w[te.toLowerCase()].lastArrow=!1,he[te]=n.create("axis3d",[R,H],w[te.toLowerCase()]),ce={visible:!0,minorTicks:0,tickEndings:[0,1],drawLabels:!1},2===c&&(ce.tickEndings=[1,0]),he[te+"Ticks"]=n.create("ticks",[he[te],1],ce));for(he.O=n.create("intersection",[he[s[0]+o],he[s[1]+o]],{name:"",visible:!1,withLabel:!1}),c=0;c<s.length;c++)for(y=(c+1)%3,E=(c+2)%3,N=s[c],h=0;h<a.length;h++)(R=[0,0,0])[c]=0===h?l[c]:u[c],U=[0,0,0],(V=[0,0,0])[y]=1,U[E]=1,Q=[l[y],u[y]],oe=[l[E],u[E]],w=d.Z.copyAttributes(r,e.options,"axes3d",te=N+"Plane"+a[h]),he[te]=n.create("plane3d",[R,V,U,Q,oe],w),he[te].elType="axisplane3d";for(c=0;c<s.length;c++)for(N=s[c],h=0;h<a.length;h++)for(g=1;g<=2;g++)te=N+"Plane"+a[h]+s[y=(c+g)%3].toUpperCase()+"Axis",ne=N+"Plane"+a[h],(R=[0,0,0])[c]=(H=[0,0,0])[c]=0===h?l[c]:u[c],R[y]=l[y],H[y]=u[y],w=d.Z.copyAttributes(r,e.options,"axes3d",te),he[te]=n.create("axis3d",[R,H],w),he[ne].addChild(he[te]),he[ne].element2D.inherits.push(he[te]);return he},D.Z.registerElement("axes3d",D.Z.createAxes3D),D.Z.createAxis3D=function(e,t,r){var s,l,u,h,g,y,n=t[0],o=t[1],a=t[2];return s=d.Z.copyAttributes(r.point1,e.options,"axis3d","point1"),l=n.create("point",[(h=o[0],g=o[1],y=o[2],function(){return n.project3DTo2D(h,g,y)[1]}),function(h,g,y){return function(){return n.project3DTo2D(h,g,y)[2]}}(o[0],o[1],o[2])],s),s=d.Z.copyAttributes(r.point2,e.options,"axis3d","point2"),u=n.create("point",[function(h,g,y){return function(){return n.project3DTo2D(h,g,y)[1]}}(a[0],a[1],a[2]),function(h,g,y){return function(){return n.project3DTo2D(h,g,y)[2]}}(a[0],a[1],a[2])],s),s=d.Z.copyAttributes(r,e.options,"axis3d"),n.create("arrow",[l,u],s)},D.Z.registerElement("axis3d",D.Z.createAxis3D),D.Z.createMesh3D=function(e,t,r){var c,n=t[0],s=t[1],o=t[2],a=t[3],l=t[4],u=t[5];return(c=n.create("curve",[[],[]],r)).updateDataArray=function(){var w,T,N,L,h=a[0],g=a[1],y=u[0],E=u[1],H=[0,0,0],V=[0,0,0],Q=[0,0,0];if(this.dataX=[],this.dataY=[],d.Z.isFunction(s))Q=s().slice(1);else for(L=0;L<3;L++)Q[L]=d.Z.evaluate(s[L]);for(L=0;L<3;L++)H[L]=d.Z.evaluate(o[L]),V[L]=d.Z.evaluate(l[L]);for(w=D.Z.Math.norm(H,3),T=D.Z.Math.norm(V,3),L=0;L<3;L++)H[L]/=w,V[L]/=T;N=n.getMesh([function(oe,te){return Q[0]+oe*H[0]+te*V[0]},function(oe,te){return Q[1]+oe*H[1]+te*V[1]},function(oe,te){return Q[2]+oe*H[2]+te*V[2]}],[Math.ceil(h),Math.floor(g),(Math.ceil(g)-Math.floor(h))/1],[Math.ceil(y),Math.floor(E),(Math.ceil(E)-Math.floor(y))/1]),this.dataX=N[0],this.dataY=N[1]},c},D.Z.registerElement("mesh3d",D.Z.createMesh3D),D.Z.Point3D=function(e,t,r,n){this.constructor(e.board,n,Y.Z.OBJECT_TYPE_POINT3D,Y.Z.OBJECT_CLASS_3D),this.constructor3D(e,"point3d"),this.board.finalizeAdding(this),this.coords=[0,0,0,0],this.F=t,this.slide=r,this.X=function(){return this.coords[1]},this.Y=function(){return this.coords[2]},this.Z=function(){return this.coords[3]},this._params=null,this._c2d=null,this.methodMap=d.Z.deepCopy(this.methodMap,{})},D.Z.Point3D.prototype=new D.Z.GeometryElement,d.Z.copyPrototypeMethods(D.Z.Point3D,D.Z.GeometryElement3D,"constructor3D"),D.Z.extend(D.Z.Point3D.prototype,{updateCoords:function(){var e;if(d.Z.isFunction(this.F))this.coords=[1].concat(d.Z.evaluate(this.F));else for(this.coords[0]=1,e=0;e<3;e++)d.Z.isFunction(this.F[e])&&(this.coords[e+1]=d.Z.evaluate(this.F[e]));return this},initCoords:function(){var e;if(d.Z.isFunction(this.F))this.coords=[1].concat(d.Z.evaluate(this.F));else for(this.coords[0]=1,e=0;e<3;e++)this.coords[e+1]=d.Z.evaluate(this.F[e]);return this},normalizeCoords:function(){return Math.abs(this.coords[0])>q.Z.eps&&(this.coords[1]/=this.coords[0],this.coords[2]/=this.coords[0],this.coords[3]/=this.coords[0],this.coords[0]=1),this},setPosition:function(e,t){var r=this.coords;return this.coords.slice(),3===e.length?(r[0]=1,r[1]=e[0],r[2]=e[1],r[3]=e[2]):(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[2],this.normalizeCoords()),this},update:function(e){var t;return this.element2D.draggable()&&0!==fe.Z.distance(this._c2d,this.element2D.coords.usrCoords)?this.slide?this.projectCoords2Surface():0!==(t=this.view.isVerticalDrag()?this.view.project2DTo3DVertical(this.element2D,this.coords):this.view.project2DTo3DPlane(this.element2D,[1,0,0,1],[1,0,0,this.coords[3]]))[0]&&(this.coords=this.view.project3DToCube(t)):(this.updateCoords(),this.element2D.coords.setCoordinates(Y.Z.COORDS_BY_USER,this.view.project3DTo2D([1,this.X(),this.Y(),this.Z()]))),this._c2d=this.element2D.coords.usrCoords.slice(),this},updateRenderer:function(){return this.needsUpdate=!1,this},projectCoords2Surface:function(){var h,g,y,r=[0,0],l=this.slide,u=this;null!==l&&(y=function(E,w,T,N){var L=[1,l.X(T[0],T[1]),l.Y(T[0],T[1]),l.Z(T[0],T[1])],R=u.view.project3DTo2D(L);return N[0]=u.element2D.X()-R[1],N[1]=u.element2D.Y()-R[2],N[0]*N[0]+N[1]*N[1]},d.Z.exists(this._params)&&(r=this._params.slice()),q.Z.Nlp.FindMinimum(y,2,2,r,5,1e-6,0,200),h=[1,l.X(r[0],r[1]),l.Y(r[0],r[1]),l.Z(r[0],r[1])],g=this.view.project3DTo2D(h),this._params=r,this.coords=h,this.element2D.coords.setCoordinates(Y.Z.COORDS_BY_USER,g),this._c2d=g)},__evt__update3D:function(e){}}),D.Z.createPoint3D=function(e,t,r){var s,o,a,l,u,n=t[0];if(a=t.length>2&&d.Z.exists(t[t.length-1].is3D)?t.pop():null,2===t.length)o=t[1];else{if(4!==t.length)throw new Error("JSXGraph: Can't create point3d with parent types '"+typeof t[0]+"' and '"+typeof t[1]+"'.\nPossible parent types: [[x,y,z]], [x,y,z]");o=t.slice(1)}return s=d.Z.copyAttributes(r,e.options,"point3d"),(u=new D.Z.Point3D(n,o,a,s)).initCoords(),l=n.project3DTo2D(u.coords),s=u.setAttr2D(s),u.element2D=n.create("point",l,s),u.addChild(u.element2D),u.inherits.push(u.element2D),u.element2D.setParents(u),u._c2d=u.element2D.coords.usrCoords.slice(),u},D.Z.registerElement("point3d",D.Z.createPoint3D),D.Z.Curve3D=function(e,t,r,n,s,o,a){this.constructor(e.board,a,Y.Z.OBJECT_TYPE_CURVE3D,Y.Z.OBJECT_CLASS_3D),this.constructor3D(e,"curve3d"),this.board.finalizeAdding(this),this.F=t,this.X=r,this.Y=n,this.Z=s,null!==this.F&&(this.X=function(l){return this.F(l)[0]},this.Y=function(l){return this.F(l)[1]},this.Z=function(l){return this.F(l)[2]}),this.range=o,this.methodMap=d.Z.deepCopy(this.methodMap,{})},D.Z.Curve3D.prototype=new D.Z.GeometryElement,d.Z.copyPrototypeMethods(D.Z.Curve3D,D.Z.GeometryElement3D,"constructor3D"),D.Z.extend(D.Z.Curve3D.prototype,{updateDataArray:function(){var t,r,n,s,o,a,l,u,c,e=d.Z.evaluate(this.visProp.numberpointshigh),h=[0,0,0];if(l=[],u=[],d.Z.isArray(this.X))for(e=this.X.length,a=0;a<e;a++)o=this.view.project3DTo2D(h=[this.X[a],this.Y[a],this.Z[a]]),l.push(o[1]),u.push(o[2]);else for(t=d.Z.evaluate(this.range),r=d.Z.evaluate(t[0]),s=((n=d.Z.evaluate(t[1]))-r)/(e-1),c=0,a=r;c<e&&a<=n;c++,a+=s)h=null!==this.F?this.F(a):[this.X(a),this.Y(a),this.Z(a)],o=this.view.project3DTo2D(h),l.push(o[1]),u.push(o[2]);return{X:l,Y:u}},update:function(){return this},updateRenderer:function(){return this.needsUpdate=!1,this}}),D.Z.createCurve3D=function(e,t,r){var s,o,a,l,u,c,h,n=t[0];return 3===t.length?(s=t[1],u=t[2],o=null,a=null,l=null):(o=t[1],a=t[2],l=t[3],u=t[4],s=null),c=d.Z.copyAttributes(r,e.options,"curve3d"),c=(h=new D.Z.Curve3D(n,s,o,a,l,u,c)).setAttr2D(c),h.element2D=n.create("curve",[[],[]],c),h.element2D.updateDataArray=function(){var g=h.updateDataArray();this.dataX=g.X,this.dataY=g.Y},h.addChild(h.element2D),h.inherits.push(h.element2D),h.element2D.setParents(h),h.element2D.prepareUpdate().update(),e.isSuspendedUpdate||h.element2D.updateVisibility().updateRenderer(),h},D.Z.registerElement("curve3d",D.Z.createCurve3D),D.Z.Line3D=function(e,t,r,n,s){this.constructor(e.board,s,Y.Z.OBJECT_TYPE_LINE3D,Y.Z.OBJECT_CLASS_3D),this.constructor3D(e,"line3d"),this.board.finalizeAdding(this),this.point=t,this.direction=r,this.range=n||[-1/0,1/0],this.point1=null,this.point2=null,this.methodMap=d.Z.deepCopy(this.methodMap,{})},D.Z.Line3D.prototype=new D.Z.GeometryElement,d.Z.copyPrototypeMethods(D.Z.Line3D,D.Z.GeometryElement3D,"constructor3D"),D.Z.extend(D.Z.Line3D.prototype,{getPointCoords:function(e){var t,n,s,r=[];if(t=[this.point.X(),this.point.Y(),this.point.Z()],d.Z.isFunction(this.direction))r=this.direction();else for(n=1;n<4;n++)r.push(d.Z.evaluate(this.direction[n]));return s=d.Z.evaluate(e),Math.abs(s)===1/0&&(e=this.view.intersectionLineCube(t,r,s)),[t[0]+r[0]*s,t[1]+r[1]*s,t[2]+r[2]*s]},update:function(){return this},updateRenderer:function(){return this.needsUpdate=!1,this}}),D.Z.createLine3D=function(e,t,r){var s,o,a,l,u,c,h,g,n=t[0];return s=d.Z.copyAttributes(r,e.options,"line3d"),d.Z.isPoint3D(t[2])||3===t.length&&(d.Z.isArray(t[2])||d.Z.isFunction(t[2]))?(c=d.Z.providePoints3D(n,[t[1]],r,"line3d",["point1"])[0],h=d.Z.providePoints3D(n,[t[2]],r,"line3d",["point2"])[0],l=function(){return[h.X()-c.X(),h.Y()-c.Y(),h.Z()-c.Z()]},g=new D.Z.Line3D(n,c,l,u=[0,1],s)):(a=d.Z.providePoints3D(n,[t[1]],r,"line3d",["point"])[0],d.Z.isFunction(t[2])?l=t[2]:3===t[2].length?l=[1].concat(t[2]):4===t[2].length&&(l=t[2]),u=t[3],o=d.Z.providePoints3D(n,[[0,0,0],[0,0,0]],r,"line3d",["point1","point2"]),g=new D.Z.Line3D(n,a,l,u,s),o[0].F=function(){return g.getPointCoords(d.Z.evaluate(g.range[0]))},o[0].prepareUpdate().update(),c=o[0],o[1].F=function(){return g.getPointCoords(d.Z.evaluate(g.range[1]))},o[1].prepareUpdate().update(),h=o[1]),s=g.setAttr2D(s),g.element2D=n.create("segment",[c.element2D,h.element2D],s),g.addChild(g.element2D),g.inherits.push(g.element2D),g.element2D.setParents(g),c.addChild(g),h.addChild(g),g.point1=c,g.point2=h,g.update(),g.element2D.prepareUpdate().update().updateRenderer(),g},D.Z.registerElement("line3d",D.Z.createLine3D),D.Z.Plane3D=function(e,t,r,n,s,o,a){this.constructor(e.board,a,Y.Z.OBJECT_TYPE_PLANE3D,Y.Z.OBJECT_CLASS_3D),this.constructor3D(e,"plane3d"),this.board.finalizeAdding(this),this.point=t,this.direction1=r,this.direction2=s,this.range1=n||[-1/0,1/0],this.range2=o||[-1/0,1/0],this.vec1=[0,0,0],this.vec2=[0,0,0],this.grid=null,this.normal=[0,0,0],this.d=0,this.updateNormal(),this.methodMap=d.Z.deepCopy(this.methodMap,{})},D.Z.Plane3D.prototype=new D.Z.GeometryElement,d.Z.copyPrototypeMethods(D.Z.Plane3D,D.Z.GeometryElement3D,"constructor3D"),D.Z.extend(D.Z.Plane3D.prototype,{updateNormal:function(){var e,t;for(e=0;e<3;e++)this.vec1[e]=d.Z.evaluate(this.direction1[e]),this.vec2[e]=d.Z.evaluate(this.direction2[e]);if(this.normal=q.Z.crossProduct(this.vec1,this.vec2),t=q.Z.norm(this.normal),Math.abs(t)>q.Z.eps)for(e=0;e<3;e++)this.normal[e]/=t;return this.d=q.Z.innerProduct(this.point.coords.slice(1),this.normal,3),this},updateDataArray:function(){var e,t,r,n,s,o,a,E,w,T,N,L,H,V,l=["xPlaneRear","yPlaneRear","zPlaneRear"],u=[],c=[0,0,0],h=[0,0,0],g=[0,0,0],y=[0,0,0],U=this.view;if(this.dataX=[],this.dataY=[],this.updateNormal(),"axisplane3d"!==this.elType&&U.defaultAxes&&d.Z.evaluate(this.range1[0])===-1/0&&d.Z.evaluate(this.range1[1])===1/0&&d.Z.evaluate(this.range2[0])===-1/0&&d.Z.evaluate(this.range2[1])===1/0){for(T=0;T<l.length;T++){if(3===(y=U.intersectionPlanePlane(this,U.defaultAxes[l[T]]))[0].length&&3===y[1].length){for(w=0;w<u.length&&!(fe.Z.distance(y[0],u[w][0],3)<q.Z.eps&&fe.Z.distance(y[1],u[w][1],3)<q.Z.eps||fe.Z.distance(y[0],u[w][1],3)<q.Z.eps&&fe.Z.distance(y[1],u[w][0],3)<q.Z.eps);w++);w===u.length&&u.push(y.slice())}if((y=[0,0,0])[T]=U.bbox3D[T][1],E=q.Z.innerProduct(y,U.defaultAxes[l[T]].normal,3),3===(y=U.intersectionPlanePlane(this,U.defaultAxes[l[T]],E))[0].length&&3===y[1].length){for(w=0;w<u.length&&!(fe.Z.distance(y[0],u[w][0],3)<q.Z.eps&&fe.Z.distance(y[1],u[w][1],3)<q.Z.eps||fe.Z.distance(y[0],u[w][1],3)<q.Z.eps&&fe.Z.distance(y[1],u[w][0],3)<q.Z.eps);w++);w===u.length&&u.push(y.slice())}}H=0,w=0;do{for(3===(y=u[H][w]).length&&(s=U.project3DTo2D(y),this.dataX.push(s[1]),this.dataY.push(s[2])),y=u[H][w=(w+1)%2],V=H,T=0;T<u.length;T++){if(T!==H&&fe.Z.distance(y,u[T][0])<q.Z.eps){H=T,w=0;break}if(T!==H&&fe.Z.distance(y,u[T][1])<q.Z.eps){H=T,w=1;break}}if(H===V){console.log("Error: update plane3d: did not find next",H);break}}while(0!==H);s=U.project3DTo2D(u[0][0]),this.dataX.push(s[1]),this.dataY.push(s[2])}else{for(e=d.Z.evaluate(this.range1[0]),t=d.Z.evaluate(this.range1[1]),r=d.Z.evaluate(this.range2[0]),n=d.Z.evaluate(this.range2[1]),g=this.point.coords.slice(1),c=this.vec1.slice(),h=this.vec2.slice(),o=q.Z.norm(c,3),a=q.Z.norm(h,3),w=0;w<3;w++)c[w]/=o,h[w]/=a;for(T=0;T<4;T++){switch(T){case 0:N=e,L=r;break;case 1:N=t,L=r;break;case 2:N=t,L=n;break;case 3:N=e,L=n}for(w=0;w<3;w++)y[w]=g[w]+N*c[w]+L*h[w];s=U.project3DTo2D(y),this.dataX.push(s[1]),this.dataY.push(s[2])}this.dataX.push(this.dataX[0]),this.dataY.push(this.dataY[0])}return{X:this.dataX,Y:this.dataY}},update:function(){return this},updateRenderer:function(){return this.needsUpdate=!1,this}}),D.Z.createPlane3D=function(e,t,r){var s,o,h,g,n=t[0],a=t[2],l=t[3],u=t[4]||[-1/0,1/0],c=t[5]||[-1/0,1/0];return o=d.Z.providePoints3D(n,[t[1]],r,"plane3d",["point"])[0],s=d.Z.copyAttributes(r,e.options,"plane3d"),h=new D.Z.Plane3D(n,o,a,u,l,c,s),o.addChild(h),s=h.setAttr2D(s),h.element2D=n.create("curve",[[],[]],s),h.element2D.updateDataArray=function(){var y=h.updateDataArray();this.dataX=y.X,this.dataY=y.Y},h.addChild(h.element2D),h.inherits.push(h.element2D),h.element2D.setParents(h),s=d.Z.copyAttributes(r.mesh3d,e.options,"mesh3d"),Math.abs(h.range1[0])!==1/0&&Math.abs(h.range1[1])!==1/0&&Math.abs(h.range2[0])!==1/0&&Math.abs(h.range2[1])!==1/0&&(g=n.create("mesh3d",[function(){return o.coords},a,u,l,c],s),h.grid=g,h.addChild(g),h.inherits.push(g),g.setParents(h)),h.element2D.prepareUpdate().update(),e.isSuspendedUpdate||h.element2D.updateVisibility().updateRenderer(),h},D.Z.registerElement("plane3d",D.Z.createPlane3D),D.Z.Surface3D=function(e,t,r,n,s,o,a,l){this.constructor(e.board,l,Y.Z.OBJECT_TYPE_SURFACE3D,Y.Z.OBJECT_CLASS_3D),this.constructor3D(e,"surface3d"),this.board.finalizeAdding(this),this.F=t,this.X=r,this.Y=n,this.Z=s,null!==this.F&&(this.X=function(u,c){return this.F(u,c)[0]},this.Y=function(u,c){return this.F(u,c)[1]},this.Z=function(u,c){return this.F(u,c)[2]}),this.range_u=o,this.range_v=a,this.methodMap=d.Z.deepCopy(this.methodMap,{})},D.Z.Surface3D.prototype=new D.Z.GeometryElement,d.Z.copyPrototypeMethods(D.Z.Surface3D,D.Z.GeometryElement3D,"constructor3D"),D.Z.extend(D.Z.Surface3D.prototype,{updateDataArray:function(){var o,e=d.Z.evaluate(this.visProp.stepsu),t=d.Z.evaluate(this.visProp.stepsv),r=d.Z.evaluate(this.range_u),n=d.Z.evaluate(this.range_v);return{X:(o=this.view.getMesh(null!==this.F?this.F:[this.X,this.Y,this.Z],r.concat([e]),n.concat([t])))[0],Y:o[1]}},update:function(){return this},updateRenderer:function(){return this.needsUpdate=!1,this}}),D.Z.createParametricSurface3D=function(e,t,r){var s,o,a,l,u,c,h,g,n=t[0];return 4===t.length?(s=t[1],u=t[2],c=t[3],o=null,a=null,l=null):(o=t[1],a=t[2],l=t[3],u=t[4],c=t[5],s=null),h=d.Z.copyAttributes(r,e.options,"surface3d"),h=(g=new D.Z.Surface3D(n,s,o,a,l,u,c,h)).setAttr2D(h),g.element2D=n.create("curve",[[],[]],h),g.element2D.updateDataArray=function(){var y=g.updateDataArray();this.dataX=y.X,this.dataY=y.Y},g.addChild(g.element2D),g.inherits.push(g.element2D),g.element2D.setParents(g),g.element2D.prepareUpdate().update(),e.isSuspendedUpdate||g.element2D.updateVisibility().updateRenderer(),g},D.Z.registerElement("parametricsurface3d",D.Z.createParametricSurface3D),D.Z.createFunctiongraph3D=function(e,t,r){return t[0].create("parametricsurface3d",[function(c,h){return c},function(c,h){return h},t[1],t[2],t[3]],r)},D.Z.registerElement("functiongraph3d",D.Z.createFunctiongraph3D);const IR=D.Z.JSXGraph,NR=D.Z.Options;le.Z.isBrowser?window.JXG=D.Z:le.Z.isWebWorker()&&(self.JXG=D.Z);let RR=(()=>{var e;class t{ngAfterViewInit(){NR.text.useMathJax=!0;const n=this.createBoard({elementId:"jxgbox",xRange:[-.5,7],yRange:[-1.5,1.5]}),s=this.createBoard({elementId:"jxgbox2",xRange:[-1.5,1.5],yRange:[-1.5,1.5]});n.addChild(s);const o=function(y){return Math.cos(y)},u=(this.plotFunction({board:n,func:o,start:0,end:2*Math.PI}),this.createSlider({board:n,startPos:[0,0],endPos:[2*Math.PI,0],range:[0,2],value:1,attributes:{snapWidth:.02,withLabel:!1}})),c={straightFirst:!1,straightLast:!1};this.createLine({board:n,startPos:[()=>u.Value()*Math.PI,0],endPos:[()=>u.Value()*Math.PI,()=>Math.cos(u.Value()*Math.PI)],attributes:{...c,strokeColor:"#aaaaaa"}});const h=[()=>0,()=>1];this.createLine({board:s,startPos:[()=>0,()=>0],endPos:h,attributes:{...c,strokeColor:"#4444aa",lastArrow:{type:1}}});const g=[()=>Math.sin(u.Value()*Math.PI),()=>Math.cos(u.Value()*Math.PI)];this.createLine({board:s,startPos:[0,0],endPos:g,attributes:{...c,strokeColor:"#44aa44",lastArrow:{type:1}}}),s.create("angle",[g,[()=>0,()=>0],h],{radius:.3,name:()=>`\\[\\varphi=${u.Value().toFixed(2)}\\pi\\]`}),n.create("text",[4.15,-.75,function(){const y=u.Value();return`\\[cos(\\varphi)=${o(y*Math.PI).toFixed(2)}\\]`}],{fontSize:16})}createLine(n){const{board:s,startPos:o,endPos:a,attributes:l}=n;return s.create("line",[o,a],l)}createSlider(n){const{board:s,attributes:o,endPos:a,range:l,startPos:u,value:c}=n,[h,g]=l;return s.create("slider",[u,a,[h,c,g]],o)}createBoard(n){const{xRange:s,yRange:o,elementId:a}=n,[l,u]=o,[c,h]=s;return IR.initBoard(a,{boundingbox:[c,u,h,l],resize:{enabled:!1},axis:!0})}plotFunction(n){const{board:s,func:o,start:a,end:l}=n;return s.create("functiongraph",[o,a,l])}}return(e=t).\u0275fac=function(n){return new(n||e)},e.\u0275cmp=ts({type:e,selectors:[["math-cosine-similarity"]],decls:3,vars:0,consts:[["id","container"],["id","jxgbox"],["id","jxgbox2"]],template:function(n,s){1&n&&(pn(0,"div",0),gn(1,"div",1)(2,"div",2),zi())},styles:["#container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex}#container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{height:100%}#jxgbox[_ngcontent-%COMP%]{width:60%}#jxgbox2[_ngcontent-%COMP%]{width:40%}"]}),t})();function Yb(e,t,r,n,s,o,a){try{var l=e[o](a),u=l.value}catch(c){return void r(c)}l.done?t(u):Promise.resolve(u).then(n,s)}let Vb=(()=>{var e;class t{constructor(n){this.element=n,this.math="\\varphi"}ngOnChanges(){this.target=this.element.nativeElement,this.renderMath()}renderMath(){var n=this;return function LR(e){return function(){var t=this,r=arguments;return new Promise(function(n,s){var o=e.apply(t,r);function a(u){Yb(o,n,s,a,l,"next",u)}function l(u){Yb(o,n,s,a,l,"throw",u)}a(void 0)})}}(function*(){MathJax.texReset();const s=MathJax.getMetricsFor(n.target),o=yield MathJax.tex2chtmlPromise(n.math,s);n.target.appendChild(o),MathJax.startup.document.clear(),MathJax.startup.document.updateDocument()})()}}return(e=t).\u0275fac=function(n){return new(n||e)(Xe(Gn))},e.\u0275dir=fi({type:e,selectors:[["","mathJax",""]],inputs:{math:"math"},features:[pr]}),t})();const Hb=function(e){return{"background-color":e}};function kR(e,t){if(1&e&&(pn(0,"div",4),gn(1,"div",5),zi()),2&e){const r=t.$implicit,n=pu().$implicit,s=pu();Mi("ngStyle",zd(2,Hb,s.getColor(r,n))),tn(1),Mi("math",s.getLabel(r,n))}}function BR(e,t){if(1&e&&(pn(0,"div",2),Dd(1,kR,2,4,"div",3),zi()),2&e){const r=pu();tn(1),Mi("ngForOf",r.columns())}}let FR=(()=>{var e;class t{constructor(){this.ABC=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"]}columns(){return[...Array(this.params.n)].map((n,s)=>s)}rows(){return[...Array(this.params.m)].map((n,s)=>s)}getLabel(n,s){return null==this.params.label||0==this.params.label?"":1==this.params.label?((a,l)=>this.ABC[this.params.transpose?a:l]+`_${this.params.transpose?l:a}`)(n,s):this.params.label(n,s)}getColor(n,s){return null==this.params.color||0==this.params.color?"":1==this.params.color?((a,l)=>`hsl(${(45*(this.params.transpose?a:l)+200)%360}, 70%, 75%)`)(n,s):this.params.color(n,s)}}return(e=t).\u0275fac=function(n){return new(n||e)},e.\u0275cmp=ts({type:e,selectors:[["math-matrix"]],inputs:{params:"params"},decls:2,vars:4,consts:[[1,"matrix",3,"ngStyle"],["class","row",4,"ngFor","ngForOf"],[1,"row"],["class","cell",3,"ngStyle",4,"ngFor","ngForOf"],[1,"cell",3,"ngStyle"],["mathJax","",1,"label",3,"math"]],template:function(n,s){1&n&&(pn(0,"div",0),Dd(1,BR,2,1,"div",1),zi()),2&n&&(Mi("ngStyle",zd(2,Hb,s.getColor(0,0))),tn(1),Mi("ngForOf",s.rows()))},dependencies:[Ky,tC,Vb],styles:[".matrix[_ngcontent-%COMP%]{--main-color: #3f3f3f;--main-size: 20px;border:1px solid var(--main-color);display:inline-block;background-color:currentColor}.row[_ngcontent-%COMP%]{display:flex}.cell[_ngcontent-%COMP%]{width:var(--main-size);height:var(--main-size);border:1px solid var(--main-color);display:flex;align-items:center;justify-content:center}.label[_ngcontent-%COMP%]{color:var(--main-color)}"]}),t})();const jR=[{path:"",component:(()=>{var e;class t{constructor(){this.m1={m:5,n:3,transpose:!0,label:!0,color:!0},this.m2={m:3,n:5,label:!0,color:!0},this.m3={m:3,n:3},this.m4={m:5,n:5}}}return(e=t).\u0275fac=function(n){return new(n||e)},e.\u0275cmp=ts({type:e,selectors:[["math-main"]],decls:15,vars:8,consts:[[1,"sample-container"],["id","matrices"],["id","matrix",1,"sample-container"],["id","times"],["mathJax","",3,"math"],["id","m1",3,"params"],["id","m2",3,"params"]],template:function(n,s){1&n&&(pn(0,"div",0),gn(1,"math-cosine-similarity"),zi(),pn(2,"div",1)(3,"div",2)(4,"div",3),gn(5,"div",4),zi(),gn(6,"math-matrix",5)(7,"math-matrix",6)(8,"math-matrix",6),zi(),pn(9,"div",2)(10,"div",3),gn(11,"div",4),zi(),gn(12,"math-matrix",6)(13,"math-matrix",5)(14,"math-matrix",6),zi()()),2&n&&(tn(5),Mi("math","AA^T"),tn(1),Mi("params",s.m1),tn(1),Mi("params",s.m2),tn(1),Mi("params",s.m3),tn(3),Mi("math","A^TA"),tn(1),Mi("params",s.m2),tn(1),Mi("params",s.m1),tn(1),Mi("params",s.m4))},dependencies:[RR,FR,Vb],styles:['.sample-container[_ngcontent-%COMP%]{width:700px;height:300px}#matrices[_ngcontent-%COMP%]{display:flex}#matrix[_ngcontent-%COMP%]{display:grid;width:200px;height:200px;grid-template-areas:"a b" "c d"}#m1[_ngcontent-%COMP%]{color:#a8f0f0}#m2[_ngcontent-%COMP%]{color:#a8f0ae}#times[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:flex-end;padding:15px}']}),t})()}];let UR=(()=>{var e;class t{}return(e=t).\u0275fac=function(n){return new(n||e)},e.\u0275mod=Mr({type:e}),e.\u0275inj=ur({imports:[xb.forRoot(jR),xb]}),t})(),YR=(()=>{var e;class t{constructor(){this.title="client"}}return(e=t).\u0275fac=function(n){return new(n||e)},e.\u0275cmp=ts({type:e,selectors:[["math-root"]],decls:2,vars:0,template:function(n,s){1&n&&(pn(0,"main"),gn(1,"router-outlet"),zi())},dependencies:[gp]}),t})(),VR=(()=>{var e;class t{}return(e=t).\u0275fac=function(n){return new(n||e)},e.\u0275mod=Mr({type:e,bootstrap:[YR]}),e.\u0275inj=ur({imports:[SI,UR]}),t})();wI().bootstrapModule(VR).catch(e=>console.error(e))},222:(x,k,$)=>{$.d(k,{Z:()=>C});var f,F=$(917);F.Z.extendConstants(F.Z,f={version:"1.6.0",licenseText:"JSXGraph v1.6.0 Copyright (C) see https://jsxgraph.org",COORDS_BY_USER:1,COORDS_BY_SCREEN:2,OBJECT_TYPE_ARC:1,OBJECT_TYPE_ARROW:2,OBJECT_TYPE_AXIS:3,OBJECT_TYPE_AXISPOINT:4,OBJECT_TYPE_TICKS:5,OBJECT_TYPE_CIRCLE:6,OBJECT_TYPE_CONIC:7,OBJECT_TYPE_CURVE:8,OBJECT_TYPE_GLIDER:9,OBJECT_TYPE_IMAGE:10,OBJECT_TYPE_LINE:11,OBJECT_TYPE_POINT:12,OBJECT_TYPE_SLIDER:13,OBJECT_TYPE_CAS:14,OBJECT_TYPE_GXTCAS:15,OBJECT_TYPE_POLYGON:16,OBJECT_TYPE_SECTOR:17,OBJECT_TYPE_TEXT:18,OBJECT_TYPE_ANGLE:19,OBJECT_TYPE_INTERSECTION:20,OBJECT_TYPE_TURTLE:21,OBJECT_TYPE_VECTOR:22,OBJECT_TYPE_OPROJECT:23,OBJECT_TYPE_GRID:24,OBJECT_TYPE_TANGENT:25,OBJECT_TYPE_HTMLSLIDER:26,OBJECT_TYPE_CHECKBOX:27,OBJECT_TYPE_INPUT:28,OBJECT_TYPE_BUTTON:29,OBJECT_TYPE_TRANSFORMATION:30,OBJECT_TYPE_FOREIGNOBJECT:31,OBJECT_TYPE_VIEW3D:32,OBJECT_TYPE_POINT3D:33,OBJECT_TYPE_LINE3D:34,OBJECT_TYPE_PLANE3D:35,OBJECT_TYPE_CURVE3D:36,OBJECT_TYPE_SURFACE3D:37,OBJECT_CLASS_POINT:1,OBJECT_CLASS_LINE:2,OBJECT_CLASS_CIRCLE:3,OBJECT_CLASS_CURVE:4,OBJECT_CLASS_AREA:5,OBJECT_CLASS_OTHER:6,OBJECT_CLASS_TEXT:7,OBJECT_CLASS_3D:8,GENTYPE_ABC:1,GENTYPE_AXIS:2,GENTYPE_MID:3,GENTYPE_REFLECTION:4,GENTYPE_MIRRORELEMENT:5,GENTYPE_REFLECTION_ON_LINE:4,GENTYPE_REFLECTION_ON_POINT:5,GENTYPE_TANGENT:6,GENTYPE_PARALLEL:7,GENTYPE_BISECTORLINES:8,GENTYPE_BOARDIMG:9,GENTYPE_BISECTOR:10,GENTYPE_NORMAL:11,GENTYPE_POINT:12,GENTYPE_GLIDER:13,GENTYPE_INTERSECTION:14,GENTYPE_CIRCLE:15,GENTYPE_CIRCLE2POINTS:16,GENTYPE_LINE:17,GENTYPE_TRIANGLE:18,GENTYPE_QUADRILATERAL:19,GENTYPE_TEXT:20,GENTYPE_POLYGON:21,GENTYPE_REGULARPOLYGON:22,GENTYPE_SECTOR:23,GENTYPE_ANGLE:24,GENTYPE_PLOT:25,GENTYPE_SLIDER:26,GENTYPE_TRUNCATE:27,GENTYPE_JCODE:28,GENTYPE_MOVEMENT:29,GENTYPE_COMBINED:30,GENTYPE_RULER:31,GENTYPE_SLOPETRIANGLE:32,GENTYPE_PERPSEGMENT:33,GENTYPE_LABELMOVEMENT:34,GENTYPE_VECTOR:35,GENTYPE_NONREFLEXANGLE:36,GENTYPE_REFLEXANGLE:37,GENTYPE_PATH:38,GENTYPE_DERIVATIVE:39,GENTYPE_DELETE:41,GENTYPE_COPY:42,GENTYPE_MIRROR:43,GENTYPE_ROTATE:44,GENTYPE_ABLATION:45,GENTYPE_MIGRATE:46,GENTYPE_VECTORCOPY:47,GENTYPE_POLYGONCOPY:48,GENTYPE_CTX_TYPE_G:51,GENTYPE_CTX_TYPE_P:52,GENTYPE_CTX_TRACE:53,GENTYPE_CTX_VISIBILITY:54,GENTYPE_CTX_CCVISIBILITY:55,GENTYPE_CTX_MPVISIBILITY:56,GENTYPE_CTX_WITHLABEL:57,GENTYPE_CTX_LABEL:58,GENTYPE_CTX_FIXED:59,GENTYPE_CTX_STROKEWIDTH:60,GENTYPE_CTX_LABELSIZE:61,GENTYPE_CTX_SIZE:62,GENTYPE_CTX_FACE:63,GENTYPE_CTX_STRAIGHT:64,GENTYPE_CTX_ARROW:65,GENTYPE_CTX_COLOR:66,GENTYPE_CTX_RADIUS:67,GENTYPE_CTX_COORDS:68,GENTYPE_CTX_TEXT:69,GENTYPE_CTX_ANGLERADIUS:70,GENTYPE_CTX_DOTVISIBILITY:71,GENTYPE_CTX_FILLOPACITY:72,GENTYPE_CTX_PLOT:73,GENTYPE_CTX_SCALE:74,GENTYPE_CTX_SLIDER_BOUND:75,GENTYPE_CTX_POINT1:76,GENTYPE_CTX_POINT2:77,GENTYPE_CTX_LABELSTICKY:78,GENTYPE_CTX_TYPE_I:79,GENTYPE_CTX_HASINNERPOINTS:80,GENTYPE_CTX_SLIDER_STEP:81,GENTYPE_CTX_SNAPTOGRID:82,GENTYPE_CTX_SNAPTOPOINTS:83,GENTYPE_CTX_STROKEDASH:84,GENTYPE_CTX_SLIDER_VALUE:85,GENTYPE_CTX_SECTORBORDERS:86,GENTYPE_CTX_CURVETAU:87,GENTYPE_CTX_SLIDER_POS:88});const C=f},70:(x,k,$)=>{$.d(k,{Z:()=>M});var F=$(917),X=$(222),K=$(131),O=$(695),A=$(515);F.Z.Coords=function(f,C,_,v){this.board=_,this.usrCoords=[],this.scrCoords=[],this.emitter=!O.Z.exists(v)||v,this.emitter&&K.Z.eventify(this),this.setCoordinates(f,C,!1,!0)},F.Z.extend(F.Z.Coords.prototype,{normalizeUsrCoords:function(){Math.abs(this.usrCoords[0])>A.Z.eps&&(this.usrCoords[1]/=this.usrCoords[0],this.usrCoords[2]/=this.usrCoords[0],this.usrCoords[0]=1)},usr2screen:function(f){var C=Math.round,_=this.board,v=this.usrCoords,p=_.origin.scrCoords;!0===f?(this.scrCoords[0]=C(v[0]),this.scrCoords[1]=C(v[0]*p[1]+v[1]*_.unitX),this.scrCoords[2]=C(v[0]*p[2]-v[2]*_.unitY)):(this.scrCoords[0]=v[0],this.scrCoords[1]=v[0]*p[1]+v[1]*_.unitX,this.scrCoords[2]=v[0]*p[2]-v[2]*_.unitY)},screen2usr:function(){var f=this.board.origin.scrCoords,C=this.scrCoords,_=this.board;this.usrCoords[0]=1,this.usrCoords[1]=(C[1]-f[1])/_.unitX,this.usrCoords[2]=(f[2]-C[2])/_.unitY},distance:function(f,C){var v,b,_=0,p=this.usrCoords,m=this.scrCoords;if(f===X.Z.COORDS_BY_USER){if((_=(b=p[0]-(v=C.usrCoords)[0])*b)>A.Z.eps*A.Z.eps)return Number.POSITIVE_INFINITY;_+=(b=p[1]-v[1])*b,_+=(b=p[2]-v[2])*b}else _+=(b=m[1]-(v=C.scrCoords)[1])*b,_+=(b=m[2]-v[2])*b;return Math.sqrt(_)},setCoordinates:function(f,C,_,v){var p=this.usrCoords,m=this.scrCoords,b=[p[0],p[1],p[2]],P=[m[0],m[1],m[2]];return f===X.Z.COORDS_BY_USER?(2===C.length?(p[0]=1,p[1]=C[0],p[2]=C[1]):(p[0]=C[0],p[1]=C[1],p[2]=C[2],this.normalizeUsrCoords()),this.usr2screen(_)):(2===C.length?(m[1]=C[0],m[2]=C[1]):(m[1]=C[1],m[2]=C[2]),this.screen2usr()),this.emitter&&!v&&(P[1]!==m[1]||P[2]!==m[2])&&this.triggerEventHandlers(["update"],[b,P]),this},copy:function(f,C){return void 0===C&&(C=0),this[f].slice(C)},isReal:function(){return!isNaN(this.usrCoords[1]+this.usrCoords[2])&&Math.abs(this.usrCoords[0])>A.Z.eps},__evt__update:function(f,C){},__evt:function(){}});const M=F.Z.Coords},823:(x,k,$)=>{$.d(k,{Z:()=>_});var F=$(917),X=$(515),K=$(209),O=$(514),A=$(706),M=$(70),f=$(222),C=$(695);F.Z.CoordsElement=function(v,p){var m;for(C.Z.exists(v)||(v=[1,0,0]),m=0;m<v.length;++m)v[m]=parseFloat(v[m]);this.coords=new M.Z(f.Z.COORDS_BY_USER,v,this.board),this.initialCoords=new M.Z(f.Z.COORDS_BY_USER,v,this.board),this.position=null,this.isConstrained=!1,this.onPolygon=!1,this.slideObject=null,this.slideObjects=[],this.needsUpdateFromParent=!0,this.groups=[],this.Xjc=null,this.Yjc=null,this.methodMap=C.Z.deepCopy(this.methodMap,{move:"moveTo",moveTo:"moveTo",moveAlong:"moveAlong",visit:"visit",glide:"makeGlider",makeGlider:"makeGlider",intersect:"makeIntersection",makeIntersection:"makeIntersection",X:"X",Y:"Y",free:"free",setPosition:"setGliderPosition",setGliderPosition:"setGliderPosition",addConstraint:"addConstraint",dist:"Dist",onPolygon:"onPolygon"}),C.Z.exists(this.element)&&this.addAnchor(v,p),this.isDraggable=!0},F.Z.extend(F.Z.CoordsElement.prototype,{updateConstraint:function(){return this},updateCoords:function(v){return this.needsUpdate?(C.Z.exists(v)||(v=!1),C.Z.evaluate(this.visProp.frozen)||this.updateConstraint(),this.type===f.Z.OBJECT_TYPE_GLIDER&&(this.isConstrained&&(v=!1),v?this.updateGliderFromParent():this.updateGlider()),this.updateTransform(v),this):this},updateGlider:function(){var v,p,m,b,P,S,Z,I,B,z,G,W,ee,ae,ue,ie,xe,we,Ae,ct,J=2*Math.PI,Pe=!1,me=this.slideObject,Ne=[];if(this.needsUpdateFromParent=!1,me.elementClass===f.Z.OBJECT_CLASS_CIRCLE)C.Z.evaluate(this.visProp.isgeonext)&&(J=1),ue=K.Z.projectPointToCircle(this,me,this.board),ie=K.Z.rad([me.center.X()+1,me.center.Y()],me.center,this)/J;else if(me.elementClass===f.Z.OBJECT_CLASS_LINE){if(this.onPolygon){if(p=(P=me.point2.coords.usrCoords)[v=1]-(b=me.point1.coords.usrCoords)[v],Math.abs(p)<X.Z.eps&&(p=P[v=2]-b[v]),Z=K.Z.projectPointToLine(this,me,this.board),S=me.parentPolygon,(I=(Z.usrCoords[v]-b[v])/p)<0){for(v=0;v<S.borders.length;v++)if(me===S.borders[v]){me=S.borders[(v-1+S.borders.length)%S.borders.length];break}}else if(I>1)for(v=0;v<S.borders.length;v++)if(me===S.borders[v]){me=S.borders[(v+1+S.borders.length)%S.borders.length];break}me.id!==this.slideObject.id&&(this.slideObject=me)}(p=(b=me.point1.coords).distance(f.Z.COORDS_BY_USER,P=me.point2.coords))<X.Z.eps?(ue=b,Pe=!0,ie=0):(ue=K.Z.projectPointToLine(this,me,this.board),b=b.usrCoords.slice(0),P=P.usrCoords.slice(0),Math.abs(P[0])<X.Z.eps?(p=P[v=1],Math.abs(p)<X.Z.eps&&(p=P[v=2]),ie=((p=(ue.usrCoords[v]-b[v])/p)>=0?1:-1)*(p=Math.abs(p))/(p+1)):Math.abs(b[0])<X.Z.eps?(p=b[v=1],Math.abs(p)<X.Z.eps&&(p=b[v=2]),ie=(p=(ue.usrCoords[v]-P[v])/p)<0?(1-2*p)/(1-p):1/(p+1)):(p=P[v=1]-b[v],Math.abs(p)<X.Z.eps&&(p=P[v=2]-b[v]),ie=(ue.usrCoords[v]-b[v])/p)),xe=C.Z.evaluate(this.visProp.snapwidth),C.Z.evaluate(xe)>0&&Math.abs(this._smax-this._smin)>=X.Z.eps&&(m=(ie=Math.max(Math.min(ie,1),0))*(this._smax-this._smin)+this._smin,ie=((m=Math.round(m/xe)*xe)-this._smin)/(this._smax-this._smin),this.update(!0)),b=me.point1.coords,!C.Z.evaluate(me.visProp.straightfirst)&&Math.abs(b.usrCoords[0])>X.Z.eps&&ie<0&&(ue=b,Pe=!0,ie=0),P=me.point2.coords,!C.Z.evaluate(me.visProp.straightlast)&&Math.abs(P.usrCoords[0])>X.Z.eps&&ie>1&&(ue=P,Pe=!0,ie=1)}else if(me.type===f.Z.OBJECT_TYPE_TURTLE)this.updateConstraint(),ue=(we=K.Z.projectPointToTurtle(this,me,this.board))[0],ie=we[1];else if(me.elementClass===f.Z.OBJECT_CLASS_CURVE)if(me.type===f.Z.OBJECT_TYPE_ARC||me.type===f.Z.OBJECT_TYPE_SECTOR)ue=K.Z.projectPointToCircle(this,me,this.board),B=K.Z.rad(me.radiuspoint,me.center,this),z=0,G=K.Z.rad(me.radiuspoint,me.center,me.anglepoint),ie=B,("minor"===(xe=C.Z.evaluate(me.visProp.selection))&&G>Math.PI||"major"===xe&&G<Math.PI)&&(z=G,G=2*Math.PI),(B<z||B>G)&&(ie=G,(B<z&&B>.5*z||B>G&&B>.5*G+Math.PI)&&(ie=z),this.needsUpdateFromParent=!0,this.updateGliderFromParent()),J=G-z,this.visProp.isgeonext&&(J=1),Math.abs(J)>X.Z.eps&&(ie/=J);else if(this.updateConstraint(),me.transformations.length>0){for(ct=!1,(we=me.getTransformationSource())[0]&&(ct=we[0],Ne.push(me),Ne.push(we[1]));we[0]&&C.Z.exists(we[1]._transformationSource);)we=we[1].getTransformationSource(),Ne.push(we[1]);if(Ae=this.coords.usrCoords,ct){for(v=0;v<Ne.length;v++)Ne[v].updateTransformMatrix(),ae=X.Z.inverse(Ne[v].transformMat),Ae=X.Z.matVecMult(ae,Ae);for(W=new M.Z(f.Z.COORDS_BY_USER,Ae,this.board).usrCoords,Ae=(ee=K.Z.projectCoordsToCurve(W[1],W[2],this.position||0,Ne[Ne.length-1],this.board))[0].usrCoords,v=Ne.length-2;v>=0;v--)Ae=X.Z.matVecMult(Ne[v].transformMat,Ae);ee[0]=new M.Z(f.Z.COORDS_BY_USER,Ae,this.board)}else me.updateTransformMatrix(),ae=X.Z.inverse(me.transformMat),Ae=X.Z.matVecMult(ae,Ae),W=new M.Z(f.Z.COORDS_BY_USER,Ae,this.board).usrCoords,ee=K.Z.projectCoordsToCurve(W[1],W[2],this.position||0,me,this.board);ue=ee[0],ie=ee[1]}else ue=(we=K.Z.projectPointToCurve(this,me,this.board))[0],ie=we[1];else C.Z.isPoint(me)&&(ue=K.Z.projectPointToPoint(this,me,this.board),ie=this.position);this.coords.setCoordinates(f.Z.COORDS_BY_USER,ue.usrCoords,Pe),this.position=ie},updateGliderFromParent:function(){var v,p,m,b,P,I,B,j,z,G,J,W,S=this.slideObject,Z=[],ee=2*Math.PI;if(this.needsUpdateFromParent){if(S.elementClass===f.Z.OBJECT_CLASS_CIRCLE)m=S.Radius(),C.Z.evaluate(this.visProp.isgeonext)&&(ee=1),P=[S.center.X()+m*Math.cos(this.position*ee),S.center.Y()+m*Math.sin(this.position*ee)];else if(S.elementClass===f.Z.OBJECT_CLASS_LINE)p=S.point2.coords.usrCoords,0===(v=S.point1.coords.usrCoords)[0]&&0===v[1]&&0===v[2]||0===p[0]&&0===p[1]&&0===p[2]?P=[0,0,0]:Math.abs(p[0])<X.Z.eps?(b=Math.min(Math.abs(this.position),1-X.Z.eps),b/=1-b,this.position<0&&(b=-b),P=[v[0]+b*p[0],v[1]+b*p[1],v[2]+b*p[2]]):Math.abs(v[0])<X.Z.eps?(b=Math.max(this.position,X.Z.eps),b=Math.min(b,2-X.Z.eps),P=[p[0]+(b=b>1?(b-1)/(b-2):(1-b)/b)*v[0],p[1]+b*v[1],p[2]+b*v[2]]):P=[v[0]+(b=this.position)*(p[0]-v[0]),v[1]+b*(p[1]-v[1]),v[2]+b*(p[2]-v[2])];else if(S.type===f.Z.OBJECT_TYPE_TURTLE)this.coords.setCoordinates(f.Z.COORDS_BY_USER,[S.Z(this.position),S.X(this.position),S.Y(this.position)]),this.updateConstraint(),P=K.Z.projectPointToTurtle(this,S,this.board)[0].usrCoords;else if(S.elementClass===f.Z.OBJECT_CLASS_CURVE){for(j=!1,(I=S.getTransformationSource())[0]&&(j=I[0],Z.push(S),Z.push(I[1]));I[0]&&C.Z.exists(I[1]._transformationSource);)I=I[1].getTransformationSource(),Z.push(I[1]);if(this.coords.setCoordinates(f.Z.COORDS_BY_USER,j?[Z[Z.length-1].Z(this.position),Z[Z.length-1].X(this.position),Z[Z.length-1].Y(this.position)]:[S.Z(this.position),S.X(this.position),S.Y(this.position)]),S.type===f.Z.OBJECT_TYPE_ARC||S.type===f.Z.OBJECT_TYPE_SECTOR)z=K.Z.rad([S.center.X()+1,S.center.Y()],S.center,S.radiuspoint),G=0,W=K.Z.rad(S.radiuspoint,S.center,S.anglepoint),("minor"===S.visProp.selection&&W>Math.PI||"major"===S.visProp.selection&&W<Math.PI)&&(G=W,W=2*Math.PI),ee=W-G,C.Z.evaluate(this.visProp.isgeonext)&&(ee=1),((J=this.position*ee)<G||J>W)&&(((J=W)<G&&J>.5*G||J>W&&J>.5*W+Math.PI)&&(J=G),this.position=J,Math.abs(ee)>X.Z.eps&&(this.position/=ee)),m=S.Radius(),P=[S.center.X()+m*Math.cos(this.position*ee+z),S.center.Y()+m*Math.sin(this.position*ee+z)];else if(this.updateConstraint(),j)for(P=K.Z.projectPointToCurve(this,Z[Z.length-1],this.board)[0].usrCoords,B=Z.length-2;B>=0;B--)P=new M.Z(f.Z.COORDS_BY_USER,X.Z.matVecMult(Z[B].transformMat,P),this.board).usrCoords;else P=K.Z.projectPointToCurve(this,S,this.board)[0].usrCoords}else C.Z.isPoint(S)&&(P=K.Z.projectPointToPoint(this,S,this.board).usrCoords);this.coords.setCoordinates(f.Z.COORDS_BY_USER,P,!1)}else this.needsUpdateFromParent=!0},updateRendererGeneric:function(v){return this.needsUpdate&&this.board.renderer?(this.visPropCalc.visible&&(this.isReal=!isNaN(this.coords.usrCoords[1]+this.coords.usrCoords[2]),this.isReal=Math.abs(this.coords.usrCoords[0])>X.Z.eps&&this.isReal,this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer[v](this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},X:function(){return this.coords.usrCoords[1]},Y:function(){return this.coords.usrCoords[2]},Z:function(){return this.coords.usrCoords[0]},XEval:function(){return this.coords.usrCoords[1]},YEval:function(){return this.coords.usrCoords[2]},ZEval:function(){return this.coords.usrCoords[0]},Dist:function(v){return this.isReal&&v.isReal?this.coords.distance(f.Z.COORDS_BY_USER,v.coords):NaN},snapToGrid:function(v){return this.handleSnapToGrid(v)},handleSnapToPoints:function(v){var p,m,b,S,B,j,G,J,P=0,Z=1/0,I=null,z=C.Z.evaluate(this.visProp.ignoredsnaptopoints),W=!1;if(S=this.board.objectsList.length,z&&(G=z.length),C.Z.evaluate(this.visProp.snaptopoints)||v){for(B=C.Z.evaluate(this.visProp.attractorunit),j=C.Z.evaluate(this.visProp.attractordistance),p=0;p<S;p++){if(m=this.board.objectsList[p],z){for(W=!1,J=0;J<G;J++)if(m===this.board.select(z[J])){W=!0;break}if(W)continue}C.Z.isPoint(m)&&m!==this&&m.visPropCalc.visible&&(P=(b=K.Z.projectPointToPoint(this,m,this.board)).distance("screen"===B?f.Z.COORDS_BY_SCREEN:f.Z.COORDS_BY_USER,this.coords))<j&&P<Z&&(Z=P,I=b)}null!==I&&this.coords.setCoordinates(f.Z.COORDS_BY_USER,I.usrCoords)}return this},snapToPoints:function(v){return this.handleSnapToPoints(v)},handleAttractors:function(){var v,p,m,P,b=0,S=C.Z.evaluate(this.visProp.attractorunit),Z=C.Z.evaluate(this.visProp.attractordistance),I=C.Z.evaluate(this.visProp.snatchdistance),B=C.Z.evaluate(this.visProp.attractors),j=B.length;if(0!==Z){for(v=0;v<j;v++)if(p=this.board.select(B[v]),C.Z.exists(p)&&p!==this){if(C.Z.isPoint(p)?m=K.Z.projectPointToPoint(this,p,this.board):p.elementClass===f.Z.OBJECT_CLASS_LINE?(P=K.Z.projectCoordsToSegment(this.coords.usrCoords,p.point1.coords.usrCoords,p.point2.coords.usrCoords),m=!C.Z.evaluate(p.visProp.straightfirst)&&P[1]<0?p.point1.coords:!C.Z.evaluate(p.visProp.straightlast)&&P[1]>1?p.point2.coords:new M.Z(f.Z.COORDS_BY_USER,P[0],this.board)):p.elementClass===f.Z.OBJECT_CLASS_CIRCLE?m=K.Z.projectPointToCircle(this,p,this.board):p.elementClass===f.Z.OBJECT_CLASS_CURVE?m=K.Z.projectPointToCurve(this,p,this.board)[0]:p.type===f.Z.OBJECT_TYPE_TURTLE?m=K.Z.projectPointToTurtle(this,p,this.board)[0]:p.type===f.Z.OBJECT_TYPE_POLYGON&&(m=new M.Z(f.Z.COORDS_BY_USER,K.Z.projectCoordsToPolygon(this.coords.usrCoords,p),this.board)),(b=m.distance("screen"===S?f.Z.COORDS_BY_SCREEN:f.Z.COORDS_BY_USER,this.coords))<Z){this.type===f.Z.OBJECT_TYPE_GLIDER&&(p===this.slideObject||this.slideObject&&this.onPolygon&&this.slideObject.parentPolygon===p)||this.makeGlider(p);break}b>=I&&(p===this.slideObject||this.slideObject&&this.onPolygon&&this.slideObject.parentPolygon===p)&&this.popSlideObject()}return this}},setPositionDirectly:function(v,p){var m,b,P,Z,S=this.coords;if(this.relativeCoords)return b=new M.Z(v,p,this.board),C.Z.evaluate(this.visProp.islabel)?(P=A.Z.subtract(b.scrCoords,S.scrCoords),this.relativeCoords.scrCoords[1]+=P[1],this.relativeCoords.scrCoords[2]+=P[2]):(P=A.Z.subtract(b.usrCoords,S.usrCoords),this.relativeCoords.usrCoords[1]+=P[1],this.relativeCoords.usrCoords[2]+=P[2]),this;for(this.coords.setCoordinates(v,p),this.handleSnapToGrid(),this.handleSnapToPoints(),this.handleAttractors(),m=this.transformations.length-1;m>=0;m--)v===f.Z.COORDS_BY_SCREEN?Z=new M.Z(v,p,this.board).usrCoords:(2===p.length&&(p=[1].concat(p)),Z=p),this.initialCoords.setCoordinates(f.Z.COORDS_BY_USER,X.Z.matVecMult(X.Z.inverse(this.transformations[m].matrix),Z));return this.prepareUpdate().update(),this.board.isSuspendedUpdate&&this.type===f.Z.OBJECT_TYPE_GLIDER&&this.updateGlider(),this},setPositionByTransform:function(v,p){var m;return p=new M.Z(v,p,this.board),m=this.board.create("transform",p.usrCoords.slice(1),{type:"translate"}),this.transformations.length>0&&this.transformations[this.transformations.length-1].isNumericMatrix?this.transformations[this.transformations.length-1].melt(m):this.addTransform(this,m),this.prepareUpdate().update(),this},setPosition:function(v,p){return this.setPositionDirectly(v,p)},setGliderPosition:function(v){return this.type===f.Z.OBJECT_TYPE_GLIDER&&(this.position=v,this.board.update()),this},makeGlider:function(v){var b,P,S,p=this.board.select(v),m=!1;if(p.type===f.Z.OBJECT_TYPE_POLYGON){for(b=Number.MAX_VALUE,P=0;P<p.borders.length;P++)(S=F.Z.Math.Geometry.distPointLine(this.coords.usrCoords,p.borders[P].stdform))<b&&(b=S,v=p.borders[P]);p=this.board.select(v),m=!0}if(!C.Z.exists(p))throw new Error("JSXGraph: slide object undefined.");if(p.type===f.Z.OBJECT_TYPE_TICKS)throw new Error("JSXGraph: gliders on ticks are not possible.");return this.slideObject=this.board.select(v),this.slideObjects.push(this.slideObject),this.addParents(v),this.type=f.Z.OBJECT_TYPE_GLIDER,this.elType="glider",this.visProp.snapwidth=-1,this.slideObject.addChild(this),this.isDraggable=!0,this.onPolygon=m,this.generatePolynomial=function(){return this.slideObject.generatePolynomial(this)},this.updateGlider(),this.needsUpdateFromParent=!0,this.updateGliderFromParent(),this},popSlideObject:function(){this.slideObjects.length>0&&(this.slideObjects.pop(),this.slideObject.removeChild(this),0===this.slideObjects.length?(this.type=this._org_type,this.type===f.Z.OBJECT_TYPE_POINT?this.elType="point":this.elementClass===f.Z.OBJECT_CLASS_TEXT?this.elType="text":this.type===f.Z.OBJECT_TYPE_IMAGE?this.elType="image":this.type===f.Z.OBJECT_TYPE_FOREIGNOBJECT&&(this.elType="foreignobject"),this.slideObject=null):this.slideObject=this.slideObjects[this.slideObjects.length-1])},free:function(){var v,p;if(this.type!==f.Z.OBJECT_TYPE_GLIDER){if(this.transformations.length=0,delete this.updateConstraint,this.isConstrained=!1,this.isDraggable)return;this.isDraggable=!0,this.elementClass===f.Z.OBJECT_CLASS_POINT&&(this.type=f.Z.OBJECT_TYPE_POINT,this.elType="point"),this.XEval=function(){return this.coords.usrCoords[1]},this.YEval=function(){return this.coords.usrCoords[2]},this.ZEval=function(){return this.coords.usrCoords[0]},this.Xjc=null,this.Yjc=null}for(v in this.board.objects)this.board.objects.hasOwnProperty(v)&&(p=this.board.objects[v]).descendants&&(delete p.descendants[this.id],delete p.childElements[this.id],this.hasLabel&&(delete p.descendants[this.label.id],delete p.childElements[this.label.id]));this.ancestors={},this.slideObject=null,this.slideObjects=[],this.elementClass===f.Z.OBJECT_CLASS_POINT?(this.type=f.Z.OBJECT_TYPE_POINT,this.elType="point"):this.elementClass===f.Z.OBJECT_CLASS_TEXT?(this.type=this._org_type,this.elType="text"):this.elementClass===f.Z.OBJECT_CLASS_OTHER&&(this.type=this._org_type,this.elType="image")},addConstraint:function(v){var p,m,b=[],P=["X","Y"],S=function(I){return function(){return I}},Z=function(I){return function(){return I.Value()}};for(this.elementClass===f.Z.OBJECT_CLASS_POINT&&(this.type=f.Z.OBJECT_TYPE_CAS),this.isDraggable=!1,p=0;p<v.length;p++)C.Z.isString(m=v[p])?(b[p]=this.board.jc.snippet(m,!0,null,!0),this.addParentsFromJCFunctions([b[p]]),2===v.length&&(this[P[p]+"jc"]=v[p])):C.Z.isFunction(m)?b[p]=m:C.Z.isNumber(m)?b[p]=S(m):C.Z.isObject(m)&&C.Z.isFunction(m.Value)&&(b[p]=Z(m)),b[p].origin=m;return 1===v.length?this.updateConstraint=function(){var I=b[0]();return C.Z.isArray(I)?this.coords.setCoordinates(f.Z.COORDS_BY_USER,I):this.coords=I,this}:2===v.length?(this.XEval=b[0],this.YEval=b[1],this.addParents([b[0].origin,b[1].origin]),this.updateConstraint=function(){return this.coords.setCoordinates(f.Z.COORDS_BY_USER,[this.XEval(),this.YEval()]),this}):(this.ZEval=b[0],this.XEval=b[1],this.YEval=b[2],this.addParents([b[0].origin,b[1].origin,b[2].origin]),this.updateConstraint=function(){return this.coords.setCoordinates(f.Z.COORDS_BY_USER,[this.ZEval(),this.XEval(),this.YEval()]),this}),this.isConstrained=!0,this.prepareUpdate().update(),this.board.isSuspendedUpdate||(this.updateVisibility().updateRenderer(),this.hasLabel&&this.label.fullUpdate()),this},addAnchor:function(v,p){this.relativeCoords=p?new M.Z(f.Z.COORDS_BY_SCREEN,v.slice(0,2),this.board):new M.Z(f.Z.COORDS_BY_USER,v,this.board),this.element.addChild(this),p&&this.addParents(this.element),this.XEval=function(){var m,P,S;return C.Z.evaluate(this.visProp.islabel)?(S=C.Z.evaluate(this.visProp.offset),m=parseFloat(S[0]),P=this.element.getLabelAnchor(),new M.Z(f.Z.COORDS_BY_SCREEN,[m+this.relativeCoords.scrCoords[1]+P.scrCoords[1],0],this.board).usrCoords[1]):(P=this.element.getTextAnchor(),this.relativeCoords.usrCoords[1]+P.usrCoords[1])},this.YEval=function(){var m,P,S;return C.Z.evaluate(this.visProp.islabel)?(S=C.Z.evaluate(this.visProp.offset),m=-parseFloat(S[1]),P=this.element.getLabelAnchor(),new M.Z(f.Z.COORDS_BY_SCREEN,[0,m+this.relativeCoords.scrCoords[2]+P.scrCoords[2]],this.board).usrCoords[2]):(P=this.element.getTextAnchor(),this.relativeCoords.usrCoords[2]+P.usrCoords[2])},this.ZEval=C.Z.createFunction(1,this.board,""),this.updateConstraint=function(){this.coords.setCoordinates(f.Z.COORDS_BY_USER,[this.ZEval(),this.XEval(),this.YEval()])},this.isConstrained=!0,this.updateConstraint()},updateTransform:function(v){var p;if(0===this.transformations.length)return this;for(p=0;p<this.transformations.length;p++)this.transformations[p].update();return this},addTransform:function(v,p){var m,b=C.Z.isArray(p)?p:[p],P=b.length;for(0===this.transformations.length&&(this.baseElement=v),m=0;m<P;m++)this.transformations.push(b[m]);return this},startAnimation:function(v,p,m){var b=C.Z.evaluate(v),P=C.Z.evaluate(p),S=this;return m=C.Z.evaluate(m)||250,this.type===f.Z.OBJECT_TYPE_GLIDER&&!C.Z.exists(this.intervalCode)&&(this.intervalCode=window.setInterval(function(){S._anim(b,P)},m),C.Z.exists(this.intervalCount)||(this.intervalCount=0)),this},stopAnimation:function(){return C.Z.exists(this.intervalCode)&&(window.clearInterval(this.intervalCode),delete this.intervalCode),this},moveAlong:function(v,p,m){m=m||{};var b,P,j,z,G,S=[],Z=[],B=p/this.board.attr.animationdelay,J=function(W,ee){return function(){return v[W][ee]}};if(C.Z.isArray(v)){for(j=v.length,b=0;b<j;b++)Z[b]=C.Z.isPoint(v[b])?v[b]:{elementClass:f.Z.OBJECT_CLASS_POINT,X:J(b,0),Y:J(b,1)};if(0===(p=p||0))return this.setPosition(f.Z.COORDS_BY_USER,[Z[Z.length-1].X(),Z[Z.length-1].Y()]),this.board.update(this);if(!C.Z.exists(m.interpolate)||m.interpolate)for(P=O.Z.Neville(Z),b=0;b<B;b++)S[b]=[],S[b][0]=P[0]((B-b)/B*P[3]()),S[b][1]=P[1]((B-b)/B*P[3]());else{for(j=v.length-1,b=0;b<B;++b)G=b/B*j-(z=Math.floor(b/B*j)),S[b]=[],S[b][0]=(1-G)*Z[z].X()+G*Z[z+1].X(),S[b][1]=(1-G)*Z[z].Y()+G*Z[z+1].Y();S.push([Z[j].X(),Z[j].Y()]),S.reverse()}this.animationPath=S}else C.Z.isFunction(v)&&(this.animationPath=v,this.animationStart=(new Date).getTime());return this.animationCallback=m.callback,this.board.addAnimation(this),this},moveTo:function(v,p,m){m=m||{},v=new M.Z(f.Z.COORDS_BY_USER,v,this.board);var b,S=Math.ceil(p/this.board.attr.animationdelay),Z=[],I=this.coords.usrCoords[1],B=this.coords.usrCoords[2],j=v.usrCoords[1]-I,z=v.usrCoords[2]-B,G=function(J){return m.effect&&"<>"===m.effect?Math.pow(Math.sin(J/S*Math.PI/2),2):J/S};if(!C.Z.exists(p)||0===p||Math.abs(v.usrCoords[0]-this.coords.usrCoords[0])>X.Z.eps)return this.setPosition(f.Z.COORDS_BY_USER,v.usrCoords),this.board.update(this);if(!C.Z.exists(m.callback)&&Math.abs(j)<X.Z.eps&&Math.abs(z)<X.Z.eps)return this;for(b=S;b>=0;b--)Z[S-b]=[v.usrCoords[0],I+j*G(b),B+z*G(b)];return this.animationPath=Z,this.animationCallback=m.callback,this.board.addAnimation(this),this},visit:function(v,p,m){v=new M.Z(f.Z.COORDS_BY_USER,v,this.board);var b,P,S,Z=this.board.attr.animationdelay,I=[],B=this.coords.usrCoords[1],j=this.coords.usrCoords[2],z=v.usrCoords[1]-B,G=v.usrCoords[2]-j,J=function(W){var ee=W<S/2?2*W/S:2*(S-W)/S;return m.effect&&"<>"===m.effect?Math.pow(Math.sin(ee*Math.PI/2),2):ee};for(C.Z.isNumber(m)?m={repeat:m}:C.Z.exists((m=m||{}).repeat)||(m.repeat=1),S=Math.ceil(p/(Z*m.repeat)),P=0;P<m.repeat;P++)for(b=S;b>=0;b--)I[P*(S+1)+S-b]=[v.usrCoords[0],B+z*J(b),j+G*J(b)];return this.animationPath=I,this.animationCallback=m.callback,this.board.addAnimation(this),this},_anim:function(v,p){var m,b,P,S,Z,I,B,j,z;return this.intervalCount+=1,this.intervalCount>p&&(this.intervalCount=0),this.slideObject.elementClass===f.Z.OBJECT_CLASS_LINE?(B=this.slideObject.point1.coords.scrCoords,j=this.slideObject.point2.coords.scrCoords,m=Math.round((j[1]-B[1])*this.intervalCount/p),b=Math.round((j[2]-B[2])*this.intervalCount/p),v>0?S=this.slideObject.point1:(S=this.slideObject.point2,m*=-1,b*=-1),this.coords.setCoordinates(f.Z.COORDS_BY_SCREEN,[S.coords.scrCoords[1]+m,S.coords.scrCoords[2]+b])):this.slideObject.elementClass===f.Z.OBJECT_CLASS_CURVE?(Z=v>0?Math.round(this.intervalCount/p*this.board.canvasWidth):Math.round((p-this.intervalCount)/p*this.board.canvasWidth),this.coords.setCoordinates(f.Z.COORDS_BY_SCREEN,[Z,0]),z=K.Z.projectPointToCurve(this,this.slideObject,this.board),this.coords=z[0],this.position=z[1]):this.slideObject.elementClass===f.Z.OBJECT_CLASS_CIRCLE&&(P=2*Math.PI,P*=v<0?this.intervalCount/p:(p-this.intervalCount)/p,I=this.slideObject.Radius(),this.coords.setCoordinates(f.Z.COORDS_BY_USER,[this.slideObject.center.coords.usrCoords[1]+I*Math.cos(P),this.slideObject.center.coords.usrCoords[2]+I*Math.sin(P)])),this.board.update(this),this},getTextAnchor:function(){return this.coords},getLabelAnchor:function(){return this.coords},getParents:function(){var v=[this.Z(),this.X(),this.Y()];return 0!==this.parents.length&&(v=this.parents),this.type===f.Z.OBJECT_TYPE_GLIDER&&(v=[this.X(),this.Y(),this.slideObject.id]),v}}),F.Z.CoordsElement.create=function(v,p,m,b,P,S){var Z,B,I=!1;for(B=0;B<m.length;B++)(C.Z.isFunction(m[B])||C.Z.isString(m[B]))&&(I=!0);if(I)(Z=new v(p,[0,0],b,P,S)).addConstraint(m);else if(C.Z.isNumber(m[0])&&C.Z.isNumber(m[1]))Z=new v(p,m,b,P,S),C.Z.exists(b.slideobject)?Z.makeGlider(b.slideobject):Z.baseElement=Z,Z.isDraggable=!0;else{if(!C.Z.isObject(m[0])||!C.Z.isTransformationOrArray(m[1]))return!1;(Z=new v(p,[0,0],b,P,S)).addTransform(m[0],m[1]),Z.isDraggable=!1}return Z.handleSnapToGrid(),Z.handleSnapToPoints(),Z.handleAttractors(),Z.addParents(m),Z};const _=F.Z.CoordsElement},461:(x,k,$)=>{$.d(k,{Z:()=>v});var F=$(917),X=$(222),K=$(70),O=$(515),A=$(706),M=$(982),f=$(131),C=$(500),_=$(695);F.Z.GeometryElement=function(p,m,b,P){var S,Z,I;if(this.needsUpdate=!0,this.isDraggable=!1,this.isReal=!0,this.childElements={},this.hasLabel=!1,this.highlighted=!1,this.notExistingParents={},this.traces={},this.numTraces=0,this.transformations=[],this.baseElement=null,this.descendants={},this.ancestors={},this.parents=[],this.symbolic={},this.rendNode=null,this.elType="",this.dump=!0,this.subs={},this.inherits=[],this._pos=-1,this.stdform=[1,0,0,0,1,1,0,0],this.methodMap={setLabel:"setLabel",label:"label",setName:"setName",getName:"getName",addTransform:"addTransform",setProperty:"setAttribute",setAttribute:"setAttribute",addChild:"addChild",animate:"animate",on:"on",off:"off",trigger:"trigger",addTicks:"addTicks",removeTicks:"removeTicks",removeAllTicks:"removeAllTicks"},this.quadraticform=[[1,0,0],[0,1,0],[0,0,1]],this.visProp={},this.visPropCalc={visible:!1},f.Z.eventify(this),this.mouseover=!1,this.lastDragTime=new Date,arguments.length>0){for(Z in this.board=p,this.type=b,this._org_type=b,this.elementClass=P||X.Z.OBJECT_CLASS_OTHER,this.id=m.id,_.Z.exists(S=m.name)||(S=this.board.generateName(this)),""!==S&&(this.board.elementsByName[S]=this),this.name=S,this.needsRegularUpdate=m.needsregularupdate,_.Z.clearVisPropOld(this),I=this.resolveShortcuts(m))I.hasOwnProperty(Z)&&this._set(Z,I[Z]);this.visProp.draft=I.draft&&I.draft.draft}},F.Z.extend(F.Z.GeometryElement.prototype,{addChild:function(p){var m,b;for(m in this.childElements[p.id]=p,this.addDescendants(p),p.ancestors[this.id]=this,this.descendants)if(this.descendants.hasOwnProperty(m))for(b in this.descendants[m].ancestors[this.id]=this,this.ancestors)this.ancestors.hasOwnProperty(b)&&(this.descendants[m].ancestors[this.ancestors[b].id]=this.ancestors[b]);for(m in this.ancestors)if(this.ancestors.hasOwnProperty(m))for(b in this.descendants)this.descendants.hasOwnProperty(b)&&(this.ancestors[m].descendants[this.descendants[b].id]=this.descendants[b]);return this},addDescendants:function(p){var m;for(m in this.descendants[p.id]=p,p.childElements)p.childElements.hasOwnProperty(m)&&this.addDescendants(p.childElements[m]);return this},addParents:function(p){var m,b,P;for(b=(P=_.Z.isArray(p)?p:arguments).length,m=0;m<b;++m)_.Z.exists(P[m])&&(_.Z.isId(this.board,P[m])?this.parents.push(P[m]):_.Z.exists(P[m].id)&&this.parents.push(P[m].id));this.parents=_.Z.uniqueArray(this.parents)},setParents:function(p){this.parents=[],this.addParents(p)},addParentsFromJCFunctions:function(p){var m,b,P;for(m=0;m<p.length;m++)for(b in p[m].deps)this.addParents(P=p[m].deps[b]),P.addChild(this);return this},removeChild:function(p){return delete this.childElements[p.id],this.removeDescendants(p),delete p.ancestors[this.id],this},removeDescendants:function(p){var m;for(m in delete this.descendants[p.id],p.childElements)p.childElements.hasOwnProperty(m)&&this.removeDescendants(p.childElements[m]);return this},countChildren:function(){var p,m,b=0;for(p in m=this.childElements)m.hasOwnProperty(p)&&p.indexOf("Label")<0&&b++;return b},getName:function(){return this.name},addTransform:function(p){return this},draggable:function(){return this.isDraggable&&!_.Z.evaluate(this.visProp.fixed)&&this.type!==X.Z.OBJECT_TYPE_GLIDER},setPosition:function(p,m){var P,S,Z,I,b=[];if(!_.Z.exists(this.parents))return this;for(Z=this.parents.length,S=0;S<Z;++S)if(P=this.board.select(this.parents[S]),_.Z.isPoint(P)){if(!P.draggable())return this;b.push(P)}for(3===m.length&&(m=m.slice(1)),I=this.board.create("transform",m,{type:"translate"}),(Z=b.length)>0?I.applyOnce(b):this.transformations.length>0&&this.transformations[this.transformations.length-1].isNumericMatrix?this.transformations[this.transformations.length-1].melt(I):this.addTransform(I),S=0;S<Z;++S)b[S].type===X.Z.OBJECT_TYPE_GLIDER&&b[S].updateGlider();return this},setPositionDirectly:function(p,m,b){var P=new K.Z(p,m,this.board,!1),S=new K.Z(p,b,this.board,!1),Z=A.Z.subtract(P.usrCoords,S.usrCoords);return this.setPosition(X.Z.COORDS_BY_USER,Z),this},generatePolynomial:function(){return[]},animate:function(p,m,b){b=b||{};var P,S,Z,B=Math.ceil(m/this.board.attr.animationdelay),j=this,z=function(J,W,ee){var ae,ue,ie,Pe,xe;for(ae=C.Z.rgb2hsv(J),ie=((ue=C.Z.rgb2hsv(W))[0]-ae[0])/B,Pe=(ue[1]-ae[1])/B,xe=(ue[2]-ae[2])/B,j.animationData[ee]=[],Z=0;Z<B;Z++)j.animationData[ee][B-Z-1]=C.Z.hsv2rgb(ae[0]+(Z+1)*ie,ae[1]+(Z+1)*Pe,ae[2]+(Z+1)*xe)},G=function(J,W,ee,ae){var ue,ie;if(J=parseFloat(J),W=parseFloat(W),!isNaN(J)&&!isNaN(W))for(ie=(W-J)/B,j.animationData[ee]=[],Z=0;Z<B;Z++)ue=J+(Z+1)*ie,j.animationData[ee][B-Z-1]=ae?Math.floor(ue):ue};for(P in this.animationData={},p)if(p.hasOwnProperty(P))switch(S=P.toLowerCase(),S){case"strokecolor":case"fillcolor":z(this.visProp[S],p[P],S);break;case"size":if(!_.Z.isPoint(this))break;G(this.visProp[S],p[P],S,!0);break;case"strokeopacity":case"strokewidth":case"fillopacity":G(this.visProp[S],p[P],S,!1)}return this.animationCallback=b.callback,this.board.addAnimation(this),this},update:function(){return _.Z.evaluate(this.visProp.trace)&&this.cloneToBackground(),this},updateRenderer:function(){return this},fullUpdate:function(p){return this.prepareUpdate().update().updateVisibility(p).updateRenderer()},setDisplayRendNode:function(p){var m,b,P,S,Z;if(void 0===p&&(p=this.visPropCalc.visible),p===this.visPropOld.visible)return this;for(this.board.renderer.display(this,p),b=this.inherits.length,P=0;P<b;P++)if(_.Z.isArray(Z=this.inherits[P]))for(S=Z.length,m=0;m<S;m++)_.Z.exists(Z[m])&&_.Z.exists(Z[m].rendNode)&&"inherit"===_.Z.evaluate(Z[m].visProp.visible)&&Z[m].setDisplayRendNode(p);else _.Z.exists(Z)&&_.Z.exists(Z.rendNode)&&"inherit"===_.Z.evaluate(Z.visProp.visible)&&Z.setDisplayRendNode(p);return this.hasLabel&&_.Z.exists(this.label)&&_.Z.exists(this.label.rendNode)&&"inherit"===_.Z.evaluate(this.label.visProp.visible)&&this.label.setDisplayRendNode(p),this},hide:function(){return this.setAttribute({visible:!1}),this},hideElement:function(){return this.hide(),this},show:function(){return this.setAttribute({visible:!0}),this},showElement:function(){return this.show(),this},updateVisibility:function(p){var m,b,P,S,Z,I;if(this.needsUpdate){for(void 0!==p?this.visPropCalc.visible=p:(I=_.Z.evaluate(this.visProp.visible),_.Z.exists(this.hiddenByParent)&&this.hiddenByParent&&(I=!1),"inherit"!==I&&(this.visPropCalc.visible=I)),b=this.inherits.length,P=0;P<b;P++)if(_.Z.isArray(Z=this.inherits[P]))for(S=Z.length,m=0;m<S;m++)_.Z.exists(Z[m])&&"inherit"===_.Z.evaluate(Z[m].visProp.visible)&&Z[m].prepareUpdate().updateVisibility(this.visPropCalc.visible);else _.Z.exists(Z)&&"inherit"===_.Z.evaluate(Z.visProp.visible)&&Z.prepareUpdate().updateVisibility(this.visPropCalc.visible);_.Z.exists(this.label)&&_.Z.exists(this.label.visProp)&&_.Z.evaluate(this.label.visProp.visible)&&this.label.prepareUpdate().updateVisibility(this.visPropCalc.visible)}return this},_set:function(p,m){var b;if(p=p.toLocaleLowerCase(),this.visProp.hasOwnProperty(p)&&p.indexOf("color")>=0&&_.Z.isString(m)&&9===m.length&&"#"===m.charAt(0))m=C.Z.rgba2rgbo(m),this.visProp[p]=m[0],this.visProp[p.replace("color","opacity")]=m[1];else if(null===m||!_.Z.isObject(m)||_.Z.exists(m.id)||_.Z.exists(m.name))this.visProp[p]=m;else for(b in this.visProp[p]={},m)m.hasOwnProperty(b)&&(this.visProp[p][b.toLocaleLowerCase()]=m[b])},resolveShortcuts:function(p){var m,b,P,S=["traceattributes","traceAttributes"];for(m in M.Z.shortcuts)if(M.Z.shortcuts.hasOwnProperty(m)){if(_.Z.exists(p[m]))for(b=0;b<M.Z.shortcuts[m].length;b++)_.Z.exists(p[M.Z.shortcuts[m][b]])||(p[M.Z.shortcuts[m][b]]=p[m]);for(P=0;P<S.length;P++)_.Z.isObject(p[S[P]])&&(p[S[P]]=this.resolveShortcuts(p[S[P]]))}return p},setLabel:function(p){this.hasLabel||this.setAttribute({withlabel:!0}),this.setLabelText(p)},setLabelText:function(p){return _.Z.exists(this.label)&&(p=p.replace(/</g,"&lt;").replace(/>/g,"&gt;"),this.label.setText(p)),this},setName:function(p){p=p.replace(/</g,"&lt;").replace(/>/g,"&gt;"),"slider"!==this.elType&&this.setLabelText(p),this.setAttribute({name:p})},setProperty:function(){F.Z.deprecated("setProperty()","setAttribute()"),this.setAttribute.apply(this,arguments)},setAttribute:function(p){var m,b,P,S,Z,I,B,j,z,G={};for(m=0;m<arguments.length;m++)_.Z.isString(I=arguments[m])?(j=I.split(":"),G[_.Z.trim(j[0])]=_.Z.trim(j[1])):_.Z.isArray(I)?G[I[0]]=I[1]:F.Z.extend(G,I);for(m in G=this.resolveShortcuts(G))if(G.hasOwnProperty(m)){if(S=m.replace(/\s+/g,"").toLowerCase(),_.Z.isObject(Z=G[m])&&_.Z.exists(this.visProp[S])){if(this.visProp[S]=_.Z.merge(this.visProp[S],Z),this.type===X.Z.OBJECT_TYPE_TICKS&&_.Z.exists(this.labels))for(P=this.labels.length,b=0;b<P;b++)this.labels[b].setAttribute(Z);else if(_.Z.exists(this[S]))if(_.Z.isArray(this[S]))for(b=0;b<this[S].length;b++)this[S][b].setAttribute(Z);else this[S].setAttribute(Z);continue}switch(z=this.visProp[S],S){case"name":z=this.name,delete this.board.elementsByName[this.name],this.name=Z,this.board.elementsByName[this.name]=this;break;case"needsregularupdate":this.needsRegularUpdate=!("false"===Z||!1===Z),this.board.renderer.setBuffering(this,this.needsRegularUpdate?"auto":"static");break;case"labelcolor":B=(Z=C.Z.rgba2rgbo(Z))[1],Z=Z[0],0===B&&_.Z.exists(this.label)&&this.hasLabel&&this.label.hideElement(),_.Z.exists(this.label)&&this.hasLabel&&(this.label.visProp.strokecolor=Z,this.board.renderer.setObjectStrokeColor(this.label,Z,B)),this.elementClass===X.Z.OBJECT_CLASS_TEXT&&(this.visProp.strokecolor=Z,this.visProp.strokeopacity=B,this.board.renderer.setObjectStrokeColor(this,Z,B));break;case"infoboxtext":this.infoboxText=!!_.Z.isString(Z)&&Z;break;case"visible":this.visProp.visible="false"!==Z&&("true"===Z||Z),this.setDisplayRendNode(_.Z.evaluate(this.visProp.visible)),_.Z.evaluate(this.visProp.visible)&&_.Z.exists(this.updateSize)&&this.updateSize();break;case"face":_.Z.isPoint(this)&&(this.visProp.face=Z,this.board.renderer.changePointStyle(this));break;case"trace":"false"===Z||!1===Z?(this.clearTrace(),this.visProp.trace=!1):this.visProp.trace="pause"!==Z;break;case"gradient":this.visProp.gradient=Z,this.board.renderer.setGradient(this);break;case"gradientsecondcolor":Z=C.Z.rgba2rgbo(Z),this.visProp.gradientsecondcolor=Z[0],this.visProp.gradientsecondopacity=Z[1],this.board.renderer.updateGradient(this);break;case"gradientsecondopacity":this.visProp.gradientsecondopacity=Z,this.board.renderer.updateGradient(this);break;case"withlabel":this.visProp.withlabel=Z,_.Z.evaluate(Z)?(this.label||this.createLabel(),this.label.setAttribute({visible:"inherit"})):this.label&&this.hasLabel&&this.label.setAttribute({visible:!1}),this.hasLabel=Z;break;case"radius":(this.type===X.Z.OBJECT_TYPE_ANGLE||this.type===X.Z.OBJECT_TYPE_SECTOR)&&this.setRadius(Z);break;case"rotate":(this.elementClass===X.Z.OBJECT_CLASS_TEXT&&"internal"===_.Z.evaluate(this.visProp.display)||this.type===X.Z.OBJECT_TYPE_IMAGE)&&this.addRotation(Z);break;case"generatelabelvalue":this.type===X.Z.OBJECT_TYPE_TICKS&&_.Z.isFunction(Z)&&(this.generateLabelValue=Z);break;case"onpolygon":this.type===X.Z.OBJECT_TYPE_GLIDER&&(this.onPolygon=!!Z);break;case"disabled":_.Z.exists(this.rendNodeTag)&&(this.rendNodeTag.disabled=!!Z);break;case"checked":_.Z.exists(this.rendNodeTag)&&(this.rendNodeCheckbox.checked=!!Z);break;case"maxlength":_.Z.exists(this.rendNodeTag)&&(this.rendNodeTag.maxlength=!!Z);break;case"layer":this.board.renderer.setLayer(this,_.Z.evaluate(Z)),this._set(S,Z);break;case"tabindex":_.Z.exists(this.rendNode)&&(this.rendNode.setAttribute("tabindex",Z),this._set(S,Z));break;default:_.Z.exists(this.visProp[S])&&(!F.Z.Validator[S]||F.Z.Validator[S]&&F.Z.Validator[S](Z)||F.Z.Validator[S]&&_.Z.isFunction(Z)&&F.Z.Validator[S](Z()))&&(Z=(!Z.toLowerCase||"false"!==Z.toLowerCase())&&Z,this._set(S,Z))}this.triggerEventHandlers(["attribute:"+S],[z,Z,this])}return this.triggerEventHandlers(["attribute"],[G,this]),_.Z.evaluate(this.visProp.needsregularupdate)?this.board.update(this):this.board.fullUpdate(),this},getProperty:function(){F.Z.deprecated("getProperty()","getAttribute()"),this.getProperty.apply(this,arguments)},getAttribute:function(p){var m;switch(p=p.toLowerCase()){case"needsregularupdate":m=this.needsRegularUpdate;break;case"labelcolor":m=this.label.visProp.strokecolor;break;case"infoboxtext":m=this.infoboxText;break;case"withlabel":m=this.hasLabel;break;default:m=this.visProp[p]}return m},setDash:function(p){return this.setAttribute({dash:p}),this},prepareUpdate:function(){return this.needsUpdate=!0,this},remove:function(){return this.board.renderer.remove(this.board.renderer.getElementById(this.id)),this.hasLabel&&this.board.renderer.remove(this.board.renderer.getElementById(this.label.id)),this},getTextAnchor:function(){return new K.Z(X.Z.COORDS_BY_USER,[0,0],this.board)},getLabelAnchor:function(){return new K.Z(X.Z.COORDS_BY_USER,[0,0],this.board)},setArrow:function(p,m){return this.visProp.firstarrow=p,this.visProp.lastarrow=m,m&&(this.type=X.Z.OBJECT_TYPE_VECTOR,this.elType="arrow"),this.prepareUpdate().update().updateVisibility().updateRenderer(),this},createGradient:function(){var p=_.Z.evaluate(this.visProp.gradient);("linear"===p||"radial"===p)&&this.board.renderer.setGradient(this)},createLabel:function(){var p,m=this;return F.Z.elements.text?((p=_.Z.deepCopy(this.visProp.label,null)).id=this.id+"Label",p.isLabel=!0,p.anchor=this,p.priv=this.visProp.priv,this.visProp.withlabel&&(this.label=F.Z.elements.text(this.board,[0,0,function(){return _.Z.isFunction(m.name)?m.name():m.name}],p),this.label.needsUpdate=!0,this.label.dump=!1,this.label.fullUpdate(),this.hasLabel=!0)):F.Z.debug("JSXGraph: Can't create label: text element is not available. Make sure you include base/text"),this},highlight:function(p){return p=_.Z.def(p,!1),_.Z.evaluate(this.visProp.highlight)&&(!this.highlighted||p)&&(this.highlighted=!0,this.board.highlightedObjects[this.id]=this,this.board.renderer.highlight(this)),this},noHighlight:function(){return this.highlighted&&(this.highlighted=!1,delete this.board.highlightedObjects[this.id],this.board.renderer.noHighlight(this)),this},clearTrace:function(){var p;for(p in this.traces)this.traces.hasOwnProperty(p)&&this.board.renderer.remove(this.traces[p]);return this.numTraces=0,this},cloneToBackground:function(){return this},bounds:function(){return[0,0,0,0]},normalize:function(){return this.stdform=O.Z.normalize(this.stdform),this},toJSON:function(){var p,m,b=['{"name":',this.name];for(m in b.push(', "id":'+this.id),p=[],this.visProp)this.visProp.hasOwnProperty(m)&&_.Z.exists(this.visProp[m])&&p.push('"'+m+'":'+this.visProp[m]);return b.push(', "visProp":{'+p.toString()+"}"),b.push("}"),b.join("")},addRotation:function(p){var m,b,P,S,Z,I=this;return(this.elementClass===X.Z.OBJECT_CLASS_TEXT||this.type===X.Z.OBJECT_TYPE_IMAGE)&&0!==p&&(m=this.board.create("transform",[function(){return-I.X()},function(){return-I.Y()}],{type:"translate"}),b=this.board.create("transform",[function(){return I.X()},function(){return I.Y()}],{type:"translate"}),P=this.board.create("transform",[function(){return I.board.unitX/I.board.unitY},function(){return 1}],{type:"scale"}),S=this.board.create("transform",[function(){return I.board.unitY/I.board.unitX},function(){return 1}],{type:"scale"}),Z=this.board.create("transform",[function(){return _.Z.evaluate(p)*Math.PI/180}],{type:"rotate"}),m.bindTo(this),P.bindTo(this),Z.bindTo(this),S.bindTo(this),b.bindTo(this)),this},highlightStrokeColor:function(p){return F.Z.deprecated("highlightStrokeColor()","setAttribute()"),this.setAttribute({highlightStrokeColor:p}),this},strokeColor:function(p){return F.Z.deprecated("strokeColor()","setAttribute()"),this.setAttribute({strokeColor:p}),this},strokeWidth:function(p){return F.Z.deprecated("strokeWidth()","setAttribute()"),this.setAttribute({strokeWidth:p}),this},fillColor:function(p){return F.Z.deprecated("fillColor()","setAttribute()"),this.setAttribute({fillColor:p}),this},highlightFillColor:function(p){return F.Z.deprecated("highlightFillColor()","setAttribute()"),this.setAttribute({highlightFillColor:p}),this},labelColor:function(p){return F.Z.deprecated("labelColor()","setAttribute()"),this.setAttribute({labelColor:p}),this},dash:function(p){return F.Z.deprecated("dash()","setAttribute()"),this.setAttribute({dash:p}),this},visible:function(p){return F.Z.deprecated("visible()","setAttribute()"),this.setAttribute({visible:p}),this},shadow:function(p){return F.Z.deprecated("shadow()","setAttribute()"),this.setAttribute({shadow:p}),this},getType:function(){return this.elType},getParents:function(){return _.Z.isArray(this.parents)?this.parents:[]},snapToGrid:function(){return this},snapToPoints:function(){return this},getAttributes:function(){var b,p=_.Z.deepCopy(this.visProp),m=[],P=m.length;for(p.id=this.id,p.name=this.name,b=0;b<P;b++)delete p[m[b]];return p},hasPoint:function(p,m){return!1},addTicks:function(p){return(""===p.id||!_.Z.exists(p.id))&&(p.id=this.id+"_ticks_"+(this.ticks.length+1)),this.board.renderer.drawTicks(p),this.ticks.push(p),p.id},removeAllTicks:function(){var p;if(_.Z.exists(this.ticks)){for(p=this.ticks.length-1;p>=0;p--)this.removeTicks(this.ticks[p]);this.ticks=[],this.board.update()}},removeTicks:function(p){var m,b;if(_.Z.exists(this.defaultTicks)&&this.defaultTicks===p&&(this.defaultTicks=null),_.Z.exists(this.ticks))for(m=this.ticks.length-1;m>=0;m--)if(this.ticks[m]===p){if(this.board.removeObject(this.ticks[m]),this.ticks[m].ticks)for(b=0;b<this.ticks[m].ticks.length;b++)_.Z.exists(this.ticks[m].labels[b])&&this.board.removeObject(this.ticks[m].labels[b]);delete this.ticks[m];break}},getSnapSizes:function(){var p,m,b;return p=_.Z.evaluate(this.visProp.snapsizex),m=_.Z.evaluate(this.visProp.snapsizey),p<=0&&this.board.defaultAxes&&this.board.defaultAxes.x.defaultTicks&&(p=(b=this.board.defaultAxes.x.defaultTicks).ticksDelta*(_.Z.evaluate(b.visProp.minorticks)+1)),m<=0&&this.board.defaultAxes&&this.board.defaultAxes.y.defaultTicks&&(m=(b=this.board.defaultAxes.y.defaultTicks).ticksDelta*(_.Z.evaluate(b.visProp.minorticks)+1)),[p,m]},handleSnapToGrid:function(p,m){var b,P,S,Z,I,B,j,z,G,J,W,ae=_.Z.evaluate(this.visProp.attracttogrid),ue=_.Z.evaluate(this.visProp.attractorunit),ie=_.Z.evaluate(this.visProp.attractordistance);return!_.Z.exists(this.coords)||_.Z.evaluate(this.visProp.fixed)||(_.Z.evaluate(this.visProp.snaptogrid)||ae||!0===p)&&(b=this.coords.usrCoords[1],P=this.coords.usrCoords[2],W=(G=this.getSnapSizes())[1],(J=G[0])>0&&W>0&&(z=this.board.getBoundingBox(),S=Math.round(b/J)*J,Z=Math.round(P/W)*W,I=new F.Z.Coords(X.Z.COORDS_BY_USER,[S,Z],this.board),(!ae||I.distance("screen"===ue?X.Z.COORDS_BY_SCREEN:X.Z.COORDS_BY_USER,this.coords)<ie)&&(b=S,P=Z,m||(B=Math.min(z[0],z[2]),j=Math.max(z[0],z[2]),b<B&&b>B-J?b+=J:b>j&&b<j+J&&(b-=J),B=Math.min(z[1],z[3]),j=Math.max(z[1],z[3]),P<B&&P>B-W?P+=W:P>j&&P<j+W&&(P-=W)),this.coords.setCoordinates(X.Z.COORDS_BY_USER,[b,P])))),this},getBoundingBox:function(){var p,m,b,P,S,Z=[1/0,1/0,-1/0,-1/0];if(this.type===X.Z.OBJECT_TYPE_POLYGON){if((m=this.vertices.length-1)<=0)return Z;for(p=0;p<m;p++)b=this.vertices[p].X(),Z[0]=b<Z[0]?b:Z[0],Z[2]=b>Z[2]?b:Z[2],b=this.vertices[p].Y(),Z[1]=b<Z[1]?b:Z[1],Z[3]=b>Z[3]?b:Z[3]}else if(this.elementClass===X.Z.OBJECT_CLASS_CIRCLE)P=this.center.X(),S=this.center.Y(),Z=[P-this.radius,S+this.radius,P+this.radius,S-this.radius];else if(this.elementClass===X.Z.OBJECT_CLASS_CURVE){if(0===(m=this.vertices.length))return Z;for(p=0;p<m;p++)Z[0]=(b=this.points[p].coords.usrCoords[1])<Z[0]?b:Z[0],Z[2]=b>Z[2]?b:Z[2],Z[1]=(b=this.points[p].coords.usrCoords[1])<Z[1]?b:Z[1],Z[3]=b>Z[3]?b:Z[3]}return Z},addEvent:F.Z.shortcut(F.Z.GeometryElement.prototype,"on"),removeEvent:F.Z.shortcut(F.Z.GeometryElement.prototype,"off"),formatNumberLocale:function(p,m){var b,P,S,Z={},I={maximumfractiondigits:"maximumFractionDigits",minimumfractiondigits:"minimumFractionDigits",compactdisplay:"compactDisplay",currencydisplay:"currencyDisplay",currencysign:"currencySign",localematcher:"localeMatcher",numberingsystem:"numberingSystem",signdisplay:"signDisplay",unitdisplay:"unitDisplay",usegrouping:"useGrouping",roundingmode:"roundingMode",roundingpriority:"roundingPriority",roundingincrement:"roundingIncrement",trailingzerodisplay:"trailingZeroDisplay",minimumintegerdigits:"minimumIntegerDigits",minimumsignificantdigits:"minimumSignificantDigits",maximumsignificantdigits:"maximumSignificantDigits"};if(_.Z.exists(Intl)&&this.useLocale()){for(S in b=_.Z.evaluate(this.visProp.intl.locale)||_.Z.evaluate(this.board.attr.intl.locale),P=_.Z.evaluate(this.visProp.intl.options)||{})P.hasOwnProperty(S)&&(I.hasOwnProperty(S)?Z[I[S]]=_.Z.evaluate(P[S]):Z[S]=_.Z.evaluate(P[S]));return _.Z.exists(P[S="maximumfractiondigits"])||(Z[I[S]]=m),Intl.NumberFormat(b,Z).format(p)}return p},useLocale:function(){var p;return!(!_.Z.exists(this.visProp.intl)||!_.Z.exists(this.visProp.intl.enabled))&&(!0===(p=_.Z.evaluate(this.visProp.intl.enabled))||"inherit"===p&&!0===_.Z.evaluate(this.board.attr.intl.enabled))},__evt__over:function(p){},__evt__mouseover:function(p){},__evt__out:function(p){},__evt__mouseout:function(p){},__evt__move:function(p){},__evt__mousemove:function(p){},__evt__drag:function(p){},__evt__mousedrag:function(p){},__evt__pendrag:function(p){},__evt__touchdrag:function(p){},__evt__keydrag:function(p){},__evt__down:function(p){},__evt__mousedown:function(p){},__evt__pendown:function(p){},__evt__touchdown:function(p){},__evt__up:function(p){},__evt__mouseup:function(p){},__evt__penup:function(p){},__evt__touchup:function(p){},__evt__attribute:function(p,m){},__evt__attribute_:function(p,m,b){},__evt:function(){}});const v=F.Z.GeometryElement},436:(x,k,$)=>{$.d(k,{Z:()=>v});var F=$(917),X=$(222),K=$(461),O=$(849),A=$(658),M=$(695),f=$(515),C=$(823),__HTMLSliderInputEventHandler=function(){this._val=parseFloat(this.rendNodeRange.value),this.rendNodeOut.value=this.rendNodeRange.value,this.board.update()};F.Z.Text=function(p,m,b,P){var S;this.constructor(p,b,X.Z.OBJECT_TYPE_TEXT,X.Z.OBJECT_CLASS_TEXT),this.element=this.board.select(b.anchor),this.coordsConstructor(m,M.Z.evaluate(this.visProp.islabel)),this.content="",this.plaintext="",this.plaintextOld=null,this.orgText="",this.needsSizeUpdate=!1,this.hiddenByParent=!1,this.size=[1,1],this.id=this.board.setId(this,"T"),this.board.renderer.drawText(this),this.board.finalizeAdding(this),S=this.visProp.visible,this.visProp.visible=!0,this.setText(P),this.visProp.visible=S,M.Z.isString(this.content)&&this.notifyParents(this.content),this.elType="text",this.methodMap=M.Z.deepCopy(this.methodMap,{setText:"setTextJessieCode"})},F.Z.Text.prototype=new K.Z,M.Z.copyPrototypeMethods(F.Z.Text,C.Z,"coordsConstructor"),F.Z.extend(F.Z.Text.prototype,{hasPoint:function(p,m){var b,P,S,Z,I,B,z;return z=M.Z.isObject(M.Z.evaluate(this.visProp.precision))?M.Z.evaluate(this.visProp.precision[this.board._inputDevice]):this.board.options.precision.hasPoint,this.transformations.length>0&&(p=(b=f.Z.matVecMult(f.Z.inverse(this.board.renderer.joinTransforms(this,this.transformations)),[1,p,m]))[1],m=b[2]),P=(b="right"===(I=this.getAnchorX())?this.coords.scrCoords[1]-this.size[0]:"middle"===I?this.coords.scrCoords[1]-.5*this.size[0]:this.coords.scrCoords[1])+this.size[0],S=(Z="top"===(B=this.getAnchorY())?this.coords.scrCoords[2]+this.size[1]:"middle"===B?this.coords.scrCoords[2]+.5*this.size[1]:this.coords.scrCoords[2])-this.size[1],"all"===M.Z.evaluate(this.visProp.dragarea)?p>=b-z&&p<P+z&&m>=S-z&&m<=Z+z:m>=S-z&&m<=Z+z&&(p>=b-z&&p<=b+2*z||p>=P-2*z&&p<=P+z)},_createFctUpdateText:function(p){var m,b,P,S,Z,I,B=M.Z.evaluate(this.visProp.parse),j=M.Z.evaluate(this.visProp.usemathjax),z=M.Z.evaluate(this.visProp.usekatex),G=!1;if(this.orgText=p,M.Z.isFunction(p))this.updateText=function(){S=p().toString(),this.plaintext=!B||j||z?S:this.replaceSub(this.replaceSup(this.convertGeonextAndSketchometry2CSS(S,!1)))};else if(M.Z.isNumber(p)?(P=M.Z.evaluate(this.visProp.digits),this.content=this.useLocale()?this.formatNumberLocale(p,P):M.Z.toFixed(p,P)):M.Z.isString(p)&&B?(M.Z.evaluate(this.visProp.useasciimathml)?this.content="'`"+p+"`'":j||z?(this.content=this.valueTagToJessieCode(p),M.Z.isArray(this.content)||(this.content=this.content.replace(/\\/g,"\\\\"))):this.content=this.poorMansTeX(this.valueTagToJessieCode(p)),G=!0):this.content=p,G){if(M.Z.isArray(this.content)){for(I=this,Z=0;Z<this.content.length;Z++)if('"'!==this.content[Z][0])for(b in this.content[Z]=this.board.jc.snippet(this.content[Z],!0,"",!1),this.content[Z].deps)this.addParents(this.content[Z].deps[b]),this.content[Z].deps[b].addChild(this);m=function(){var J,W,ee=M.Z.evaluate(I.visProp.digits),ae="";for(J=0;J<I.content.length;J++)M.Z.isFunction(I.content[J])?(W=I.content[J](),W=I.useLocale()?I.formatNumberLocale(W,ee):M.Z.toFixed(W,ee)):'"'===(W=I.content[J]).at(0)&&'"'===W.at(-1)&&(W=W.slice(1,-1)),ae+=W;return ae}}else for(b in(m=this.board.jc.snippet(this.content,!0,"",!1)).deps)this.addParents(m.deps[b]),m.deps[b].addChild(this);this.updateText=function(){this.plaintext=this.unescapeTicks(m())}}else this.updateText=function(){this.plaintext=this.content}},_setText:function(p){return this._createFctUpdateText(p),this.updateText(),this.fullUpdate(),(!this.board.infobox||this.id!==this.board.infobox.id)&&this.updateSize(),this},setTextJessieCode:function(p){var m;return this.visProp.castext=p,m=M.Z.isFunction(p)?function(){return M.Z.sanitizeHTML(p())}:M.Z.isNumber(p)?p:M.Z.sanitizeHTML(p),this._setText(m)},setText:function(p){return this._setText(p)},updateSize:function(){var p,m,b,P=M.Z.evaluate(this.visProp.display);return A.Z.isBrowser&&"no"!==this.board.renderer.type?(b=this.rendNode,"html"===P||"vml"===this.board.renderer.type?M.Z.exists(b.offsetWidth)?(m=this,window.setTimeout(function(){m.size=[b.offsetWidth,b.offsetHeight],m.needsUpdate=!0,m.updateRenderer()},0)):this.size=this.crudeSizeEstimate():"internal"===P&&("svg"===this.board.renderer.type?(m=this,window.setTimeout(function(){try{p=b.getBBox(),m.size=[p.width,p.height],m.needsUpdate=!0,m.updateRenderer()}catch{}},0)):"canvas"===this.board.renderer.type&&(this.size=this.crudeSizeEstimate())),this):this},crudeSizeEstimate:function(){var p=parseFloat(M.Z.evaluate(this.visProp.fontsize));return[p*this.plaintext.length*.45,.9*p]},utf8_decode:function(p){return p.replace(/&#x(\w+);/g,function(m,b){return String.fromCharCode(parseInt(b,16))})},replaceSub:function(p){if(!p.indexOf)return p;for(var m,b=p.indexOf("_{");b>=0;)(m=(p=p.substr(0,b)+p.substr(b).replace(/_\{/,"<sub>")).substr(b).indexOf("}"))>=0&&(p=p.substr(0,m)+p.substr(m).replace(/\}/,"</sub>")),b=p.indexOf("_{");for(b=p.indexOf("_");b>=0;)b=(p=p.substr(0,b)+p.substr(b).replace(/_(.?)/,"<sub>$1</sub>")).indexOf("_");return p},replaceSup:function(p){if(!p.indexOf)return p;for(var m,b=p.indexOf("^{");b>=0;)(m=(p=p.substr(0,b)+p.substr(b).replace(/\^\{/,"<sup>")).substr(b).indexOf("}"))>=0&&(p=p.substr(0,m)+p.substr(m).replace(/\}/,"</sup>")),b=p.indexOf("^{");for(b=p.indexOf("^");b>=0;)b=(p=p.substr(0,b)+p.substr(b).replace(/\^(.?)/,"<sup>$1</sup>")).indexOf("^");return p},getSize:function(){return this.size},setCoords:function(p,m){var b;return M.Z.isArray(p)&&p.length>1&&(m=p[1],p=p[0]),M.Z.evaluate(this.visProp.islabel)&&M.Z.exists(this.element)?(b=this.element.getLabelAnchor(),this.relativeCoords.setCoordinates(X.Z.COORDS_BY_SCREEN,[(p-b.usrCoords[1])*this.board.unitX,-(m-b.usrCoords[2])*this.board.unitY])):this.coords.setCoordinates(X.Z.COORDS_BY_USER,[p,m]),this.fullUpdate(),this},update:function(p){return this.needsUpdate?(this.updateCoords(p),this.updateText(),"internal"===M.Z.evaluate(this.visProp.display)&&M.Z.isString(this.plaintext)&&(this.plaintext=this.utf8_decode(this.plaintext)),this.checkForSizeUpdate(),this.needsSizeUpdate&&this.updateSize(),this):this},checkForSizeUpdate:function(){this.board.infobox&&this.id===this.board.infobox.id?this.needsSizeUpdate=!1:(this.needsSizeUpdate=this.plaintextOld!==this.plaintext,this.needsSizeUpdate&&(this.plaintextOld=this.plaintext))},updateRenderer:function(){return M.Z.evaluate(this.visProp.autoposition)&&this.setAutoPosition().updateConstraint(),this.updateRendererGeneric("updateText")},expandShortMath:function(p){return p.replace(/([)0-9.])\s*([(a-zA-Z_])/g,"$1*$2")},generateTerm:function(p,m,b){var P,S,Z,I,B='""';if(Z=(p=(p=(p=(p=(p=(p=(p=(p=(p=(p=(p=p||"").replace(/\r/g,"")).replace(/\n/g,"")).replace(/"/g,"'")).replace(/'/g,"\\'")).replace(/&amp;arc;/g,"&ang;")).replace(/<arc\s*\/>/g,"&ang;")).replace(/&lt;arc\s*\/&gt;/g,"&ang;")).replace(/&lt;sqrt\s*\/&gt;/g,"&radic;")).replace(/&lt;value&gt;/g,"<value>")).replace(/&lt;\/value&gt;/g,"</value>")).indexOf("<value>"),I=p.indexOf("</value>"),Z>=0)for(;Z>=0;)B+=' + "'+this.replaceSub(this.replaceSup(p.slice(0,Z)))+'"',S=(S=p.slice(Z+7,I)).replace(/\s+/g,""),!0===m&&(S=this.expandShortMath(S)),(P=(P=(P=b?S:O.Z.geonext2JS(S,this.board)).replace(/\\"/g,"'")).replace(/\\'/g,"'")).indexOf("toFixed")<0&&M.Z.isNumber(M.Z.bind(this.board.jc.snippet(P,!0,"",!1),this)())?B+="+("+P+").toFixed("+M.Z.evaluate(this.visProp.digits)+")":B+="+("+P+")",Z=(p=p.slice(I+8)).indexOf("<value>"),I=p.indexOf("</value>");return B+=' + "'+this.replaceSub(this.replaceSup(p))+'"',(B=(B=this.convertGeonextAndSketchometry2CSS(B)).replace(/&amp;/g,"&")).replace(/"/g,"'")},valueTagToJessieCode:function(p){var m,b,P,S,I=[],B='"';if(P=(p=(p=(p=(p=(p=p||"").replace(/\r/g,"")).replace(/\n/g,"")).replace(/&lt;value&gt;/g,"<value>")).replace(/&lt;\/value&gt;/g,"</value>")).indexOf("<value>"),S=p.indexOf("</value>"),P>=0)for(;P>=0;)I.push(B+this.escapeTicks(p.slice(0,P))+B),b=(b=p.slice(P+7,S)).replace(/\s+/g,""),m=(m=b=this.expandShortMath(b)).replace(/\\"/g,"'").replace(/\\'/g,"'"),I.push("("+m+")"),P=(p=p.slice(S+8)).indexOf("<value>"),S=p.indexOf("</value>");for(I.push(B+this.escapeTicks(p)+B),P=0;P<I.length;P++)I[P]=I[P].replace(/&amp;/g,"&");return I},poorMansTeX:function(p){var m,b;if(M.Z.isArray(p)){for(b=[],m=0;m<p.length;m++)b.push(this.poorMansTeX(p[m]));return b}return p=p.replace(/<arc\s*\/*>/g,"&ang;").replace(/&lt;arc\s*\/*&gt;/g,"&ang;").replace(/<sqrt\s*\/*>/g,"&radic;").replace(/&lt;sqrt\s*\/*&gt;/g,"&radic;"),this.convertGeonextAndSketchometry2CSS(this.replaceSub(this.replaceSup(p)),!0)},escapeTicks:function(p){return p.replace(/"/g,"%22").replace(/'/g,"%27")},unescapeTicks:function(p){return p.replace(/%22/g,'"').replace(/%27/g,"'")},convertGeonext2CSS:function(p){return M.Z.isString(p)&&(p=(p=(p=(p=p.replace(/(<|&lt;)overline(>|&gt;)/g,"<span style=text-decoration:overline;>")).replace(/(<|&lt;)\/overline(>|&gt;)/g,"</span>")).replace(/(<|&lt;)arrow(>|&gt;)/g,"<span style=text-decoration:overline;>")).replace(/(<|&lt;)\/arrow(>|&gt;)/g,"</span>")),p},convertSketchometry2CSS:function(p,m){var b='<span class="sketcho sketcho-inherit sketcho-',P='"></span>';return M.Z.isString(p)&&(m&&(b=this.escapeTicks(b),P=this.escapeTicks(P)),p=(p=p.replace(/(<|&lt;)sketchofont(>|&gt;)/g,b)).replace(/(<|&lt;)\/sketchofont(>|&gt;)/g,P)),p},convertGeonextAndSketchometry2CSS:function(p,m){return p=this.convertGeonext2CSS(p),this.convertSketchometry2CSS(p,m)},notifyParents:function(p){var m,b=null;p=(p=p.replace(/&lt;value&gt;/g,"<value>")).replace(/&lt;\/value&gt;/g,"</value>");do{null!==(b=(m=/<value>([\w\s*/^\-+()[\],<>=!]+)<\/value>/).exec(p))&&(O.Z.findDependencies(this,b[1],this.board),p=(p=p.substr(b.index)).replace(m,""))}while(null!==b);return this},getParents:function(){var p;return p=void 0!==this.relativeCoords?[this.relativeCoords.usrCoords[1],this.relativeCoords.usrCoords[2],this.orgText]:[this.Z(),this.X(),this.Y(),this.orgText],0!==this.parents.length&&(p=this.parents),p},bounds:function(){var p=this.coords.usrCoords;return M.Z.evaluate(this.visProp.islabel)||0===this.board.unitY||0===this.board.unitX?[0,0,0,0]:[p[1],p[2]+this.size[1]/this.board.unitY,p[1]+this.size[0]/this.board.unitX,p[2]]},getAnchorX:function(){var p=M.Z.evaluate(this.visProp.anchorx);if("auto"===p)switch(this.visProp.position){case"top":case"bot":return"middle";case"rt":case"lrt":case"urt":return"left";default:return"right"}return p},getAnchorY:function(){var p=M.Z.evaluate(this.visProp.anchory);if("auto"===p)switch(this.visProp.position){case"top":case"ulft":case"urt":return"bottom";case"bot":case"lrt":case"llft":return"top";default:return"middle"}return p},getNumberofConflicts:function(p,m,b,P){var Z,I,B,j,S=0;for(j=this.board.options.precision.hasPoint,this.board.options.precision.hasPoint=.25*(b+P),Z=0,B=this.board.objectsList.length;Z<B;Z++)(I=this.board.objectsList[Z]).visPropCalc.visible&&"axis"!==I.elType&&"ticks"!==I.elType&&I!==this.board.infobox&&I!==this&&I.hasPoint(p,m)&&S++;return this.board.options.precision.hasPoint=j,S},setAutoPosition:function(){var b,P,S,B,j,J,W,ee,ae,Pe,xe,me,we,Ae,Z=this.size[0],I=this.size[1],z={conflicts:1/0,angle:0,r:0},ie=2*Math.PI/12;if(this===this.board.infobox||!this.visPropCalc.visible||!M.Z.evaluate(this.visProp.islabel)||!this.element)return this;if(ee=M.Z.evaluate(this.visProp.offset),S=this.element.getLabelAnchor(),0===(W=this.getNumberofConflicts((b=S.scrCoords[1])+(xe=ee[0]),(P=S.scrCoords[2])-(me=ee[1]),Z,I)))return this;for(J=.2*(ae=12),B=Math.atan2(me,xe),z.conflicts=W,z.angle=B,z.r=ae;z.conflicts>0&&ae<28;){for(Pe=1,j=B+ie;Pe<12&&z.conflicts>0&&(we=Math.cos(j),Ae=Math.sin(j),(W=this.getNumberofConflicts(b+ae*we,P-ae*Ae,Z,I))<z.conflicts&&(z.conflicts=W,z.angle=j,z.r=ae),0!==z.conflicts);Pe++)j+=ie;ae+=J}return ae=z.r,we=Math.cos(z.angle),Ae=Math.sin(z.angle),this.visProp.offset=[ae*we,ae*Ae],this.visProp.anchorx=we<-.2?"right":we>.2?"left":"middle",this}}),F.Z.createText=function(p,m,b){var P,S=M.Z.copyAttributes(b,p.options,"text"),Z=m.slice(0,-1),I=m[m.length-1];if(S.anchor=S.parent||S.anchor,!(P=C.Z.create(F.Z.Text,p,Z,S,I)))throw new Error("JSXGraph: Can't create text with parent types '"+typeof m[0]+"' and '"+typeof m[1]+"'.\nPossible parent types: [x,y], [z,x,y], [element,transformation]");return 0!==S.rotate&&P.addRotation(S.rotate),P},F.Z.registerElement("text",F.Z.createText),F.Z.createHTMLSlider=function(p,m,b){var P,Z=M.Z.copyAttributes(b,p.options,"htmlslider");if(2!==m.length||2!==m[0].length||3!==m[1].length)throw new Error("JSXGraph: Can't create htmlslider with parent types '"+typeof m[0]+"' and '"+typeof m[1]+"'.\nPossible parents are: [[x,y], [min, start, max]]");Z.anchor=Z.parent||Z.anchor,Z.fixed=Z.fixed||!0,(P=F.Z.createText(p,[m[0][0],m[0][1],'<form style="display:inline"><input type="range" /><span></span><input type="text" /></form>'],Z)).type=M.Z.OBJECT_TYPE_HTMLSLIDER,P.rendNodeForm=P.rendNode.childNodes[0],P.rendNodeRange=P.rendNodeForm.childNodes[0],P.rendNodeRange.min=m[1][0],P.rendNodeRange.max=m[1][2],P.rendNodeRange.step=Z.step,P.rendNodeRange.value=m[1][1],P.rendNodeLabel=P.rendNodeForm.childNodes[1],P.rendNodeLabel.id=P.rendNode.id+"_label",Z.withlabel&&(P.rendNodeLabel.innerHTML=P.name+"="),P.rendNodeOut=P.rendNodeForm.childNodes[2],P.rendNodeOut.value=m[1][1];try{P.rendNodeForm.id=P.rendNode.id+"_form",P.rendNodeRange.id=P.rendNode.id+"_range",P.rendNodeOut.id=P.rendNode.id+"_out"}catch(I){F.Z.debug(I)}return P.rendNodeRange.style.width=Z.widthrange+"px",P.rendNodeRange.style.verticalAlign="middle",P.rendNodeOut.style.width=Z.widthout+"px",P._val=m[1][1],F.Z.supportsVML()?A.Z.addEvent(P.rendNodeForm,"change",__HTMLSliderInputEventHandler,P):A.Z.addEvent(P.rendNodeForm,"input",__HTMLSliderInputEventHandler,P),P.Value=function(){return this._val},P},F.Z.registerElement("htmlslider",F.Z.createHTMLSlider);const v=F.Z.Text},917:(x,k,$)=>{$.d(k,{Z:()=>X});var F={};"object"==typeof JXG&&!JXG.extend&&(F=JXG),F.extend=function(K,O,A,M){var f;for(f in A=A||!1,M=M||!1,O)(!A||A&&O.hasOwnProperty(f))&&(K[M?f.toLowerCase():f]=O[f])},F.defineConstant=function(K,O,A,M){(!(M=M||!1)||!F.exists(K[O]))&&Object.defineProperty(K,O,{value:A,writable:!1,enumerable:!0,configurable:!1})},F.extendConstants=function(K,O,A,M){var f,C;for(f in A=A||!1,M=M||!1,O)(!A||A&&O.hasOwnProperty(f))&&(C=M?f.toUpperCase():f,this.defineConstant(K,C,O[f]))},F.extend(F,{boards:{},readers:{},elements:{},registerElement:function(K,O){K=K.toLowerCase(),this.elements[K]=O},registerReader:function(K,O){var A,M;for(A=0;A<O.length;A++)M=O[A].toLowerCase(),"function"!=typeof this.readers[M]&&(this.readers[M]=K)},shortcut:function(K,O){return function(){return K[O].apply(this,arguments)}},getRef:function(K,O){return F.deprecated("JXG.getRef()","Board.select()"),K.select(O)},getReference:function(K,O){return F.deprecated("JXG.getReference()","Board.select()"),K.select(O)},getBoardByContainerId:function(K){var O;for(O in JXG.boards)if(JXG.boards.hasOwnProperty(O)&&JXG.boards[O].container===K)return JXG.boards[O];return null},deprecated:function(K,O){var A=K+" is deprecated.";O&&(A+=" Please use "+O+" instead."),F.warn(A)},warn:function(K){"object"==typeof window&&window.console&&console.warn?console.warn("WARNING:",K):"object"==typeof document&&document.getElementById("warning")&&(document.getElementById("debug").innerHTML+="WARNING: "+K+"<br />")},debugInt:function(K){var O,A;for(O=0;O<arguments.length;O++)A=arguments[O],"object"==typeof window&&window.console&&console.log?console.log(A):"object"==typeof document&&document.getElementById("debug")&&(document.getElementById("debug").innerHTML+=A+"<br/>")},debugWST:function(K){var O=new Error;F.debugInt.apply(this,arguments),O&&O.stack&&(F.debugInt("stacktrace"),F.debugInt(O.stack.split("\n").slice(1).join("\n")))},debugLine:function(K){var O=new Error;F.debugInt.apply(this,arguments),O&&O.stack&&F.debugInt("Called from",O.stack.split("\n").slice(2,3).join("\n"))},debug:function(K){F.debugInt.apply(this,arguments)}});const X=F},209:(x,k,$)=>{$.d(k,{Z:()=>C});var F=$(917),X=$(222),K=$(70),O=$(515),A=$(514),M=$(695),f=$(819);O.Z.Geometry={},F.Z.extend(O.Z.Geometry,{angle:function(_,v,p){var m,b,P,S,Z=[],I=[],B=[];return F.Z.deprecated("Geometry.angle()","Geometry.rad()"),_.coords?(Z[0]=_.coords.usrCoords[1],Z[1]=_.coords.usrCoords[2]):(Z[0]=_[0],Z[1]=_[1]),v.coords?(I[0]=v.coords.usrCoords[1],I[1]=v.coords.usrCoords[2]):(I[0]=v[0],I[1]=v[1]),p.coords?(B[0]=p.coords.usrCoords[1],B[1]=p.coords.usrCoords[2]):(B[0]=p[0],B[1]=p[1]),m=Z[0]-I[0],b=Z[1]-I[1],P=B[0]-I[0],S=B[1]-I[1],Math.atan2(m*S-b*P,m*P+b*S)},trueAngle:function(_,v,p){return 57.29577951308232*this.rad(_,v,p)},rad:function(_,v,p){var m,b,P,S,Z,I,B;return _.coords?(m=_.coords.usrCoords[1],b=_.coords.usrCoords[2]):(m=_[0],b=_[1]),v.coords?(P=v.coords.usrCoords[1],S=v.coords.usrCoords[2]):(P=v[0],S=v[1]),p.coords?(Z=p.coords.usrCoords[1],I=p.coords.usrCoords[2]):(Z=p[0],I=p[1]),(B=Math.atan2(I-S,Z-P)-Math.atan2(b-S,m-P))<0&&(B+=6.283185307179586),B},angleBisector:function(_,v,p,m){var b,P,S,j,z,Z=_.coords.usrCoords,I=v.coords.usrCoords,B=p.coords.usrCoords;return M.Z.exists(m)||(m=_.board),0===I[0]?new K.Z(X.Z.COORDS_BY_USER,[1,.5*(Z[1]+B[1]),.5*(Z[2]+B[2])],m):(j=Z[1]-I[1],z=Z[2]-I[2],b=Math.atan2(z,j),j=B[1]-I[1],z=B[2]-I[2],S=.5*(b+(P=Math.atan2(z,j))),b>P&&(S+=Math.PI),j=Math.cos(S)+I[1],z=Math.sin(S)+I[2],new K.Z(X.Z.COORDS_BY_USER,[1,j,z],m))},reflection:function(_,v,p){var Z,I,B,j=v.coords.usrCoords,z=_.point1.coords.usrCoords,G=_.point2.coords.usrCoords;return M.Z.exists(p)||(p=v.board),new K.Z(X.Z.COORDS_BY_USER,[j[1]+2*(B=((Z=G[1]-z[1])*(j[2]-z[2])-(I=G[2]-z[2])*(j[1]-z[1]))/(Z*Z+I*I))*I,j[2]-2*B*Z],p)},rotation:function(_,v,p,m){var b,P,S,Z,j=v.coords.usrCoords,z=_.coords.usrCoords;return M.Z.exists(m)||(m=v.board),b=j[1]-z[1],P=j[2]-z[2],S=Math.cos(p),Z=Math.sin(p),new K.Z(X.Z.COORDS_BY_USER,[b*S-P*Z+z[1],b*Z+P*S+z[2]],m)},perpendicular:function(_,v,p){var m,b,P,S,Z,I=_.point1.coords.usrCoords,B=_.point2.coords.usrCoords,j=v.coords.usrCoords;return M.Z.exists(p)||(p=v.board),v===_.point1?(m=I[1]+B[2]-I[2],b=I[2]-B[1]+I[1],Z=I[0]*B[0],Math.abs(Z)<O.Z.eps&&(m=B[2],b=-B[1]),S=[Z,m,b],P=!0):v===_.point2?(m=B[1]+I[2]-B[2],b=B[2]-I[1]+B[1],Z=I[0]*B[0],Math.abs(Z)<O.Z.eps&&(m=I[2],b=-I[1]),S=[Z,m,b],P=!1):Math.abs(O.Z.innerProduct(j,_.stdform,3))<O.Z.eps?(m=j[1]+B[2]-j[2],b=j[2]-B[1]+j[1],Z=B[0],Math.abs(Z)<O.Z.eps&&(m=B[2],b=-B[1]),P=!0,Math.abs(Z)>O.Z.eps&&Math.abs(m-j[1])<O.Z.eps&&Math.abs(b-j[2])<O.Z.eps&&(m=j[1]+I[2]-j[2],b=j[2]-I[1]+j[1],P=!1),S=[Z,m,b]):(S=O.Z.crossProduct(S=[0,_.stdform[1],_.stdform[2]],j),S=O.Z.crossProduct(S,_.stdform),P=!0),[new K.Z(X.Z.COORDS_BY_USER,S,p),P]},circumcenterMidpoint:function(){F.Z.deprecated("Geometry.circumcenterMidpoint()","Geometry.circumcenter()"),this.circumcenter.apply(this,arguments)},circumcenter:function(_,v,p,m){var S,Z,I=_.coords.usrCoords,B=v.coords.usrCoords,j=p.coords.usrCoords;return M.Z.exists(m)||(m=_.board),S=O.Z.crossProduct([B[0]-I[0],-B[2]+I[2],B[1]-I[1]],[.5*(I[0]+B[0]),.5*(I[1]+B[1]),.5*(I[2]+B[2])]),Z=O.Z.crossProduct([j[0]-B[0],-j[2]+B[2],j[1]-B[1]],[.5*(B[0]+j[0]),.5*(B[1]+j[1]),.5*(B[2]+j[2])]),new K.Z(X.Z.COORDS_BY_USER,O.Z.crossProduct(S,Z),m)},distance:function(_,v,p){var m,b=0;for(p||(p=Math.min(_.length,v.length)),m=0;m<p;m++)b+=(_[m]-v[m])*(_[m]-v[m]);return Math.sqrt(b)},affineDistance:function(_,v,p){var m;return(m=this.distance(_,v,p))>O.Z.eps&&(Math.abs(_[0])<O.Z.eps||Math.abs(v[0])<O.Z.eps)?1/0:m},affineRatio:function(_,v,p){var b;return M.Z.exists(_.usrCoords)&&(_=_.usrCoords),M.Z.exists(v.usrCoords)&&(v=v.usrCoords),M.Z.exists(p.usrCoords)&&(p=p.usrCoords),b=v[1]-_[1],Math.abs(b)>O.Z.eps?(p[1]-_[1])/b:(p[2]-_[2])/(v[2]-_[2])},sortVertices:function(_){for(var v,p=f.Z.each(_,f.Z.coordsArray),m=p.length,b=null;p[0][0]===p[m-1][0]&&p[0][1]===p[m-1][1]&&p[0][2]===p[m-1][2];)b=p.pop(),m--;return v=p[0],p.sort(function(P,S){return(P[2]===v[2]&&P[1]===v[1]?-1/0:Math.atan2(P[2]-v[2],P[1]-v[1]))-(S[2]===v[2]&&S[1]===v[1]?-1/0:Math.atan2(S[2]-v[2],S[1]-v[1]))}),null!==b&&p.push(b),p},signedTriangle:function(_,v,p){var m=f.Z.coordsArray(_),b=f.Z.coordsArray(v),P=f.Z.coordsArray(p);return.5*((b[1]-m[1])*(P[2]-m[2])-(b[2]-m[2])*(P[1]-m[1]))},signedPolygon:function(_,v){var p,m,b=0,P=f.Z.each(_,f.Z.coordsArray);for(void 0===v&&(v=!0),v?P.unshift(P[P.length-1]):P=this.sortVertices(P),m=P.length,p=1;p<m;p++)b+=P[p-1][1]*P[p][2]-P[p][1]*P[p-1][2];return.5*b},GrahamScan:function(_){var v,b,p=1,m=f.Z.each(_,f.Z.coordsArray);for(b=(m=this.sortVertices(m)).length,v=2;v<b;v++){for(;this.signedTriangle(m[p-1],m[p],m[v])<=0;){if(p>1)p-=1;else if(v===b-1)break;v+=1}m=M.Z.swap(m,p+=1,v)}return m.slice(0,p)},calcStraight:function(_,v,p,m){var b,P,S,Z,I,B,j,z,G,J;M.Z.exists(m)||(m=10),B=M.Z.evaluate(_.visProp.straightfirst),j=M.Z.evaluate(_.visProp.straightlast),Math.abs(v.scrCoords[0])<O.Z.eps&&(B=!0),Math.abs(p.scrCoords[0])<O.Z.eps&&(j=!0),(B||j)&&((z=[])[0]=_.stdform[0]-_.stdform[1]*_.board.origin.scrCoords[1]/_.board.unitX+_.stdform[2]*_.board.origin.scrCoords[2]/_.board.unitY,z[1]=_.stdform[1]/_.board.unitX,z[2]=-_.stdform[2]/_.board.unitY,!isNaN(z[0]+z[1]+z[2])&&(b=!B&&Math.abs(v.usrCoords[0])>=O.Z.eps&&v.scrCoords[1]>=0&&v.scrCoords[1]<=_.board.canvasWidth&&v.scrCoords[2]>=0&&v.scrCoords[2]<=_.board.canvasHeight,P=!j&&Math.abs(p.usrCoords[0])>=O.Z.eps&&p.scrCoords[1]>=0&&p.scrCoords[1]<=_.board.canvasWidth&&p.scrCoords[2]>=0&&p.scrCoords[2]<=_.board.canvasHeight,Z=(S=this.meetLineBoard(z,_.board,m))[0],I=S[1],(b||P||(B||!j||this.isSameDirection(v,p,Z)||this.isSameDirection(v,p,I))&&(!B||j||this.isSameDirection(p,v,Z)||this.isSameDirection(p,v,I)))&&(b?P||(J=this.isSameDir(v,p,Z,I)?I:Z):P?G=this.isSameDir(v,p,Z,I)?Z:I:this.isSameDir(v,p,Z,I)?(G=Z,J=I):(J=Z,G=I),G&&v.setCoordinates(X.Z.COORDS_BY_USER,G.usrCoords),J&&p.setCoordinates(X.Z.COORDS_BY_USER,J.usrCoords))))},calcLineDelimitingPoints:function(_,v,p){var m,b,S,Z,I,B,j,z,G,J=!1,W=!1;I=M.Z.evaluate(_.visProp.straightfirst),B=M.Z.evaluate(_.visProp.straightlast),Math.abs(v.scrCoords[0])<O.Z.eps&&(I=!0),Math.abs(p.scrCoords[0])<O.Z.eps&&(B=!0),(j=[])[0]=_.stdform[0]-_.stdform[1]*_.board.origin.scrCoords[1]/_.board.unitX+_.stdform[2]*_.board.origin.scrCoords[2]/_.board.unitY,j[1]=_.stdform[1]/_.board.unitX,j[2]=-_.stdform[2]/_.board.unitY,!isNaN(j[0]+j[1]+j[2])&&(J=!I,W=!B,b=_.board.getBoundingBox(),_.getSlope()>=0?(S=this.projectPointToLine({coords:{usrCoords:[1,b[2],b[1]]}},_,_.board),Z=this.projectPointToLine({coords:{usrCoords:[1,b[0],b[3]]}},_,_.board)):(S=this.projectPointToLine({coords:{usrCoords:[1,b[0],b[1]]}},_,_.board),Z=this.projectPointToLine({coords:{usrCoords:[1,b[2],b[3]]}},_,_.board)),(J||W||!(!I&&!B&&(m=v.distance(X.Z.COORDS_BY_USER,p),Math.abs(v.distance(X.Z.COORDS_BY_USER,S)+S.distance(X.Z.COORDS_BY_USER,p)-m)>O.Z.eps||Math.abs(v.distance(X.Z.COORDS_BY_USER,Z)+Z.distance(X.Z.COORDS_BY_USER,p)-m)>O.Z.eps)||!I&&B&&!this.isSameDirection(v,p,S)&&!this.isSameDirection(v,p,Z)||I&&!B&&!this.isSameDirection(p,v,S)&&!this.isSameDirection(p,v,Z)))&&(J?W||(G=this.isSameDir(v,p,S,Z)?Z:S):W?z=this.isSameDir(v,p,S,Z)?S:Z:this.isSameDir(v,p,S,Z)?(z=S,G=Z):(G=S,z=Z),z&&v.setCoordinates(X.Z.COORDS_BY_USER,z.usrCoords),G&&p.setCoordinates(X.Z.COORDS_BY_USER,G.usrCoords)))},calcLabelQuadrant:function(_){return _<0&&(_+=2*Math.PI),["rt","urt","top","ulft","lft","llft","lrt"][Math.floor((_+Math.PI/8)/(Math.PI/4))%8]},isSameDir:function(_,v,p,m){var b=v.usrCoords[1]-_.usrCoords[1],P=v.usrCoords[2]-_.usrCoords[2],S=m.usrCoords[1]-p.usrCoords[1],Z=m.usrCoords[2]-p.usrCoords[2];return Math.abs(v.usrCoords[0])<O.Z.eps&&(b=v.usrCoords[1],P=v.usrCoords[2]),Math.abs(_.usrCoords[0])<O.Z.eps&&(b=-_.usrCoords[1],P=-_.usrCoords[2]),b*S+P*Z>=0},isSameDirection:function(_,v,p){var m,b,P,S,Z=!1;return m=v.usrCoords[1]-_.usrCoords[1],b=v.usrCoords[2]-_.usrCoords[2],P=p.usrCoords[1]-_.usrCoords[1],S=p.usrCoords[2]-_.usrCoords[2],Math.abs(m)<O.Z.eps&&(m=0),Math.abs(b)<O.Z.eps&&(b=0),Math.abs(P)<O.Z.eps&&(P=0),Math.abs(S)<O.Z.eps&&(S=0),(m>=0&&P>=0||m<=0&&P<=0)&&(Z=b>=0&&S>=0||b<=0&&S<=0),Z},det3p:function(_,v,p){return(_[1]-p[1])*(v[2]-p[2])-(v[1]-p[1])*(_[2]-p[2])},windingNumber:function(_,v,p){var Z,I,B,j,z,G,m=0,b=v.length,P=_[1],S=_[2],J=0;if(0===b)return 0;if((p=p||!1)&&(J=1),isNaN(P)||isNaN(S)||(M.Z.exists(v[0].coords)?(Z=v[0].coords,I=v[b-1].coords):(Z=v[0],I=v[b-1]),Z.usrCoords[1]===P&&Z.usrCoords[2]===S))return 1;for(G=0;G<b-J;G++)if(M.Z.exists(v[G].coords)?(I=v[G].coords.usrCoords,B=v[(G+1)%b].coords.usrCoords):(I=v[G].usrCoords,B=v[(G+1)%b].usrCoords),!(0===I[0]||0===B[0]||isNaN(I[1])||isNaN(B[1])||isNaN(I[2])||isNaN(B[2]))){if(B[2]===S){if(B[1]===P)return 1;if(I[2]===S&&B[1]>P==I[1]<P)return 0}if(I[2]<S!=B[2]<S)if(z=2*(B[2]>I[2]?1:0)-1,I[1]>=P)if(B[1]>P)m+=z;else{if(0===(j=this.det3p(I,B,_)))return 0;j>0+O.Z.eps==B[2]>I[2]&&(m+=z)}else B[1]>P&&(j=this.det3p(I,B,_))>0+O.Z.eps==B[2]>I[2]&&(m+=z)}return m},pnpoly:function(_,v,p,m){var b,P,S,Z,I,B,z,G,j=p,J=!1;for(m===X.Z.COORDS_BY_USER?(Z=(B=new K.Z(X.Z.COORDS_BY_USER,[_,v],this.board)).scrCoords[1],I=B.scrCoords[2]):(Z=_,I=v),b=0,P=(S=p.length)-2;b<S-1;P=b++)z=M.Z.exists(j[b].coords)?j[b].coords:j[b],G=M.Z.exists(j[P].coords)?j[P].coords:j[P],z.scrCoords[2]>I!=G.scrCoords[2]>I&&Z<(G.scrCoords[1]-z.scrCoords[1])*(I-z.scrCoords[2])/(G.scrCoords[2]-z.scrCoords[2])+z.scrCoords[1]&&(J=!J);return J},intersectionFunction:function(_,v,p,m,b,P){var I,B,Z=this;return I=v.elementClass===X.Z.OBJECT_CLASS_CURVE&&(v.type===X.Z.OBJECT_TYPE_ARC||v.type===X.Z.OBJECT_TYPE_SECTOR),B=p.elementClass===X.Z.OBJECT_CLASS_CURVE&&(p.type===X.Z.OBJECT_TYPE_ARC||p.type===X.Z.OBJECT_TYPE_SECTOR),v.elementClass!==X.Z.OBJECT_CLASS_CURVE&&p.elementClass!==X.Z.OBJECT_CLASS_CURVE||v.elementClass!==X.Z.OBJECT_CLASS_CURVE&&v.elementClass!==X.Z.OBJECT_CLASS_CIRCLE||p.elementClass!==X.Z.OBJECT_CLASS_CURVE&&p.elementClass!==X.Z.OBJECT_CLASS_CIRCLE?v.elementClass===X.Z.OBJECT_CLASS_CURVE&&!I&&p.elementClass===X.Z.OBJECT_CLASS_LINE||p.elementClass===X.Z.OBJECT_CLASS_CURVE&&!B&&v.elementClass===X.Z.OBJECT_CLASS_LINE?function(){return Z.meetCurveLine(v,p,m,v.board,M.Z.evaluate(P))}:v.type===X.Z.OBJECT_TYPE_POLYGON||p.type===X.Z.OBJECT_TYPE_POLYGON?v.elementClass===X.Z.OBJECT_CLASS_LINE?function(){var W,j=M.Z.evaluate(v.visProp.straightfirst),z=M.Z.evaluate(v.visProp.straightlast),G=M.Z.evaluate(p.visProp.straightfirst),J=M.Z.evaluate(p.visProp.straightlast);return W=!(M.Z.evaluate(P)||j&&z&&G&&J),Z.meetPolygonLine(p,v,m,v.board,W)}:p.elementClass===X.Z.OBJECT_CLASS_LINE?function(){var W,j=M.Z.evaluate(v.visProp.straightfirst),z=M.Z.evaluate(v.visProp.straightlast),G=M.Z.evaluate(p.visProp.straightfirst),J=M.Z.evaluate(p.visProp.straightlast);return W=!(M.Z.evaluate(P)||j&&z&&G&&J),Z.meetPolygonLine(v,p,m,v.board,W)}:function(){return Z.meetPathPath(v,p,m,v.board)}:v.elementClass===X.Z.OBJECT_CLASS_LINE&&p.elementClass===X.Z.OBJECT_CLASS_LINE?function(){var j,G=M.Z.evaluate(v.visProp.straightfirst),J=M.Z.evaluate(v.visProp.straightlast),W=M.Z.evaluate(p.visProp.straightfirst),ee=M.Z.evaluate(p.visProp.straightlast);return M.Z.evaluate(P)||G&&J&&W&&ee?Z.meet(v.stdform,p.stdform,m,v.board):(j=Z.meetSegmentSegment(v.point1.coords.usrCoords,v.point2.coords.usrCoords,p.point1.coords.usrCoords,p.point2.coords.usrCoords),new K.Z(X.Z.COORDS_BY_USER,!G&&j[1]<0||!J&&j[1]>1||!W&&j[2]<0||!ee&&j[2]>1?[0,NaN,NaN]:j[0],v.board))}:function(){var G,J,W,j=Z.meet(v.stdform,p.stdform,m,v.board),z=!0;return M.Z.evaluate(P)?j:v.elementClass===X.Z.OBJECT_CLASS_LINE&&(G=M.Z.evaluate(v.visProp.straightfirst),J=M.Z.evaluate(v.visProp.straightlast),(!G||!J)&&(W=Z.affineRatio(v.point1.coords,v.point2.coords,j),!J&&W>1+O.Z.eps||!G&&W<0-O.Z.eps))||p.elementClass===X.Z.OBJECT_CLASS_LINE&&(G=M.Z.evaluate(p.visProp.straightfirst),J=M.Z.evaluate(p.visProp.straightlast),(!G||!J)&&(W=Z.affineRatio(p.point1.coords,p.point2.coords,j),!J&&W>1+O.Z.eps||!G&&W<0-O.Z.eps))||I&&((z=Z.coordsOnArc(v,j))&&B&&(z=Z.coordsOnArc(p,j)),!z)?new K.Z(F.Z.COORDS_BY_USER,[0,NaN,NaN],v.board):j}:function(){return Z.meetCurveCurve(v,p,m,b,v.board)}},coordsOnArc:function(_,v){var p=this.rad(_.radiuspoint,_.center,v.usrCoords.slice(1)),m=0,b=this.rad(_.radiuspoint,_.center,_.anglepoint),P=M.Z.evaluate(_.visProp.selection);return("minor"===P&&b>Math.PI||"major"===P&&b<Math.PI)&&(m=b,b=2*Math.PI),!(p<m||p>b)},meet:function(_,v,p,m){var P=O.Z.eps;return Math.abs(_[3])<P&&Math.abs(v[3])<P?this.meetLineLine(_,v,p,m):Math.abs(_[3])>=P&&Math.abs(v[3])<P?this.meetLineCircle(v,_,p,m):Math.abs(_[3])<P&&Math.abs(v[3])>=P?this.meetLineCircle(_,v,p,m):this.meetCircleCircle(_,v,p,m)},meetLineBoard:function(_,v,p){var b,P,S,Z,m=[];for(M.Z.exists(p)||(p=0),m[0]=O.Z.crossProduct(_,[p,0,1]),m[1]=O.Z.crossProduct(_,[p,1,0]),m[2]=O.Z.crossProduct(_,[-p-v.canvasHeight,0,1]),m[3]=O.Z.crossProduct(_,[-p-v.canvasWidth,1,0]),S=0;S<4;S++)if(Math.abs(m[S][0])>O.Z.eps){for(Z=2;Z>0;Z--)m[S][Z]/=m[S][0];m[S][0]=1}return Math.abs(m[1][0])<O.Z.eps?(b=m[0],P=m[2]):Math.abs(m[0][0])<O.Z.eps?(b=m[1],P=m[3]):m[1][2]<0?(b=m[0],P=m[3][2]>v.canvasHeight?m[2]:m[3]):m[1][2]>v.canvasHeight?(b=m[2],P=m[3][2]<0?m[0]:m[3]):(b=m[1],P=m[3][2]<0?m[0]:m[3][2]>v.canvasHeight?m[2]:m[3]),[b=new K.Z(X.Z.COORDS_BY_SCREEN,b.slice(1),v),P=new K.Z(X.Z.COORDS_BY_SCREEN,P.slice(1),v)]},meetLineLine:function(_,v,p,m){var b=isNaN(_[5]+v[5])?[0,0,0]:O.Z.crossProduct(_,v);return Math.abs(b[0])<1e-14&&(b[0]=0),new K.Z(X.Z.COORDS_BY_USER,b,m)},meetLineCircle:function(_,v,p,m){var b,P,S,Z,I,B,j,G,J;return v[4]<O.Z.eps?Math.abs(O.Z.innerProduct([1,v[6],v[7]],_,3))<O.Z.eps?new K.Z(X.Z.COORDS_BY_USER,v.slice(6,8),m):new K.Z(X.Z.COORDS_BY_USER,[NaN,NaN],m):(S=v[0],P=v.slice(1,3),b=v[3],Z=_[0],I=_.slice(1,3),(G=(j=P[0]*I[1]-P[1]*I[0])*j-4*(B=b)*(b*Z*Z-(P[0]*I[0]+P[1]*I[1])*Z+S))>-O.Z.eps*O.Z.eps?(J=[(-j+(G=Math.sqrt(Math.abs(G))))/(2*B),(-j-G)/(2*B)],0===M.Z.evaluate(p)?new K.Z(X.Z.COORDS_BY_USER,[-J[0]*-I[1]-Z*I[0],-J[0]*I[0]-Z*I[1]],m):new K.Z(X.Z.COORDS_BY_USER,[-J[1]*-I[1]-Z*I[0],-J[1]*I[0]-Z*I[1]],m)):new K.Z(X.Z.COORDS_BY_USER,[0,0,0],m))},meetCircleCircle:function(_,v,p,m){var b;return _[4]<O.Z.eps?Math.abs(this.distance(_.slice(6,2),v.slice(6,8))-v[4])<O.Z.eps?new K.Z(X.Z.COORDS_BY_USER,_.slice(6,8),m):new K.Z(X.Z.COORDS_BY_USER,[0,0,0],m):v[4]<O.Z.eps?Math.abs(this.distance(v.slice(6,2),_.slice(6,8))-_[4])<O.Z.eps?new K.Z(X.Z.COORDS_BY_USER,v.slice(6,8),m):new K.Z(X.Z.COORDS_BY_USER,[0,0,0],m):(b=O.Z.normalize(b=[v[3]*_[0]-_[3]*v[0],v[3]*_[1]-_[3]*v[1],v[3]*_[2]-_[3]*v[2],0,1,1/0,1/0,1/0]),this.meetLineCircle(b,_,p,m))},meetCurveCurve:function(_,v,p,m,b,P){var S;return S=M.Z.exists(P)&&"newton"===P?A.Z.generalizedNewton(_,v,M.Z.evaluate(p),m):3===_.bezierDegree||3===v.bezierDegree?this.meetBezierCurveRedBlueSegments(_,v,p):this.meetCurveRedBlueSegments(_,v,p),new K.Z(X.Z.COORDS_BY_USER,S,b)},meetCurveLine:function(_,v,p,m,b){var S,Z;return M.Z.exists(m)||(m=_.board),_.elementClass===X.Z.OBJECT_CLASS_CURVE?(S=_,Z=v):(S=v,Z=_),this.meetCurveLineDiscrete(S,Z,p,m,!b)},meetCurveLineContinuous:function(_,v,p,m,b){var P,S,Z,I,B,j,z,ee,ae,ue,ie,Pe,xe,G=O.Z.eps,J=O.Z.eps;for(I=this.meetCurveLineDiscrete(_,v,p,m,b),B=I.usrCoords[1],j=I.usrCoords[2],S=function(me){var we,Ae;return me>_.maxX()||me<_.minX()?1/0:(we=B-_.X(me))*we+(Ae=j-_.Y(me))*Ae},Z=function(me){var we=v.stdform[0]+v.stdform[1]*_.X(me)+v.stdform[2]*_.Y(me);return we*we},ee=(_.maxX()-_.minX())/50,ae=_.minX(),Pe=1e-4,ie=NaN,ue=0;ue<50&&(P=A.Z.root(S,[Math.max(ae,_.minX()),Math.min(ae+ee,_.maxX())]),!((xe=Math.abs(S(P)))<=Pe&&(Pe=xe,ie=P,Pe<G)));ue++)ae+=ee;return P=ie,xe=Z(P=A.Z.root(Z,[Math.max(P-ee,_.minX()),Math.min(P+ee,_.maxX())])),z=isNaN(xe)||Math.abs(xe)>J?0:1,new K.Z(X.Z.COORDS_BY_USER,[z,_.X(P),_.Y(P)],m)},meetCurveLineDiscrete:function(_,v,p,m,b){var P,S,I,B,j,z,ee,Z=M.Z.evaluate(p),G=v.point1.coords.usrCoords,J=v.point2.coords.usrCoords,ae=0,ue=_.numberPoints,ie=M.Z.evaluate(v.visProp.straightfirst),Pe=M.Z.evaluate(v.visProp.straightlast);for(z=new K.Z(X.Z.COORDS_BY_USER,[0,NaN,NaN],m),0===G[0]?G=[1,J[1]+v.stdform[2],J[2]-v.stdform[1]]:0===J[0]&&(J=[1,G[1]+v.stdform[2],G[2]-v.stdform[1]]),B=_.points[0].usrCoords,P=1;P<ue;P+=_.bezierDegree)if(I=B.slice(0),this.distance(I,B=_.points[P].usrCoords)>O.Z.eps)for(ee=3===_.bezierDegree?this.meetBeziersegmentBeziersegment([_.points[P-1].usrCoords.slice(1),_.points[P].usrCoords.slice(1),_.points[P+1].usrCoords.slice(1),_.points[P+2].usrCoords.slice(1)],[G.slice(1),J.slice(1)],b):[this.meetSegmentSegment(I,B,G,J)],S=0;S<ee.length;S++)if(0<=(j=ee[S])[1]&&j[1]<=1){if(ae===Z)return b&&(!ie&&j[2]<0||!Pe&&j[2]>1)||(z=new K.Z(X.Z.COORDS_BY_USER,j[0],m)),z;ae+=1}return z},meetCurveRedBlueSegments:function(_,v,p){var m,b,S,Z,I,B,j,z,G,P=M.Z.evaluate(p),J=0,W=v.numberPoints,ee=_.numberPoints;if(W<=1||ee<=1)return[0,NaN,NaN];for(m=1;m<ee;m++)for(S=_.points[m-1].usrCoords,Z=_.points[m].usrCoords,z=Math.min(S[1],Z[1]),G=Math.max(S[1],Z[1]),B=v.points[0].usrCoords,b=1;b<W;b++)if(I=B,B=v.points[b].usrCoords,Math.min(I[1],B[1])<G&&Math.max(I[1],B[1])>z&&(j=this.meetSegmentSegment(S,Z,I,B))[1]>=0&&j[2]>=0&&(j[1]<1&&j[2]<1||m===ee-1&&1===j[1]||b===W-1&&1===j[2])){if(J===P)return j[0];J++}return[0,NaN,NaN]},meetSegmentSegment:function(_,v,p,m){var S,Z,I=O.Z.crossProduct(_,v),B=O.Z.crossProduct(p,m),j=O.Z.crossProduct(I,B);return Math.abs(j[0])<O.Z.eps?[j,1/0,1/0]:(j[1]/=j[0],j[2]/=j[0],j[0]/=j[0],[j,(j[S=Math.abs(v[1]-v[0]*_[1])<O.Z.eps?2:1]-(Z=_[S]/_[0]))/(0!==v[0]?v[S]/v[0]-Z:v[S]),(j[S=Math.abs(m[1]-m[0]*p[1])<O.Z.eps?2:1]-(Z=p[S]/p[0]))/(0!==m[0]?m[S]/m[0]-Z:m[S])])},meetPathPath:function(_,v,p,m){var b,P,S,Z,I=M.Z.evaluate(p);return(S=(b=F.Z.Math.Clip._getPath(_,m)).length)>0&&this.distance(b[0].coords.usrCoords,b[S-1].coords.usrCoords,3)<O.Z.eps&&b.pop(),(S=(P=F.Z.Math.Clip._getPath(v,m)).length)>0&&this.distance(P[0].coords.usrCoords,P[S-1].coords.usrCoords,3)<O.Z.eps*O.Z.eps&&P.pop(),p<0||F.Z.Math.Clip.isEmptyCase(b,P,"intersection")?new K.Z(X.Z.COORDS_BY_USER,[0,0,0],m):(F.Z.Math.Clip.makeDoublyLinkedList(b),F.Z.Math.Clip.makeDoublyLinkedList(P),I<(Z=F.Z.Math.Clip.findIntersections(b,P,m)[0]).length?Z[I].coords:new K.Z(X.Z.COORDS_BY_USER,[0,0,0],m))},meetPolygonLine:function(_,v,p,m,b){var P,Z,I,S=M.Z.evaluate(p),B=[0,0,0],j=_.borders.length,z=[];for(P=0;P<j;P++)Z=this.meetSegmentSegment((I=_.borders[P]).point1.coords.usrCoords,I.point2.coords.usrCoords,v.point1.coords.usrCoords,v.point2.coords.usrCoords),(!b||Z[2]>=0&&Z[2]<1)&&Z[1]>=0&&Z[1]<1&&z.push(Z[0]);return S>=0&&S<z.length&&(B=z[S]),new K.Z(X.Z.COORDS_BY_USER,B,m)},_bezierSplit:function(_){var v,p,m,b,P,S;return[[_[0],v=[.5*(_[0][0]+_[1][0]),.5*(_[0][1]+_[1][1])],b=[.5*(v[0]+(p=[.5*(_[1][0]+_[2][0]),.5*(_[1][1]+_[2][1])])[0]),.5*(v[1]+p[1])],S=[.5*(b[0]+(P=[.5*(p[0]+(m=[.5*(_[2][0]+_[3][0]),.5*(_[2][1]+_[3][1])])[0]),.5*(p[1]+m[1])])[0]),.5*(b[1]+P[1])]],[S,P,m,_[3]]]},_bezierBbox:function(_){var v=[];return 4===_.length?(v[0]=Math.min(_[0][0],_[1][0],_[2][0],_[3][0]),v[1]=Math.max(_[0][1],_[1][1],_[2][1],_[3][1]),v[2]=Math.max(_[0][0],_[1][0],_[2][0],_[3][0]),v[3]=Math.min(_[0][1],_[1][1],_[2][1],_[3][1])):(v[0]=Math.min(_[0][0],_[1][0]),v[1]=Math.max(_[0][1],_[1][1]),v[2]=Math.max(_[0][0],_[1][0]),v[3]=Math.min(_[0][1],_[1][1])),v},_bezierOverlap:function(_,v){return _[2]>=v[0]&&_[0]<=v[2]&&_[1]>=v[3]&&_[3]<=v[1]},_bezierListConcat:function(_,v,p,m){var b,P=M.Z.exists(m),S=0,Z=v.length,I=_.length;for(I>0&&Z>0&&(1===_[I-1][1]&&0===v[0][1]||P&&1===_[I-1][2]&&0===v[0][2])&&(S=1),b=S;b<Z;b++)P&&(v[b][2]*=.5,v[b][2]+=m),v[b][1]*=.5,v[b][1]+=p,_.push(v[b])},_bezierMeetSubdivision:function(_,v,p){var m,b,P,S,Z,I,B,j,z,G,J,W,ee=[];return b=this._bezierBbox(v),m=this._bezierBbox(_),this._bezierOverlap(b,m)?p<5?(I=(P=this._bezierSplit(_))[0],B=P[1],Z=(P=this._bezierSplit(v))[1],this._bezierListConcat(ee,this._bezierMeetSubdivision(I,S=P[0],p+1),0,0),this._bezierListConcat(ee,this._bezierMeetSubdivision(I,Z,p+1),0,.5),this._bezierListConcat(ee,this._bezierMeetSubdivision(B,S,p+1),.5,0),this._bezierListConcat(ee,this._bezierMeetSubdivision(B,Z,p+1),.5,.5),ee):(J=[1].concat(_[0]),W=[1].concat(_[3]),z=[1].concat(v[0]),G=[1].concat(v[3]),(j=this.meetSegmentSegment(J,W,z,G))[1]>=0&&j[2]>=0&&j[1]<=1&&j[2]<=1?[j]:[]):[]},_bezierLineMeetSubdivision:function(_,v,p,m){var b,P,S,I,B,j,z,G,J,W=[];return b=this._bezierBbox(v),P=this._bezierBbox(_),m&&!this._bezierOverlap(P,b)?[]:p<5?(I=(S=this._bezierSplit(_))[1],this._bezierListConcat(W,this._bezierLineMeetSubdivision(S[0],v,p+1),0),this._bezierListConcat(W,this._bezierLineMeetSubdivision(I,v,p+1),.5),W):(G=[1].concat(_[0]),J=[1].concat(_[3]),j=[1].concat(v[0]),z=[1].concat(v[1]),(B=this.meetSegmentSegment(G,J,j,z))[1]>=0&&B[1]<=1&&(!m||B[2]>=0&&B[2]<=1)?[B]:[])},meetBeziersegmentBeziersegment:function(_,v,p){var m,b,P;for((m=4===_.length&&4===v.length?this._bezierMeetSubdivision(_,v,0):this._bezierLineMeetSubdivision(_,v,0,p)).sort(function(S,Z){return 1e7*(S[1]-Z[1])+(S[2]-Z[2])}),b=[],P=0;P<m.length;P++)(0===P||m[P][1]!==m[P-1][1]||m[P][2]!==m[P-1][2])&&b.push(m[P]);return b},meetBezierCurveRedBlueSegments:function(_,v,p){var m,b,P,S,I,B,j,z,G,J,Z=M.Z.evaluate(p),W=0,ee=0,ae=v.numberPoints,ue=_.numberPoints,ie=[];if(ae<v.bezierDegree+1||ue<_.bezierDegree+1)return[0,NaN,NaN];for(ae-=v.bezierDegree,ue-=_.bezierDegree,_.type===X.Z.OBJECT_TYPE_SECTOR&&(W=3,ue-=3),v.type===X.Z.OBJECT_TYPE_SECTOR&&(ee=3,ae-=3),b=W;b<ue;b+=_.bezierDegree)for(B=[(m=_.points)[b].usrCoords.slice(1),m[b+1].usrCoords.slice(1)],3===_.bezierDegree&&(B[2]=m[b+2].usrCoords.slice(1),B[3]=m[b+3].usrCoords.slice(1)),z=this._bezierBbox(B),P=ee;P<ae;P+=v.bezierDegree)if(j=[(m=v.points)[P].usrCoords.slice(1),m[P+1].usrCoords.slice(1)],3===v.bezierDegree&&(j[2]=m[P+2].usrCoords.slice(1),j[3]=m[P+3].usrCoords.slice(1)),G=this._bezierBbox(j),this._bezierOverlap(z,G)){if(0===(J=this.meetBeziersegmentBeziersegment(B,j)).length)continue;for(S=0;S<J.length;S++)!((I=J[S])[1]<-O.Z.eps||I[1]>1+O.Z.eps||I[2]<-O.Z.eps||I[2]>1+O.Z.eps)&&ie.push(I);if(ie.length>Z)return ie[Z][0]}return ie.length>Z?ie[Z][0]:[0,NaN,NaN]},bezierSegmentEval:function(_,v){var p,m,b,P=1-_;return m=0,b=0,m+=(p=P*P*P)*v[0][0],b+=p*v[0][1],m+=(p=3*_*P*P)*v[1][0],b+=p*v[1][1],m+=(p=3*_*_*P)*v[2][0],b+=p*v[2][1],[1,m+=(p=_*_*_)*v[3][0],b+=p*v[3][1]]},bezierArc:function(_,v,p,m,b){var P,S,Z,I,B,j,z,ie,Pe,xe,me,we,Ae,Ne,ct,wt,G=.5*Math.PI,J=v[1],W=v[2],ee=v[0],ae=[],ue=[];for(B=this.distance(v,_),J/=ee,W/=ee,j=this.rad(_.slice(1),v.slice(1),p.slice(1)),-1===b&&(j=2*Math.PI-j),(P=_)[1]/=P[0],P[2]/=P[0],P[0]/=P[0],I=P.slice(0),m?(ae=[J,J+.333*(P[1]-J),J+.666*(P[1]-J),P[1]],ue=[W,W+.333*(P[2]-W),W+.666*(P[2]-W),P[2]]):(ae=[P[1]],ue=[P[2]]);j>O.Z.eps;)j>G?(z=G,j-=G):(z=j,j=0),ie=Math.cos(b*z),Pe=Math.sin(b*z),ct=O.Z.matVecMult([[1,0,0],[J*(1-ie)+W*Pe,ie,-Pe],[W*(1-ie)-J*Pe,Pe,ie]],P),xe=P[1]-J,me=P[2]-W,we=(I=[ct[0]/ct[0],ct[1]/ct[0],ct[2]/ct[0]])[1]-J,Ae=I[2]-W,wt=Math.sqrt((xe+we)*(xe+we)+(me+Ae)*(me+Ae)),Ne=Math.abs(Ae-me)>O.Z.eps?(xe+we)*(B/wt-.5)/(Ae-me)*8/3:(me+Ae)*(B/wt-.5)/(xe-we)*8/3,ae=ae.concat([(S=[1,P[1]-Ne*me,P[2]+Ne*xe])[1],(Z=[1,I[1]+Ne*Ae,I[2]-Ne*we])[1],I[1]]),ue=ue.concat([S[2],Z[2],I[2]]),P=I.slice(0);return m&&(ae=ae.concat([I[1]+.333*(J-I[1]),I[1]+.666*(J-I[1]),J]),ue=ue.concat([I[2]+.333*(W-I[2]),I[2]+.666*(W-I[2]),W])),[ae,ue]},projectPointToCircle:function(_,v,p){var m,b,Z,I=v.center.coords.usrCoords;return M.Z.exists(p)||(p=_.board),M.Z.isPoint(_)?(m=_.coords.distance(X.Z.COORDS_BY_USER,v.center.coords),b=_.coords.usrCoords):(m=_.distance(X.Z.COORDS_BY_USER,v.center.coords),b=_.usrCoords),Math.abs(m)<O.Z.eps&&(m=O.Z.eps),Z=v.Radius()/m,new K.Z(X.Z.COORDS_BY_USER,[I[1]+Z*(b[1]-I[1]),I[2]+Z*(b[2]-I[2])],p)},projectPointToLine:function(_,v,p){var b,m=[0,v.stdform[1],v.stdform[2]];return M.Z.exists(p)||(p=M.Z.exists(_.coords)?_.board:v.board),b=M.Z.exists(_.coords)?_.coords.usrCoords:_.usrCoords,m=O.Z.crossProduct(m,b),new K.Z(X.Z.COORDS_BY_USER,O.Z.crossProduct(m,v.stdform),p)},projectCoordsToSegment:function(_,v,p){var m,P=[p[1]-v[1],p[2]-v[2]],S=[_[1]-v[1],_[2]-v[2]];return Math.abs(P[0])<O.Z.eps&&Math.abs(P[1])<O.Z.eps?[v,0]:(m=O.Z.innerProduct(S,P),[[1,(m/=O.Z.innerProduct(P,P))*P[0]+v[1],m*P[1]+v[2]],m])},projectCoordsToBeziersegment:function(_,v,p){var m;return m=F.Z.Math.Numerics.fminbr(function(P){var S=[1,v.X(p+P),v.Y(p+P)];return S[1]-=_[1],S[2]-=_[2],S[1]*S[1]+S[2]*S[2]},[0,1]),[[1,v.X(m+p),v.Y(m+p)],m]},projectPointToCurve:function(_,v,p){M.Z.exists(p)||(p=_.board);var m=_.X(),b=_.Y();return this.projectCoordsToCurve(m,b,_.position||0,v,p)},projectCoordsToCurve:function(_,v,p,m,b){var P,S,Z,I,B,j,z,G,J,W,ee,ae,ue,ie,Pe,xe,me,we,Ae,Ne,wt,Lt,yi=Number.POSITIVE_INFINITY;if(M.Z.exists(b)||(b=m.board),"plot"===M.Z.evaluate(m.visProp.curvetype)){if(p=0,B=yi,P=0===m.numberPoints?[0,1,1]:[m.Z(0),m.X(0),m.Y(0)],m.numberPoints>1)for(G=[1,_,v],3===m.bezierDegree?I=0:ee=[m.Z(0),m.X(0),m.Y(0)],Z=0;Z<m.numberPoints-1;Z++)3===m.bezierDegree?ue=this.projectCoordsToBeziersegment(G,m,I):(ae=[m.Z(Z+1),m.X(Z+1),m.Y(Z+1)],ue=this.projectCoordsToSegment(G,ee,ae)),J=ue[0],0<=(z=ue[1])&&z<=1?(j=this.distance(J,G),W=Z+z):z<0?(J=ee,j=this.distance(ee,G),W=Z):z>1&&Z===m.numberPoints-2&&(j=this.distance(J=ae,G),W=m.numberPoints-1),j<B&&(B=j,p=W,P=J),3===m.bezierDegree?(I++,Z+=2):ee=ae;S=new K.Z(X.Z.COORDS_BY_USER,P,b)}else{for(me=(ie=function(Pt){var qt,$t;return Pt<m.minX()||Pt>m.maxX()?1/0:(qt=_-m.X(Pt))*qt+($t=v-m.Y(Pt))*$t})(p),wt=m.minX(),we=((Lt=m.maxX())-wt)/50,Pe=wt,Z=0;Z<50;Z++)((xe=ie(Pe))<me||me===1/0||isNaN(me))&&(p=Pe,me=xe),Pe+=we;for(Ae=we,Z=0;Z<20&&isNaN(ie(p-Ae));Z++,Ae*=.5);for(isNaN(ie(p-Ae))&&(Ae=0),Ne=we,Z=0;Z<20&&isNaN(ie(p+Ne));Z++,Ne*=.5);isNaN(ie(p+Ne))&&(Ne=0),p=A.Z.fminbr(ie,[Math.max(p-Ae,wt),Math.min(p+Ne,Lt)]),S=new K.Z(X.Z.COORDS_BY_USER,[m.X(p=(p=p<wt?wt:p)>Lt?Lt:p),m.Y(p)],b)}return[m.updateTransform(S),p]},projectCoordsToPolygon:function(_,v){var p,P,S,Z,I,m=v.vertices.length,b=1/0;for(p=0;p<m-1;p++)0<=(S=F.Z.Math.Geometry.projectCoordsToSegment(_,v.vertices[p].coords.usrCoords,v.vertices[p+1].coords.usrCoords))[1]&&S[1]<=1?(P=F.Z.Math.Geometry.distance(S[0],_,3),Z=S[0]):S[1]<0?(P=F.Z.Math.Geometry.distance(v.vertices[p].coords.usrCoords,_,3),Z=v.vertices[p].coords.usrCoords):(P=F.Z.Math.Geometry.distance(v.vertices[p+1].coords.usrCoords,_,3),Z=v.vertices[p+1].coords.usrCoords),P<b&&(I=Z.slice(0),b=P);return I},projectPointToTurtle:function(_,v,p){var m,b,P,S,Z,I,B,j,z,G,J=0,W=0,ee=Number.POSITIVE_INFINITY,ae=v.objects.length;for(M.Z.exists(p)||(p=_.board),Z=0;Z<ae;Z++)(B=v.objects[Z]).elementClass===X.Z.OBJECT_CLASS_CURVE&&(G=(z=this.projectPointToCurve(_,B))[1],(I=this.distance((m=z[0]).usrCoords,_.coords.usrCoords))<ee&&(P=m.usrCoords[1],S=m.usrCoords[2],b=G,ee=I,j=B,W=J),J+=B.numberPoints);return m=new K.Z(X.Z.COORDS_BY_USER,[P,S],p),[j.updateTransform(m),b+W]},projectPointToPoint:function(_,v){return v.coords},projectPointToBoard:function(_,v){var p,m,b,P=v||_.board,S=[[1,1,0,0,3,0,1],[-1,2,1,0,1,2,1],[-1,1,2,2,1,2,3],[1,2,3,0,3,2,3]],Z=_.coords||_,I=P.getBoundingBox();for(p=0;p<4;p++)(b=S[p])[0]*Z.usrCoords[b[1]]<b[0]*I[b[2]]&&((m=O.Z.crossProduct([1,I[b[3]],I[b[4]]],[1,I[b[5]],I[b[6]]]))[3]=0,m=O.Z.normalize(m),Z=this.projectPointToLine({coords:Z},{stdform:m},P));return Z},distPointLine:function(_,v){var P,p=v[1],m=v[2],b=v[0];return Math.abs(p)+Math.abs(m)<O.Z.eps?Number.POSITIVE_INFINITY:(P=p*_[1]+m*_[2]+b,p*=p,m*=m,Math.abs(P)/Math.sqrt(p+m))},reuleauxPolygon:function(_,v){var p,m=2*Math.PI,b=m/v,P=(v-1)/2,S=0,Z=function(I,B){return function(j,z){var G=(j%m+m)%m,J=Math.floor(G/b)%v;return z||(S=_[0].Dist(_[P]),p=O.Z.Geometry.rad([_[0].X()+1,_[0].Y()],_[0],_[P%v])),isNaN(J)?J:(G=.5*G+J*b*.5+p,_[J][I]()+S*Math[B](G))}};return[Z("X","cos"),Z("Y","sin"),0,m]},meet3Planes:function(_,v,p,m,b,P){var Z,I,B,j,z,S=[0,0,0];for(Z=O.Z.crossProduct(b,_),I=O.Z.crossProduct(_,p),B=O.Z.crossProduct(p,b),j=O.Z.innerProduct(_,B,3),z=0;z<3;z++)S[z]=(v*B[z]+m*Z[z]+P*I[z])/j;return S},meetPlanePlane:function(_,v,p,m){var b,P,S,Z=[0,0,0],I=[0,0,0];for(b=0;b<3;b++)Z[b]=M.Z.evaluate(_[b]),I[b]=M.Z.evaluate(v[b]);for(P=O.Z.crossProduct(Z,I),b=0;b<3;b++)Z[b]=M.Z.evaluate(p[b]),I[b]=M.Z.evaluate(m[b]);return S=O.Z.crossProduct(Z,I),O.Z.crossProduct(P,S)},project3DTo3DPlane:function(_,v,p){var b,P,S;return p=p||[0,0,0],b=O.Z.norm(v),P=O.Z.innerProduct(_,v,3),S=O.Z.innerProduct(p,v,3),O.Z.axpy(-(P-S)/b,v,_)},getPlaneBounds:function(_,v,p,m,b){var S,B,z;return _[2]+v[0]!==0?(S=(z=A.Z.Gauss(B=[[_[0],v[0]],[_[1],v[1]]],[m-p[0],m-p[1]]))[1],[z[0],(z=A.Z.Gauss(B,[b-p[0],b-p[1]]))[0],S,z[1]]):null}});const C=O.Z.Geometry},492:(x,k,$)=>{$.d(k,{Z:()=>M});var F=$(917),X=$(515),K=$(695);F.Z.Math.DoubleBits=function(){var p,m,b,S,Z,I,C=new Float64Array(1),_=new Uint32Array(C.buffer);void 0!==Float64Array&&(C[0]=1,1072693248===_[1]?(p=function(J,W){return _[0]=J,_[1]=W,C[0]},m=function(J){return C[0]=J,_[0]},b=function(J){return C[0]=J,_[1]},this.doubleBits=function(J){return C[0]=J,[_[0],_[1]]},this.pack=p,this.lo=m,this.hi=b):1072693248===_[0]&&(S=function(J,W){return _[1]=J,_[0]=W,C[0]},Z=function(J){return C[0]=J,_[1]},I=function(J){return C[0]=J,_[0]},this.doubleBits=function(J){return C[0]=J,[_[1],_[0]]},this.pack=S,this.lo=Z,this.hi=I))},F.Z.extend(F.Z.Math.DoubleBits.prototype,{sign:function(f){return this.hi(f)>>>31},exponent:function(f){return(this.hi(f)<<1>>>21)-1023},fraction:function(f){var C=this.lo(f),_=this.hi(f),v=1048575&_;return 2146435072&_&&(v+=1<<20),[C,v]},denormalized:function(f){return!(2146435072&this.hi(f))}});var O=new F.Z.Math.DoubleBits,A=function(f,C){if(void 0!==f&&void 0!==C){if(X.Z.IntervalArithmetic.isInterval(f)){if(!X.Z.IntervalArithmetic.isSingleton(f))throw new TypeError("JXG.Math.IntervalArithmetic: interval `lo` must be a singleton");this.lo=f.lo}else this.lo=f;if(X.Z.IntervalArithmetic.isInterval(C)){if(!X.Z.IntervalArithmetic.isSingleton(C))throw new TypeError("JXG.Math.IntervalArithmetic: interval `hi` must be a singleton");this.hi=C.hi}else this.hi=C}else{if(void 0!==f)return Array.isArray(f)?new A(f[0],f[1]):new A(f,f);this.lo=this.hi=0}};F.Z.extend(A.prototype,{print:function(){console.log("[",this.lo,this.hi,"]")},set:function(f,C){return this.lo=f,this.hi=C,this},bounded:function(f,C){return this.set(X.Z.IntervalArithmetic.prev(f),X.Z.IntervalArithmetic.next(C))},boundedSingleton:function(f){return this.bounded(f,f)},assign:function(f,C){if("number"!=typeof f||"number"!=typeof C)throw new TypeError("JXG.Math.Interval#assign: arguments must be numbers");return isNaN(f)||isNaN(C)||f>C?this.setEmpty():this.set(f,C)},setEmpty:function(){return this.set(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},setWhole:function(){return this.set(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY)},open:function(f,C){return this.assign(X.Z.IntervalArithmetic.next(f),X.Z.IntervalArithmetic.prev(C))},halfOpenLeft:function(f,C){return this.assign(X.Z.IntervalArithmetic.next(f),C)},halfOpenRight:function(f,C){return this.assign(f,X.Z.IntervalArithmetic.prev(C))},toArray:function(){return[this.lo,this.hi]},clone:function(){return(new A).set(this.lo,this.hi)}}),F.Z.Math.IntervalArithmetic={Interval:function(f,C){return new A(f,C)},isInterval:function(f){return null!==f&&"object"==typeof f&&"number"==typeof f.lo&&"number"==typeof f.hi},isSingleton:function(f){return f.lo===f.hi},add:function(f,C){return K.Z.isNumber(f)&&(f=this.Interval(f)),K.Z.isNumber(C)&&(C=this.Interval(C)),new A(this.addLo(f.lo,C.lo),this.addHi(f.hi,C.hi))},sub:function(f,C){return K.Z.isNumber(f)&&(f=this.Interval(f)),K.Z.isNumber(C)&&(C=this.Interval(C)),new A(this.subLo(f.lo,C.hi),this.subHi(f.hi,C.lo))},mul:function(f,C){var _,v,p,m,b;return K.Z.isNumber(f)&&(f=this.Interval(f)),K.Z.isNumber(C)&&(C=this.Interval(C)),this.isEmpty(f)||this.isEmpty(C)?this.EMPTY.clone():(_=f.lo,v=f.hi,p=C.lo,m=C.hi,b=new A,_<0?v>0?p<0?m>0?(b.lo=Math.min(this.mulLo(_,m),this.mulLo(v,p)),b.hi=Math.max(this.mulHi(_,p),this.mulHi(v,m))):(b.lo=this.mulLo(v,p),b.hi=this.mulHi(_,p)):m>0?(b.lo=this.mulLo(_,m),b.hi=this.mulHi(v,m)):(b.lo=0,b.hi=0):p<0?m>0?(b.lo=this.mulLo(_,m),b.hi=this.mulHi(_,p)):(b.lo=this.mulLo(v,m),b.hi=this.mulHi(_,p)):m>0?(b.lo=this.mulLo(_,m),b.hi=this.mulHi(v,p)):(b.lo=0,b.hi=0):v>0?p<0?m>0?(b.lo=this.mulLo(v,p),b.hi=this.mulHi(v,m)):(b.lo=this.mulLo(v,p),b.hi=this.mulHi(_,m)):m>0?(b.lo=this.mulLo(_,p),b.hi=this.mulHi(v,m)):(b.lo=0,b.hi=0):(b.lo=0,b.hi=0),b)},div:function(f,C){return K.Z.isNumber(f)&&(f=this.Interval(f)),K.Z.isNumber(C)&&(C=this.Interval(C)),this.isEmpty(f)||this.isEmpty(C)?this.EMPTY.clone():this.zeroIn(C)?0!==C.lo?0!==C.hi?this.divZero(f):this.divNegative(f,C.lo):0!==C.hi?this.divPositive(f,C.hi):this.EMPTY.clone():this.divNonZero(f,C)},positive:function(f){return new A(f.lo,f.hi)},negative:function(f){return K.Z.isNumber(f)?new A(-f):new A(-f.hi,-f.lo)},isEmpty:function(f){return f.lo>f.hi},isWhole:function(f){return f.lo===-1/0&&f.hi===1/0},zeroIn:function(f){return this.hasValue(f,0)},hasValue:function(f,C){return!this.isEmpty(f)&&f.lo<=C&&C<=f.hi},hasInterval:function(f,C){return!!this.isEmpty(f)||!this.isEmpty(C)&&C.lo<=f.lo&&f.hi<=C.hi},intervalsOverlap:function(f,C){return!this.isEmpty(f)&&!this.isEmpty(C)&&(f.lo<=C.lo&&C.lo<=f.hi||C.lo<=f.lo&&f.lo<=C.hi)},divNonZero:function(f,C){var _=f.lo,v=f.hi,p=C.lo,m=C.hi,b=new A;return v<0?m<0?(b.lo=this.divLo(v,p),b.hi=this.divHi(_,m)):(b.lo=this.divLo(_,p),b.hi=this.divHi(v,m)):_<0?m<0?(b.lo=this.divLo(v,m),b.hi=this.divHi(_,m)):(b.lo=this.divLo(_,p),b.hi=this.divHi(v,p)):m<0?(b.lo=this.divLo(v,m),b.hi=this.divHi(_,p)):(b.lo=this.divLo(_,m),b.hi=this.divHi(v,p)),b},divPositive:function(f,C){return 0===f.lo&&0===f.hi?f:this.zeroIn(f)?this.WHOLE:f.hi<0?new A(Number.NEGATIVE_INFINITY,this.divHi(f.hi,C)):new A(this.divLo(f.lo,C),Number.POSITIVE_INFINITY)},divNegative:function(f,C){return 0===f.lo&&0===f.hi?f:this.zeroIn(f)?this.WHOLE:f.hi<0?new A(this.divLo(f.hi,C),Number.POSITIVE_INFINITY):new A(Number.NEGATIVE_INFINITY,this.divHi(f.lo,C))},divZero:function(f){return 0===f.lo&&0===f.hi?f:this.WHOLE},fmod:function(f,C){var v;return K.Z.isNumber(f)&&(f=this.Interval(f)),K.Z.isNumber(C)&&(C=this.Interval(C)),this.isEmpty(f)||this.isEmpty(C)?this.EMPTY.clone():(v=(v=f.lo/(f.lo<0?C.lo:C.hi))<0?Math.ceil(v):Math.floor(v),this.sub(f,this.mul(C,new A(v))))},multiplicativeInverse:function(f){return K.Z.isNumber(f)&&(f=this.Interval(f)),this.isEmpty(f)?this.EMPTY.clone():this.zeroIn(f)?0!==f.lo?0!==f.hi?this.WHOLE:new A(Number.NEGATIVE_INFINITY,this.divHi(1,f.lo)):0!==f.hi?new A(this.divLo(1,f.hi),Number.POSITIVE_INFINITY):this.EMPTY.clone():new A(this.divLo(1,f.hi),this.divHi(1,f.lo))},pow:function(f,C){var _,v;if(K.Z.isNumber(f)&&(f=this.Interval(f)),this.isEmpty(f))return this.EMPTY.clone();if(this.isInterval(C)){if(!this.isSingleton(C))return this.EMPTY.clone();C=C.lo}return 0===C?0===f.lo&&0===f.hi?this.EMPTY.clone():this.ONE.clone():C<0?this.pow(this.multiplicativeInverse(f),-C):C%1==0?f.hi<0?(_=this.powLo(-f.hi,C),v=this.powHi(-f.lo,C),1==(1&C)?new A(-v,-_):new A(_,v)):f.lo<0?1==(1&C)?new A(-this.powLo(-f.lo,C),this.powHi(f.hi,C)):new A(0,this.powHi(Math.max(-f.lo,f.hi),C)):new A(this.powLo(f.lo,C),this.powHi(f.hi,C)):(console.warn("power is not an integer, you should use nth-root instead, returning an empty interval"),this.EMPTY.clone())},sqrt:function(f){return K.Z.isNumber(f)&&(f=this.Interval(f)),this.nthRoot(f,2)},nthRoot:function(f,C){var _,v,p,m,b;if(K.Z.isNumber(f)&&(f=this.Interval(f)),this.isEmpty(f)||C<0)return this.EMPTY.clone();if(this.isInterval(C)){if(!this.isSingleton(C))return this.EMPTY.clone();C=C.lo}return _=1/C,f.hi<0?C%1==0&&1==(1&C)?(v=this.powHi(-f.lo,_),p=this.powLo(-f.hi,_),new A(-v,-p)):this.EMPTY.clone():f.lo<0?(m=this.powHi(f.hi,_),C%1==0&&1==(1&C)?(b=-this.powHi(-f.lo,_),new A(b,m)):new A(0,m)):new A(this.powLo(f.lo,_),this.powHi(f.hi,_))},exp:function(f){return K.Z.isNumber(f)&&(f=this.Interval(f)),this.isEmpty(f)?this.EMPTY.clone():new A(this.expLo(f.lo),this.expHi(f.hi))},log:function(f){var C;return K.Z.isNumber(f)&&(f=this.Interval(f)),this.isEmpty(f)?this.EMPTY.clone():(C=f.lo<=0?Number.NEGATIVE_INFINITY:this.logLo(f.lo),new A(C,this.logHi(f.hi)))},ln:function(f){return this.log(f)},log10:function(f){return this.isEmpty(f)?this.EMPTY.clone():this.div(this.log(f),this.log(new A(10,10)))},log2:function(f){return this.isEmpty(f)?this.EMPTY.clone():this.div(this.log(f),this.log(new A(2,2)))},hull:function(f,C){var _=this.isEmpty(f),v=this.isEmpty(C);return _&&v?this.EMPTY.clone():_?C.clone():v?f.clone():new A(Math.min(f.lo,C.lo),Math.max(f.hi,C.hi))},intersection:function(f,C){var _,v;return this.isEmpty(f)||this.isEmpty(C)?this.EMPTY.clone():(_=Math.max(f.lo,C.lo))<=(v=Math.min(f.hi,C.hi))?new A(_,v):this.EMPTY.clone()},union:function(f,C){if(!this.intervalsOverlap(f,C))throw new Error("Interval#unions do not overlap");return new A(Math.min(f.lo,C.lo),Math.max(f.hi,C.hi))},difference:function(f,C){if(this.isEmpty(f)||this.isWhole(C))return this.EMPTY.clone();if(this.intervalsOverlap(f,C)){if(f.lo<C.lo&&C.hi<f.hi)throw new Error("Interval.difference: difference creates multiple intervals");return C.lo<=f.lo&&C.hi===1/0||C.hi>=f.hi&&C.lo===-1/0?this.EMPTY.clone():C.lo<=f.lo?(new A).halfOpenLeft(C.hi,f.hi):(new A).halfOpenRight(f.lo,C.lo)}return f.clone()},width:function(f){return this.isEmpty(f)?0:this.subHi(f.hi,f.lo)},abs:function(f){return K.Z.isNumber(f)&&(f=this.Interval(f)),this.isEmpty(f)?this.EMPTY.clone():f.lo>=0?f.clone():f.hi<=0?this.negative(f):new A(0,Math.max(-f.lo,f.hi))},max:function(f,C){var _=this.isEmpty(f),v=this.isEmpty(C);return _&&v?this.EMPTY.clone():_?C.clone():v?f.clone():new A(Math.max(f.lo,C.lo),Math.max(f.hi,C.hi))},min:function(f,C){var _=this.isEmpty(f),v=this.isEmpty(C);return _&&v?this.EMPTY.clone():_?C.clone():v?f.clone():new A(Math.min(f.lo,C.lo),Math.min(f.hi,C.hi))},onlyInfinity:function(f){return!isFinite(f.lo)&&f.lo===f.hi},_handleNegative:function(f){var C;return f.lo<0&&(f.lo===-1/0?(f.lo=0,f.hi=1/0):(C=Math.ceil(-f.lo/this.piTwiceLow),f.lo+=this.piTwiceLow*C,f.hi+=this.piTwiceLow*C)),f},cos:function(f){var C,_,v,p,m,b,P,S;return this.isEmpty(f)||this.onlyInfinity(f)?this.EMPTY.clone():(C=(new A).set(f.lo,f.hi),this._handleNegative(C),v=this.fmod(C,_=this.PI_TWICE),this.width(v)>=_.lo?new A(-1,1):v.lo>=this.piHigh?(p=this.cos(this.sub(v,this.PI)),this.negative(p)):(m=v.lo,P=this.cosLo(b=v.hi),S=this.cosHi(m),b<=this.piLow?new A(P,S):new A(-1,b<=_.lo?Math.max(P,S):1)))},sin:function(f){return this.isEmpty(f)||this.onlyInfinity(f)?this.EMPTY.clone():this.cos(this.sub(f,this.PI_HALF))},tan:function(f){var C,_,v;return this.isEmpty(f)||this.onlyInfinity(f)?this.EMPTY.clone():(C=(new A).set(f.lo,f.hi),this._handleNegative(C),(_=this.fmod(C,v=this.PI)).lo>=this.piHalfLow&&(_=this.sub(_,v)),_.lo<=-this.piHalfLow||_.hi>=this.piHalfLow?this.WHOLE.clone():new A(this.tanLo(_.lo),this.tanHi(_.hi)))},asin:function(f){var C,_;return this.isEmpty(f)||f.hi<-1||f.lo>1?this.EMPTY.clone():(C=f.lo<=-1?-this.piHalfHigh:this.asinLo(f.lo),_=f.hi>=1?this.piHalfHigh:this.asinHi(f.hi),new A(C,_))},acos:function(f){var C,_;return this.isEmpty(f)||f.hi<-1||f.lo>1?this.EMPTY.clone():(C=f.hi>=1?0:this.acosLo(f.hi),_=f.lo<=-1?this.piHigh:this.acosHi(f.lo),new A(C,_))},atan:function(f){return this.isEmpty(f)?this.EMPTY.clone():new A(this.atanLo(f.lo),this.atanHi(f.hi))},sinh:function(f){return this.isEmpty(f)?this.EMPTY.clone():new A(this.sinhLo(f.lo),this.sinhHi(f.hi))},cosh:function(f){return this.isEmpty(f)?this.EMPTY.clone():f.hi<0?new A(this.coshLo(f.hi),this.coshHi(f.lo)):f.lo>=0?new A(this.coshLo(f.lo),this.coshHi(f.hi)):new A(1,this.coshHi(-f.lo>f.hi?f.lo:f.hi))},tanh:function(f){return this.isEmpty(f)?this.EMPTY.clone():new A(this.tanhLo(f.lo),this.tanhHi(f.hi))},equal:function(f,C){return this.isEmpty(f)?this.isEmpty(C):!this.isEmpty(C)&&f.lo===C.lo&&f.hi===C.hi},notEqual:function(f,C){return this.isEmpty(f)?!this.isEmpty(C):this.isEmpty(C)||f.hi<C.lo||f.lo>C.hi},lt:function(f,C){return K.Z.isNumber(f)&&(f=this.Interval(f)),K.Z.isNumber(C)&&(C=this.Interval(C)),!this.isEmpty(f)&&!this.isEmpty(C)&&f.hi<C.lo},gt:function(f,C){return K.Z.isNumber(f)&&(f=this.Interval(f)),K.Z.isNumber(C)&&(C=this.Interval(C)),!this.isEmpty(f)&&!this.isEmpty(C)&&f.lo>C.hi},leq:function(f,C){return K.Z.isNumber(f)&&(f=this.Interval(f)),K.Z.isNumber(C)&&(C=this.Interval(C)),!this.isEmpty(f)&&!this.isEmpty(C)&&f.hi<=C.lo},geq:function(f,C){return K.Z.isNumber(f)&&(f=this.Interval(f)),K.Z.isNumber(C)&&(C=this.Interval(C)),!this.isEmpty(f)&&!this.isEmpty(C)&&f.lo>=C.hi},piLow:3.141592653589793,piHigh:3.1415926535897936,piHalfLow:1.5707963267948966,piHalfHigh:1.5707963267948968,piTwiceLow:6.283185307179586,piTwiceHigh:6.283185307179587,identity:function(f){return f},_prev:function(f){return f===1/0?f:this.nextafter(f,-1/0)},_next:function(f){return f===-1/0?f:this.nextafter(f,1/0)},prev:function(f){return this._prev(f)},next:function(f){return this._next(f)},toInteger:function(f){return f<0?Math.ceil(f):Math.floor(f)},addLo:function(f,C){return this.prev(f+C)},addHi:function(f,C){return this.next(f+C)},subLo:function(f,C){return this.prev(f-C)},subHi:function(f,C){return this.next(f-C)},mulLo:function(f,C){return this.prev(f*C)},mulHi:function(f,C){return this.next(f*C)},divLo:function(f,C){return this.prev(f/C)},divHi:function(f,C){return this.next(f/C)},intLo:function(f){return this.toInteger(this.prev(f))},intHi:function(f){return this.toInteger(this.next(f))},logLo:function(f){return this.prev(Math.log(f))},logHi:function(f){return this.next(Math.log(f))},expLo:function(f){return this.prev(Math.exp(f))},expHi:function(f){return this.next(Math.exp(f))},sinLo:function(f){return this.prev(Math.sin(f))},sinHi:function(f){return this.next(Math.sin(f))},cosLo:function(f){return this.prev(Math.cos(f))},cosHi:function(f){return this.next(Math.cos(f))},tanLo:function(f){return this.prev(Math.tan(f))},tanHi:function(f){return this.next(Math.tan(f))},asinLo:function(f){return this.prev(Math.asin(f))},asinHi:function(f){return this.next(Math.asin(f))},acosLo:function(f){return this.prev(Math.acos(f))},acosHi:function(f){return this.next(Math.acos(f))},atanLo:function(f){return this.prev(Math.atan(f))},atanHi:function(f){return this.next(Math.atan(f))},sinhLo:function(f){return this.prev(X.Z.sinh(f))},sinhHi:function(f){return this.next(X.Z.sinh(f))},coshLo:function(f){return this.prev(X.Z.cosh(f))},coshHi:function(f){return this.next(X.Z.cosh(f))},tanhLo:function(f){return this.prev(X.Z.tanh(f))},tanhHi:function(f){return this.next(X.Z.tanh(f))},sqrtLo:function(f){return this.prev(Math.sqrt(f))},sqrtHi:function(f){return this.next(Math.sqrt(f))},powLo:function(f,C){var _;if(C%1!=0)return this.prev(Math.pow(f,C));for(_=1==(1&C)?f:1,C>>=1;C>0;)f=this.mulLo(f,f),1==(1&C)&&(_=this.mulLo(f,_)),C>>=1;return _},powHi:function(f,C){var _;if(C%1!=0)return this.next(Math.pow(f,C));for(_=1==(1&C)?f:1,C>>=1;C>0;)f=this.mulHi(f,f),1==(1&C)&&(_=this.mulHi(f,_)),C>>=1;return _},disable:function(){this.next=this.prev=this.identity},enable:function(){this.prev=function(f){return this._prev(f)},this.next=function(f){return this._next(f)}},SMALLEST_DENORM:Math.pow(2,-1074),UINT_MAX:-1>>>0,nextafter:function(f,C){var _,v;return isNaN(f)||isNaN(C)?NaN:f===C?f:0===f?C<0?-this.SMALLEST_DENORM:this.SMALLEST_DENORM:(v=O.hi(f),_=O.lo(f),C>f==f>0?_===this.UINT_MAX?(v+=1,_=0):_+=1:0===_?(_=this.UINT_MAX,v-=1):_-=1,O.pack(_,v))}},F.Z.Math.IntervalArithmetic.PI=new A(X.Z.IntervalArithmetic.piLow,X.Z.IntervalArithmetic.piHigh),F.Z.Math.IntervalArithmetic.PI_HALF=new A(X.Z.IntervalArithmetic.piHalfLow,X.Z.IntervalArithmetic.piHalfHigh),F.Z.Math.IntervalArithmetic.PI_TWICE=new A(X.Z.IntervalArithmetic.piTwiceLow,X.Z.IntervalArithmetic.piTwiceHigh),F.Z.Math.IntervalArithmetic.ZERO=new A(0),F.Z.Math.IntervalArithmetic.ONE=new A(1),F.Z.Math.IntervalArithmetic.WHOLE=(new A).setWhole(),F.Z.Math.IntervalArithmetic.EMPTY=(new A).setEmpty();const M=F.Z.Math.IntervalArithmetic},515:(x,k,$)=>{$.d(k,{Z:()=>A});var K,F=$(917),X=$(695),O=function(M){var f,C;return M.memo||(f={},C=Array.prototype.join,M.memo=function(){var _=C.call(arguments);return f[_]!==K?f[_]:f[_]=M.apply(this,arguments)}),M.memo};F.Z.Math={eps:1e-6,relDif:function(M,f){var C=Math.abs(M),_=Math.abs(f);return 0===(_=Math.max(C,_))?0:Math.abs(M-f)/_},mod:function(M,f){return M-Math.floor(M/f)*f},vector:function(M,f){var C,_;for(f=f||0,C=[],_=0;_<M;_++)C[_]=f;return C},matrix:function(M,f,C){var _,v,p;for(C=C||0,f=f||M,_=[],v=0;v<M;v++)for(_[v]=[],p=0;p<f;p++)_[v][p]=C;return _},identity:function(M,f){var C,_;for(f===K&&"number"!=typeof f&&(f=M),C=this.matrix(M,f),_=0;_<Math.min(M,f);_++)C[_][_]=1;return C},frustum:function(M,f,C,_,v,p){var m=this.matrix(4,4);return m[0][0]=2*v/(f-M),m[0][1]=0,m[0][2]=(f+M)/(f-M),m[0][3]=0,m[1][0]=0,m[1][1]=2*v/(_-C),m[1][2]=(_+C)/(_-C),m[1][3]=0,m[2][0]=0,m[2][1]=0,m[2][2]=-(p+v)/(p-v),m[2][3]=-p*v*2/(p-v),m[3][0]=0,m[3][1]=0,m[3][2]=-1,m[3][3]=0,m},projection:function(M,f,C,_){var v=C*Math.tan(M/2),p=v*f;return this.frustum(-p,p,-v,v,C,_)},matVecMult:function(M,f){var C,_,v,p=M.length,m=f.length,b=[];if(3===m)for(C=0;C<p;C++)b[C]=M[C][0]*f[0]+M[C][1]*f[1]+M[C][2]*f[2];else for(C=0;C<p;C++){for(_=0,v=0;v<m;v++)_+=M[C][v]*f[v];b[C]=_}return b},matMatMult:function(M,f){var C,_,v,p,m=M.length,b=m>0?f[0].length:0,P=f.length,S=this.matrix(m,b);for(C=0;C<m;C++)for(_=0;_<b;_++){for(v=0,p=0;p<P;p++)v+=M[C][p]*f[p][_];S[C][_]=v}return S},transpose:function(M){var f,C,_,v,p;for(f=this.matrix(p=M.length>0?M[0].length:0,v=M.length),C=0;C<p;C++)for(_=0;_<v;_++)f[C][_]=M[_][C];return f},inverse:function(M){var f,C,_,v,p,m,b,P=M.length,S=[],Z=[],I=[];for(f=0;f<P;f++){for(S[f]=[],C=0;C<P;C++)S[f][C]=M[f][C];Z[f]=f}for(C=0;C<P;C++){for(p=Math.abs(S[C][C]),m=C,f=C+1;f<P;f++)Math.abs(S[f][C])>p&&(p=Math.abs(S[f][C]),m=f);if(p<=this.eps)return[];if(m>C){for(_=0;_<P;_++)b=S[C][_],S[C][_]=S[m][_],S[m][_]=b;b=Z[C],Z[C]=Z[m],Z[m]=b}for(v=1/S[C][C],f=0;f<P;f++)S[f][C]*=v;for(S[C][C]=v,_=0;_<P;_++)if(_!==C){for(f=0;f<P;f++)f!==C&&(S[f][_]-=S[f][C]*S[C][_]);S[C][_]=-v*S[C][_]}}for(f=0;f<P;f++){for(_=0;_<P;_++)I[Z[_]]=S[f][_];for(_=0;_<P;_++)S[f][_]=I[_]}return S},innerProduct:function(M,f,C){var _,v=0;for((C===K||!X.Z.isNumber(C))&&(C=M.length),_=0;_<C;_++)v+=M[_]*f[_];return v},crossProduct:function(M,f){return[M[1]*f[2]-M[2]*f[1],M[2]*f[0]-M[0]*f[2],M[0]*f[1]-M[1]*f[0]]},norm:function(M,f){var C,_=0;for((f===K||!X.Z.isNumber(f))&&(f=M.length),C=0;C<f;C++)_+=M[C]*M[C];return Math.sqrt(_)},axpy:function(M,f,C){var _,v=f.length,p=[];for(_=0;_<v;_++)p[_]=M*f[_]+C[_];return p},factorial:O(function(M){return M<0?NaN:0===(M=Math.floor(M))||1===M?1:M*this.factorial(M-1)}),binomial:O(function(M,f){var C,_;if(f>M||f<0)return NaN;if(f=Math.round(f),M=Math.round(M),0===f||f===M)return 1;for(C=1,_=0;_<f;_++)C*=M-_,C/=_+1;return C}),cosh:Math.cosh||function(M){return.5*(Math.exp(M)+Math.exp(-M))},sinh:Math.sinh||function(M){return.5*(Math.exp(M)-Math.exp(-M))},acosh:Math.acosh||function(M){return Math.log(M+Math.sqrt(M*M-1))},asinh:Math.asinh||function(M){return M===-1/0?M:Math.log(M+Math.sqrt(M*M+1))},cot:function(M){return 1/Math.tan(M)},acot:function(M){return(M>=0?.5:-.5)*Math.PI-Math.atan(M)},nthroot:function(M,f){var C=1/f;return f<=0||Math.floor(f)!==f?NaN:0===M?0:M>0?Math.exp(C*Math.log(M)):f%2==1?-Math.exp(C*Math.log(-M)):NaN},cbrt:Math.cbrt||function(M){return this.nthroot(M,3)},pow:function(M,f){return 0===M?0===f?1:0:Math.floor(f)===f?Math.pow(M,f):M>0?Math.exp(f*Math.log(M)):NaN},ratpow:function(M,f,C){var _;return 0===f?1:0===C?NaN:(_=this.gcd(f,C),this.nthroot(this.pow(M,f/_),C/_))},log10:function(M){return Math.log(M)/Math.log(10)},log2:function(M){return Math.log(M)/Math.log(2)},log:function(M,f){return void 0!==f&&X.Z.isNumber(f)?Math.log(M)/Math.log(f):Math.log(M)},sign:Math.sign||function(M){return 0==(M=+M)||isNaN(M)?M:M>0?1:-1},squampow:function(M,f){var C;if(Math.floor(f)===f){for(C=1,f<0&&(M=1/M,f*=-1);0!==f;)1&f&&(C*=M),f>>=1,M*=M;return C}return this.pow(M,f)},gcd:function(M,f){var C;if(M=Math.abs(M),f=Math.abs(f),!X.Z.isNumber(M)||!X.Z.isNumber(f))return NaN;for(f>M&&(C=M,M=f,f=C);;){if(0==(M%=f))return f;if(0==(f%=M))return M}},lcm:function(M,f){var C;return X.Z.isNumber(M)&&X.Z.isNumber(f)?0!=(C=M*f)?C/this.gcd(M,f):0:NaN},erf:function(M){return this.ProbFuncs.erf(M)},erfc:function(M){return this.ProbFuncs.erfc(M)},erfi:function(M){return this.ProbFuncs.erfi(M)},ndtr:function(M){return this.ProbFuncs.ndtr(M)},ndtri:function(M){return this.ProbFuncs.ndtri(M)},lt:function(M,f){return M<f},leq:function(M,f){return M<=f},gt:function(M,f){return M>f},geq:function(M,f){return M>=f},eq:function(M,f){return M===f},neq:function(M,f){return M!==f},and:function(M,f){return M&&f},not:function(M){return!M},or:function(M,f){return M||f},xor:function(M,f){return(M||f)&&!(M&&f)},normalize:function(M){var f,C,_=2*M[3],v=M[4]/_;return M[5]=v,M[6]=-M[1]/_,M[7]=-M[2]/_,isFinite(v)?Math.abs(v)>=1?(M[0]=(M[6]*M[6]+M[7]*M[7]-v*v)/(2*v),M[1]=-M[6]/v,M[2]=-M[7]/v,M[3]=1/(2*v),M[4]=1):(M[0]=(C=v<=0?-1:1)*(M[6]*M[6]+M[7]*M[7]-v*v)*.5,M[1]=-C*M[6],M[2]=-C*M[7],M[3]=C/2,M[4]=C*v):(f=Math.sqrt(M[1]*M[1]+M[2]*M[2]),M[0]/=f,M[1]/=f,M[2]/=f,M[3]=0,M[4]=1),M},toGL:function(M){var f,C,_;if(f="function"==typeof Float32Array?new Float32Array(16):new Array(16),4!==M.length&&4!==M[0].length)return f;for(C=0;C<4;C++)for(_=0;_<4;_++)f[C+4*_]=M[C][_];return f},Vieta:function(M){var _,v,p,f=M.length,C=[];for(C=M.slice(),_=1;_<f;++_){for(p=C[_],C[_]*=C[_-1],v=_-1;v>=1;--v)C[v]+=C[v-1]*p;C[0]+=p}return C}};const A=F.Z.Math},514:(x,k,$)=>{$.d(k,{Z:()=>M});var F=$(917),X=$(695),K=$(658),O=$(515),A={rk4:{s:4,A:[[0,0,0,0],[.5,0,0,0],[0,.5,0,0],[0,0,1,0]],b:[1/6,1/3,1/3,1/6],c:[0,.5,.5,1]},heun:{s:2,A:[[0,0],[1,0]],b:[.5,.5],c:[0,1]},euler:{s:1,A:[[0]],b:[1],c:[0]}};O.Z.Numerics={Gauss:function(f,C){var _,v,p,m,b,P=O.Z.eps,S=f.length>0?f[0].length:0;if(S!==C.length||S!==f.length)throw new Error("JXG.Math.Numerics.Gauss: Dimensions don't match. A must be a square matrix and b must be of the same length as A.");for(m=[],b=C.slice(0,S),_=0;_<S;_++)m[_]=f[_].slice(0,S);for(v=0;v<S;v++){for(_=S-1;_>v;_--)if(Math.abs(m[_][v])>P)if(Math.abs(m[v][v])<P)X.Z.swap(m,_,v),X.Z.swap(b,_,v);else for(m[_][v]/=m[v][v],b[_]-=m[_][v]*b[v],p=v+1;p<S;p++)m[_][p]-=m[_][v]*m[v][p];if(Math.abs(m[v][v])<P)throw new Error("JXG.Math.Numerics.Gauss(): The given matrix seems to be singular.")}return this.backwardSolve(m,b,!0),b},backwardSolve:function(f,C,_){var v,m,b,P;for(v=_?C:C.slice(0,C.length),m=f.length>0?f[0].length:0,b=f.length-1;b>=0;b--){for(P=m-1;P>b;P--)v[b]-=f[b][P]*v[P];v[b]/=f[b][b]}return v},gaussBareiss:function(f){var C,_,v,p,m,b,P,S,Z,I=O.Z.eps;if((P=f.length)<=0)return 0;for(f[0].length<P&&(P=f[0].length),S=[],p=0;p<P;p++)S[p]=f[p].slice(0,P);for(_=1,v=1,C=0;C<P-1;C++){if(b=S[C][C],Math.abs(b)<I){for(p=C+1;p<P&&!(Math.abs(S[p][C])>=I);p++);if(p===P)return 0;for(m=C;m<P;m++)Z=S[p][m],S[p][m]=S[C][m],S[C][m]=Z;v=-v,b=S[C][C]}for(p=C+1;p<P;p++)for(m=C+1;m<P;m++)S[p][m]=(Z=b*S[p][m]-S[p][C]*S[C][m])/_;_=b}return v*S[P-1][P-1]},det:function(f){return 2===f.length&&2===f[0].length?f[0][0]*f[1][1]-f[1][0]*f[0][1]:this.gaussBareiss(f)},Jacobi:function(f){var C,_,v,p,m,b,P,S,Z,I=O.Z.eps*O.Z.eps,B=0,j=f.length,z=[[0,0,0],[0,0,0],[0,0,0]],G=[[0,0,0],[0,0,0],[0,0,0]],J=0;for(C=0;C<j;C++){for(_=0;_<j;_++)z[C][_]=0,G[C][_]=f[C][_],B+=Math.abs(G[C][_]);z[C][C]=1}if(1===j)return[G,z];if(B<=0)return[G,z];B/=j*j;do{for(S=0,Z=0,_=1;_<j;_++)for(C=0;C<_;C++)if((p=Math.abs(G[C][_]))>Z&&(Z=p),S+=p,p>=I){for(p=.5*Math.atan2(2*G[C][_],G[C][C]-G[_][_]),m=Math.sin(p),b=Math.cos(p),v=0;v<j;v++)G[v][C]=b*(P=G[v][C])+m*G[v][_],G[v][_]=-m*P+b*G[v][_],z[v][C]=b*(P=z[v][C])+m*z[v][_],z[v][_]=-m*P+b*z[v][_];for(G[C][C]=b*G[C][C]+m*G[_][C],G[_][_]=-m*G[C][_]+b*G[_][_],G[C][_]=0,v=0;v<j;v++)G[C][v]=G[v][C],G[_][v]=G[v][_]}J+=1}while(Math.abs(S)/B>I&&J<2e3);return[G,z]},NewtonCotes:function(f,C,_){var v,p,m,b=0,P=_&&X.Z.isNumber(_.number_of_nodes)?_.number_of_nodes:28,S={trapez:!0,simpson:!0,milne:!0},Z=_&&_.integration_type&&S.hasOwnProperty(_.integration_type)&&S[_.integration_type]?_.integration_type:"milne",I=(f[1]-f[0])/P;switch(Z){case"trapez":for(b=.5*(C(f[0])+C(f[1])),v=f[0],p=0;p<P-1;p++)b+=C(v+=I);b*=I;break;case"simpson":if(P%2>0)throw new Error("JSXGraph:  INT_SIMPSON requires config.number_of_nodes dividable by 2.");for(m=P/2,b=C(f[0])+C(f[1]),v=f[0],p=0;p<m-1;p++)b+=2*C(v+=2*I);for(v=f[0]-I,p=0;p<m;p++)b+=4*C(v+=2*I);b*=I/3;break;default:if(P%4>0)throw new Error("JSXGraph: Error in INT_MILNE: config.number_of_nodes must be a multiple of 4");for(m=.25*P,b=7*(C(f[0])+C(f[1])),v=f[0],p=0;p<m-1;p++)b+=14*C(v+=4*I);for(v=f[0]-3*I,p=0;p<m;p++)b+=32*(C(v+=4*I)+C(v+2*I));for(v=f[0]-2*I,p=0;p<m;p++)b+=12*C(v+=4*I);b*=2*I/45}return b},Romberg:function(f,C,_){var v,p,m,b,P,S,Z,I,B=[],j=0,z=1/0,G=_&&X.Z.isNumber(_.max_iterations)?_.max_iterations:20,J=_&&X.Z.isNumber(_.eps)?_.eps:_.eps||1e-7;for(P=1,B[0]=.5*(m=(p=f[1])-(v=f[0]))*(C(v)+C(p)),S=0;S<G;++S){for(b=0,m*=.5,P*=2,I=1,Z=1;Z<P;Z+=2)b+=C(v+Z*m);for(B[S+1]=.5*B[S]+b*m,j=B[S+1],Z=S-1;Z>=0;--Z)B[Z]=B[Z+1]+(B[Z+1]-B[Z])/((I*=4)-1),j=B[Z];if(Math.abs(j-z)<J*Math.abs(j))break;z=j}return j},GaussLegendre:function(f,C,_){var v,p,m,b,P,S,j,z,Z=0,I=[],B=[],G=_&&X.Z.isNumber(_.n)?_.n:12;if(G>18&&(G=18),I[2]=[.5773502691896257],B[2]=[1],I[4]=[.33998104358485626,.8611363115940526],B[4]=[.6521451548625461,.34785484513745385],I[6]=[.2386191860831969,.6612093864662645,.932469514203152],B[6]=[.46791393457269104,.3607615730481386,.17132449237917036],I[8]=[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],B[8]=[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],I[10]=[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],B[10]=[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],I[12]=[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],B[12]=[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],I[14]=[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],B[14]=[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],I[16]=[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499],B[16]=[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096],I[18]=[.0847750130417353,.2518862256915055,.41175116146284263,.5597708310739475,.6916870430603532,.8037049589725231,.8926024664975557,.9558239495713977,.9915651684209309],B[18]=[.1691423829631436,.16427648374583273,.15468467512626524,.14064291467065065,.12255520671147846,.10094204410628717,.07642573025488905,.0497145488949698,.02161601352648331],I[3]=[0,.7745966692414834],B[3]=[.8888888888888888,.5555555555555556],I[5]=[0,.5384693101056831,.906179845938664],B[5]=[.5688888888888889,.47862867049936647,.23692688505618908],I[7]=[0,.4058451513773972,.7415311855993945,.9491079123427585],B[7]=[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],I[9]=[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],B[9]=[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],I[11]=[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],B[11]=[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],I[13]=[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],B[13]=[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],I[15]=[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],B[15]=[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],I[17]=[0,.17848418149584785,.3512317634538763,.5126905370864769,.6576711592166907,.7815140038968014,.8802391537269859,.9506755217687678,.9905754753144174],B[17]=[.17944647035620653,.17656270536699264,.16800410215645004,.15404576107681028,.13513636846852548,.11188384719340397,.08503614831717918,.0554595293739872,.02414830286854793],b=G+1>>1,j=I[G],z=B[G],S=.5*((p=f[1])-(v=f[0])),P=.5*(p+v),!0&G)for(Z=z[0]*C(P),m=1;m<b;++m)Z+=z[m]*(C(P+S*j[m])+C(P-S*j[m]));else for(Z=0,m=0;m<b;++m)Z+=z[m]*(C(P+S*j[m])+C(P-S*j[m]));return S*Z},_rescale_error:function(f,C,_){var v,p;return f=Math.abs(f),0!==_&&0!==f&&(f=(v=Math.pow(200*f/_,1.5))<1?_*v:_),C>20041683600089728e-310&&(p=11102230246251565e-30*C)>f&&(f=p),f},_gaussKronrod:function(f,C,_,v,p,m,b){var Z,I,ue,ie,Pe,xe,me,we,Ae,Ne,ct,P=f[0],S=f[1],B=.5*(P+S),j=.5*(S-P),z=Math.abs(j),G=C(B),J=0,W=G*m[_-1],ee=Math.abs(W),ae=0,wt=[],Lt=[];for(_%2==0&&(J=G*p[_/2-1]),Z=Math.floor((_-1)/2),Pe=0;Pe<Z;Pe++)Ne=(we=C(B-(me=j*v[xe=2*Pe+1])))+(Ae=C(B+me)),wt[xe]=we,Lt[xe]=Ae,J+=p[Pe]*Ne,W+=m[xe]*Ne,ee+=m[xe]*(Math.abs(we)+Math.abs(Ae));for(Z=Math.floor(_/2),Pe=0;Pe<Z;Pe++)we=C(B-(me=j*v[ct=2*Pe])),Ae=C(B+me),wt[ct]=we,Lt[ct]=Ae,W+=m[ct]*(we+Ae),ee+=m[ct]*(Math.abs(we)+Math.abs(Ae));for(ue=.5*W,ae=m[_-1]*Math.abs(G-ue),Pe=0;Pe<_-1;Pe++)ae+=m[Pe]*(Math.abs(wt[Pe]-ue)+Math.abs(Lt[Pe]-ue));return ie=(W-J)*j,I=W*=j,b.abserr=this._rescale_error(ie,ee*=z,ae*=z),b.resabs=ee,b.resasc=ae,I},GaussKronrod15:function(f,C,_){return this._gaussKronrod(f,C,8,[.9914553711208126,.9491079123427585,.8648644233597691,.7415311855993945,.5860872354676911,.4058451513773972,.20778495500789848,0],[.1294849661688697,.27970539148927664,.3818300505051189,.4179591836734694],[.022935322010529224,.06309209262997856,.10479001032225019,.14065325971552592,.1690047266392679,.19035057806478542,.20443294007529889,.20948214108472782],_)},GaussKronrod21:function(f,C,_){return this._gaussKronrod(f,C,11,[.9956571630258081,.9739065285171717,.9301574913557082,.8650633666889845,.7808177265864169,.6794095682990244,.5627571346686047,.4333953941292472,.2943928627014602,.14887433898163122,0],[.06667134430868814,.1494513491505806,.21908636251598204,.26926671930999635,.29552422471475287],[.011694638867371874,.032558162307964725,.054755896574351995,.07503967481091996,.0931254545836976,.10938715880229764,.12349197626206584,.13470921731147334,.14277593857706009,.14773910490133849,.1494455540029169],_)},GaussKronrod31:function(f,C,_){return this._gaussKronrod(f,C,16,[.9980022986933971,.9879925180204854,.9677390756791391,.937273392400706,.8972645323440819,.8482065834104272,.790418501442466,.7244177313601701,.650996741297417,.5709721726085388,.4850818636402397,.3941513470775634,.29918000715316884,.20119409399743451,.1011420669187175,0],[.03075324199611727,.07036604748810812,.10715922046717194,.13957067792615432,.16626920581699392,.1861610000155622,.19843148532711158,.2025782419255613],[.005377479872923349,.015007947329316122,.02546084732671532,.03534636079137585,.04458975132476488,.05348152469092809,.06200956780067064,.06985412131872826,.07684968075772038,.08308050282313302,.08856444305621176,.09312659817082532,.09664272698362368,.09917359872179196,.10076984552387559,.10133000701479154],_)},_workspace:function(f,C){return{limit:C,size:0,nrmax:0,i:0,alist:[f[0]],blist:[f[1]],rlist:[0],elist:[0],order:[0],level:[0],qpsrt:function(){var p,m,b,P,S,_=this.size-1,v=this.limit,Z=this.nrmax,I=this.order[Z];if(_<2)return this.order[0]=0,this.order[1]=1,void(this.i=I);for(p=this.elist[I];Z>0&&p>this.elist[this.order[Z-1]];)this.order[Z]=this.order[Z-1],Z--;for(S=_<v/2+2?_:v-_+1,b=Z+1;b<S&&p<this.elist[this.order[b]];)this.order[b-1]=this.order[b],b++;for(this.order[b-1]=I,m=this.elist[_],P=S-1;P>b-2&&m>=this.elist[this.order[P]];)this.order[P+1]=this.order[P],P--;this.order[P+1]=_,this.i=I=this.order[Z],this.nrmax=Z},set_initial_result:function(_,v){this.size=1,this.rlist[0]=_,this.elist[0]=v},update:function(_,v,p,m,b,P,S,Z){var I=this.i,B=this.size,j=this.level[this.i]+1;Z>m?(this.alist[I]=b,this.rlist[I]=S,this.elist[I]=Z,this.level[I]=j,this.alist[B]=_,this.blist[B]=v,this.rlist[B]=p,this.elist[B]=m,this.level[B]=j):(this.blist[I]=v,this.rlist[I]=p,this.elist[I]=m,this.level[I]=j,this.alist[B]=b,this.blist[B]=P,this.rlist[B]=S,this.elist[B]=Z,this.level[B]=j),this.size++,j>this.maximum_level&&(this.maximum_level=j),this.qpsrt()},retrieve:function(){var _=this.i;return{a:this.alist[_],b:this.blist[_],r:this.rlist[_],e:this.elist[_]}},sum_results:function(){var v,_=this.size,p=0;for(v=0;v<_;v++)p+=this.rlist[v];return p},subinterval_too_small:function(_,v,p){var P=1.0000000000000222*(Math.abs(v)+22250738585072014e-321);return Math.abs(_)<=P&&Math.abs(p)<=P}}},Qag:function(f,C,_){var I,B,j,z,G,J,ee,me,we,Ae,Ne,ct,wt,Lt,yi,dt,ri,p=this._workspace(f,1e3),m=_&&X.Z.isNumber(_.limit)?_.limit:15,b=_&&X.Z.isNumber(_.epsrel)?_.epsrel:1e-7,P=_&&X.Z.isNumber(_.epsabs)?_.epsabs:1e-7,S=_&&X.Z.isFunction(_.q)?_.q:this.GaussKronrod15,Z={},ae=0,ue=0,ie=0,Pe=0,Pt=0,qt=0,$t=0,mt=0,bt=0,En=0;if(m>p.limit&&F.Z.warn("iteration limit exceeds available workspace"),P<=0&&(b<50*O.Z.eps||b<5e-29)&&F.Z.warn("tolerance cannot be acheived with given epsabs and epsrel"),j=S.apply(this,[f,C,Z]),G=Z.resabs,J=Z.resasc,p.set_initial_result(j,z=Z.abserr),ee=Math.max(P,b*Math.abs(j)),z<=11102230246251565e-30*G&&z>ee)return F.Z.warn("cannot reach tolerance because of roundoff error on first attempt"),-1/0;if(z<=ee&&z!==J||0===z)return j;if(1===m)return F.Z.warn("a maximum of one iteration was insufficient"),-1/0;I=j,B=z,ae=1;do{Pt=0,qt=0,$t=0,mt=0,bt=0,En=0,Lt=(ri=p.retrieve()).r,yi=ri.e,Ae=we=.5*((ct=ri.a)+(wt=ri.b)),Ne=wt,Pt=S.apply(this,[[me=ct,we],C,Z]),mt=Z.abserr,dt=Z.resasc,qt=S.apply(this,[[Ae,Ne],C,Z]),B+=(En=mt+(bt=Z.abserr))-yi,I+=($t=Pt+qt)-Lt,dt!==mt&&Z.resasc!==bt&&(Math.abs(Lt-$t)<=1e-5*Math.abs($t)&&En>=.99*yi&&ue++,ae>=10&&En>yi&&ie++),B>(ee=Math.max(P,b*Math.abs(I)))&&((ue>=6||ie>=20)&&(Pe=2),p.subinterval_too_small(me,Ae,Ne)&&(Pe=3)),p.update(me,we,Pt,mt,Ae,Ne,qt,bt),ct=(ri=p.retrieve()).a_i,wt=ri.b_i,Lt=ri.r_i,yi=ri.e_i,ae++}while(ae<m&&!Pe&&B>ee);return p.sum_results()},I:function(f,C){return this.Qag(f,C,{q:this.GaussKronrod15,limit:15,epsrel:1e-7,epsabs:1e-7})},Newton:function(f,C,_){var v,p=0,m=O.Z.eps,b=f.apply(_,[C]);for(X.Z.isArray(C)&&(C=C[0]);p<50&&Math.abs(b)>m;)v=this.D(f,_)(C),Math.abs(v)>m?C-=b/v:C+=.2*Math.random()-1,b=f.apply(_,[C]),p+=1;return C},root:function(f,C,_){return this.chandrupatla(f,C,_)},generalizedNewton:function(f,C,_,v){var p,m,b,P,S,Z,I,B,j,z,G,J,W,ee,ae=0;for(this.generalizedNewton.t1memo?(p=this.generalizedNewton.t1memo,m=this.generalizedNewton.t2memo):(p=_,m=v),z=(B=f.X(p)-C.X(m))*B+(j=f.Y(p)-C.Y(m))*j,G=this.D(f.X,f),J=this.D(C.X,C),W=this.D(f.Y,f),ee=this.D(C.Y,C);z>O.Z.eps&&ae<10;)b=G(p),P=-J(m),m-=(b*j-(S=W(p))*B)/(I=b*(Z=-ee(m))-P*S),z=(B=f.X(p-=(Z*B-P*j)/I)-C.X(m))*B+(j=f.Y(p)-C.Y(m))*j,ae+=1;return this.generalizedNewton.t1memo=p,this.generalizedNewton.t2memo=m,Math.abs(p)<Math.abs(m)?[f.X(p),f.Y(p)]:[C.X(m),C.Y(m)]},Neville:function(f){var C=[],_=function(m){return function(b,P){var S,Z,I,B=O.Z.binomial,j=f.length,z=j-1,G=0,J=0;if(!P)for(I=1,S=0;S<j;S++)C[S]=B(z,S)*I,I*=-1;for(Z=b,S=0;S<j;S++){if(0===Z)return f[S][m]();I=C[S]/Z,Z-=1,G+=f[S][m]()*I,J+=I}return G/J}};return[_("X"),_("Y"),0,function(){return f.length-1}]},splineDef:function(f,C){var v,p,m=Math.min(f.length,C.length),b=[],P=[],S=[],Z=[],I=[],B=[];if(2===m)return[0,0];for(v=0;v<m;v++)S.push({X:f[v],Y:C[v]});for(S.sort(function(j,z){return j.X-z.X}),v=0;v<m;v++)f[v]=S[v].X,C[v]=S[v].Y;for(v=0;v<m-1;v++)Z.push(f[v+1]-f[v]);for(v=0;v<m-2;v++)I.push(6*(C[v+2]-C[v+1])/Z[v+1]-6*(C[v+1]-C[v])/Z[v]);for(b.push(2*(Z[0]+Z[1])),P.push(I[0]),v=0;v<m-3;v++)b.push(2*(Z[v+1]+Z[v+2])-(p=Z[v+1]/b[v])*Z[v+1]),P.push(I[v+1]-p*P[v]);for(B[m-3]=P[m-3]/b[m-3],v=m-4;v>=0;v--)B[v]=(P[v]-Z[v+1]*B[v+1])/b[v];for(v=m-3;v>=0;v--)B[v+1]=B[v];return B[0]=0,B[m-1]=0,B},splineEval:function(f,C,_,v){var p,m,I,B=Math.min(C.length,_.length),j=1,z=!1,G=[];for(X.Z.isArray(f)?(j=f.length,z=!0):f=[f],p=0;p<j;p++){if(f[p]<C[0]||C[p]>C[B-1])return NaN;for(m=1;m<B&&!(f[p]<=C[m]);m++);G.push(_[m-=1]+((_[m+1]-_[m])/(C[m+1]-C[m])-(C[m+1]-C[m])/6*(v[m+1]+2*v[m])+(v[m]/2+(v[m+1]-v[m])/(6*(C[m+1]-C[m]))*(I=f[p]-C[m]))*I)*I)}return z?G:G[0]},generatePolynomialTerm:function(f,C,_,v){var p,m=[];for(p=C;p>=0;p--)m=m.concat(["(",f[p].toPrecision(v),")"]),p>1?m=m.concat(["*",_,"<sup>",p,"<","/sup> + "]):1===p&&(m=m.concat(["*",_," + "]));return m.join("")},lagrangePolynomial:function(f){var C=[],_=this,v=function(p,m){var b,P,S,Z,I=f.length,B=0,j=0;if(!m)for(b=0;b<I;b++){for(C[b]=1,S=f[b].X(),P=0;P<I;P++)P!==b&&(C[b]*=S-f[P].X());C[b]=1/C[b]}for(b=0;b<I;b++){if(p===(S=f[b].X()))return f[b].Y();j+=Z=C[b]/(p-S),B+=Z*f[b].Y()}return B/j};return v.getTerm=function(p,m,b){return _.lagrangePolynomialTerm(f,p,m,b)()},v.getCoefficients=function(){return _.lagrangePolynomialCoefficients(f)()},v},lagrangePolynomialTerm:function(f,C,_,v){var p=this;return function(){var b,S,Z,I,B,P=!0;for(_=_||"x",void 0===v&&(v=" * "),S=f.length-1,b=p.lagrangePolynomialCoefficients(f)(),Z="",I=0;I<b.length;I++)B=b[I],!(Math.abs(B)<O.Z.eps)&&(F.Z.exists(C)&&(B=K.Z._round10(B,-C)),P?(Z+=B>0?B:"-"+-B,P=!1):Z+=B>0?" + "+B:" - "+-B,S-I>1?Z+=v+_+"^"+(S-I):S-I==1&&(Z+=v+_));return Z}},lagrangePolynomialCoefficients:function(f){return function(){var b,P,S,Z,C=f.length,_=[],v=[],p=[];for(P=0;P<C;P++)p[P]=0;for(b=0;b<C;b++){for(S=f[b].Y(),Z=f[b].X(),_=[],P=0;P<C;P++)P!==b&&(S/=Z-f[P].X(),_.push(f[P].X()));for(v=[1].concat(O.Z.Vieta(_)),P=0;P<v.length;P++)p[P]+=(P%2==1?-1:1)*v[P]*S}return p}},_initCubicPoly:function(f,C,_,v){return[f,_,-3*f+3*C-2*_-v,2*f-2*C+_+v]},CardinalSpline:function(f,C,_){var v,m,b,P,p=[],S=this;return P=X.Z.isFunction(C)?C:function(){return C},void 0===_&&(_="uniform"),[(m=function(Z){return function(I,B){var j,z,J,W,ee,ae,ue,ie,Pe;if(f.length<2)return NaN;if(!B)for(b=P(),J={X:function(){return 2*f[f.length-1].X()-f[f.length-2].X()},Y:function(){return 2*f[f.length-1].Y()-f[f.length-2].Y()},Dist:function(xe){var me=this.X()-xe.X(),we=this.Y()-xe.Y();return Math.sqrt(me*me+we*we)}},Pe=(v=[{X:function(){return 2*f[0].X()-f[1].X()},Y:function(){return 2*f[0].Y()-f[1].Y()},Dist:function(xe){var me=this.X()-xe.X(),we=this.Y()-xe.Y();return Math.sqrt(me*me+we*we)}}].concat(f,[J])).length,p[Z]=[],j=0;j<Pe-3;j++)"centripetal"===_?(ae=v[j].Dist(v[j+1]),ue=v[j+2].Dist(v[j+1]),ie=v[j+3].Dist(v[j+2]),ae=Math.sqrt(ae),ue=Math.sqrt(ue),ie=Math.sqrt(ie),ue<O.Z.eps&&(ue=1),ae<O.Z.eps&&(ae=ue),ie<O.Z.eps&&(ie=ue),W=(v[j+1][Z]()-v[j][Z]())/ae-(v[j+2][Z]()-v[j][Z]())/(ue+ae)+(v[j+2][Z]()-v[j+1][Z]())/ue,ee=(v[j+2][Z]()-v[j+1][Z]())/ue-(v[j+3][Z]()-v[j+1][Z]())/(ie+ue)+(v[j+3][Z]()-v[j+2][Z]())/ie,W*=ue,ee*=ue,p[Z][j]=S._initCubicPoly(v[j+1][Z](),v[j+2][Z](),b*W,b*ee)):p[Z][j]=S._initCubicPoly(v[j+1][Z](),v[j+2][Z](),b*(v[j+2][Z]()-v[j][Z]()),b*(v[j+3][Z]()-v[j+1][Z]()));return isNaN(I)?NaN:(Pe=f.length,I<=0?f[0][Z]():I>=Pe?f[Pe-1][Z]():(j=Math.floor(I))===I?f[j][Z]():(I-=j,void 0===(z=p[Z][j])?NaN:((z[3]*I+z[2])*I+z[1])*I+z[0]))}})("X"),m("Y"),0,function(){return f.length-1}]},CatmullRomSpline:function(f,C){return this.CardinalSpline(f,.5,C)},regressionPolynomial:function(f,C,_){var v,p,m,b,P,S,Z="";if(X.Z.isPoint(f)&&X.Z.isFunction(f.Value))p=function(){return f.Value()};else if(X.Z.isFunction(f))p=f;else{if(!X.Z.isNumber(f))throw new Error("JSXGraph: Can't create regressionPolynomial from degree of type'"+typeof f+"'.");p=function(){return f}}if(3===arguments.length&&X.Z.isArray(C)&&X.Z.isArray(_))P=0;else if(2===arguments.length&&X.Z.isArray(C)&&C.length>0&&X.Z.isPoint(C[0]))P=1;else{if(!(2===arguments.length&&X.Z.isArray(C)&&C.length>0&&C[0].usrCoords&&C[0].scrCoords))throw new Error("JSXGraph: Can't create regressionPolynomial. Wrong parameters.");P=2}return(S=function(I,B){var j,z,G,J,W,ee,ae,ue,ie,Pe=C.length;if(ie=Math.floor(p()),!B){if(1===P)for(m=[],b=[],j=0;j<Pe;j++)m[j]=C[j].X(),b[j]=C[j].Y();if(2===P)for(m=[],b=[],j=0;j<Pe;j++)m[j]=C[j].usrCoords[1],b[j]=C[j].usrCoords[2];if(0===P)for(m=[],b=[],j=0;j<Pe;j++)X.Z.isFunction(C[j])?m.push(C[j]()):m.push(C[j]),X.Z.isFunction(_[j])?b.push(_[j]()):b.push(_[j]);for(G=[],z=0;z<Pe;z++)G.push([1]);for(j=1;j<=ie;j++)for(z=0;z<Pe;z++)G[z][j]=G[z][j-1]*m[z];W=b,J=O.Z.transpose(G),ee=O.Z.matMatMult(J,G),ae=O.Z.matVecMult(J,W),v=O.Z.Numerics.Gauss(ee,ae),Z=O.Z.Numerics.generatePolynomialTerm(v,ie,"x",3)}for(ue=v[ie],j=ie-1;j>=0;j--)ue=ue*I+v[j];return ue}).getTerm=function(){return Z},S},bezier:function(f){var C,_,v=function(p){return function(m,b){var P=3*Math.floor(m),S=m%1,Z=1-S;return b||(_=3*Math.floor((f.length-1)/3),C=Math.floor(_/3)),m<0?f[0][p]():m>=C?f[_][p]():isNaN(m)?NaN:Z*Z*(Z*f[P][p]()+3*S*f[P+1][p]())+(3*Z*f[P+2][p]()+S*f[P+3][p]())*S*S}};return[v("X"),v("Y"),0,function(){return Math.floor(f.length/3)}]},bspline:function(f,C){var _,m=function(b){return function(P,S){var Z,I,B,j,z=f.length,G=z-1,J=C;if(G<=0)return NaN;if(G+2<=J&&(J=G+1),P<=0)return f[0][b]();if(P>=G-J+2)return f[G][b]();for(B=Math.floor(P)+J-1,_=function(b,P){var S,Z=[];for(S=0;S<b+P+1;S++)Z[S]=S<P?0:S<=b?S-P+1:b-P+2;return Z}(G,J),j=function(b,P,S,Z){var I,B,z,G,J=[];for(J[Z]=P[Z]<=b&&b<P[Z+1]?1:0,I=2;I<=S;I++)for(B=Z-I+1;B<=Z;B++)z=B>=Z?0:J[B+1],J[B]=0==(G=P[B+I-1]-P[B])?0:(b-P[B])/G*(B<=Z-I+1||B<0?0:J[B]),0!=(G=P[B+I]-P[B+1])&&(J[B]+=(P[B+I]-b)/G*z);return J}(P,_,J,B),Z=0,I=B-J+1;I<=B;I++)I<z&&I>=0&&(Z+=f[I][b]()*j[I]);return Z}};return[m("X"),m("Y"),0,function(){return f.length-1}]},D:function(f,C){return X.Z.exists(C)?function(_,v){var p=1e-5;return(f.apply(C,[_+p,v])-f.apply(C,[_-p,v]))/2e-5}:function(_,v){var p=1e-5;return(f(_+p,v)-f(_-p,v))/2e-5}},_riemannValue:function(f,C,_,v){var p,m,b,P;if(v<0&&("trapezoidal"!==_&&(f+=v),v*=-1,"lower"===_?_="upper":"upper"===_&&(_="lower")),P=.01*v,"right"===_)p=C(f+v);else if("middle"===_)p=C(f+.5*v);else if("left"===_||"trapezoidal"===_)p=C(f);else if("lower"===_){for(p=C(f),b=f+P;b<=f+v;b+=P)(m=C(b))<p&&(p=m);(m=C(f+v))<p&&(p=m)}else if("upper"===_){for(p=C(f),b=f+P;b<=f+v;b+=P)(m=C(b))>p&&(p=m);(m=C(f+v))>p&&(p=m)}else p="random"===_?C(f+v*Math.random()):"simpson"===_?(C(f)+4*C(f+.5*v)+C(f+v))/6:C(f);return p},riemann:function(f,C,_,v,p){var m,b,B,z,G,J,W,P=[],S=[],Z=0,I=v,j=0;if(X.Z.isArray(f)?(G=f[0],z=f[1]):z=f,(C=Math.floor(C))<=0)return[P,S,j];for(b=(p-v)/C,m=0;m<C;m++)B=this._riemannValue(I,z,_,b),P[Z]=I,S[Z]=B,Z+=1,I+=b,"trapezoidal"===_&&(B=z(I)),P[Z]=I,S[Z]=B,Z+=1;for(m=0;m<C;m++)B=G?this._riemannValue(I,G,_,-b):0,P[Z]=I,S[Z]=B,Z+=1,I-=b,"trapezoidal"===_&&G&&(B=G(I)),P[Z]=I,S[Z]=B,"trapezoidal"!==_?(J=B,W=S[2*(C-1)-2*m]):(W=.5*(z(I+b)+z(I)),J=G?.5*(G(I+b)+G(I)):0),j+=(W-J)*b,P[Z+=1]=I,S[Z]=S[2*(C-1)-2*m],Z+=1;return[P,S,j]},riemannsum:function(f,C,_,v,p){return F.Z.deprecated("Numerics.riemannsum()","Numerics.riemann()"),this.riemann(f,C,_,v,p)[2]},rungeKutta:function(f,C,_,v,p){var m,b,P,S,Z,I,B=[],j=[],z=(_[1]-_[0])/v,G=_[0],J=C.length,W=[],ee=0;for(X.Z.isString(f)&&(f=A[f]||A.euler),I=f.s,m=0;m<J;m++)B[m]=C[m];for(b=0;b<v;b++){for(W[ee]=[],m=0;m<J;m++)W[ee][m]=B[m];for(ee+=1,S=[],P=0;P<I;P++){for(m=0;m<J;m++)j[m]=0;for(Z=0;Z<P;Z++)for(m=0;m<J;m++)j[m]+=f.A[P][Z]*z*S[Z][m];for(m=0;m<J;m++)j[m]+=B[m];S.push(p(G+f.c[P]*z,j))}for(m=0;m<J;m++)j[m]=0;for(Z=0;Z<I;Z++)for(m=0;m<J;m++)j[m]+=f.b[Z]*S[Z][m];for(m=0;m<J;m++)B[m]=B[m]+z*j[m];G+=z}return W},maxIterationsRoot:80,maxIterationsMinimize:500,findBracket:function(f,C,_){var v,p,m,b,P,S,Z,I,B,j;if(X.Z.isArray(C))return C;for(m=f.call(_,v=C),j=(b=[v-.1*(p=0===v?1:v),v+.1*p,v-1,v+1,v-.5*p,v+.5*p,v-.6*p,v+.6*p,v-1*p,v+1*p,v-2*p,v+2*p,v-5*p,v+5*p,v-10*p,v+10*p,v-50*p,v+50*p,v-100*p,v+100*p]).length,B=0;B<j&&!(m*(S=f.call(_,P=b[B]))<=0);B++);return P<v&&(Z=v,v=P,P=Z,I=m,m=S,S=I),[v,m,P,S]},fzero:function(f,C,_){var v,p,m,S,Z,I,B,j,z,G,J,W,ee,ae,ue,ie=O.Z.eps,Pe=this.maxIterationsRoot,xe=0;if(X.Z.isArray(C)){if(C.length<2)throw new Error("JXG.Math.Numerics.fzero: length of array x0 has to be at least two.");S=f.call(_,v=C[0]),Z=f.call(_,p=C[1])}else v=(B=this.findBracket(f,C,_))[0],S=B[1],p=B[2],Z=B[3];if(Math.abs(S)<=ie)return v;if(Math.abs(Z)<=ie)return p;if(S*Z>0)return X.Z.isArray(C)?this.fminbr(f,[v,p],_):this.Newton(f,v,_);for(m=v,I=S;xe<Pe;){if(j=p-v,Math.abs(I)<Math.abs(Z)&&(v=p,p=m,m=v,S=Z,Z=I,I=S),W=2*ie*Math.abs(p)+.5*ie,ue=.5*(m-p),Math.abs(ue)<=W||Math.abs(Z)<=ie)return p;Math.abs(j)>=W&&Math.abs(S)>Math.abs(Z)&&(G=m-p,v===m?(ee=G*(z=Z/S),ae=1-z):(ee=(J=Z/S)*(G*(ae=S/I)*(ae-(z=Z/I))-(p-v)*(z-1)),ae=(ae-1)*(z-1)*(J-1)),ee>0?ae=-ae:ee=-ee,ee<.75*G*ae-.5*Math.abs(W*ae)&&ee<Math.abs(j*ae*.5)&&(ue=ee/ae)),Math.abs(ue)<W&&(ue=ue>0?W:-W),v=p,S=Z,((Z=f.call(_,p+=ue))>0&&I>0||Z<0&&I<0)&&(m=v,I=S),xe++}return p},chandrupatla:function(f,C,_){var v,p,m,b,P,G,J,W,ee,ae,ue,ie,Pe,xe,me,Ae,Ne,ct,wt,Lt,S=0,Z=this.maxIterationsRoot,I=1+.001*Math.random(),B=.5*I,j=O.Z.eps;if(X.Z.isArray(C)){if(C.length<2)throw new Error("JXG.Math.Numerics.fzero: length of array x0 has to be at least two.");p=f.call(_,v=C[0]),b=f.call(_,m=C[1])}else v=(P=this.findBracket(f,C,_))[0],p=P[1],m=P[2],b=P[3];if(p*b>0)return X.Z.isArray(C)?this.fminbr(f,[v,m],_):this.Newton(f,v,_);G=v,J=m,ae=p,ue=b;do{if(Pe=f.call(_,ee=G+B*(J-G)),Math.sign(Pe)===Math.sign(ae)?(W=G,G=ee,ie=ae,ae=Pe):(W=J,J=G,ie=ue,ue=ae),xe=G=ee,me=ae=Pe,Math.abs(ue)<Math.abs(ae)&&(xe=J,me=ue),(Ae=(2*j*Math.abs(xe)+5e-6)/Math.abs(J-G))>.5||0===me)break;Ne=(G-J)/(W-J),ct=(ae-ue)/(ie-ue),wt=1-Math.sqrt(1-Ne),Lt=Math.sqrt(Ne),(B=wt<ct&&ct<Lt?ae/(ue-ae)*(ie/(ue-ie))+ae/(ie-ae)*(ue/(ie-ue))*((W-G)/(J-G)):.5*I)<Ae&&(B=Ae),B>1-Ae&&(B=1-Ae),S++}while(S<=Z);return xe},fminbr:function(f,C,_){var v,p,m,b,P,S,Z,I,B,j,z,G,J,W,ee,ae,ue=.5*(3-Math.sqrt(5)),ie=O.Z.eps,Pe=O.Z.eps,xe=this.maxIterationsMinimize,me=0;if(!X.Z.isArray(C)||C.length<2)throw new Error("JXG.Math.Numerics.fminbr: length of array x0 has to be at least two.");for(m=b=(v=C[0])+ue*((p=C[1])-v),P=b,S=Z=f.call(_,b),I=Z;me<xe;){if(B=p-v,j=.5*(v+p),z=Pe*Math.abs(m)+ie/3,Math.abs(m-j)+.5*B<=2*z)return m;G=ue*(m<j?p-m:v-m),Math.abs(m-P)>=z&&(J=(m-b)*(W=(m-b)*(S-I))-(m-P)*(ee=(m-P)*(S-Z)),(W=2*(W-ee))>0?J=-J:W=-W,Math.abs(J)<Math.abs(G*W)&&J>W*(v-m+2*z)&&J<W*(p-m-2*z)&&(G=J/W)),Math.abs(G)<z&&(G=G>0?z:-z),(ae=f.call(_,ee=m+G))<=S?(ee<m?p=m:v=m,b=P,P=m,m=ee,Z=I,I=S,S=ae):(ee<m?v=ee:p=ee,ae<=I||P===m?(b=P,P=ee,Z=I,I=ae):(ae<=Z||b===m||b===P)&&(b=ee,Z=ae)),me+=1}return m},RamerDouglasPeucker:function(f,C){var p,m,b,_=[],v=[],Z=function(I,B,j,z,G){var J=function(I,B,j){var z,G,J,W,ee,ae,ue,ie,Pe,xe,me,we=1e4,Ae=0,Ne=B;if(j-B<2)return[-1,0];if(J=I[B].scrCoords,W=I[j].scrCoords,isNaN(J[1])||isNaN(J[2]))return[NaN,B];if(isNaN(W[1])||isNaN(W[2]))return[NaN,j];for(G=B+1;G<j;G++){if(ee=I[G].scrCoords,isNaN(ee[1])||isNaN(ee[2]))return[NaN,G];ae=(ae=(ae=ee[1]-J[1])==1/0?we:ae)===-1/0?-we:ae,ue=(ue=(ue=ee[2]-J[2])==1/0?we:ue)===-1/0?-we:ue,(xe=(ie=(ie=(ie=W[1]-J[1])==1/0?we:ie)===-1/0?-we:ie)*ie+(Pe=(Pe=(Pe=W[2]-J[2])==1/0?we:Pe)===-1/0?-we:Pe)*Pe)>=O.Z.eps?((me=(ae*ie+ue*Pe)/xe)<0?me=0:me>1&&(me=1),z=(ae-=me*ie)*ae+(ue-=me*Pe)*ue):(me=0,z=ae*ae+ue*ue),z>Ae&&(Ae=z,Ne=G)}return[Math.sqrt(Ae),Ne]}(I,B,j),W=J[1];if(isNaN(J[0])){Z(I,B,W-1,z,G),G.push(I[W]);do{++W}while(W<=j&&isNaN(I[W].scrCoords[1]+I[W].scrCoords[2]));W<=j&&G.push(I[W]),Z(I,W+1,j,z,G)}else J[0]>z?(Z(I,B,W,z,G),Z(I,W,j,z,G)):G.push(I[j])};for(b=f.length,p=0;;){for(;p<b&&isNaN(f[p].scrCoords[1]+f[p].scrCoords[2]);)p+=1;for(m=p+1;m<b&&!isNaN(f[m].scrCoords[1]+f[m].scrCoords[2]);)m+=1;if(m--,p<b&&m>p&&((v=[])[0]=f[p],Z(f,p,m,C,v),_=_.concat(v)),p>=b)break;m<b-1&&_.push(f[m+1]),p=m+1}return _},RamerDouglasPeuker:function(f,C){return F.Z.deprecated("Numerics.RamerDouglasPeuker()","Numerics.RamerDouglasPeucker()"),this.RamerDouglasPeucker(f,C)},Visvalingam:function(f,C){var _,v,p,m,Z,I,B,j,z,b=[],P=[],S=[];if((v=f.length)<=2)return f;for(b[0]={used:!0,lft:null,node:null},Z=0,_=1;_<v-1;_++)p=Math.abs(F.Z.Math.Numerics.det([f[_-1].usrCoords,f[_].usrCoords,f[_+1].usrCoords])),isNaN(p)||(P.push(z={v:p,idx:_}),b[_]={used:!0,lft:Z,node:z},b[Z].rt=_,Z=_);for(b[v-1]={used:!0,rt:null,lft:Z,node:null},b[Z].rt=v-1,m=-1/0;P.length>C;)P.sort(function(G,J){return J.v-G.v}),b[_=P.pop().idx].used=!1,m=b[_].node.v,b[Z=b[_].lft].rt=I=b[_].rt,b[I].lft=Z,null!==(B=b[Z].lft)&&(p=Math.abs(F.Z.Math.Numerics.det([f[B].usrCoords,f[Z].usrCoords,f[I].usrCoords])),b[Z].node.v=p>=m?p:m),null!==(j=b[I].rt)&&(p=Math.abs(F.Z.Math.Numerics.det([f[Z].usrCoords,f[I].usrCoords,f[j].usrCoords])),b[I].node.v=p>=m?p:m);S=[f[_=0]];do{S.push(f[_=b[_].rt])}while(null!==b[_].rt);return S}};const M=O.Z.Numerics},706:(x,k,$)=>{$.d(k,{Z:()=>O});var F=$(917),X=$(515),K=$(695);X.Z.Statistics={sum:function(A){var M,f=A.length,C=0;for(M=0;M<f;M++)C+=A[M];return C},prod:function(A){var M,f=A.length,C=1;for(M=0;M<f;M++)C*=A[M];return C},mean:function(A){return A.length>0?this.sum(A)/A.length:0},median:function(A){var M,f;return A.length>0?(ArrayBuffer.isView(A)?(M=new Float64Array(A)).sort():(M=A.slice(0)).sort(function(C,_){return C-_}),1&(f=M.length)?M[parseInt(.5*f,10)]:.5*(M[.5*f-1]+M[.5*f])):0},percentile:function(A,M){var f,C,_,v,m,p=[];if(A.length>0){for(ArrayBuffer.isView(A)?(f=new Float64Array(A)).sort():(f=A.slice(0)).sort(function(b,P){return b-P}),C=f.length,v=K.Z.isArray(M)?M:[M],_=0;_<v.length;_++)m=C*v[_]*.01,parseInt(m,10)===m?p.push(.5*(f[m-1]+f[m])):p.push(f[parseInt(m,10)]);return K.Z.isArray(M)?p:p[0]}return 0},variance:function(A){var M,f,C,_=A.length;if(_>1){for(M=this.mean(A),f=0,C=0;C<_;C++)f+=(A[C]-M)*(A[C]-M);return f/(A.length-1)}return 0},sd:function(A){return Math.sqrt(this.variance(A))},weightedMean:function(A,M){if(A.length!==M.length)throw new Error("JSXGraph error (Math.Statistics.weightedMean): Array dimension mismatch.");return A.length>0?this.mean(this.multiply(A,M)):0},max:function(A){return Math.max.apply(this,A)},min:function(A){return Math.min.apply(this,A)},range:function(A){return[this.min(A),this.max(A)]},abs:function(A){var M,f,C;if(K.Z.isArray(A))if(A.map)C=A.map(Math.abs);else for(f=A.length,C=[],M=0;M<f;M++)C[M]=Math.abs(A[M]);else C=ArrayBuffer.isView(A)?A.map(Math.abs):Math.abs(A);return C},add:function(A,M){var f,C,_=[];if(A=K.Z.evalSlider(A),M=K.Z.evalSlider(M),K.Z.isArray(A)&&K.Z.isNumber(M))for(C=A.length,f=0;f<C;f++)_[f]=A[f]+M;else if(K.Z.isNumber(A)&&K.Z.isArray(M))for(C=M.length,f=0;f<C;f++)_[f]=A+M[f];else if(K.Z.isArray(A)&&K.Z.isArray(M))for(C=Math.min(A.length,M.length),f=0;f<C;f++)_[f]=A[f]+M[f];else _=A+M;return _},div:function(A,M){var f,C,_=[];if(A=K.Z.evalSlider(A),M=K.Z.evalSlider(M),K.Z.isArray(A)&&K.Z.isNumber(M))for(C=A.length,f=0;f<C;f++)_[f]=A[f]/M;else if(K.Z.isNumber(A)&&K.Z.isArray(M))for(C=M.length,f=0;f<C;f++)_[f]=A/M[f];else if(K.Z.isArray(A)&&K.Z.isArray(M))for(C=Math.min(A.length,M.length),f=0;f<C;f++)_[f]=A[f]/M[f];else _=A/M;return _},divide:function(){F.Z.deprecated("Statistics.divide()","Statistics.div()"),X.Z.Statistics.div.apply(X.Z.Statistics,arguments)},mod:function(A,M,f){var C,_,v=[],p=function(m,b){return m%b};if((f=K.Z.def(f,!1))&&(p=X.Z.mod),A=K.Z.evalSlider(A),M=K.Z.evalSlider(M),K.Z.isArray(A)&&K.Z.isNumber(M))for(_=A.length,C=0;C<_;C++)v[C]=p(A[C],M);else if(K.Z.isNumber(A)&&K.Z.isArray(M))for(_=M.length,C=0;C<_;C++)v[C]=p(A,M[C]);else if(K.Z.isArray(A)&&K.Z.isArray(M))for(_=Math.min(A.length,M.length),C=0;C<_;C++)v[C]=p(A[C],M[C]);else v=p(A,M);return v},multiply:function(A,M){var f,C,_=[];if(A=K.Z.evalSlider(A),M=K.Z.evalSlider(M),K.Z.isArray(A)&&K.Z.isNumber(M))for(C=A.length,f=0;f<C;f++)_[f]=A[f]*M;else if(K.Z.isNumber(A)&&K.Z.isArray(M))for(C=M.length,f=0;f<C;f++)_[f]=A*M[f];else if(K.Z.isArray(A)&&K.Z.isArray(M))for(C=Math.min(A.length,M.length),f=0;f<C;f++)_[f]=A[f]*M[f];else _=A*M;return _},subtract:function(A,M){var f,C,_=[];if(A=K.Z.evalSlider(A),M=K.Z.evalSlider(M),K.Z.isArray(A)&&K.Z.isNumber(M))for(C=A.length,f=0;f<C;f++)_[f]=A[f]-M;else if(K.Z.isNumber(A)&&K.Z.isArray(M))for(C=M.length,f=0;f<C;f++)_[f]=A-M[f];else if(K.Z.isArray(A)&&K.Z.isArray(M))for(C=Math.min(A.length,M.length),f=0;f<C;f++)_[f]=A[f]-M[f];else _=A-M;return _},TheilSenRegression:function(A){var M,f,C=[],_=[],v=[];for(M=0;M<A.length;M++){for(_.length=0,f=0;f<A.length;f++)Math.abs(A[f].usrCoords[1]-A[M].usrCoords[1])>X.Z.eps&&(_[f]=(A[f].usrCoords[2]-A[M].usrCoords[2])/(A[f].usrCoords[1]-A[M].usrCoords[1]));C[M]=this.median(_),v.push(A[M].usrCoords[2]-C[M]*A[M].usrCoords[1])}return[this.median(v),this.median(C),-1]},generateGaussian:function(A,M){var f,C,_;if(this.hasSpare)return this.hasSpare=!1,this.spare*M+A;do{_=(f=2*Math.random()-1)*f+(C=2*Math.random()-1)*C}while(_>=1||0===_);return _=Math.sqrt(-2*Math.log(_)/_),this.spare=C*_,this.hasSpare=!0,A+M*f*_}};const O=X.Z.Statistics},982:(x,k,$)=>{$.d(k,{Z:()=>M});var F=$(917),X=$(222),K=$(515),O=$(500),A=$(695);F.Z.Options={jc:{enabled:!0,compile:!0},board:{animationDelay:35,axis:!1,boundingBox:[-5,5,5,-5],browserPan:!1,defaultAxes:{x:{name:"x",fixed:!0,ticks:{label:{visible:"inherit",anchorX:"middle",anchorY:"top",fontSize:12,offset:[0,-3]},tickEndings:[0,1],majorTickEndings:[1,1],drawZero:!1,needsRegularUpdate:!1,visible:"inherit"}},y:{name:"y",fixed:!0,ticks:{label:{visible:"inherit",anchorX:"right",anchorY:"middle",fontSize:12,offset:[-6,0]},tickEndings:[1,0],majorTickEndings:[1,1],drawZero:!1,needsRegularUpdate:!1,visible:"inherit"}}},description:"",document:!1,drag:{enabled:!0},fullscreen:{symbol:'<svg height="1em" width="1em" version="1.1" viewBox="10 10 18 18"><path fill="#666" d="m 10,16 2,0 0,-4 4,0 0,-2 L 10,10 l 0,6 0,0 z"></path><path fill="#666" d="m 20,10 0,2 4,0 0,4 2,0 L 26,10 l -6,0 0,0 z"></path><path fill="#666" d="m 24,24 -4,0 0,2 L 26,26 l 0,-6 -2,0 0,4 0,0 z"></path><path fill="#666" d="M 12,20 10,20 10,26 l 6,0 0,-2 -4,0 0,-4 0,0 z"></path></svg>',scale:.85,id:null},ignoreLabels:!0,intl:{enabled:!1},keepAspectRatio:!1,keyboard:{enabled:!0,dx:10,dy:10,panShift:!0,panCtrl:!1},logging:{enabled:!1},minimizeReflow:"none",maxBoundingBox:[-1/0,1/0,1/0,-1/0],maxFrameRate:40,maxNameLength:1,moveTarget:null,offsetX:0,offsetY:0,pan:{enabled:!0,needShift:!0,needTwoFingers:!1},registerEvents:!0,registerFullscreenEvent:!0,registerResizeEvent:!0,renderer:"auto",resize:{enabled:!0,throttle:10},screenshot:{scale:1,type:"png",symbol:"\u2318",css:"background-color:#eeeeee; opacity:1.0; border:2px solid black; border-radius:10px; text-align:center",cssButton:"padding: 4px 10px; border: solid #356AA0 1px; border-radius: 5px; position: absolute; right: 2ex; top: 2ex; background-color: rgba(255, 255, 255, 0.3);"},selection:{enabled:!1,name:"selectionPolygon",needShift:!1,needCtrl:!0,fillColor:"#ffff00",visible:!1,withLines:!1,vertices:{visible:!1}},showClearTraces:!1,showCopyright:!0,showFullscreen:!1,showInfobox:!0,showNavigation:!0,showReload:!1,showScreenshot:!1,showZoom:!0,takeFirst:!1,takeSizeFromFile:!1,title:"",zoom:{enabled:!0,factorX:1.25,factorY:1.25,wheel:!0,needShift:!0,min:1e-4,max:1e4,pinchHorizontal:!0,pinchVertical:!0,pinchSensitivity:7},zoomX:1,zoomY:1},navbar:{strokeColor:"#333333",fillColor:"transparent",highlightFillColor:"#aaaaaa",padding:"2px",position:"absolute",fontSize:"14px",cursor:"pointer",zIndex:"100",right:"5px",bottom:"5px"},elements:{strokeColor:O.Z.palette.blue,highlightStrokeColor:"#c3d9ff",fillColor:O.Z.palette.red,highlightFillColor:"none",strokeOpacity:1,highlightStrokeOpacity:1,fillOpacity:1,highlightFillOpacity:1,gradient:null,gradientSecondColor:"#ffffff",gradientSecondOpacity:1,gradientStartOffset:0,gradientEndOffset:1,gradientAngle:0,gradientCX:.5,gradientCY:.5,gradientR:.5,gradientFX:.5,gradientFY:.5,gradientFR:0,transitionDuration:100,transitionProperties:["fill","fill-opacity","stroke","stroke-opacity","stroke-width"],strokeWidth:2,highlightStrokeWidth:2,fixed:!1,frozen:!1,withLabel:!1,visible:!0,priv:!1,layer:0,lineCap:"butt",dash:0,shadow:{enabled:!1,color:[0,0,0],opacity:1,blur:3,blend:.1,offset:[5,5]},trace:!1,traceAttributes:{},highlight:!0,needsRegularUpdate:!0,snapToGrid:!1,scalable:!0,rotatable:!0,dragToTopOfLayer:!1,precision:"inherit",draft:{draft:!1,strokeColor:"#565656",fillColor:"#565656",strokeOpacity:.8,fillOpacity:.8,strokeWidth:1},isLabel:!1,tabindex:0,dashScale:!1},ticks:{generateLabelText:null,generateLabelValue:null,drawLabels:!1,label:{},beautifulScientificTickLabels:!1,useUnicodeMinus:!0,anchor:"left",drawZero:!1,insertTicks:!1,minTicksDistance:10,minorHeight:4,majorHeight:10,tickEndings:[1,1],majorTickEndings:[1,1],ignoreInfiniteTickEndings:!0,minorTicks:4,ticksPerLabel:!1,scale:1,scaleSymbol:"",labels:[],maxLabelLength:5,precision:3,digits:3,ticksDistance:1,face:"|",strokeOpacity:1,strokeWidth:1,strokeColor:"#000000",highlightStrokeColor:"#888888",fillColor:"none",highlightFillColor:"none",visible:"inherit",includeBoundaries:!1,type:"linear",intl:{enabled:"inherit",options:{}},minorTicksInArrow:!1,majorTicksInArrow:!0,labelInArrow:!0,minorTicksInMargin:!1,majorTicksInMargin:!0,labelInMargin:!0},hatch:{drawLabels:!1,drawZero:!0,majorHeight:20,anchor:"middle",face:"|",strokeWidth:2,strokeColor:O.Z.palette.blue,ticksDistance:.2},precision:{touch:30,touchMax:100,mouse:4,pen:4,epsilon:1e-4,hasPoint:4},layer:{numlayers:20,unused9:19,unused8:18,unused7:17,unused6:16,unused5:15,unused4:14,unused3:13,unused2:12,unused1:11,unused0:10,text:9,point:9,glider:9,arc:8,line:7,circle:6,curve:5,turtle:5,polygon:3,sector:3,angle:3,integral:3,axis:2,ticks:2,grid:1,image:0,trace:0},angle:{withLabel:!0,radius:"auto",type:"sector",orthoType:"square",orthoSensitivity:1,fillColor:O.Z.palette.orange,highlightFillColor:O.Z.palette.orange,strokeColor:O.Z.palette.orange,fillOpacity:.3,highlightFillOpacity:.3,radiuspoint:{withLabel:!1,visible:!1,name:""},pointsquare:{withLabel:!1,visible:!1,name:""},dot:{visible:!1,strokeColor:"none",fillColor:"#000000",size:2,face:"o",withLabel:!1,name:""},label:{position:"top",offset:[0,0],strokeColor:O.Z.palette.blue},arc:{visible:!1,fillColor:"none"}},arc:{selection:"auto",hasInnerPoints:!1,label:{anchorX:"auto",anchorY:"auto"},firstArrow:!1,lastArrow:!1,fillColor:"none",highlightFillColor:"none",strokeColor:O.Z.palette.blue,highlightStrokeColor:"#c3d9ff",useDirection:!1,center:{},radiusPoint:{},anglePoint:{}},arrow:{firstArrow:!1,lastArrow:{type:1,highlightSize:6,size:6}},arrowparallel:{},axis:{name:"",needsRegularUpdate:!1,strokeWidth:1,lastArrow:{type:1,highlightSize:8,size:8},strokeColor:"#666666",highlightStrokeWidth:1,highlightStrokeColor:"#888888",withTicks:!0,straightFirst:!0,straightLast:!0,margin:-4,withLabel:!1,scalable:!1,ticks:{label:{offset:[4,-9],parse:!1,needsRegularUpdate:!1,display:"internal",visible:"inherit",layer:9},visible:"inherit",needsRegularUpdate:!1,strokeWidth:1,strokeColor:"#666666",highlightStrokeColor:"#888888",drawLabels:!0,drawZero:!1,insertTicks:!0,minTicksDistance:5,minorHeight:10,majorHeight:-1,tickEndings:[0,1],majorTickEndings:[1,1],minorTicks:4,ticksDistance:1,strokeOpacity:.25},point1:{needsRegularUpdate:!1,visible:!1},point2:{needsRegularUpdate:!1,visible:!1},tabindex:-1,label:{position:"lft",offset:[10,10]}},bisector:{strokeColor:"#000000",point:{visible:!1,fixed:!1,withLabel:!1,name:""}},bisectorlines:{line1:{strokeColor:"#000000"},line2:{strokeColor:"#000000"}},boxplot:{dir:"vertical",smallWidth:.5,strokeWidth:2,strokeColor:O.Z.palette.blue,fillColor:O.Z.palette.blue,fillOpacity:.2,highlightStrokeWidth:2,highlightStrokeColor:O.Z.palette.blue,highlightFillColor:O.Z.palette.blue,highlightFillOpacity:.1},button:{disabled:!1,display:"html"},cardinalspline:{createPoints:!0,isArrayOfCoordinates:!0,points:{strokeOpacity:.05,fillOpacity:.05,highlightStrokeOpacity:1,highlightFillOpacity:1,withLabel:!1,name:"",fixed:!1}},chart:{chartStyle:"line",colors:["#B02B2C","#3F4C6B","#C79810","#D15600","#FFFF88","#c3d9ff","#4096EE","#008C00"],highlightcolors:null,fillcolor:null,highlightonsector:!1,highlightbysize:!1,fillOpacity:.6,withLines:!1,label:{}},checkbox:{disabled:!1,checked:!1,display:"html"},circle:{hasInnerPoints:!1,fillColor:"none",highlightFillColor:"none",strokeColor:O.Z.palette.blue,highlightStrokeColor:"#c3d9ff",center:{visible:!1,withLabel:!1,fixed:!1,fillColor:O.Z.palette.red,strokeColor:O.Z.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",layer:9,name:""},point2:{fillColor:O.Z.palette.red,strokeColor:O.Z.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",layer:9,visible:!1,withLabel:!1,fixed:!1,name:""},label:{position:"urt"}},circumcircle:{fillColor:"none",highlightFillColor:"none",strokeColor:O.Z.palette.blue,highlightStrokeColor:"#c3d9ff",center:{visible:!1,fixed:!1,withLabel:!1,fillColor:O.Z.palette.red,strokeColor:O.Z.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",name:""}},circumcirclearc:{fillColor:"none",highlightFillColor:"none",strokeColor:O.Z.palette.blue,highlightStrokeColor:"#c3d9ff",center:{visible:!1,withLabel:!1,fixed:!1,name:""}},circumcirclesector:{useDirection:!0,fillColor:O.Z.palette.yellow,highlightFillColor:O.Z.palette.yellow,fillOpacity:.3,highlightFillOpacity:.3,strokeColor:O.Z.palette.blue,highlightStrokeColor:"#c3d9ff",point:{visible:!1,fixed:!1,withLabel:!1,name:""}},comb:{frequency:.2,width:.4,angle:Math.PI/3,reverse:!1,point1:{visible:!1,withLabel:!1,fixed:!1,name:""},point2:{visible:!1,withLabel:!1,fixed:!1,name:""},strokeWidth:1,strokeColor:"#0000ff",fillColor:"none"},conic:{fillColor:"none",highlightFillColor:"none",strokeColor:O.Z.palette.blue,highlightStrokeColor:"#c3d9ff",foci:{fixed:!1,visible:!1,withLabel:!1,name:""},center:{visible:!1,withLabel:!1,name:""},point:{withLabel:!1,name:""},line:{visible:!1}},curve:{strokeWidth:1,strokeColor:O.Z.palette.blue,fillColor:"none",fixed:!0,useQDT:!1,handDrawing:!1,curveType:null,RDPsmoothing:!1,numberPointsHigh:1600,numberPointsLow:400,doAdvancedPlot:!0,recursionDepthHigh:17,recursionDepthLow:15,doAdvancedPlotOld:!1,plotVersion:2,label:{position:"lft"},firstArrow:!1,lastArrow:!1},foreignobject:{fixed:!0,visible:!0,needsRegularUpdate:!1},glider:{label:{}},grid:{needsRegularUpdate:!1,hasGrid:!1,gridX:1,gridY:1,strokeColor:"#c0c0c0",strokeOpacity:.5,strokeWidth:1,dash:0,snapToGrid:!1,snapSizeX:10,snapSizeY:10},group:{needsRegularUpdate:!0},htmlslider:{widthRange:100,widthOut:34,step:.01,frozen:!0,isLabel:!1,strokeColor:"#000000",display:"html",anchorX:"left",anchorY:"middle",withLabel:!1},image:{imageString:null,fillOpacity:1,highlightFillOpacity:.6,cssClass:"JXGimage",highlightCssClass:"JXGimageHighlight",rotate:0,snapSizeX:1,snapSizeY:1,attractors:[]},incircle:{fillColor:"none",highlightFillColor:"none",strokeColor:O.Z.palette.blue,highlightStrokeColor:"#c3d9ff",center:{visible:!1,fixed:!1,withLabel:!1,fillColor:O.Z.palette.red,strokeColor:O.Z.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",name:""}},inequality:{fillColor:O.Z.palette.red,fillOpacity:.2,strokeColor:"none",inverse:!1},infobox:{distanceX:-20,distanceY:25,intl:{enabled:"inherit",options:{}},fontSize:12,isLabel:!1,strokeColor:"#bbbbbb",display:"html",anchorX:"left",anchorY:"middle",cssClass:"JXGinfobox",rotate:0,visible:!0,parse:!1,transitionDuration:0,needsRegularUpdate:!1,tabindex:null},integral:{axis:"x",withLabel:!0,fixed:!0,strokeWidth:0,strokeOpacity:0,fillColor:O.Z.palette.red,fillOpacity:.3,highlightFillColor:O.Z.palette.red,highlightFillOpacity:.2,curveLeft:{visible:!0,withLabel:!1,color:O.Z.palette.red,fillOpacity:.8,layer:9},baseLeft:{visible:!1,fixed:!1,withLabel:!1,name:""},curveRight:{visible:!0,withLabel:!1,color:O.Z.palette.red,fillOpacity:.8,layer:9},baseRight:{visible:!1,fixed:!1,withLabel:!1,name:""},label:{fontSize:20,digits:4,intl:{enabled:!1,options:{}}}},input:{disabled:!1,maxlength:524288,display:"html"},intersection:{alwaysIntersect:!0},label:{visible:"inherit",strokeColor:"#000000",strokeOpacity:1,highlightStrokeOpacity:.666666,highlightStrokeColor:"#000000",fixed:!0,position:"urt",offset:[10,10],autoPosition:!1},legend:{style:"vertical",labels:["1","2","3","4","5","6","7","8"],colors:["#B02B2C","#3F4C6B","#C79810","#D15600","#FFFF88","#c3d9ff","#4096EE","#008C00"],rowHeight:20,strokeWidth:5},line:{firstArrow:!1,lastArrow:!1,margin:0,straightFirst:!0,straightLast:!0,fillColor:"none",highlightFillColor:"none",strokeColor:O.Z.palette.blue,highlightStrokeColor:"#c3d9ff",withTicks:!1,point1:{fillColor:O.Z.palette.red,strokeColor:O.Z.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",layer:9,visible:!1,withLabel:!1,fixed:!1,name:""},point2:{fillColor:O.Z.palette.red,strokeColor:O.Z.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",layer:9,visible:!1,withLabel:!1,fixed:!1,name:""},ticks:{drawLabels:!0,label:{offset:[4,-9]},drawZero:!1,insertTicks:!1,ticksDistance:1,minTicksDistance:50,minorHeight:4,majorHeight:-1,minorTicks:4,strokeOpacity:.3,visible:"inherit"},label:{position:"llft"},snapToGrid:!1,snapSizeX:1,snapSizeY:1,touchFirstPoint:!1,touchLastPoint:!1},locus:{translateToOrigin:!1,translateTo10:!1,stretch:!1,toOrigin:null,to10:null},metapostspline:{createPoints:!0,isArrayOfCoordinates:!0,points:{strokeOpacity:.5,fillOpacity:.5,highlightStrokeOpacity:1,highlightFillOpacity:1,withLabel:!1,name:"",fixed:!1}},mirrorelement:{fixed:!0,point:{},center:{},type:"Euclidean"},nonreflexangle:{},normal:{strokeColor:"#000000",point:{visible:!1,fixed:!1,withLabel:!1,name:""}},orthogonalprojection:{},parallel:{strokeColor:"#000000",point:{visible:!1,fixed:!1,withLabel:!1,name:""},label:{position:"llft"}},parallelpoint:{},perpendicular:{strokeColor:"#000000",straightFirst:!0,straightLast:!0},perpendicularsegment:{strokeColor:"#000000",straightFirst:!1,straightLast:!1,point:{visible:!1,fixed:!0,withLabel:!1,name:""}},point:{withLabel:!0,label:{},style:5,face:"o",size:3,sizeUnit:"screen",strokeWidth:2,transitionProperties:["fill","fill-opacity","stroke","stroke-opacity","stroke-width","width","height","rx","ry"],fillColor:O.Z.palette.red,strokeColor:O.Z.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",zoom:!1,showInfobox:"inherit",infoboxDigits:"auto",draft:!1,attractors:[],attractorUnit:"user",attractorDistance:0,snatchDistance:0,snapToGrid:!1,attractToGrid:!1,snapSizeX:1,snapSizeY:1,snapToPoints:!1,ignoredSnapToPoints:[]},polygon:{hasInnerPoints:!1,fillColor:O.Z.palette.yellow,highlightFillColor:O.Z.palette.yellow,fillOpacity:.3,highlightFillOpacity:.2,withLines:!0,borders:{withLabel:!1,strokeWidth:1,highlightStrokeWidth:1,layer:5,label:{position:"top"},visible:"inherit"},highlightByStrokeWidth:!1,vertices:{layer:9,withLabel:!1,name:"",strokeColor:O.Z.palette.red,fillColor:O.Z.palette.red,fixed:!1,visible:"inherit"},label:{offset:[0,0]}},polygonalchain:{fillColor:"none",highlightFillColor:"none"},prescribedangle:{anglePoint:{size:2,visible:!1,withLabel:!1}},reflection:{fixed:!0,center:{},type:"Euclidean"},reflexangle:{},regularpolygon:{hasInnerPoints:!1,fillColor:O.Z.palette.yellow,highlightFillColor:O.Z.palette.yellow,fillOpacity:.3,highlightFillOpacity:.2,withLines:!0,borders:{withLabel:!1,strokeWidth:1,highlightStrokeWidth:1,layer:5,label:{position:"top"}},vertices:{layer:9,withLabel:!0,strokeColor:O.Z.palette.red,fillColor:O.Z.palette.red,fixed:!1},label:{offset:[0,0]}},riemannsum:{withLabel:!1,fillOpacity:.3,fillColor:O.Z.palette.yellow},sector:{fillColor:O.Z.palette.yellow,highlightFillColor:O.Z.palette.yellow,fillOpacity:.3,highlightFillOpacity:.3,highlightOnSector:!1,highlightStrokeWidth:0,selection:"auto",arc:{visible:!1,fillColor:"none"},radiusPoint:{visible:!1,withLabel:!1},center:{visible:!1,withLabel:!1},anglePoint:{visible:!1,withLabel:!1},label:{offset:[0,0],anchorX:"auto",anchorY:"auto"}},segment:{label:{position:"top"}},semicircle:{center:{visible:!1,withLabel:!1,fixed:!1,fillColor:O.Z.palette.red,strokeColor:O.Z.palette.red,highlightFillColor:"#eeeeee",highlightStrokeColor:O.Z.palette.red,name:""}},slider:{snapWidth:-1,precision:2,digits:2,intl:{enabled:"inherit",options:{}},firstArrow:!1,lastArrow:!1,withTicks:!0,withLabel:!0,suffixLabel:null,unitLabel:null,postLabel:null,layer:9,showInfobox:!1,name:"",visible:!0,strokeColor:"#000000",highlightStrokeColor:"#888888",fillColor:"#ffffff",highlightFillColor:"none",size:6,point1:{needsRegularUpdate:!1,showInfobox:!1,withLabel:!1,visible:!1,fixed:!0,name:""},point2:{needsRegularUpdate:!1,showInfobox:!1,withLabel:!1,visible:!1,fixed:!0,name:""},baseline:{needsRegularUpdate:!1,visible:"inherit",fixed:!0,scalable:!1,tabindex:null,name:"",strokeWidth:1,strokeColor:"#000000",highlightStrokeColor:"#888888"},ticks:{needsRegularUpdate:!1,fixed:!0,drawLabels:!1,digits:2,includeBoundaries:!0,drawZero:!0,label:{offset:[-4,-14],display:"internal"},minTicksDistance:30,insertTicks:!0,ticksDistance:1,minorHeight:4,majorHeight:5,minorTicks:0,strokeOpacity:1,strokeWidth:1,tickEndings:[0,1],majortickEndings:[0,1],strokeColor:"#000000",visible:"inherit"},highline:{strokeWidth:3,visible:"inherit",fixed:!0,tabindex:null,name:"",strokeColor:"#000000",highlightStrokeColor:"#888888"},label:{visible:"inherit",strokeColor:"#000000"},moveOnUp:!0},slopefield:{strokeWidth:.5,highlightStrokeWidth:.5,highlightStrokeColor:O.Z.palette.blue,highlightStrokeOpacity:.8,scale:1,arrowhead:{enabled:!1,size:5,angle:.125*Math.PI}},slopetriangle:{fillColor:O.Z.palette.red,fillOpacity:.4,highlightFillColor:O.Z.palette.red,highlightFillOpacity:.3,borders:{lastArrow:{type:1,size:6}},glider:{fixed:!0,visible:!1,withLabel:!1},baseline:{visible:!1,withLabel:!1,name:""},basepoint:{visible:!1,withLabel:!1,name:""},tangent:{visible:!1,withLabel:!1,name:""},toppoint:{visible:!1,withLabel:!1,name:""},label:{visible:!0}},smartlabelangle:{cssClass:"smart-label-solid smart-label-angle",highlightCssClass:"smart-label-solid smart-label-angle",anchorX:"left",anchorY:"middle",unit:"",prefix:"",suffix:"",measure:"deg",useMathJax:!0},smartlabelcircle:{cssClass:"smart-label-solid smart-label-circle",highlightCssClass:"smart-label-solid smart-label-circle",anchorX:"middle",useMathJax:!0,unit:"",prefix:"",suffix:"",measure:"radius"},smartlabelline:{cssClass:"smart-label-solid smart-label-line",highlightCssClass:"smart-label-solid smart-label-line",anchorX:"middle",useMathJax:!0,unit:"",measure:"length"},smartlabelpoint:{cssClass:"smart-label-solid smart-label-point",highlightCssClass:"smart-label-solid smart-label-point",anchorX:"middle",anchorY:"top",useMathJax:!0,dir:"row",unit:""},smartlabelpolygon:{cssClass:"smart-label-solid smart-label-polygon",highlightCssClass:"smart-label-solid smart-label-polygon",anchorX:"middle",useMathJax:!0,unit:"",measure:"area"},stepfunction:{},tangent:{},tapemeasure:{strokeColor:"#000000",strokeWidth:2,highlightStrokeColor:"#000000",withTicks:!0,withLabel:!0,rotate:0,precision:2,digits:2,point1:{visible:"inherit",strokeColor:"#000000",fillColor:"#ffffff",fillOpacity:0,highlightFillOpacity:.1,size:6,snapToPoints:!0,attractorUnit:"screen",attractorDistance:20,showInfobox:!1,withLabel:!1,name:""},point2:{visible:"inherit",strokeColor:"#000000",fillColor:"#ffffff",fillOpacity:0,highlightFillOpacity:.1,size:6,snapToPoints:!0,attractorUnit:"screen",attractorDistance:20,showInfobox:!1,withLabel:!1,name:""},ticks:{drawLabels:!1,drawZero:!0,insertTicks:!0,ticksDistance:.1,minorHeight:8,majorHeight:16,minorTicks:4,tickEndings:[0,1],majorTickEndings:[0,1],strokeOpacity:1,strokeWidth:1,strokeColor:"#000000",visible:"inherit"},label:{position:"top"}},text:{fontSize:12,fontUnit:"px",digits:2,intl:{enabled:"inherit",options:{}},parse:!0,useCaja:!1,isLabel:!1,strokeColor:"#000000",highlightStrokeColor:"#000000",highlightStrokeOpacity:.666666,cssDefaultStyle:"font-family: Arial, Helvetica, Geneva, sans-serif;",highlightCssDefaultStyle:"font-family: Arial, Helvetica, Geneva, sans-serif;",cssStyle:"",highlightCssStyle:"",transitionProperties:["color","opacity"],useASCIIMathML:!1,useMathJax:!1,useKatex:!1,katexMacros:{},display:"html",anchor:null,anchorX:"left",anchorY:"middle",cssClass:"JXGtext",highlightCssClass:"JXGtext",dragArea:"all",withLabel:!1,rotate:0,visible:!0,snapSizeX:1,snapSizeY:1,attractors:[]},tracecurve:{strokeColor:"#000000",fillColor:"none",numberPoints:100},turtle:{strokeWidth:1,fillColor:"none",strokeColor:"#000000",arrow:{strokeWidth:2,withLabel:!1,strokeColor:O.Z.palette.red,lastArrow:!0}},vectorfield:{strokeWidth:.5,highlightStrokeWidth:.5,highlightStrokeColor:O.Z.palette.blue,highlightStrokeOpacity:.8,scale:1,arrowhead:{enabled:!0,size:5,angle:.125*Math.PI}},shortcuts:{color:["strokeColor","fillColor"],opacity:["strokeOpacity","fillOpacity"],highlightColor:["highlightStrokeColor","highlightFillColor"],highlightOpacity:["highlightStrokeOpacity","highlightFillOpacity"],strokeWidth:["strokeWidth","highlightStrokeWidth"]}},F.Z.Validator=function(){var f,v=function(G){return A.Z.isString(G)},m=function(G){return Math.abs(G-Math.round(G))<K.Z.eps},P=function(G){return m(G)&&G>0},I=function(G){return G>0},B=function(G){return G>=0},j={},z={attractorDistance:B,color:v,display:function(G){return"html"===G||"internal"===G},doAdvancedPlot:!1,draft:!1,drawLabels:!1,drawZero:!1,face:function(G){return A.Z.exists(F.Z.normalizePointFace(G))},factor:A.Z.isNumber,fillColor:v,fillOpacity:A.Z.isNumber,firstArrow:!1,fontSize:m,dash:m,gridX:A.Z.isNumber,gridY:A.Z.isNumber,hasGrid:!1,highlightFillColor:v,highlightFillOpacity:A.Z.isNumber,highlightStrokeColor:v,highlightStrokeOpacity:A.Z.isNumber,insertTicks:!1,lastArrow:!1,layer:function(G){return m(G)&&G>=0},majorHeight:m,minorHeight:m,minorTicks:B,minTicksDistance:P,numberPointsHigh:P,numberPointsLow:P,opacity:A.Z.isNumber,radius:A.Z.isNumber,RDPsmoothing:!1,renderer:function(G){return"vml"===G||"svg"===G||"canvas"===G||"no"===G},right:function(G){return/^[0-9]+px$/.test(G)},showCopyright:!1,showInfobox:!1,showNavigation:!1,size:B,snapSizeX:I,snapSizeY:I,snapWidth:A.Z.isNumber,snapToGrid:!1,snatchDistance:B,straightFirst:!1,straightLast:!1,stretch:!1,strokeColor:v,strokeOpacity:A.Z.isNumber,strokeWidth:B,takeFirst:!1,takeSizeFromFile:!1,to10:!1,toOrigin:!1,translateTo10:!1,translateToOrigin:!1,useASCIIMathML:!1,useDirection:!1,useMathJax:!1,withLabel:!1,withTicks:!1,zoom:!1};for(f in z)z.hasOwnProperty(f)&&(j[f.toLowerCase()]=z[f]);return j}(),F.Z.normalizePointFace=function(f){return{cross:"x",x:"x",circle:"o",o:"o",square:"[]","[]":"[]",plus:"+","+":"+",divide:"|","|":"|",minus:"-","-":"-",diamond:"<>","<>":"<>",triangleup:"^",A:"^",a:"^","^":"^",triangledown:"v",v:"v",triangleleft:"<","<":"<",triangleright:">",">":">"}[f]},F.Z.useStandardOptions=function(f){var C,_,v,p,m=F.Z.Options,b=f.hasGrid;for(C in f.options.grid.hasGrid=m.grid.hasGrid,f.options.grid.gridX=m.grid.gridX,f.options.grid.gridY=m.grid.gridY,f.options.grid.gridColor=m.grid.gridColor,f.options.grid.gridOpacity=m.grid.gridOpacity,f.options.grid.gridDash=m.grid.gridDash,f.options.grid.snapToGrid=m.grid.snapToGrid,f.options.grid.snapSizeX=m.grid.SnapSizeX,f.options.grid.snapSizeY=m.grid.SnapSizeY,f.takeSizeFromFile=m.takeSizeFromFile,p=function(P,S){P.visProp.fillcolor=S.fillColor,P.visProp.highlightfillcolor=S.highlightFillColor,P.visProp.strokecolor=S.strokeColor,P.visProp.highlightstrokecolor=S.highlightStrokeColor},f.objects)if(f.objects.hasOwnProperty(C))if((v=f.objects[C]).elementClass===X.Z.OBJECT_CLASS_POINT)p(v,m.point);else if(v.elementClass===X.Z.OBJECT_CLASS_LINE)for(p(v,m.line),_=0;_<v.ticks.length;_++)v.ticks[_].majorTicks=m.line.ticks.majorTicks,v.ticks[_].minTicksDistance=m.line.ticks.minTicksDistance,v.ticks[_].visProp.minorheight=m.line.ticks.minorHeight,v.ticks[_].visProp.majorheight=m.line.ticks.majorHeight;else v.elementClass===X.Z.OBJECT_CLASS_CIRCLE?p(v,m.circle):v.type===X.Z.OBJECT_TYPE_ANGLE?p(v,m.angle):v.type===X.Z.OBJECT_TYPE_ARC?p(v,m.arc):v.type===X.Z.OBJECT_TYPE_POLYGON?p(v,m.polygon):v.type===X.Z.OBJECT_TYPE_CONIC?p(v,m.conic):v.type===X.Z.OBJECT_TYPE_CURVE?p(v,m.curve):v.type===X.Z.OBJECT_TYPE_SECTOR&&(v.arc.visProp.fillcolor=m.sector.fillColor,v.arc.visProp.highlightfillcolor=m.sector.highlightFillColor,v.arc.visProp.fillopacity=m.sector.fillOpacity,v.arc.visProp.highlightfillopacity=m.sector.highlightFillOpacity);f.fullUpdate(),b&&!f.hasGrid?f.removeGrids(f):!b&&f.hasGrid&&f.create("grid",[])},F.Z.useBlackWhiteOptions=function(f){var C=F.Z.Options;C.point.fillColor=O.Z.rgb2bw(C.point.fillColor),C.point.highlightFillColor=O.Z.rgb2bw(C.point.highlightFillColor),C.point.strokeColor=O.Z.rgb2bw(C.point.strokeColor),C.point.highlightStrokeColor=O.Z.rgb2bw(C.point.highlightStrokeColor),C.line.fillColor=O.Z.rgb2bw(C.line.fillColor),C.line.highlightFillColor=O.Z.rgb2bw(C.line.highlightFillColor),C.line.strokeColor=O.Z.rgb2bw(C.line.strokeColor),C.line.highlightStrokeColor=O.Z.rgb2bw(C.line.highlightStrokeColor),C.circle.fillColor=O.Z.rgb2bw(C.circle.fillColor),C.circle.highlightFillColor=O.Z.rgb2bw(C.circle.highlightFillColor),C.circle.strokeColor=O.Z.rgb2bw(C.circle.strokeColor),C.circle.highlightStrokeColor=O.Z.rgb2bw(C.circle.highlightStrokeColor),C.arc.fillColor=O.Z.rgb2bw(C.arc.fillColor),C.arc.highlightFillColor=O.Z.rgb2bw(C.arc.highlightFillColor),C.arc.strokeColor=O.Z.rgb2bw(C.arc.strokeColor),C.arc.highlightStrokeColor=O.Z.rgb2bw(C.arc.highlightStrokeColor),C.polygon.fillColor=O.Z.rgb2bw(C.polygon.fillColor),C.polygon.highlightFillColor=O.Z.rgb2bw(C.polygon.highlightFillColor),C.sector.fillColor=O.Z.rgb2bw(C.sector.fillColor),C.sector.highlightFillColor=O.Z.rgb2bw(C.sector.highlightFillColor),C.curve.strokeColor=O.Z.rgb2bw(C.curve.strokeColor),C.grid.gridColor=O.Z.rgb2bw(C.grid.gridColor),F.Z.useStandardOptions(f)},F.Z.Options.normalizePointFace=F.Z.normalizePointFace;const M=F.Z.Options},849:(x,k,$)=>{$.d(k,{Z:()=>O});var F=$(917),X=$(222),K=$(695);F.Z.GeonextParser={replacePow:function(A){var M,f,C,_,v,p,m,b,P,S,Z,I;for(S=(A=A.replace(/(\s*)\^(\s*)/g,"^")).indexOf("^"),_=-1;S>=0&&S<A.length-1;){if(_===S)throw new Error("JSXGraph: Error while parsing expression '"+A+"'");if(_=S,P=A.slice(0,S),Z=A.slice(S+1),")"===P.charAt(P.length-1)){for(M=1,f=P.length-2;f>=0&&M>0;)")"===(C=P.charAt(f))?M++:"("===C&&(M-=1),f-=1;if(0!==M)throw new Error("JSXGraph: Missing '(' in expression");for(v="",m=P.substring(0,f+1),b=f;b>=0&&m.substr(b,1).match(/([\w.]+)/);)v=RegExp.$1+v,b-=1;v=(v+=P.substring(f+1,P.length)).replace(/([()+*%^\-/\][])/g,"\\$1")}else v="[\\w\\.]+";if(Z.match(/^([\w.]*\()/)){for(M=1,f=RegExp.$1.length;f<Z.length&&M>0;)")"===(C=Z.charAt(f))?M-=1:"("===C&&(M+=1),f+=1;if(0!==M)throw new Error("JSXGraph: Missing ')' in expression");p=(p=Z.substring(0,f)).replace(/([()+*%^\-/[\]])/g,"\\$1")}else p="[\\w\\.]+";I=new RegExp("("+v+")\\^("+p+")"),S=(A=A.replace(I,"pow($1,$2)")).indexOf("^")}return A},replaceIf:function(A){var M,f,C,_,v,p,m,b,P,S="",Z=null,I=null,B=null;if((C=A.indexOf("If("))<0)return A;for(A=A.replace(/""/g,"0");C>=0;){for(M=A.slice(0,C),f=A.slice(C+3),v=1,_=0,p=-1,m=-1;_<f.length&&v>0;)")"===(b=f.charAt(_))?v-=1:"("===b?v+=1:","===b&&1===v&&(p<0?p=_:m=_),_+=1;if(P=f.slice(0,_-1),f=f.slice(_),p<0||m<0)return"";Z=P.slice(0,p),I=P.slice(p+1,m),B=P.slice(m+1),S+=M+"(("+(Z=this.replaceIf(Z))+")?("+(I=this.replaceIf(I))+"):("+(B=this.replaceIf(B))+"))",Z=null,I=null,C=(A=f).indexOf("If(")}return S+f},replaceNameById:function(A,M,f){var C,_,v,p,m=0,b=["X","Y","L","V"],P=function(S){return f?"$('"+S+"')":S};for(p=0;p<b.length;p++)for(m=A.indexOf(b[p]+"(");m>=0;)m>=0&&(C=A.indexOf(")",m+2))>=0&&(_=(_=A.slice(m+2,C)).replace(/\\(['"])?/g,"$1"),(v=M.elementsByName[_])&&(A=A.slice(0,m+2)+(f?"$('":"")+P(v.id)+A.slice(C))),C=A.indexOf(")",m+2),m=A.indexOf(b[p]+"(",C);for(m=A.indexOf("Dist(");m>=0;)m>=0&&(C=A.indexOf(",",m+5))>=0&&(_=(_=A.slice(m+5,C)).replace(/\\(['"])?/g,"$1"),(v=M.elementsByName[_])&&(A=A.slice(0,m+5)+P(v.id)+A.slice(C))),C=A.indexOf(",",m+5),m=A.indexOf(",",C),(C=A.indexOf(")",m+1))>=0&&(_=(_=A.slice(m+1,C)).replace(/\\(['"])?/g,"$1"),(v=M.elementsByName[_])&&(A=A.slice(0,m+1)+P(v.id)+A.slice(C))),C=A.indexOf(")",m+1),m=A.indexOf("Dist(",C);for(b=["Deg","Rad"],p=0;p<b.length;p++)for(m=A.indexOf(b[p]+"(");m>=0;)m>=0&&(C=A.indexOf(",",m+4))>=0&&(_=(_=A.slice(m+4,C)).replace(/\\(['"])?/g,"$1"),(v=M.elementsByName[_])&&(A=A.slice(0,m+4)+P(v.id)+A.slice(C))),C=A.indexOf(",",m+4),m=A.indexOf(",",C),(C=A.indexOf(",",m+1))>=0&&(_=(_=A.slice(m+1,C)).replace(/\\(['"])?/g,"$1"),(v=M.elementsByName[_])&&(A=A.slice(0,m+1)+P(v.id)+A.slice(C))),C=A.indexOf(",",m+1),m=A.indexOf(",",C),(C=A.indexOf(")",m+1))>=0&&(_=(_=A.slice(m+1,C)).replace(/\\(['"])?/g,"$1"),(v=M.elementsByName[_])&&(A=A.slice(0,m+1)+P(v.id)+A.slice(C))),C=A.indexOf(")",m+1),m=A.indexOf(b[p]+"(",C);return A},replaceIdByObj:function(A){var M=/(X|Y|L)\(([\w_]+)\)/g;return(A=(A=(A=(A=(A=A.replace(M,"$('$2').$1()")).replace(M=/(V)\(([\w_]+)\)/g,"$('$2').Value()")).replace(M=/(Dist)\(([\w_]+),([\w_]+)\)/g,"dist($('$2'), $('$3'))")).replace(M=/(Deg)\(([\w_]+),([ \w[\w_]+),([\w_]+)\)/g,"deg($('$2'),$('$3'),$('$4'))")).replace(M=/Rad\(([\w_]+),([\w_]+),([\w_]+)\)/g,"rad($('$1'),$('$2'),$('$3'))")).replace(M=/N\((.+)\)/g,"($1)")},geonext2JS:function(A,M){var f,C,_,v=["Abs","ACos","ASin","ATan","Ceil","Cos","Exp","Factorial","Floor","Log","Max","Min","Random","Round","Sin","Sqrt","Tan","Trunc"],p=["abs","acos","asin","atan","ceil","cos","exp","factorial","floor","log","max","min","random","round","sin","sqrt","tan","ceil"];for(A=(A=(A=A.replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&amp;/g,"&"),C=this.replaceNameById(C=A,M),C=this.replaceIf(C),C=this.replacePow(C),C=this.replaceIdByObj(C),_=0;_<v.length;_++)f=new RegExp(["(\\W|^)(",v[_],")"].join(""),"ig"),C=C.replace(f,["$1",p[_]].join(""));return(C=(C=(C=(C=C.replace(/True/g,"true")).replace(/False/g,"false")).replace(/fasle/g,"false")).replace(/Pi/g,"PI")).replace(/"/g,"'")},findDependencies:function(A,M,f){var C,_,v,p;for(_ in K.Z.exists(f)||(f=A.board),C=f.elementsByName)C.hasOwnProperty(_)&&_!==A.name&&(C[_].elementClass===X.Z.OBJECT_CLASS_TEXT&&K.Z.evaluate(C[_].visProp.islabel)||(p=(p=_.replace(/\[/g,"\\[")).replace(/\]/g,"\\]"),v=new RegExp("\\(([\\w\\[\\]'_ ]+,)*("+p+")(,[\\w\\[\\]'_ ]+)*\\)","g"),M.search(v)>=0&&C[_].addChild(A)))},gxt2jc:function(A,M){return A=(A=(A=A.replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&amp;/g,"&"),this.replaceNameById(A,M,!0).replace(/True/g,"true").replace(/False/g,"false").replace(/fasle/g,"false")}};const O=F.Z.GeonextParser},277:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _jxg__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(917),_base_constants__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(222),_base_text__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(436),_math_math__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(515),_math_ia__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(492),_math_geometry__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(209),_math_statistics__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(706),_utils_type__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(695),_utils_env__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(658);Object.create||(Object.create=function(x,k){if("object"!=typeof x&&"function"!=typeof x)throw new TypeError("Object prototype may only be an Object: "+x);if(null===x)throw new Error("This browser's implementation of Object.create is a shim and doesn't support 'null' as the first argument.");if(typeof k<"u")throw new Error("This browser's implementation of Object.create is a shim and doesn't support a second argument.");function $(){}return $.prototype=x,new $});var priv={modules:{math:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z,"math/geometry":_math_geometry__WEBPACK_IMPORTED_MODULE_5__.Z,"math/statistics":_math_statistics__WEBPACK_IMPORTED_MODULE_6__.Z,"math/numerics":_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.Numerics}},k,x;_jxg__WEBPACK_IMPORTED_MODULE_0__.Z.JessieCode=function(x,k){this.scope={id:0,hasChild:!0,args:[],locals:{},context:null,previous:null},this.scopes=[],this.scopes.push(this.scope),this.dpstack=[[]],this.pscope=0,this.propstack=[{}],this.propscope=0,this.lhs=[],this.isLHS=!1,this.warnLog="jcwarn",this.$log=[],this.builtIn=this.defineBuiltIn(),this.operands=this.getPossibleOperands(),this.board=null,this.lineToElement={},this.parCurLine=1,this.parCurColumn=0,this.line=1,this.col=1,_jxg__WEBPACK_IMPORTED_MODULE_0__.Z.CA&&(this.CA=new _jxg__WEBPACK_IMPORTED_MODULE_0__.Z.CA(this.node,this.createNode,this)),this.code="","string"==typeof x&&this.parse(x,k)},_jxg__WEBPACK_IMPORTED_MODULE_0__.Z.extend(_jxg__WEBPACK_IMPORTED_MODULE_0__.Z.JessieCode.prototype,{node:function(x,k,$){return{type:x,value:k,children:$}},createNode:function(x,k,$){var X,F=this.node(x,k,[]);for(X=2;X<arguments.length;X++)F.children.push(arguments[X]);return"node_const"==F.type&&_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isNumber(F.value)&&(F.isMath=!0),F.line=this.parCurLine,F.col=this.parCurColumn,F},pushScope:function(x){var k={args:x,locals:{},context:null,previous:this.scope};return this.scope.hasChild=!0,this.scope=k,k.id=this.scopes.push(k)-1,k},popScope:function(){var x=this.scope.previous;return this.scope=null!==x?x:this.scope,this.scope},getElementById:function(x){return this.board.objects[x]},log:function(){this.$log.push(arguments),"object"==typeof console&&console.log&&console.log.apply(console,arguments)},creator:(x={},(k=function($){var F,X;return"function"==typeof x[this.board.id+$]?F=x[this.board.id+$]:(X=this,(F=function(K,O){var A;return void 0===(A=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(O)?O:{}).name&&void 0===A.id&&(A.name=0!==X.lhs[X.scope.id]?X.lhs[X.scope.id]:""),X.board.create($,K,A)}).creator=!0,x[this.board.id+$]=F),F}).clearCache=function(){x={}},k),letvar:function(x,k){this.builtIn[x]&&this._warn('"'+x+'" is a predefined value.'),this.scope.locals[x]=k},isLocalVariable:function(x){for(var k=this.scope;null!==k;){if(_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(k.locals[x]))return k;k=k.previous}return null},isParameter:function(x){for(var k=this.scope;null!==k;){if(_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.indexOf(k.args,x)>-1)return k;k=k.previous}return null},isCreator:function(x){return!!_jxg__WEBPACK_IMPORTED_MODULE_0__.Z.elements[x]},isMathMethod:function(x){return"E"!==x&&!!Math[x]},isBuiltIn:function(x){return!!this.builtIn[x]},getvar:function(x,k,$){var F;if(k=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.def(k,!1),null!==(F=this.isLocalVariable(x)))return F.locals[x];if("$board"===x||"EULER"===x||"PI"===x)return this.builtIn[x];if($){if(this.isBuiltIn(x))return this.builtIn[x];if(this.isMathMethod(x))return Math[x];if(this.isCreator(x))return this.creator(x)}return k||(F=this.board.select(x))===x?void 0:F},resolve:function(x){for(var k=this.scope;null!==k;){if(_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(k.locals[x]))return k.locals[x];k=k.previous}},getvarJS:function(x,k,$){var K,X="";return k=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.def(k,!1),$=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.def($,!1),null!==this.isParameter(x)?x:null===this.isLocalVariable(x)||$?this.isCreator(x)?"(function () { var a = Array.prototype.slice.call(arguments, 0), props = "+($?"a.pop()":"{}")+"; return $jc$.board.create.apply($jc$.board, ['"+x+"'].concat([a, props])); })":($&&this._error("Syntax error (attribute values are allowed with element creators only)"),this.isBuiltIn(x)?_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isNumber(X=this.builtIn[x].src||this.builtIn[x])||X.match(/board\.select/)?X:(x=X.split(".").pop(),_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(this.board.mathLib)&&null!==(K=new RegExp("^Math."+x)).exec(X)?X.replace(K,"$jc$.board.mathLib."+x):_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(this.board.mathLibJXG)&&null!==(K=new RegExp("^JXG.Math.")).exec(X)?X.replace(K,"$jc$.board.mathLibJXG."):X):this.isMathMethod(x)?"$jc$.board.mathLib."+x:k?"":(_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isId(this.board,x)?(X="$jc$.board.objects['"+x+"']","slider"===this.board.objects[x].elType&&(X+=".Value()")):_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isName(this.board,x)?(X="$jc$.board.elementsByName['"+x+"']","slider"===this.board.elementsByName[x].elType&&(X+=".Value()")):_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isGroup(this.board,x)&&(X="$jc$.board.groups['"+x+"']"),X)):"$jc$.resolve('"+x+"')"},makeMap:function(x){return x.isMap=!0,x},functionCodeJS:function(x){var k=x.children[0].join(", "),$="",F="";return"op_map"===x.value&&($="{ return  ",F=" }"),"function ("+k+") {\nvar $oldscope$ = $jc$.scope;\n$jc$.scope = $jc$.scopes["+this.scope.id+"];\nvar r = (function () "+$+this.compile(x.children[1],!0)+F+")();\n$jc$.scope = $oldscope$;\nreturn r;\n}"},defineFunction:function(node){var fun,i,that=this,list=node.children[0],scope=this.pushScope(list);if(this.board.options.jc.compile){for(this.isLHS=!1,i=0;i<list.length;i++)scope.locals[list[i]]=list[i];this.replaceNames(node.children[1]),fun=function(jc){var fun,str="var f = function($jc$) { return "+jc.functionCodeJS(node)+"}; f;";try{for(fun=eval(str)(jc),scope.argtypes=[],i=0;i<list.length;i++)scope.argtypes.push(that.resolveType(list[i],node));return fun}catch(x){return jc._warn("error compiling function\n\n"+str+"\n\n"+x.toString()),function(){}}}(this),this.popScope()}else fun=function(x,k,$){return function(){var F,X;for(X=k.scope,k.scope=k.scopes[$],F=0;F<x.length;F++)k.scope.locals[x[F]]=arguments[F];return F=k.execute(node.children[1]),k.scope=X,F}}(list,this,scope.id);return fun.node=node,fun.scope=scope,fun.toJS=fun.toString,fun.toString=function(x){return function(){return x.compile(x.replaceIDs(_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.deepCopy(node)))}}(this),fun.deps={},this.collectDependencies(node.children[1],node.children[0],fun.deps),fun},mergeAttributes:function(x){var k,$={};for(k=0;k<arguments.length;k++)$=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.deepCopy($,arguments[k],!0);return $},setProp:function(x,k,$){var X,K,F={};x.elementClass!==_base_constants__WEBPACK_IMPORTED_MODULE_1__.Z.OBJECT_CLASS_POINT||"X"!==k&&"Y"!==k?x.elementClass!==_base_constants__WEBPACK_IMPORTED_MODULE_1__.Z.OBJECT_CLASS_TEXT||"X"!==k&&"Y"!==k?x.type&&x.elementClass&&x.visProp?_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(x[x.methodMap[k]])&&"function"!=typeof x[x.methodMap[k]]?x[x.methodMap[k]]=$:(F[k]=$,x.setAttribute(F)):x[k]=$:("number"==typeof $?x[k]=function(){return $}:"function"==typeof $?(x.isDraggable=!1,x[k]=$):"string"==typeof $&&(x.isDraggable=!1,x[k]=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.createFunction($,this.board,null,!0),x[k+"jc"]=$),x[k].origin=$,this.board.update()):(k=k.toLowerCase(),x.isDraggable&&"number"==typeof $?(X="x"===k?$:x.X(),K="y"===k?$:x.Y(),x.setPosition(_base_constants__WEBPACK_IMPORTED_MODULE_1__.Z.COORDS_BY_USER,[X,K])):!x.isDraggable||"function"!=typeof $&&"string"!=typeof $?x.isDraggable||x.addConstraint([X="x"===k?$:x.XEval.origin,K="y"===k?$:x.YEval.origin]):x.addConstraint([X="x"===k?$:x.coords.usrCoords[1],K="y"===k?$:x.coords.usrCoords[2]]),this.board.update())},_genericParse:function(x,k,$,F){var X,K,O,A,M=x.replace(/\r\n/g,"\n").split("\n"),f=[];F||(this.code+=x+"\n"),_base_text__WEBPACK_IMPORTED_MODULE_2__.Z&&(K=_base_text__WEBPACK_IMPORTED_MODULE_2__.Z.prototype.setText,_base_text__WEBPACK_IMPORTED_MODULE_2__.Z.prototype.setText=_base_text__WEBPACK_IMPORTED_MODULE_2__.Z.prototype.setTextJessieCode);try{for(_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists($)||($=!1),X=0;X<M.length;X++)$&&(M[X]=_jxg__WEBPACK_IMPORTED_MODULE_0__.Z.GeonextParser.geonext2JS(M[X],this.board)),f.push(M[X]);switch(x=f.join("\n"),O=parser.parse(x),this.CA&&(O=this.CA.expandDerivatives(O,null,O),O=this.CA.removeTrivialNodes(O)),k){case"parse":A=this.execute(O);break;case"manipulate":A=this.compile(O);break;case"getAst":A=O;break;default:A=!1}}catch(C){throw C}finally{_base_text__WEBPACK_IMPORTED_MODULE_2__.Z&&(_base_text__WEBPACK_IMPORTED_MODULE_2__.Z.prototype.setText=K)}return A},parse:function(x,k,$){return this._genericParse(x,"parse",k,$)},manipulate:function(x,k,$){return this._genericParse(x,"manipulate",k,$)},getAST:function(x,k,$){return this._genericParse(x,"getAst",k,$)},snippet:function(x,k,$,F){return k=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.def(k,!0),$=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.def($,""),F=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.def(F,!1),this.parse((k?" function ("+$+") { return ":"")+x+(k?"; }":"")+";",F,!0)},replaceIDs:function(x){var k,$;if(x.replaced&&_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists($=this.board.objects[x.children[1][0].value])&&""!==$.name&&(x.type="node_var",x.value=$.name,x.children.length=0,delete x.replaced),_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isArray(x))for(k=0;k<x.length;k++)x[k]=this.replaceIDs(x[k]);if(x.children)for(k=x.children.length;k>0;k--)_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(x.children[k-1])&&(x.children[k-1]=this.replaceIDs(x.children[k-1]));return x},replaceNames:function(x){var k,$;if($=x.value,"node_op"===x.type&&"op_lhs"===$&&1===x.children.length?this.isLHS=!0:"node_var"===x.type&&(this.isLHS?this.letvar($,!0):!_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(this.getvar($,!0))&&_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(this.board.elementsByName[$])&&(x=this.createReplacementNode(x))),_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isArray(x))for(k=0;k<x.length;k++)x[k]=this.replaceNames(x[k]);if(x.children)for(k=x.children.length;k>0;k--)_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(x.children[k-1])&&(x.children[k-1]=this.replaceNames(x.children[k-1]));return"node_op"===x.type&&"op_lhs"===x.value&&1===x.children.length&&(this.isLHS=!1),x},createReplacementNode:function(x){var $=this.board.elementsByName[x.value];return(x=this.createNode("node_op","op_execfun",this.createNode("node_var","$"),[this.createNode("node_str",$.id)])).replaced=!0,x},collectDependencies:function(x,k,$){var F,X,K,O;if(_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isArray(x))for(O=x.length,F=0;F<O;F++)this.collectDependencies(x[F],k,$);else if(X=x.value,"node_var"===x.type&&k.indexOf(X)<0&&(K=this.getvar(X))&&K.visProp&&K.type&&K.elementClass&&K.id&&K.type===_base_constants__WEBPACK_IMPORTED_MODULE_1__.Z.OBJECT_TYPE_SLIDER&&($[K.id]=K),"node_op"===x.type&&"op_execfun"===x.value&&x.children.length>1&&"$"===x.children[0].value&&x.children[1].length>0&&($[K=x.children[1][0].value]=this.board.objects[K]),x.children)for(F=x.children.length;F>0;F--)_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(x.children[F-1])&&this.collectDependencies(x.children[F-1],k,$)},resolveProperty:function(x,k,$){return $=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.def($,!1),x&&x.methodMap&&(_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(x.subs)&&_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(x.subs[k])?x=x.subs:_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(x.methodMap[k])?k=x.methodMap[k]:(x=x.visProp,k=k.toLowerCase())),_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isFunction(x)&&this._error("Accessing function properties is not allowed."),_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(x)||this._error(x+" is not an object"),_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(x[k])||this._error("unknown property "+k),$&&"function"==typeof x[k]?function(){return x[k].apply(x,arguments)}:x[k]},resolveType:function(x,k){var $,F;if(_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isArray(k))for($=0;$<k.length;$++)if("any"!==(F=this.resolveType(x,k[$])))return F;if("node_op"===k.type&&"op_execfun"===k.value&&"node_var"===k.children[0].type&&k.children[0].value===x)return"function";if("node_op"===k.type){for($=0;$<k.children.length;$++)if("node_var"===k.children[0].type&&k.children[0].value===x&&("op_add"===k.value||"op_sub"===k.value||"op_mul"===k.value||"op_div"===k.value||"op_mod"===k.value||"op_exp"===k.value||"op_neg"===k.value))return"any";for($=0;$<k.children.length;$++)if("any"!==(F=this.resolveType(x,k.children[$])))return F}return"any"},getLHS:function(x){var k;if("node_var"===x.type)k={o:this.scope.locals,what:x.value};else if("node_op"===x.type&&"op_property"===x.value)k={o:this.execute(x.children[0]),what:x.children[1]};else{if("node_op"!==x.type||"op_extvalue"!==x.value)throw new Error("Syntax error: Invalid left-hand side of assignment.");k={o:this.execute(x.children[0]),what:this.execute(x.children[1])}}return k},getLHSCompiler:function(x,k){var $;if("node_var"===x.type)$=x.value;else if("node_op"===x.type&&"op_property"===x.value)$=[this.compile(x.children[0],k),"'"+x.children[1]+"'"];else{if("node_op"!==x.type||"op_extvalue"!==x.value)throw new Error("Syntax error: Invalid left-hand side of assignment.");$=[this.compile(x.children[0],k),"node_const"===x.children[1].type?x.children[1].value:this.compile(x.children[1],k)]}return $},execute:function(x){var k,$,F,X,K,A,M,C,_,v,f=[];if(k=0,!x)return k;switch(this.line=x.line,this.col=x.col,x.type){case"node_op":switch(x.value){case"op_none":x.children[0]&&this.execute(x.children[0]),x.children[1]&&(k=this.execute(x.children[1]));break;case"op_assign":$=this.getLHS(x.children[0]),this.lhs[this.scope.id]=$.what,$.o.type&&$.o.elementClass&&$.o.methodMap&&"label"===$.what&&this._error("Left-hand side of assignment is read-only."),k=this.execute(x.children[1]),$.o!==this.scope.locals||_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isArray($.o)&&"number"==typeof $.what?this.setProp($.o,$.what,k):this.letvar($.what,k),this.lhs[this.scope.id]=0;break;case"op_if":this.execute(x.children[0])&&(k=this.execute(x.children[1]));break;case"op_conditional":case"op_if_else":k=this.execute(x.children[0])?this.execute(x.children[1]):this.execute(x.children[2]);break;case"op_while":for(;this.execute(x.children[0]);)this.execute(x.children[1]);break;case"op_do":do{this.execute(x.children[0])}while(this.execute(x.children[1]));break;case"op_for":for(this.execute(x.children[0]);this.execute(x.children[1]);this.execute(x.children[2]))this.execute(x.children[3]);break;case"op_proplst":x.children[0]&&this.execute(x.children[0]),x.children[1]&&this.execute(x.children[1]);break;case"op_emptyobject":k={};break;case"op_proplst_val":this.propstack.push({}),this.propscope++,this.execute(x.children[0]),k=this.propstack[this.propscope],this.propstack.pop(),this.propscope--;break;case"op_prop":this.propstack[this.propscope][x.children[0]]=this.execute(x.children[1]);break;case"op_array":for(k=[],K=x.children[0].length,F=0;F<K;F++)k.push(this.execute(x.children[0][F]));break;case"op_extvalue":k=this.execute(x.children[0]),k="number"==typeof(F=this.execute(x.children[1]))&&Math.abs(Math.round(F)-F)<_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.eps?k[F]:void 0;break;case"op_return":if(0!==this.scope)return this.execute(x.children[0]);this._error("Unexpected return.");break;case"op_map":!x.children[1].isMath&&"node_var"!==x.children[1].type&&this._error("execute: In a map only function calls and mathematical expressions are allowed."),(C=this.defineFunction(x)).isMap=!0,k=C;break;case"op_function":(C=this.defineFunction(x)).isMap=!1,k=C;break;case"op_execfun":if(this.dpstack.push([]),this.pscope++,A=x.children[1],_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(x.children[2]))if(x.children[3])for(M=x.children[2],_={},F=0;F<M.length;F++)_=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.deepCopy(_,this.execute(M[F]),!0);else _=this.execute(x.children[2]);for(x.children[0]._isFunctionName=!0,C=this.execute(x.children[0]),delete x.children[0]._isFunctionName,v=C&&C.sc?C.sc:this,!C.creator&&_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(x.children[2])&&this._error("Unexpected value. Only element creators are allowed to have a value after the function call."),F=0;F<A.length;F++)_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(C.scope)&&_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(C.scope.argtypes)&&"function"===C.scope.argtypes[F]?(A[F]._isFunctionName=!0,f[F]=this.execute(A[F]),delete A[F]._isFunctionName):f[F]=this.execute(A[F]),this.dpstack[this.pscope].push({line:x.children[1][F].line,col:x.children[1][F].ecol});if("function"!=typeof C||C.creator)if("function"==typeof C&&C.creator){X=this.line;try{for((k=C(f,_)).jcLineStart=X,k.jcLineEnd=x.eline,F=X;F<=x.line;F++)this.lineToElement[F]=k;k.debugParents=this.dpstack[this.pscope]}catch(p){this._error(p.toString())}}else this._error("Function '"+C+"' is undefined.");else k=C.apply(v,f);this.dpstack.pop(),this.pscope--;break;case"op_property":X=this.execute(x.children[0]),k=this.resolveProperty(X,$=x.children[1],!1),_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(k)&&["number","string","boolean"].indexOf(typeof k)<0&&(k.sc=X);break;case"op_use":this._warn("Use of the 'use' operator is deprecated."),this.use(x.children[0].toString());break;case"op_delete":this._warn("Use of the 'delete' operator is deprecated. Please use the remove() function."),$=this.getvar(x.children[0]),k=this.del($);break;case"op_eq":k=this.execute(x.children[0])==this.execute(x.children[1]);break;case"op_neq":k=this.execute(x.children[0])!=this.execute(x.children[1]);break;case"op_approx":k=Math.abs(this.execute(x.children[0])-this.execute(x.children[1]))<_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.eps;break;case"op_gt":k=this.execute(x.children[0])>this.execute(x.children[1]);break;case"op_lt":k=this.execute(x.children[0])<this.execute(x.children[1]);break;case"op_geq":k=this.execute(x.children[0])>=this.execute(x.children[1]);break;case"op_leq":k=this.execute(x.children[0])<=this.execute(x.children[1]);break;case"op_or":k=this.execute(x.children[0])||this.execute(x.children[1]);break;case"op_and":k=this.execute(x.children[0])&&this.execute(x.children[1]);break;case"op_not":k=!this.execute(x.children[0]);break;case"op_add":k=this.add(this.execute(x.children[0]),this.execute(x.children[1]));break;case"op_sub":k=this.sub(this.execute(x.children[0]),this.execute(x.children[1]));break;case"op_div":k=this.div(this.execute(x.children[0]),this.execute(x.children[1]));break;case"op_mod":k=this.mod(this.execute(x.children[0]),this.execute(x.children[1]),!0);break;case"op_mul":k=this.mul(this.execute(x.children[0]),this.execute(x.children[1]));break;case"op_exp":k=this.pow(this.execute(x.children[0]),this.execute(x.children[1]));break;case"op_neg":k=this.neg(this.execute(x.children[0]))}break;case"node_var":k=this.getvar(x.value,!1,x._isFunctionName);break;case"node_const":k=null===x.value?null:Number(x.value);break;case"node_const_bool":k=x.value;break;case"node_str":k=x.value.replace(/\\(.)/g,"$1")}return k},compile:function(x,k){var $,F,X,O="";if(_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(k)||(k=!1),!x)return O;switch(x.type){case"node_op":switch(x.value){case"op_none":x.children[0]&&(O=this.compile(x.children[0],k)),x.children[1]&&(O+=this.compile(x.children[1],k));break;case"op_assign":k?($=this.getLHSCompiler(x.children[0],k),_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isArray($)?O="$jc$.setProp("+$[0]+", "+$[1]+", "+this.compile(x.children[1],k)+");\n":(this.isLocalVariable($)!==this.scope&&(this.scope.locals[$]=!0),O="$jc$.scopes["+this.scope.id+"].locals['"+$+"'] = "+this.compile(x.children[1],k)+";\n")):O=($=this.compile(x.children[0]))+" = "+this.compile(x.children[1],k)+";\n";break;case"op_if":O=" if ("+this.compile(x.children[0],k)+") "+this.compile(x.children[1],k);break;case"op_if_else":O=" if ("+this.compile(x.children[0],k)+")"+this.compile(x.children[1],k),O+=" else "+this.compile(x.children[2],k);break;case"op_conditional":O="(("+this.compile(x.children[0],k)+")?("+this.compile(x.children[1],k),O+="):("+this.compile(x.children[2],k)+"))";break;case"op_while":O=" while ("+this.compile(x.children[0],k)+") {\n"+this.compile(x.children[1],k)+"}\n";break;case"op_do":O=" do {\n"+this.compile(x.children[0],k)+"} while ("+this.compile(x.children[1],k)+");\n";break;case"op_for":O=" for ("+this.compile(x.children[0],k)+this.compile(x.children[1],k)+"; "+this.compile(x.children[2],k).slice(0,-2)+") {\n"+this.compile(x.children[3],k)+"\n}\n";break;case"op_proplst":x.children[0]&&(O=this.compile(x.children[0],k)+", "),O+=this.compile(x.children[1],k);break;case"op_prop":O=x.children[0]+": "+this.compile(x.children[1],k);break;case"op_emptyobject":O=k?"{}":"<< >>";break;case"op_proplst_val":O=this.compile(x.children[0],k);break;case"op_array":for(X=[],F=0;F<x.children[0].length;F++)X.push(this.compile(x.children[0][F],k));O="["+X.join(", ")+"]";break;case"op_extvalue":O=this.compile(x.children[0],k)+"["+this.compile(x.children[1],k)+"]";break;case"op_return":O=" return "+this.compile(x.children[0],k)+";\n";break;case"op_map":!x.children[1].isMath&&"node_var"!==x.children[1].type&&this._error("compile: In a map only function calls and mathematical expressions are allowed."),X=x.children[0],O=k?" $jc$.makeMap(function ("+X.join(", ")+") { return "+this.compile(x.children[1],k)+"; })":"map ("+X.join(", ")+") -> "+this.compile(x.children[1],k);break;case"op_function":this.pushScope(X=x.children[0]),O=k?this.functionCodeJS(x):" function ("+X.join(", ")+") "+this.compile(x.children[1],k),this.popScope();break;case"op_execfunmath":console.log("op_execfunmath: TODO"),O="-1";break;case"op_execfun":if(x.children[2]){for(X=[],F=0;F<x.children[2].length;F++)X.push(this.compile(x.children[2][F],k));$=k?"$jc$.mergeAttributes("+X.join(", ")+")":X.join(", ")}for(x.children[0].withProps=!!x.children[2],X=[],F=0;F<x.children[1].length;F++)X.push(this.compile(x.children[1][F],k));O=this.compile(x.children[0],k)+"("+X.join(", ")+(x.children[2]&&k?", "+$:"")+")"+(x.children[2]&&!k?" "+$:""),k&&(O+="\n"),k&&"$"===x.children[0].value&&(O="$jc$.board.objects["+this.compile(x.children[1][0],k)+"]");break;case"op_property":O=k&&"X"!==x.children[1]&&"Y"!==x.children[1]?"$jc$.resolveProperty("+this.compile(x.children[0],k)+", '"+x.children[1]+"', true)":this.compile(x.children[0],k)+"."+x.children[1];break;case"op_use":this._warn("Use of the 'use' operator is deprecated."),O=k?"$jc$.use('":"use('",O+=x.children[0].toString()+"');";break;case"op_delete":this._warn("Use of the 'delete' operator is deprecated. Please use the remove() function."),O=k?"$jc$.del(":"remove(",O+=this.compile(x.children[0],k)+")";break;case"op_eq":O="("+this.compile(x.children[0],k)+" === "+this.compile(x.children[1],k)+")";break;case"op_neq":O="("+this.compile(x.children[0],k)+" !== "+this.compile(x.children[1],k)+")";break;case"op_approx":O="("+this.compile(x.children[0],k)+" ~= "+this.compile(x.children[1],k)+")";break;case"op_gt":O=k?"$jc$.gt("+this.compile(x.children[0],k)+", "+this.compile(x.children[1],k)+")":"("+this.compile(x.children[0],k)+" > "+this.compile(x.children[1],k)+")";break;case"op_lt":O=k?"$jc$.lt("+this.compile(x.children[0],k)+", "+this.compile(x.children[1],k)+")":"("+this.compile(x.children[0],k)+" < "+this.compile(x.children[1],k)+")";break;case"op_geq":O=k?"$jc$.geq("+this.compile(x.children[0],k)+", "+this.compile(x.children[1],k)+")":"("+this.compile(x.children[0],k)+" >= "+this.compile(x.children[1],k)+")";break;case"op_leq":O=k?"$jc$.leq("+this.compile(x.children[0],k)+", "+this.compile(x.children[1],k)+")":"("+this.compile(x.children[0],k)+" <= "+this.compile(x.children[1],k)+")";break;case"op_or":O="("+this.compile(x.children[0],k)+" || "+this.compile(x.children[1],k)+")";break;case"op_and":O="("+this.compile(x.children[0],k)+" && "+this.compile(x.children[1],k)+")";break;case"op_not":O="!("+this.compile(x.children[0],k)+")";break;case"op_add":O=k?"$jc$.add("+this.compile(x.children[0],k)+", "+this.compile(x.children[1],k)+")":"("+this.compile(x.children[0],k)+" + "+this.compile(x.children[1],k)+")";break;case"op_sub":O=k?"$jc$.sub("+this.compile(x.children[0],k)+", "+this.compile(x.children[1],k)+")":"("+this.compile(x.children[0],k)+" - "+this.compile(x.children[1],k)+")";break;case"op_div":O=k?"$jc$.div("+this.compile(x.children[0],k)+", "+this.compile(x.children[1],k)+")":"("+this.compile(x.children[0],k)+" / "+this.compile(x.children[1],k)+")";break;case"op_mod":O=k?"$jc$.mod("+this.compile(x.children[0],k)+", "+this.compile(x.children[1],k)+", true)":"("+this.compile(x.children[0],k)+" % "+this.compile(x.children[1],k)+")";break;case"op_mul":O=k?"$jc$.mul("+this.compile(x.children[0],k)+", "+this.compile(x.children[1],k)+")":"("+this.compile(x.children[0],k)+" * "+this.compile(x.children[1],k)+")";break;case"op_exp":O=k?"$jc$.pow("+this.compile(x.children[0],k)+", "+this.compile(x.children[1],k)+")":"("+this.compile(x.children[0],k)+"^"+this.compile(x.children[1],k)+")";break;case"op_neg":O=k?"$jc$.neg("+this.compile(x.children[0],k)+")":"(-"+this.compile(x.children[0],k)+")"}break;case"node_var":O=k?this.getvarJS(x.value,!1,x.withProps):x.value;break;case"node_const":case"node_const_bool":O=x.value;break;case"node_str":O="'"+x.value+"'"}return x.needsBrackets&&(O="{\n"+O+" }\n"),x.needsAngleBrackets&&(O=k?"{\n"+O+" }\n":"<< "+O+" >>\n"),O},getName:function(x,k){var $="";return _utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(x)&&_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(x.getName)?($=x.getName(),(!_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists($)||""===$)&&k&&($=x.id)):k&&($=x.id),$},X:function(x){return x.X()},Y:function(x){return x.Y()},V:function(x){return x.Value()},L:function(x){return x.L()},area:function(x){return(!_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(x)||!_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(x.Area))&&this._error("Error: Can't calculate area."),x.Area()},perimeter:function(x){return(!_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(x)||!_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(x.Perimeter))&&this._error("Error: Can't calculate perimeter."),x.Perimeter()},dist:function(x,k){return(!_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(x)||!_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(x.Dist))&&this._error("Error: Can't calculate distance."),x.Dist(k)},radius:function(x){return(!_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(x)||!_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(x.Radius))&&this._error("Error: Can't calculate radius."),x.Radius()},add:function(x,k){var $,F,X;if(x=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.evalSlider(x),k=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.evalSlider(k),_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.isInterval(x)||_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.isInterval(k))X=_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.add(x,k);else if(_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isArray(x)&&_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isArray(k))for(F=Math.min(x.length,k.length),X=[],$=0;$<F;$++)X[$]=x[$]+k[$];else _utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isNumber(x)&&_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isNumber(k)?X=x+k:_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isString(x)||_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isString(k)?X=x.toString()+k.toString():this._error("Operation + not defined on operands "+typeof x+" and "+typeof k);return X},sub:function(x,k){var $,F,X;if(x=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.evalSlider(x),k=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.evalSlider(k),_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.isInterval(x)||_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.isInterval(k))X=_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.sub(x,k);else if(_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isArray(x)&&_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isArray(k))for(F=Math.min(x.length,k.length),X=[],$=0;$<F;$++)X[$]=x[$]-k[$];else _utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isNumber(x)&&_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isNumber(k)?X=x-k:this._error("Operation - not defined on operands "+typeof x+" and "+typeof k);return X},neg:function(x){var k,$,F;if(x=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.evalSlider(x),_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.isInterval(x))F=_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.negative(x);else if(_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isArray(x))for($=x.length,F=[],k=0;k<$;k++)F[k]=-x[k];else _utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isNumber(x)?F=-x:this._error("Unary operation - not defined on operand "+typeof x);return F},mul:function(x,k){var $,F,X;if(x=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.evalSlider(x),k=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.evalSlider(k),_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isArray(x)&&_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isNumber(k)&&($=x,k=x=k),_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.isInterval(x)||_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.isInterval(k))X=_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.mul(x,k);else if(_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isArray(x)&&_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isArray(k))F=Math.min(x.length,k.length),X=_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.innerProduct(x,k,F);else if(_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isNumber(x)&&_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isArray(k))for(F=k.length,X=[],$=0;$<F;$++)X[$]=x*k[$];else _utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isNumber(x)&&_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isNumber(k)?X=x*k:this._error("Operation * not defined on operands "+typeof x+" and "+typeof k);return X},div:function(x,k){var $,F,X;if(x=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.evalSlider(x),k=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.evalSlider(k),_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.isInterval(x)||_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.isInterval(k))X=_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.div(x,k);else if(_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isArray(x)&&_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isNumber(k))for(F=x.length,X=[],$=0;$<F;$++)X[$]=x[$]/k;else _utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isNumber(x)&&_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isNumber(k)?X=x/k:this._error("Operation * not defined on operands "+typeof x+" and "+typeof k);return X},mod:function(x,k){var $,F,X;if(x=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.evalSlider(x),k=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.evalSlider(k),_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.isInterval(x)||_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.isInterval(k))return _math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.fmod(x,k);if(_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isArray(x)&&_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isNumber(k))for(F=x.length,X=[],$=0;$<F;$++)X[$]=_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.mod(x[$],k,!0);else _utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isNumber(x)&&_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isNumber(k)?X=_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.mod(x,k,!0):this._error("Operation * not defined on operands "+typeof x+" and "+typeof k);return X},pow:function(x,k){return x=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.evalSlider(x),k=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.evalSlider(k),_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.isInterval(x)||_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.isInterval(k)?_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.pow(x,k):_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.pow(x,k)},lt:function(x,k){return _math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.isInterval(x)||_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.isInterval(k)?_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.lt(x,k):x<k},leq:function(x,k){return _math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.isInterval(x)||_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.isInterval(k)?_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.leq(x,k):x<=k},gt:function(x,k){return _math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.isInterval(x)||_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.isInterval(k)?_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.gt(x,k):x>k},geq:function(x,k){return _math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.isInterval(x)||_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.isInterval(k)?Intervalt.geq(x,k):x>=k},randint:function(x,k,$){return _utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists($)||($=1),Math.round(Math.random()*(k-x)/$)*$+x},DDD:function(x){console.log("Dummy derivative function. This should never appear!")},ifthen:function(x,k,$){return x?k:$},del:function(x){"object"==typeof x&&_jxg__WEBPACK_IMPORTED_MODULE_0__.Z.exists(x.type)&&_jxg__WEBPACK_IMPORTED_MODULE_0__.Z.exists(x.elementClass)&&this.board.removeObject(x)},use:function(x){var k,$,F=!1;if("string"==typeof x){for(k in _jxg__WEBPACK_IMPORTED_MODULE_0__.Z.boards)if(_jxg__WEBPACK_IMPORTED_MODULE_0__.Z.boards.hasOwnProperty(k)&&_jxg__WEBPACK_IMPORTED_MODULE_0__.Z.boards[k].container===x){$=_jxg__WEBPACK_IMPORTED_MODULE_0__.Z.boards[k],F=!0;break}}else $=x,F=!0;F?(this.board=$,this.builtIn.$board=$,this.builtIn.$board.src="$jc$.board"):this._error("Board '"+x+"' not found!")},findSymbol:function(x,k){var $,F;for(F=-1===(k=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.def(k,-1))?this.scope:this.scopes[k];null!==F;){for($ in F.locals)if(F.locals.hasOwnProperty($)&&F.locals[$]===x)return[$,F];F=F.previous}return[]},importModule:function(x){return priv.modules[x.toLowerCase()]},defineBuiltIn:function(){var x=this,k={PI:Math.PI,EULER:Math.E,D:x.DDD,X:x.X,Y:x.Y,V:x.V,L:x.L,acosh:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.acosh,acot:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.acot,asinh:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.asinh,binomial:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.binomial,cbrt:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.cbrt,cosh:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.cosh,cot:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.cot,deg:_math_geometry__WEBPACK_IMPORTED_MODULE_5__.Z.trueAngle,A:x.area,area:x.area,perimeter:x.perimeter,dist:x.dist,R:x.radius,radius:x.radius,erf:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.erf,erfc:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.erfc,erfi:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.erfi,factorial:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.factorial,gcd:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.gcd,lb:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.log2,lcm:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.lcm,ld:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.log2,lg:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.log10,ln:Math.log,log:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.log,log10:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.log10,log2:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.log2,ndtr:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.ndtr,ndtri:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.ndtri,nthroot:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.nthroot,pow:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.pow,rad:_math_geometry__WEBPACK_IMPORTED_MODULE_5__.Z.rad,ratpow:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.ratpow,trunc:_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.trunc,sinh:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.sinh,randint:x.randint,IfThen:x.ifthen,import:x.importModule,use:x.use,remove:x.del,$:x.getElementById,getName:x.getName,name:x.getName,$board:x.board,$log:x.log};return k.rad.sc=_math_geometry__WEBPACK_IMPORTED_MODULE_5__.Z,k.deg.sc=_math_geometry__WEBPACK_IMPORTED_MODULE_5__.Z,k.factorial.sc=_math_math__WEBPACK_IMPORTED_MODULE_3__.Z,k.X.src="$jc$.X",k.Y.src="$jc$.Y",k.V.src="$jc$.V",k.L.src="$jc$.L",k.acosh.src="JXG.Math.acosh",k.acot.src="JXG.Math.acot",k.asinh.src="JXG.Math.asinh",k.binomial.src="JXG.Math.binomial",k.cbrt.src="JXG.Math.cbrt",k.cot.src="JXG.Math.cot",k.cosh.src="JXG.Math.cosh",k.deg.src="JXG.Math.Geometry.trueAngle",k.erf.src="JXG.Math.erf",k.erfc.src="JXG.Math.erfc",k.erfi.src="JXG.Math.erfi",k.A.src="$jc$.area",k.area.src="$jc$.area",k.perimeter.src="$jc$.perimeter",k.dist.src="$jc$.dist",k.R.src="$jc$.radius",k.radius.src="$jc$.radius",k.factorial.src="JXG.Math.factorial",k.gcd.src="JXG.Math.gcd",k.lb.src="JXG.Math.log2",k.lcm.src="JXG.Math.lcm",k.ld.src="JXG.Math.log2",k.lg.src="JXG.Math.log10",k.ln.src="Math.log",k.log.src="JXG.Math.log",k.log10.src="JXG.Math.log10",k.log2.src="JXG.Math.log2",k.ndtr.src="JXG.Math.ndtr",k.ndtri.src="JXG.Math.ndtri",k.nthroot.src="JXG.Math.nthroot",k.pow.src="JXG.Math.pow",k.rad.src="JXG.Math.Geometry.rad",k.ratpow.src="JXG.Math.ratpow",k.trunc.src="JXG.trunc",k.sinh.src="JXG.Math.sinh",k.randint.src="$jc$.randint",k.import.src="$jc$.importModule",k.use.src="$jc$.use",k.remove.src="$jc$.del",k.IfThen.src="$jc$.ifthen",k.$.src="(function (n) { return $jc$.board.select(n); })",k.getName.src="$jc$.getName",k.name.src="$jc$.getName",k.$board&&(k.$board.src="$jc$.board"),k.$log.src="$jc$.log",_jxg__WEBPACK_IMPORTED_MODULE_0__.Z.merge(k,x._addedBuiltIn)},_addedBuiltIn:{},addBuiltIn:function(x,k){if(_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(this.builtIn)){if(_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(this.builtIn[x]))return;this.builtIn[x]=k,this.builtIn[x].src="$jc$."+x}_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(this._addedBuiltIn[x])||(this._addedBuiltIn[x]=k,this._addedBuiltIn[x].src="$jc$."+x,_jxg__WEBPACK_IMPORTED_MODULE_0__.Z.JessieCode.prototype[x]=k,console.log("added",x,k))},getPossibleOperands:function(){var F,X,K,O,A,M,f,C,_,v,p,m,b,P,x=["E"],k=this.builtIn||this.defineBuiltIn(),$=Math;for(b=function(S,Z){return S.toLowerCase().localeCompare(Z.toLowerCase())},P=function(S,Z){var I=null;if("jc"===Z)I=k[S];else{if("Math"!==Z)return;I=$[S]}if(!(x.indexOf(S)>=0)){if(_jxg__WEBPACK_IMPORTED_MODULE_0__.Z.isFunction(I))return{name:S,type:"function",numParams:I.length,origin:Z};if(_jxg__WEBPACK_IMPORTED_MODULE_0__.Z.isNumber(I))return{name:S,type:"constant",value:I,origin:Z};S.startsWith("$")||void 0!==I&&console.error("undefined type",I)}},F=Object.getOwnPropertyNames(k).sort(b),X=Object.getOwnPropertyNames($).sort(b),K=[],O=0,A=0;O<F.length||A<X.length;)F[O]===X[A]?(M=P(X[A],"Math"),_jxg__WEBPACK_IMPORTED_MODULE_0__.Z.exists(M)&&K.push(M),O++,A++):!_jxg__WEBPACK_IMPORTED_MODULE_0__.Z.exists(X[A])||F[O].toLowerCase().localeCompare(X[A].toLowerCase())<0?(M=P(F[O],"jc"),_jxg__WEBPACK_IMPORTED_MODULE_0__.Z.exists(M)&&K.push(M),O++):(M=P(X[A],"Math"),_jxg__WEBPACK_IMPORTED_MODULE_0__.Z.exists(M)&&K.push(M),A++);for(_=[],v=[],p=[],m={},f=K.length,O=0;O<f;O++){switch((C=K[O]).type){case"function":_.push(C.name),"jc"===C.origin&&v.push(C.name);break;case"constant":p.push(C.name)}m[C.name]=C}return{all:m,list:K,functions:_,functions_jessiecode:v,constants:p}},_debug:function(x){"object"==typeof console?console.log(x):_utils_env__WEBPACK_IMPORTED_MODULE_8__.Z.isBrowser&&document&&null!==document.getElementById("debug")&&(document.getElementById("debug").innerHTML+=x+"<br />")},_error:function(x){var k=new Error("Error("+this.line+"): "+x);throw k.line=this.line,k},_warn:function(x){"object"==typeof console?console.log("Warning("+this.line+"): "+x):_utils_env__WEBPACK_IMPORTED_MODULE_8__.Z.isBrowser&&document&&null!==document.getElementById(this.warnLog)&&(document.getElementById(this.warnLog).innerHTML+="Warning("+this.line+"): "+x+"<br />")},_log:function(x){"object"!=typeof window&&"object"==typeof self&&self.postMessage?self.postMessage({type:"log",msg:"Log: "+x.toString()}):console.log("Log: ",arguments)}});var parser=function(){var x=function(Ut,Se,Ue,et){for(Ue=Ue||{},et=Ut.length;et--;Ue[Ut[et]]=Se);return Ue},k=[2,14],$=[1,13],F=[1,37],X=[1,14],K=[1,15],O=[1,21],A=[1,16],M=[1,17],f=[1,33],C=[1,18],_=[1,19],v=[1,12],p=[1,59],m=[1,60],b=[1,58],P=[1,46],S=[1,48],Z=[1,49],I=[1,50],B=[1,51],j=[1,52],z=[1,53],G=[1,54],J=[1,45],W=[1,38],ee=[1,39],ae=[5,7,8,14,15,16,17,19,20,21,23,26,27,50,51,58,65,74,75,76,77,78,79,80,82,91,93],ue=[5,7,8,12,14,15,16,17,19,20,21,23,26,27,50,51,58,65,74,75,76,77,78,79,80,82,91,93],ie=[8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,83,86],Pe=[2,48],xe=[1,72],me=[10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,66,83,86],we=[1,78],Ae=[8,10,16,32,34,35,37,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,83,86],Ne=[1,82],ct=[8,10,16,32,34,35,37,39,45,46,47,48,50,51,53,54,55,57,64,65,66,83,86],wt=[1,83],Lt=[1,84],yi=[1,85],Pt=[8,10,16,32,34,35,37,39,41,42,43,50,51,53,54,55,57,64,65,66,83,86],qt=[1,89],$t=[1,90],mt=[1,91],bt=[1,92],En=[1,97],dt=[8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,53,54,55,57,64,65,66,83,86],$i=[1,103],ri=[1,104],Pn=[8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,57,64,65,66,83,86],fo=[1,105],po=[1,106],go=[1,107],pc=[1,126],gc=[1,139],Ya=[83,86],mc=[1,150],Va=[10,66,86],mo=[8,10,16,20,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,82,83,86],Ha=[1,167],zr=[10,86],_o={trace:function(){},yy:{},symbols_:{error:2,Program:3,StatementList:4,EOF:5,IfStatement:6,IF:7,"(":8,Expression:9,")":10,Statement:11,ELSE:12,LoopStatement:13,WHILE:14,FOR:15,";":16,DO:17,UnaryStatement:18,USE:19,IDENTIFIER:20,DELETE:21,ReturnStatement:22,RETURN:23,EmptyStatement:24,StatementBlock:25,"{":26,"}":27,ExpressionStatement:28,AssignmentExpression:29,ConditionalExpression:30,LeftHandSideExpression:31,"=":32,LogicalORExpression:33,"?":34,":":35,LogicalANDExpression:36,"||":37,EqualityExpression:38,"&&":39,RelationalExpression:40,"==":41,"!=":42,"~=":43,AdditiveExpression:44,"<":45,">":46,"<=":47,">=":48,MultiplicativeExpression:49,"+":50,"-":51,UnaryExpression:52,"*":53,"/":54,"%":55,ExponentExpression:56,"^":57,"!":58,MemberExpression:59,CallExpression:60,PrimaryExpression:61,FunctionExpression:62,MapExpression:63,".":64,"[":65,"]":66,BasicLiteral:67,ObjectLiteral:68,ArrayLiteral:69,NullLiteral:70,BooleanLiteral:71,StringLiteral:72,NumberLiteral:73,NULL:74,TRUE:75,FALSE:76,STRING:77,NUMBER:78,NAN:79,INFINITY:80,ElementList:81,"<<":82,">>":83,PropertyList:84,Property:85,",":86,PropertyName:87,Arguments:88,AttributeList:89,Attribute:90,FUNCTION:91,ParameterDefinitionList:92,MAP:93,"->":94,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",7:"IF",8:"(",10:")",12:"ELSE",14:"WHILE",15:"FOR",16:";",17:"DO",19:"USE",20:"IDENTIFIER",21:"DELETE",23:"RETURN",26:"{",27:"}",32:"=",34:"?",35:":",37:"||",39:"&&",41:"==",42:"!=",43:"~=",45:"<",46:">",47:"<=",48:">=",50:"+",51:"-",53:"*",54:"/",55:"%",57:"^",58:"!",64:".",65:"[",66:"]",74:"NULL",75:"TRUE",76:"FALSE",77:"STRING",78:"NUMBER",79:"NAN",80:"INFINITY",82:"<<",83:">>",86:",",91:"FUNCTION",93:"MAP",94:"->"},productions_:[0,[3,2],[6,5],[6,7],[13,5],[13,9],[13,7],[18,2],[18,2],[22,2],[22,3],[24,1],[25,3],[4,2],[4,0],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[28,2],[9,1],[29,1],[29,3],[30,1],[30,5],[33,1],[33,3],[36,1],[36,3],[38,1],[38,3],[38,3],[38,3],[40,1],[40,3],[40,3],[40,3],[40,3],[44,1],[44,3],[44,3],[49,1],[49,3],[49,3],[49,3],[56,1],[56,3],[52,1],[52,2],[52,2],[52,2],[31,1],[31,1],[59,1],[59,1],[59,1],[59,3],[59,4],[61,1],[61,1],[61,1],[61,1],[61,3],[67,1],[67,1],[67,1],[67,1],[70,1],[71,1],[71,1],[72,1],[73,1],[73,1],[73,1],[69,2],[69,3],[68,2],[68,3],[84,1],[84,3],[85,3],[87,1],[87,1],[87,1],[60,2],[60,3],[60,2],[60,4],[60,3],[88,2],[88,3],[89,1],[89,3],[90,1],[90,1],[81,1],[81,3],[62,4],[62,5],[63,5],[63,6],[92,1],[92,3]],performAction:function(Se,Ue,et,Mt,ft,pe,Le){var se=pe.length-1;switch(ft){case 1:return pe[se-1];case 2:this.$=Be.createNode(je(Le[se-4]),"node_op","op_if",pe[se-2],pe[se]);break;case 3:this.$=Be.createNode(je(Le[se-6]),"node_op","op_if_else",pe[se-4],pe[se-2],pe[se]);break;case 4:this.$=Be.createNode(je(Le[se-4]),"node_op","op_while",pe[se-2],pe[se]);break;case 5:this.$=Be.createNode(je(Le[se-8]),"node_op","op_for",pe[se-6],pe[se-4],pe[se-2],pe[se]);break;case 6:this.$=Be.createNode(je(Le[se-6]),"node_op","op_do",pe[se-5],pe[se-2]);break;case 7:this.$=Be.createNode(je(Le[se-1]),"node_op","op_use",pe[se]);break;case 8:this.$=Be.createNode(je(Le[se-1]),"node_op","op_delete",pe[se]);break;case 9:this.$=Be.createNode(je(Le[se-1]),"node_op","op_return",void 0);break;case 10:this.$=Be.createNode(je(Le[se-2]),"node_op","op_return",pe[se-1]);break;case 11:case 14:this.$=Be.createNode(je(Le[se]),"node_op","op_none");break;case 12:this.$=pe[se-1],this.$.needsBrackets=!0;break;case 13:this.$=Be.createNode(je(Le[se-1]),"node_op","op_none",pe[se-1],pe[se]);break;case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 23:case 24:case 26:case 28:case 30:case 32:case 36:case 41:case 44:case 48:case 50:case 52:case 54:case 55:case 56:case 58:case 62:case 81:case 84:case 85:case 86:this.$=pe[se];break;case 22:case 65:case 93:this.$=pe[se-1];break;case 25:this.$=Be.createNode(je(Le[se-2]),"node_op","op_assign",pe[se-2],pe[se]),this.$.isMath=!1;break;case 27:this.$=Be.createNode(je(Le[se-4]),"node_op","op_conditional",pe[se-4],pe[se-2],pe[se]),this.$.isMath=!1;break;case 29:this.$=Be.createNode(je(Le[se-2]),"node_op","op_or",pe[se-2],pe[se]),this.$.isMath=!1;break;case 31:this.$=Be.createNode(je(Le[se-2]),"node_op","op_and",pe[se-2],pe[se]),this.$.isMath=!1;break;case 33:this.$=Be.createNode(je(Le[se-2]),"node_op","op_eq",pe[se-2],pe[se]),this.$.isMath=!1;break;case 34:this.$=Be.createNode(je(Le[se-2]),"node_op","op_neq",pe[se-2],pe[se]),this.$.isMath=!1;break;case 35:this.$=Be.createNode(je(Le[se-2]),"node_op","op_approx",pe[se-2],pe[se]),this.$.isMath=!1;break;case 37:this.$=Be.createNode(je(Le[se-2]),"node_op","op_lt",pe[se-2],pe[se]),this.$.isMath=!1;break;case 38:this.$=Be.createNode(je(Le[se-2]),"node_op","op_gt",pe[se-2],pe[se]),this.$.isMath=!1;break;case 39:this.$=Be.createNode(je(Le[se-2]),"node_op","op_leq",pe[se-2],pe[se]),this.$.isMath=!1;break;case 40:this.$=Be.createNode(je(Le[se-2]),"node_op","op_geq",pe[se-2],pe[se]),this.$.isMath=!1;break;case 42:this.$=Be.createNode(je(Le[se-2]),"node_op","op_add",pe[se-2],pe[se]),this.$.isMath=!0;break;case 43:this.$=Be.createNode(je(Le[se-2]),"node_op","op_sub",pe[se-2],pe[se]),this.$.isMath=!0;break;case 45:this.$=Be.createNode(je(Le[se-2]),"node_op","op_mul",pe[se-2],pe[se]),this.$.isMath=!0;break;case 46:this.$=Be.createNode(je(Le[se-2]),"node_op","op_div",pe[se-2],pe[se]),this.$.isMath=!0;break;case 47:this.$=Be.createNode(je(Le[se-2]),"node_op","op_mod",pe[se-2],pe[se]),this.$.isMath=!0;break;case 49:this.$=Be.createNode(je(Le[se-2]),"node_op","op_exp",pe[se-2],pe[se]),this.$.isMath=!0;break;case 51:this.$=Be.createNode(je(Le[se-1]),"node_op","op_not",pe[se]),this.$.isMath=!1;break;case 53:this.$=Be.createNode(je(Le[se-1]),"node_op","op_neg",pe[se]),this.$.isMath=!0;break;case 57:case 63:case 64:case 66:case 67:case 68:case 97:this.$=pe[se],this.$.isMath=!1;break;case 59:case 91:this.$=Be.createNode(je(Le[se-2]),"node_op","op_property",pe[se-2],pe[se]),this.$.isMath=!0;break;case 60:case 90:this.$=Be.createNode(je(Le[se-3]),"node_op","op_extvalue",pe[se-3],pe[se-1]),this.$.isMath=!0;break;case 61:this.$=Be.createNode(je(Le[se]),"node_var",pe[se]);break;case 69:this.$=pe[se],this.$.isMath=!0;break;case 70:this.$=Be.createNode(je(Le[se]),"node_const",null);break;case 71:this.$=Be.createNode(je(Le[se]),"node_const_bool",!0);break;case 72:this.$=Be.createNode(je(Le[se]),"node_const_bool",!1);break;case 73:this.$=Be.createNode(je(Le[se]),"node_str",pe[se].substring(1,pe[se].length-1));break;case 74:this.$=Be.createNode(je(Le[se]),"node_const",parseFloat(pe[se]));break;case 75:this.$=Be.createNode(je(Le[se]),"node_const",NaN);break;case 76:this.$=Be.createNode(je(Le[se]),"node_const",1/0);break;case 77:this.$=Be.createNode(je(Le[se-1]),"node_op","op_array",[]);break;case 78:this.$=Be.createNode(je(Le[se-2]),"node_op","op_array",pe[se-1]);break;case 79:this.$=Be.createNode(je(Le[se-1]),"node_op","op_emptyobject",{}),this.$.needsAngleBrackets=!0;break;case 80:this.$=Be.createNode(je(Le[se-2]),"node_op","op_proplst_val",pe[se-1]),this.$.needsAngleBrackets=!0;break;case 82:this.$=Be.createNode(je(Le[se-2]),"node_op","op_proplst",pe[se-2],pe[se]);break;case 83:this.$=Be.createNode(je(Le[se-2]),"node_op","op_prop",pe[se-2],pe[se]);break;case 87:case 89:this.$=Be.createNode(je(Le[se-1]),"node_op","op_execfun",pe[se-1],pe[se]),this.$.isMath=!0;break;case 88:this.$=Be.createNode(je(Le[se-2]),"node_op","op_execfun",pe[se-2],pe[se-1],pe[se],!0),this.$.isMath=!1;break;case 92:this.$=[];break;case 94:case 98:case 104:this.$=[pe[se]];break;case 95:case 99:case 105:this.$=pe[se-2].concat(pe[se]);break;case 96:this.$=Be.createNode(je(Le[se]),"node_var",pe[se]),this.$.isMath=!0;break;case 100:this.$=Be.createNode(je(Le[se-3]),"node_op","op_function",[],pe[se]),this.$.isMath=!1;break;case 101:this.$=Be.createNode(je(Le[se-4]),"node_op","op_function",pe[se-2],pe[se]),this.$.isMath=!1;break;case 102:this.$=Be.createNode(je(Le[se-4]),"node_op","op_map",[],pe[se]);break;case 103:this.$=Be.createNode(je(Le[se-5]),"node_op","op_map",pe[se-3],pe[se])}},table:[x([5,7,8,14,15,16,17,19,20,21,23,26,50,51,58,65,74,75,76,77,78,79,80,82,91,93],k,{3:1,4:2}),{1:[3]},{5:[1,3],6:6,7:$,8:F,9:20,11:4,13:7,14:X,15:K,16:O,17:A,18:8,19:M,20:f,21:C,22:9,23:_,24:11,25:5,26:v,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,82:J,91:W,93:ee},{1:[2,1]},x(ae,[2,13]),x(ue,[2,15]),x(ue,[2,16]),x(ue,[2,17]),x(ue,[2,18]),x(ue,[2,19]),x(ue,[2,20]),x(ue,[2,21]),x([7,8,14,15,16,17,19,20,21,23,26,27,50,51,58,65,74,75,76,77,78,79,80,82,91,93],k,{4:61}),{8:[1,62]},{8:[1,63]},{8:[1,64]},{6:6,7:$,8:F,9:20,11:65,13:7,14:X,15:K,16:O,17:A,18:8,19:M,20:f,21:C,22:9,23:_,24:11,25:5,26:v,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,82:J,91:W,93:ee},{20:[1,66]},{20:[1,67]},{8:F,9:69,16:[1,68],20:f,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,82:J,91:W,93:ee},{16:[1,70]},x(ue,[2,11]),x(ie,[2,23]),x(ie,[2,24]),x([8,10,16,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,64,65,66,83,86],Pe,{32:[1,71],57:xe}),x([8,10,16,32,35,39,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,83,86],[2,26],{34:[1,73],37:[1,74]}),x(me,[2,54],{88:77,8:we,64:[1,75],65:[1,76]}),x(me,[2,55],{88:79,8:we,64:[1,81],65:[1,80]}),x(Ae,[2,28],{39:Ne}),x(ie,[2,56]),x(ie,[2,57]),x(ie,[2,58]),x(ct,[2,30],{41:wt,42:Lt,43:yi}),x(ie,[2,61]),x(ie,[2,62]),x(ie,[2,63]),x(ie,[2,64]),{8:F,9:86,20:f,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,82:J,91:W,93:ee},{8:[1,87]},{8:[1,88]},x(Pt,[2,32],{45:qt,46:$t,47:mt,48:bt}),x(ie,[2,66]),x(ie,[2,67]),x(ie,[2,68]),x(ie,[2,69]),{20:En,72:98,73:99,77:B,78:j,79:z,80:G,83:[1,93],84:94,85:95,87:96},{8:F,20:f,29:102,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,66:[1,100],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,81:101,82:J,91:W,93:ee},x(dt,[2,36],{50:$i,51:ri}),x(ie,[2,70]),x(ie,[2,71]),x(ie,[2,72]),x(ie,[2,73]),x(ie,[2,74]),x(ie,[2,75]),x(ie,[2,76]),x(Pn,[2,41],{53:fo,54:po,55:go}),x(ie,[2,44]),x(ie,[2,50]),{8:F,20:f,31:109,50:p,51:m,52:108,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,82:J,91:W,93:ee},{8:F,20:f,31:109,50:p,51:m,52:110,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,82:J,91:W,93:ee},{8:F,20:f,31:109,50:p,51:m,52:111,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,82:J,91:W,93:ee},{6:6,7:$,8:F,9:20,11:4,13:7,14:X,15:K,16:O,17:A,18:8,19:M,20:f,21:C,22:9,23:_,24:11,25:5,26:v,27:[1,112],28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,82:J,91:W,93:ee},{8:F,9:113,20:f,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,82:J,91:W,93:ee},{8:F,9:114,20:f,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,82:J,91:W,93:ee},{8:F,9:115,20:f,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,82:J,91:W,93:ee},{14:[1,116]},x(ue,[2,7]),x(ue,[2,8]),x(ue,[2,9]),{16:[1,117]},x(ue,[2,22]),{8:F,20:f,29:118,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,82:J,91:W,93:ee},{8:F,20:f,31:109,50:p,51:m,52:119,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,82:J,91:W,93:ee},{8:F,20:f,29:120,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,82:J,91:W,93:ee},{8:F,20:f,31:109,36:121,38:32,40:40,44:47,49:55,50:p,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,82:J,91:W,93:ee},{20:[1,122]},{8:F,9:123,20:f,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,82:J,91:W,93:ee},x(ie,[2,87],{89:124,90:125,68:127,20:pc,82:J}),{8:F,10:[1,128],20:f,29:102,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,81:129,82:J,91:W,93:ee},x(ie,[2,89]),{8:F,9:130,20:f,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,82:J,91:W,93:ee},{20:[1,131]},{8:F,20:f,31:109,38:132,40:40,44:47,49:55,50:p,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,82:J,91:W,93:ee},{8:F,20:f,31:109,40:133,44:47,49:55,50:p,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,82:J,91:W,93:ee},{8:F,20:f,31:109,40:134,44:47,49:55,50:p,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,82:J,91:W,93:ee},{8:F,20:f,31:109,40:135,44:47,49:55,50:p,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,82:J,91:W,93:ee},{10:[1,136]},{10:[1,137],20:gc,92:138},{10:[1,140],20:gc,92:141},{8:F,20:f,31:109,44:142,49:55,50:p,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,82:J,91:W,93:ee},{8:F,20:f,31:109,44:143,49:55,50:p,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,82:J,91:W,93:ee},{8:F,20:f,31:109,44:144,49:55,50:p,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,82:J,91:W,93:ee},{8:F,20:f,31:109,44:145,49:55,50:p,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,82:J,91:W,93:ee},x(ie,[2,79]),{83:[1,146],86:[1,147]},x(Ya,[2,81]),{35:[1,148]},{35:[2,84]},{35:[2,85]},{35:[2,86]},x(ie,[2,77]),{66:[1,149],86:mc},x(Va,[2,98]),{8:F,20:f,31:109,49:151,50:p,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,82:J,91:W,93:ee},{8:F,20:f,31:109,49:152,50:p,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,82:J,91:W,93:ee},{8:F,20:f,31:109,50:p,51:m,52:153,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,82:J,91:W,93:ee},{8:F,20:f,31:109,50:p,51:m,52:154,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,82:J,91:W,93:ee},{8:F,20:f,31:109,50:p,51:m,52:155,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,82:J,91:W,93:ee},x(ie,[2,51]),x([8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,64,65,66,83,86],Pe,{57:xe}),x(ie,[2,52]),x(ie,[2,53]),x([5,7,8,10,12,14,15,16,17,19,20,21,23,26,27,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,58,64,65,66,74,75,76,77,78,79,80,82,83,86,91,93],[2,12]),{10:[1,156]},{10:[1,157]},{16:[1,158]},{8:[1,159]},x(ue,[2,10]),x(ie,[2,25]),x(ie,[2,49]),{35:[1,160]},x(Ae,[2,29],{39:Ne}),x(ie,[2,59]),{66:[1,161]},x([8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,83],[2,88],{86:[1,162]}),x(ie,[2,94]),x(ie,[2,96]),x(ie,[2,97]),x(mo,[2,92]),{10:[1,163],86:mc},{66:[1,164]},x(ie,[2,91]),x(ct,[2,31],{41:wt,42:Lt,43:yi}),x(Pt,[2,33],{45:qt,46:$t,47:mt,48:bt}),x(Pt,[2,34],{45:qt,46:$t,47:mt,48:bt}),x(Pt,[2,35],{45:qt,46:$t,47:mt,48:bt}),x(ie,[2,65]),{25:165,26:v},{10:[1,166],86:Ha},x(zr,[2,104]),{94:[1,168]},{10:[1,169],86:Ha},x(dt,[2,37],{50:$i,51:ri}),x(dt,[2,38],{50:$i,51:ri}),x(dt,[2,39],{50:$i,51:ri}),x(dt,[2,40],{50:$i,51:ri}),x(ie,[2,80]),{20:En,72:98,73:99,77:B,78:j,79:z,80:G,85:170,87:96},{8:F,20:f,29:171,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,82:J,91:W,93:ee},x(ie,[2,78]),{8:F,20:f,29:172,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,82:J,91:W,93:ee},x(Pn,[2,42],{53:fo,54:po,55:go}),x(Pn,[2,43],{53:fo,54:po,55:go}),x(ie,[2,45]),x(ie,[2,46]),x(ie,[2,47]),{6:6,7:$,8:F,9:20,11:173,13:7,14:X,15:K,16:O,17:A,18:8,19:M,20:f,21:C,22:9,23:_,24:11,25:5,26:v,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,82:J,91:W,93:ee},{6:6,7:$,8:F,9:20,11:174,13:7,14:X,15:K,16:O,17:A,18:8,19:M,20:f,21:C,22:9,23:_,24:11,25:5,26:v,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,82:J,91:W,93:ee},{8:F,9:175,20:f,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,82:J,91:W,93:ee},{8:F,9:176,20:f,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,82:J,91:W,93:ee},{8:F,20:f,29:177,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,82:J,91:W,93:ee},x(ie,[2,60]),{20:pc,68:127,82:J,90:178},x(mo,[2,93]),x(ie,[2,90]),x(ie,[2,100]),{25:179,26:v},{20:[1,180]},{8:F,9:181,20:f,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,82:J,91:W,93:ee},{94:[1,182]},x(Ya,[2,82]),x(Ya,[2,83]),x(Va,[2,99]),x(ae,[2,2],{12:[1,183]}),x(ue,[2,4]),{16:[1,184]},{10:[1,185]},x(ie,[2,27]),x(ie,[2,95]),x(ie,[2,101]),x(zr,[2,105]),x(ie,[2,102]),{8:F,9:186,20:f,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,82:J,91:W,93:ee},{6:6,7:$,8:F,9:20,11:187,13:7,14:X,15:K,16:O,17:A,18:8,19:M,20:f,21:C,22:9,23:_,24:11,25:5,26:v,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,82:J,91:W,93:ee},{8:F,9:188,20:f,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,82:J,91:W,93:ee},{16:[1,189]},x(ie,[2,103]),x(ue,[2,3]),{10:[1,190]},x(ue,[2,6]),{6:6,7:$,8:F,9:20,11:191,13:7,14:X,15:K,16:O,17:A,18:8,19:M,20:f,21:C,22:9,23:_,24:11,25:5,26:v,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:P,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:S,75:Z,76:I,77:B,78:j,79:z,80:G,82:J,91:W,93:ee},x(ue,[2,5])],defaultActions:{3:[2,1],97:[2,84],98:[2,85],99:[2,86]},parseError:function(Se,Ue){if(!Ue.recoverable){var et=new Error(Se);throw et.hash=Ue,et}this.trace(Se)},parse:function(Se){var et=[0],ft=[null],pe=[],Le=this.table,se="",Gr=0,Xa=0,za=0,yc=pe.slice.call(arguments,1),Qt=Object.create(this.lexer),Zn={yy:{}};for(var $r in this.yy)Object.prototype.hasOwnProperty.call(this.yy,$r)&&(Zn.yy[$r]=this.yy[$r]);Qt.setInput(Se,Zn.yy),Zn.yy.lexer=Qt,Zn.yy.parser=this,typeof Qt.yylloc>"u"&&(Qt.yylloc={});var Jr=Qt.yylloc;pe.push(Jr);var Jt,$a=Qt.options&&Qt.options.ranges;this.parseError="function"==typeof Zn.yy.parseError?Zn.yy.parseError:Object.getPrototypeOf(this).parseError;for(var si,Wr,Dn,Ci,yo,Kr,un,qr,lr={};;){if(this.defaultActions[Dn=et[et.length-1]]?Ci=this.defaultActions[Dn]:((null===si||typeof si>"u")&&(Jt=void 0,"number"!=typeof(Jt=Qt.lex()||1)&&(Jt=this.symbols_[Jt]||Jt),si=Jt),Ci=Le[Dn]&&Le[Dn][si]),typeof Ci>"u"||!Ci.length||!Ci[0]){var bo;for(Kr in qr=[],Le[Dn])this.terminals_[Kr]&&Kr>2&&qr.push("'"+this.terminals_[Kr]+"'");bo=Qt.showPosition?"Parse error on line "+(Gr+1)+":\n"+Qt.showPosition()+"\nExpecting "+qr.join(", ")+", got '"+(this.terminals_[si]||si)+"'":"Parse error on line "+(Gr+1)+": Unexpected "+(1==si?"end of input":"'"+(this.terminals_[si]||si)+"'"),this.parseError(bo,{text:Qt.match,token:this.terminals_[si]||si,line:Qt.yylineno,loc:Jr,expected:qr})}if(Ci[0]instanceof Array&&Ci.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Dn+", token: "+si);switch(Ci[0]){case 1:et.push(si),ft.push(Qt.yytext),pe.push(Qt.yylloc),et.push(Ci[1]),si=null,Wr?(si=Wr,Wr=null):(Xa=Qt.yyleng,se=Qt.yytext,Gr=Qt.yylineno,Jr=Qt.yylloc,za>0&&za--);break;case 2:if(lr.$=ft[ft.length-(un=this.productions_[Ci[1]][1])],lr._$={first_line:pe[pe.length-(un||1)].first_line,last_line:pe[pe.length-1].last_line,first_column:pe[pe.length-(un||1)].first_column,last_column:pe[pe.length-1].last_column},$a&&(lr._$.range=[pe[pe.length-(un||1)].range[0],pe[pe.length-1].range[1]]),typeof(yo=this.performAction.apply(lr,[se,Xa,Gr,Zn.yy,Ci[1],ft,pe].concat(yc)))<"u")return yo;un&&(et=et.slice(0,-1*un*2),ft=ft.slice(0,-1*un),pe=pe.slice(0,-1*un)),et.push(this.productions_[Ci[1]][0]),ft.push(lr.$),pe.push(lr._$),et.push(Le[et[et.length-2]][et[et.length-1]]);break;case 3:return!0}}return!0}},Be={node:function(Ut,Se,Ue){return{type:Ut,value:Se,children:Ue}},createNode:function(Ut,Se,Ue,et){var Mt,ft=this.node(Se,Ue,[]);for(Mt=3;Mt<arguments.length;Mt++)ft.children.push(arguments[Mt]);return ft.line=Ut[0],ft.col=Ut[1],ft.eline=Ut[2],ft.ecol=Ut[3],ft}},je=function(Ut){return[Ut.first_line,Ut.first_column,Ut.last_line,Ut.last_column]};function vo(){this.yy={}}return _o.lexer={EOF:1,parseError:function(Ue,et){if(!this.yy.parser)throw new Error(Ue);this.yy.parser.parseError(Ue,et)},setInput:function(Se,Ue){return this.yy=Ue||this.yy||{},this._input=Se,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Se=this._input[0];return this.yytext+=Se,this.yyleng++,this.offset++,this.match+=Se,this.matched+=Se,Se.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Se},unput:function(Se){var Ue=Se.length,et=Se.split(/(?:\r\n?|\n)/g);this._input=Se+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Ue),this.offset-=Ue;var Mt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),et.length-1&&(this.yylineno-=et.length-1);var ft=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:et?(et.length===Mt.length?this.yylloc.first_column:0)+Mt[Mt.length-et.length].length-et[0].length:this.yylloc.first_column-Ue},this.options.ranges&&(this.yylloc.range=[ft[0],ft[0]+this.yyleng-Ue]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(Se){this.unput(this.match.slice(Se))},pastInput:function(){var Se=this.matched.substr(0,this.matched.length-this.match.length);return(Se.length>20?"...":"")+Se.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Se=this.match;return Se.length<20&&(Se+=this._input.substr(0,20-Se.length)),(Se.substr(0,20)+(Se.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Se=this.pastInput(),Ue=new Array(Se.length+1).join("-");return Se+this.upcomingInput()+"\n"+Ue+"^"},test_match:function(Se,Ue){var et,Mt,ft;if(this.options.backtrack_lexer&&(ft={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ft.yylloc.range=this.yylloc.range.slice(0))),(Mt=Se[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=Mt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Mt?Mt[Mt.length-1].length-Mt[Mt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Se[0].length},this.yytext+=Se[0],this.match+=Se[0],this.matches=Se,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Se[0].length),this.matched+=Se[0],et=this.performAction.call(this,this.yy,this,Ue,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),et)return et;if(this._backtrack){for(var pe in ft)this[pe]=ft[pe];return!1}return!1},next:function(){if(this.done)return this.EOF;var Se,Ue,et,Mt;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var ft=this._currentRules(),pe=0;pe<ft.length;pe++)if((et=this._input.match(this.rules[ft[pe]]))&&(!Ue||et[0].length>Ue[0].length)){if(Ue=et,Mt=pe,this.options.backtrack_lexer){if(!1!==(Se=this.test_match(et,ft[pe])))return Se;if(this._backtrack){Ue=!1;continue}return!1}if(!this.options.flex)break}return Ue?!1!==(Se=this.test_match(Ue,ft[Mt]))&&Se:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(Ue){this.conditionStack.push(Ue)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Ue){return(Ue=this.conditionStack.length-1-Math.abs(Ue||0))>=0?this.conditionStack[Ue]:"INITIAL"},pushState:function(Ue){this.begin(Ue)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(Ue,et,Mt,ft){switch(Mt){case 0:case 5:case 6:break;case 1:case 2:return 78;case 3:case 4:return 77;case 7:return 7;case 8:return 12;case 9:return 14;case 10:return 17;case 11:return 15;case 12:return 91;case 13:return 93;case 14:return 19;case 15:return 23;case 16:return 21;case 17:return 75;case 18:return 76;case 19:return 74;case 20:return 80;case 21:case 22:return 94;case 23:return 82;case 24:return 83;case 25:return 26;case 26:return 27;case 27:return 16;case 28:return"#";case 29:return 34;case 30:return 35;case 31:return 79;case 32:return 64;case 33:return 65;case 34:return 66;case 35:return 8;case 36:return 10;case 37:return 58;case 38:return 57;case 39:return 53;case 40:return 54;case 41:return 55;case 42:return 50;case 43:return 51;case 44:return 47;case 45:return 45;case 46:return 48;case 47:return 46;case 48:return 41;case 49:return 43;case 50:return 42;case 51:return 39;case 52:return 37;case 53:return 32;case 54:return 86;case 55:return 5;case 56:return 20;case 57:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:[0-9]+\.[0-9]*|[0-9]*\.[0-9]+\b)/,/^(?:[0-9]+)/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:\/\/.*)/,/^(?:\/\*(.|\n|\r)*?\*\/)/,/^(?:if\b)/,/^(?:else\b)/,/^(?:while\b)/,/^(?:do\b)/,/^(?:for\b)/,/^(?:function\b)/,/^(?:map\b)/,/^(?:use\b)/,/^(?:return\b)/,/^(?:delete\b)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:Infinity\b)/,/^(?:->)/,/^(?:=>)/,/^(?:<<)/,/^(?:>>)/,/^(?:\{)/,/^(?:\})/,/^(?:;)/,/^(?:#)/,/^(?:\?)/,/^(?::)/,/^(?:NaN\b)/,/^(?:\.)/,/^(?:\[)/,/^(?:\])/,/^(?:\()/,/^(?:\))/,/^(?:!)/,/^(?:\^)/,/^(?:\*)/,/^(?:\/)/,/^(?:%)/,/^(?:\+)/,/^(?:-)/,/^(?:<=)/,/^(?:<)/,/^(?:>=)/,/^(?:>)/,/^(?:==)/,/^(?:~=)/,/^(?:!=)/,/^(?:&&)/,/^(?:\|\|)/,/^(?:=)/,/^(?:,)/,/^(?:$)/,/^(?:[A-Za-z_\$][A-Za-z0-9_]*)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57],inclusive:!0}}},vo.prototype=_o,_o.Parser=vo,new vo}();parser.yy.parseError=parser.parseError;const __WEBPACK_DEFAULT_EXPORT__=_jxg__WEBPACK_IMPORTED_MODULE_0__.Z.JessieCode},500:(x,k,$)=>{$.d(k,{Z:()=>M});var F=$(917),X=$(695),K=$(515),O={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},A=[{re:/^\s*rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([\d.]{1,3})\s*\)\s*$/,example:["rgba(123, 234, 45, 0.5)","rgba(255,234,245,1.0)"],process:function(f){return[parseInt(f[1],10),parseInt(f[2],10),parseInt(f[3],10)]}},{re:/^\s*rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)\s*$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(f){return[parseInt(f[1],10),parseInt(f[2],10),parseInt(f[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(f){return[parseInt(f[1],16),parseInt(f[2],16),parseInt(f[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(f){return[parseInt(f[1]+f[1],16),parseInt(f[2]+f[2],16),parseInt(f[3]+f[3],16)]}}];F.Z.rgbParser=function(f,C,_){var v,p,b,P,S,Z,I,B,z,j=f;if(!X.Z.exists(f))return[];if(X.Z.exists(C)&&X.Z.exists(_)&&(j=[f,C,_]),z=!1,X.Z.isArray(v=j)){for(S=0;S<3;S++)z=z||/\./.test(j[S].toString());for(S=0;S<3;S++)z=z&&j[S]>=0&&j[S]<=1;return z?[Math.ceil(255*j[0]),Math.ceil(255*j[1]),Math.ceil(255*j[2])]:j}for("string"==typeof j&&(v=j),"#"===v.charAt(0)&&(v=v.substr(1,6)),v=v.replace(/ /g,"").toLowerCase(),v=O[v]||v,S=0;S<A.length;S++)b=A[S].process,(P=A[S].re.exec(v))&&(Z=(p=b(P))[0],I=p[1],B=p[2]);return isNaN(Z)||isNaN(I)||isNaN(B)?[]:[Z=Z<0||isNaN(Z)?0:Z>255?255:Z,I=I<0||isNaN(I)?0:I>255?255:I,B=B<0||isNaN(B)?0:B>255?255:B]},F.Z.rgb2css=function(f,C,_){var v;return"rgb("+(v=F.Z.rgbParser(f,C,_))[0]+", "+v[1]+", "+v[2]+")"},F.Z.rgb2hex=function(f,C,_){var v,p,m;return p=(v=F.Z.rgbParser(f,C,_))[1],m=v[2],v=(v=v[0]).toString(16),p=p.toString(16),m=m.toString(16),1===v.length&&(v="0"+v),1===p.length&&(p="0"+p),1===m.length&&(m="0"+m),"#"+v+p+m},F.Z.hex2rgb=function(f){return F.Z.deprecated("JXG.hex2rgb()","JXG.rgb2css()"),F.Z.rgb2css(f)},F.Z.hsv2rgb=function(f,C,_){var v,p,m,b,P,S,Z,I,B;if(f=(f%360+360)%360,0===C){if(!(isNaN(f)||f<K.Z.eps))return"#ffffff";v=_,p=_,m=_}else switch(S=f>=360?0:f,S/=60,P=Math.floor(S),b=S-P,Z=_*(1-C),I=_*(1-C*b),B=_*(1-C*(1-b)),P){case 0:v=_,p=B,m=Z;break;case 1:v=I,p=_,m=Z;break;case 2:v=Z,p=_,m=B;break;case 3:v=Z,p=I,m=_;break;case 4:v=B,p=Z,m=_;break;case 5:v=_,p=Z,m=I}return["#",v=2===(v=Math.round(255*v).toString(16)).length?v:1===v.length?"0"+v:"00",p=2===(p=Math.round(255*p).toString(16)).length?p:1===p.length?"0"+p:"00",m=2===(m=Math.round(255*m).toString(16)).length?m:1===m.length?"0"+m:"00"].join("")},F.Z.rgb2hsv=function(f,C,_){var v,p,m,b,P,S,Z,I,B,j,z,G,J;return p=(v=F.Z.rgbParser(f,C,_))[1],m=v[2],b=(v=v[0])/255,P=p/255,S=m/255,G=Math.max(v,p,m),I=(J=Math.min(v,p,m))/255,j=0,(z=Z=G/255)>0&&(j=(z-I)/z),B=1/(Z-I),j>0&&(G===v?B*=P-S:B=G===p?2+(S-b)*B:4+(b-P)*B),(B*=60)<0&&(B+=360),G===J&&(B=0),[B,j,z]},F.Z.rgb2LMS=function(f,C,_){var v,p,m,b,P,S,Z,I=[[.05059983,.08585369,.0095242],[.01893033,.08925308,.01370054],[.00292202,.00975732,.07145979]];return p=(v=F.Z.rgbParser(f,C,_))[1],m=v[2],v=v[0],v=Math.pow(v,.476190476),p=Math.pow(p,.476190476),m=Math.pow(m,.476190476),(Z=[b=v*I[0][0]+p*I[0][1]+m*I[0][2],P=v*I[1][0]+p*I[1][1]+m*I[1][2],S=v*I[2][0]+p*I[2][1]+m*I[2][2]]).l=b,Z.m=P,Z.s=S,Z},F.Z.LMS2rgb=function(f,C,_){var v,p,m,b,P=[[30.830854,-29.832659,1.610474],[-6.481468,17.715578,-2.532642],[-.37569,-1.199062,14.273846]],S=function(Z){for(var I=127,B=64;B>0;){if(Math.pow(I,.476190476)>Z)I-=B;else{if(Math.pow(I+1,.476190476)>Z)return I;I+=B}B/=2}return 254===I&&13.994955247<Z?255:I};return p=f*P[1][0]+C*P[1][1]+_*P[1][2],m=f*P[2][0]+C*P[2][1]+_*P[2][2],(b=[v=S(v=f*P[0][0]+C*P[0][1]+_*P[0][2]),p=S(p),m=S(m)]).r=v,b.g=p,b.b=m,b},F.Z.rgba2rgbo=function(f){var C;return 9===f.length&&"#"===f.charAt(0)?(C=parseInt(f.substr(7,2).toUpperCase(),16)/255,f=f.substr(0,7)):C=1,[f,C]},F.Z.rgbo2rgba=function(f,C){var _;return"none"===f?f:(1===(_=Math.round(255*C).toString(16)).length&&(_="0"+_),f+_)},F.Z.rgb2bw=function(f){var C,_,v,p="0123456789ABCDEF";return"none"===f||(v=F.Z.rgbParser(f),C=Math.floor(.3*v[0]+.59*v[1]+.11*v[2]),f="#"+(_=p.charAt(C>>4&15)+p.charAt(15&C))+_+_),f},F.Z.rgb2cb=function(f,C){var _,v,p,m,b,S,Z,I,B,j,z,J="0123456789ABCDEF";if("none"===f)return f;switch(v=(b=F.Z.rgb2LMS(f))[0],p=b[1],m=b[2],C=C.toLowerCase()){case"protanopia":S=-.06150039994295001,Z=.08277001656812001,I=-.013200141220000003,B=.05858939668799999,j=-.07934519995360001,z=.013289415272000003,v=m/p<.6903216543277437?-(Z*p+I*m)/S:-(j*p+z*m)/B;break;case"tritanopia":S=-.00058973116217,Z=.007690316482,I=-.01011703519052,B=.025495080838999994,j=-.0422740347,z=.017005316784,m=p/v<.8349489908460004?-(S*v+Z*p)/I:-(B*v+j*p)/z;break;default:S=-.06150039994295001,Z=.08277001656812001,I=-.013200141220000003,B=.05858939668799999,j=-.07934519995360001,z=.013289415272000003,p=m/v<.5763833686400911?-(S*v+I*m)/Z:-(B*v+z*m)/j}return _=F.Z.LMS2rgb(v,p,m),f="#"+(J.charAt(_[0]>>4&15)+J.charAt(15&_[0])),(f+=J.charAt(_[1]>>4&15)+J.charAt(15&_[1]))+(J.charAt(_[2]>>4&15)+J.charAt(15&_[2]))},F.Z.autoHighlight=function(f){var C=F.Z.rgba2rgbo(f),_=C[0],v=C[1];return"#"===f.charAt(0)?F.Z.rgbo2rgba(_,v*=v<.3?1.8:.4):f},F.Z.contrast=function(f,C,_,v){var p,b,P,S,Z;return C=C||"#000000",_=_||"#ffffff",v=v||7,p=F.Z.rgbParser(f),b=F.Z.rgbParser("#000000"),Z=(P=.2126*Math.pow(p[0]/255,2.2)+.7152*Math.pow(p[1]/255,2.2)+.0722*Math.pow(p[2]/255,2.2))>(S=.2126*Math.pow(b[0]/255,2.2)+.7152*Math.pow(b[1]/255,2.2)+.0722*Math.pow(b[2]/255,2.2))?Math.floor((P+.05)/(S+.05)):Math.floor((S+.05)/(P+.05)),(Z-=1)>v?C:_},F.Z.setClassicColors=function(){F.Z.Options.elements.strokeColor="blue",F.Z.Options.elements.fillColor="red",F.Z.Options.hatch.strokeColor="blue",F.Z.Options.angle.fillColor="#ff7f00",F.Z.Options.angle.highlightFillColor="#ff7f00",F.Z.Options.angle.strokeColor="#ff7f00",F.Z.Options.angle.label.strokeColor="blue",F.Z.Options.arc.strokeColor="blue",F.Z.Options.circle.center.fillColor="red",F.Z.Options.circle.center.strokeColor="blue",F.Z.Options.circumcircle.strokeColor="blue",F.Z.Options.circumcircle.center.fillColor="red",F.Z.Options.circumcircle.center.strokeColor="blue",F.Z.Options.circumcirclearc.strokeColor="blue",F.Z.Options.circumcirclesector.strokeColor="blue",F.Z.Options.circumcirclesector.fillColor="green",F.Z.Options.circumcirclesector.highlightFillColor="green",F.Z.Options.conic.strokeColor="blue",F.Z.Options.curve.strokeColor="blue",F.Z.Options.incircle.strokeColor="blue",F.Z.Options.incircle.center.fillColor="red",F.Z.Options.incircle.center.strokeColor="blue",F.Z.Options.inequality.fillColor="red",F.Z.Options.integral.fillColor="red",F.Z.Options.integral.curveLeft.color="red",F.Z.Options.integral.curveRight.color="red",F.Z.Options.line.strokeColor="blue",F.Z.Options.point.fillColor="red",F.Z.Options.point.strokeColor="red",F.Z.Options.polygon.fillColor="green",F.Z.Options.polygon.highlightFillColor="green",F.Z.Options.polygon.vertices.strokeColor="red",F.Z.Options.polygon.vertices.fillColor="red",F.Z.Options.regularpolygon.fillColor="green",F.Z.Options.regularpolygon.highlightFillColor="green",F.Z.Options.regularpolygon.vertices.strokeColor="red",F.Z.Options.regularpolygon.vertices.fillColor="red",F.Z.Options.riemannsum.fillColor="yellow",F.Z.Options.sector.fillColor="green",F.Z.Options.sector.highlightFillColor="green",F.Z.Options.semicircle.center.fillColor="red",F.Z.Options.semicircle.center.strokeColor="blue",F.Z.Options.slopetriangle.fillColor="red",F.Z.Options.slopetriangle.highlightFillColor="red",F.Z.Options.turtle.arrow.strokeColor="blue"},F.Z.extend(F.Z,{paletteWong:{black:"#000000",orange:"#E69F00",skyblue:"#56B4E9",bluishgreen:"#009E73",yellow:"#F0E442",darkblue:"#0072B2",vermillion:"#D55E00",reddishpurple:"#CC79A7",blue:"#0072B2",red:"#D55E00",green:"#009E73",purple:"#CC79A7",white:"#ffffff"}}),F.Z.palette=F.Z.paletteWong;const M=F.Z},658:(x,k,$)=>{$.d(k,{Z:()=>K});var F=$(917),X=$(695);F.Z.extendConstants(F.Z,{touchProperty:"touches"}),F.Z.extend(F.Z,{isTouchEvent:function(O){return F.Z.exists(O[F.Z.touchProperty])},isPointerEvent:function(O){return F.Z.exists(O.pointerId)},isMouseEvent:function(O){return!F.Z.isTouchEvent(O)&&!F.Z.isPointerEvent(O)},getNumberOfTouchPoints:function(O){var A=-1;return F.Z.isTouchEvent(O)&&(A=O[F.Z.touchProperty].length),A},isFirstTouch:function(O){var A=F.Z.getNumberOfTouchPoints(O);return F.Z.isPointerEvent(O)?O.isPrimary:1===A},isBrowser:"object"==typeof window&&"object"==typeof document,supportsES6:function(){try{return new Function("(a = 0) => a"),!0}catch{return!1}},supportsVML:function(){return this.isBrowser&&!!document.namespaces},supportsSVG:function(){return!!this.isBrowser&&!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect},supportsCanvas:function(){var O=!1;return this.isNode()&&(O=!0),O||this.isBrowser&&!!document.createElement("canvas").getContext},isNode:function(){return!this.isBrowser&&typeof process<"u"&&-1!==process.release.name.search(/node|io.js/)},isWebWorker:function(){return!this.isBrowser&&"object"==typeof self&&"function"==typeof self.postMessage},supportsPointerEvents:function(){return!!(this.isBrowser&&window.navigator&&(window.PointerEvent||window.navigator.pointerEnabled||window.navigator.msPointerEnabled))},isTouchDevice:function(){return this.isBrowser&&void 0!==window.ontouchstart},isAndroid:function(){return X.Z.exists(navigator)&&navigator.userAgent.toLowerCase().indexOf("android")>-1},isWebkitAndroid:function(){return this.isAndroid()&&navigator.userAgent.indexOf(" AppleWebKit/")>-1},isApple:function(){return X.Z.exists(navigator)&&(navigator.userAgent.indexOf("iPad")>-1||navigator.userAgent.indexOf("iPhone")>-1)},isWebkitApple:function(){return this.isApple()&&navigator.userAgent.search(/Mobile\/[0-9A-Za-z.]*Safari/)>-1},isMetroApp:function(){return"object"==typeof window&&window.clientInformation&&window.clientInformation.appVersion&&window.clientInformation.appVersion.indexOf("MSAppHost")>-1},isMozilla:function(){return X.Z.exists(navigator)&&navigator.userAgent.toLowerCase().indexOf("mozilla")>-1&&-1===navigator.userAgent.toLowerCase().indexOf("apple")},isFirefoxOS:function(){return X.Z.exists(navigator)&&-1===navigator.userAgent.toLowerCase().indexOf("android")&&-1===navigator.userAgent.toLowerCase().indexOf("apple")&&navigator.userAgent.toLowerCase().indexOf("mobile")>-1&&navigator.userAgent.toLowerCase().indexOf("mozilla")>-1},ieVersion:function(){var O,A,M=3;if("object"!=typeof document)return 0;A=(O=document.createElement("div")).getElementsByTagName("i");do{O.innerHTML="\x3c!--[if gt IE "+ ++M+"]><i></i><![endif]--\x3e"}while(A[0]);return M>4?M:void 0}(),getDimensions:function(O,A){var M,f,C,_,v,p,m,b,P,S=/\d+(\.\d*)?px/;if(!this.isBrowser||null===O)return{width:500,height:500};if(M=(A=A||document).getElementById(O),!X.Z.exists(M))throw new Error("\nJSXGraph: HTML container element '"+O+"' not found.");return"none"!==(f=M.style.display)&&null!==f?M.clientWidth>0&&M.clientHeight>0?{width:M.clientWidth,height:M.clientHeight}:(P=window.getComputedStyle?window.getComputedStyle(M):M.style,{width:S.test(P.width)?parseFloat(P.width):0,height:S.test(P.height)?parseFloat(P.height):0}):(_=(C=M.style).visibility,v=C.position,p=C.display,C.visibility="hidden",C.position="absolute",C.display="block",m=M.clientWidth,b=M.clientHeight,C.display=p,C.position=v,C.visibility=_,{width:m,height:b})},addEvent:function(O,A,M,f,C){var _=function(){return M.apply(f,arguments)};_.origin=M,"object"==typeof f&&X.Z.exists(f.BOARD_MODE_NONE)&&(f["x_internal"+A]=f["x_internal"+A]||[],f["x_internal"+A].push(_)),X.Z.exists(O)&&X.Z.exists(O.addEventListener)&&O.addEventListener(A,_,C=C||!1),X.Z.exists(O)&&X.Z.exists(O.attachEvent)&&O.attachEvent("on"+A,_)},removeEvent:function(O,A,M,f){var C;if(X.Z.exists(f))if(X.Z.exists(f["x_internal"+A]))if(X.Z.isArray(f["x_internal"+A]))if(-1!==(C=X.Z.indexOf(f["x_internal"+A],M,"origin"))){try{X.Z.exists(O)&&X.Z.exists(O.removeEventListener)&&O.removeEventListener(A,f["x_internal"+A][C],!1),X.Z.exists(O)&&X.Z.exists(O.detachEvent)&&O.detachEvent("on"+A,f["x_internal"+A][C])}catch{F.Z.debug("event not registered in browser: ("+A+" -- "+M+")")}f["x_internal"+A].splice(C,1)}else F.Z.debug("removeEvent: no such event function in internal list: "+M);else F.Z.debug("owner[x_internal + "+A+"] is not an array");else F.Z.debug("no such type: "+A);else F.Z.debug("no such owner")},removeAllEvents:function(O,A,M){var f;if(M["x_internal"+A]){for(f=M["x_internal"+A].length-1;f>=0;f--)F.Z.removeEvent(O,A,M["x_internal"+A][f].origin,M);M["x_internal"+A].length>0&&F.Z.debug("removeAllEvents: Not all events could be removed.")}},getPosition:function(O,A,M){var f,C,_,v=0,p=0;if(O||(O=window.event),M=M||document,X.Z.exists(_=O[F.Z.touchProperty])&&0===_.length&&(_=O.changedTouches),X.Z.exists(A)&&X.Z.exists(_))if(-1===A){for(C=_.length,f=0;f<C;f++)if(_[f]){O=_[f];break}}else O=_[A];return O.clientX&&(v=O.clientX,p=O.clientY),[v,p]},getOffset:function(O){var A,M=O,f=O,C=M.offsetLeft-M.scrollLeft,_=M.offsetTop-M.scrollTop;for(C=(A=this.getCSSTransform([C,_],M))[0],_=A[1],M=M.offsetParent;M;){for(C+=M.offsetLeft,_+=M.offsetTop,M.offsetParent&&(C+=M.clientLeft-M.scrollLeft,_+=M.clientTop-M.scrollTop),C=(A=this.getCSSTransform([C,_],M))[0],_=A[1],f=f.parentNode;f!==M;)C=(A=this.getCSSTransform([C+=f.clientLeft-f.scrollLeft,_+=f.clientTop-f.scrollTop],f))[0],_=A[1],f=f.parentNode;M=M.offsetParent}return[C,_]},getStyle:function(O,A){var M,f=O.ownerDocument;return f.defaultView&&f.defaultView.getComputedStyle?M=f.defaultView.getComputedStyle(O,null).getPropertyValue(A):O.currentStyle&&F.Z.ieVersion>=9?M=O.currentStyle[A]:O.style&&(A=A.replace(/-([a-z]|[0-9])/gi,function(C,_){return _.toUpperCase()}),M=O.style[A]),M},getProp:function(O,A){var M=parseInt(this.getStyle(O,A),10);return isNaN(M)?0:M},getCSSTransform:function(O,A){var M,f,C,v,p,m,b,P=["transform","webkitTransform","MozTransform","msTransform","oTransform"];for(p=P.length,M=0,C="";M<p;M++)if(X.Z.exists(A.style[P[M]])){C=A.style[P[M]];break}if(""!==C&&(v=C.indexOf("("))>0){for(f=0,m=(b=C.substring(v+1,(p=C.length)-1).split(",")).length;f<m;f++)b[f]=parseFloat(b[f]);0===C.indexOf("matrix")?(O[0]+=b[4],O[1]+=b[5]):0===C.indexOf("translateX")?O[0]+=b[0]:0===C.indexOf("translateY")?O[1]+=b[0]:0===C.indexOf("translate")&&(O[0]+=b[0],O[1]+=b[1])}return X.Z.exists(A.style.zoom)&&""!==(C=A.style.zoom)&&(O[0]*=parseFloat(C),O[1]*=parseFloat(C)),O},getCSSTransformMatrix:function(O){var A,M,f,_,v,p,m,b,P=O.ownerDocument,S=["transform","webkitTransform","MozTransform","msTransform","oTransform"],Z=[[1,0,0],[0,1,0],[0,0,1]];if(P.defaultView&&P.defaultView.getComputedStyle)f=(b=P.defaultView.getComputedStyle(O,null)).getPropertyValue("-webkit-transform")||b.getPropertyValue("-moz-transform")||b.getPropertyValue("-ms-transform")||b.getPropertyValue("-o-transform")||b.getPropertyValue("transform");else for(v=S.length,A=0,f="";A<v;A++)if(X.Z.exists(O.style[S[A]])){f=O.style[S[A]];break}if(""!==f&&(_=f.indexOf("("))>0){for(M=0,p=(m=f.substring(_+1,(v=f.length)-1).split(",")).length;M<p;M++)m[M]=parseFloat(m[M]);0===f.indexOf("matrix")?Z=[[1,0,0],[0,m[0],m[1]],[0,m[2],m[3]]]:0===f.indexOf("scaleX")?Z[1][1]=m[0]:0===f.indexOf("scaleY")?Z[2][2]=m[0]:0===f.indexOf("scale")&&(Z[1][1]=m[0],Z[2][2]=m[1])}return X.Z.exists(O.style.zoom)&&""!==(f=O.style.zoom)&&(Z[1][1]*=parseFloat(f),Z[2][2]*=parseFloat(f)),Z},timedChunk:function(O,A,M,f){var C=O.concat(),_=function(){var v=+new Date;do{A.call(M,C.shift())}while(C.length>0&&+new Date-v<300);C.length>0?window.setTimeout(_,1):f(O)};window.setTimeout(_,1)},scaleJSXGraphDiv:function(O,A,M,f){var _,p,m,b,P,S,Z,I,z,W,C=M.styleSheets.length,j=f,G=[":fullscreen",":-webkit-full-screen",":-moz-full-screen",":-ms-fullscreen"],J=G.length,ee=new RegExp(".*#"+O+":.*full.*screen.*#"+A+".*auto;.*transform:.*matrix");for(m=(b=M.getElementById(O).getBoundingClientRect()).height,p=b.width,z="{margin:0 auto;transform:matrix("+(I=(P=(Z=M.getElementById(A).getBoundingClientRect()).width)/(S=Z.height)>=p/m?j*p/P:j*m/S)+",0,0,"+I+",0,"+.5*(m-S)+");}",0===C&&((_=document.createElement("style")).appendChild(document.createTextNode("")),M.appendChild(_),C=M.styleSheets.length),M.styleSheets[C-1].cssRules.length>0&&ee.test(M.styleSheets[C-1].cssRules[0].cssText)&&M.styleSheets[C-1].deleteRule&&M.styleSheets[C-1].deleteRule(0),W=0;W<J;W++)try{M.styleSheets[C-1].insertRule("#"+O+G[W]+" #"+A+z,0);break}catch{}W===J&&(console.log("JXG.scaleJSXGraphDiv: Could not add any CSS rule."),console.log("One possible reason could be that the id of the JSXGraph container does not start with a letter."))}});const K=F.Z},131:(x,k,$)=>{$.d(k,{Z:()=>K});var F=$(917),X=$(695);F.Z.EventEmitter={eventHandlers:{},suspended:{},trigger:function(O,A){var M,f,C,_,v,p;for(v=O.length,f=0;f<v;f++)if(_=this.eventHandlers[O[f]],!this.suspended[O[f]]){if(this.suspended[O[f]]=!0,_)for(p=_.length,M=0;M<p;M++)(C=_[M]).handler.apply(C.context,A);this.suspended[O[f]]=!1}return this},on:function(O,A,M){return X.Z.isArray(this.eventHandlers[O])||(this.eventHandlers[O]=[]),M=X.Z.def(M,this),this.eventHandlers[O].push({handler:A,context:M}),this},off:function(O,A){var M;return O&&X.Z.isArray(this.eventHandlers[O])?(A?((M=X.Z.indexOf(this.eventHandlers[O],A,"handler"))>-1&&this.eventHandlers[O].splice(M,1),0===this.eventHandlers[O].length&&delete this.eventHandlers[O]):delete this.eventHandlers[O],this):this},eventify:function(O){O.eventHandlers={},O.on=this.on,O.off=this.off,O.triggerEventHandlers=this.trigger,O.trigger=this.trigger,O.suspended={}}};const K=F.Z.EventEmitter},819:(x,k,$)=>{$.d(k,{Z:()=>M});var F=$(917),X=$(695),K=$(222),O=$(70),A={each:function(f,C,_){var v,p,m=[];if(X.Z.exists(f.length))for(p=f.length,v=0;v<p;v++)m.push(C.call(this,f[v],_));return m},coords:function(f,C){var _=f;return f&&f.elementClass===K.Z.OBJECT_CLASS_POINT?_=f.coords:f.usrCoords&&f.scrCoords&&f.usr2screen&&(_=f),C&&(_=new O.Z(K.Z.COORDS_BY_USER,_.usrCoords,_.board)),_},coordsArray:function(f,C){var _;return(_=X.Z.isArray(f)?f:this.coords(f).usrCoords).length<3&&_.unshift(1),C&&(_=[_[0],_[1],_[2]]),_}};F.Z.Expect=A;const M=A},695:(x,k,$)=>{$.d(k,{Z:()=>K});var F=$(917),X=$(222);F.Z.extend(F.Z,{isBoard:function(O){return null!==O&&"object"==typeof O&&this.isNumber(O.BOARD_MODE_NONE)&&this.isObject(O.objects)&&this.isObject(O.jc)&&this.isFunction(O.update)&&!!O.containerObj&&this.isString(O.id)},isId:function(O,A){return"string"==typeof A&&!!O.objects[A]},isName:function(O,A){return"string"==typeof A&&!!O.elementsByName[A]},isGroup:function(O,A){return"string"==typeof A&&!!O.groups[A]},isString:function(O){return"string"==typeof O},isNumber:function(O,A){var M="number"==typeof O||"[Object Number]"===Object.prototype.toString.call(O);return(A=A||!1)?M&&!isNaN(O):M},isFunction:function(O){return"function"==typeof O},isArray:function(O){return Array.isArray?Array.isArray(O):null!==O&&"object"==typeof O&&"function"==typeof O.splice&&"function"==typeof O.join},isObject:function(O){return"object"==typeof O&&!this.isArray(O)},isDocumentOrFragment:function(O){return this.isObject(O)&&(9===O.nodeType||11===O.nodeType)},isPoint:function(O){return!(null===O||"object"!=typeof O||!this.exists(O.elementClass))&&O.elementClass===X.Z.OBJECT_CLASS_POINT},isPoint3D:function(O){return!(null===O||"object"!=typeof O||!this.exists(O.elType))&&"point3d"===O.elType},isPointType:function(O,A){var M,f;return!!(this.isArray(A)||this.isFunction(A)&&(M=A(),this.isArray(M)&&M.length>1))||(f=O.select(A),this.isPoint(f))},isTransformationOrArray:function(O){if(null!==O){if(this.isArray(O)&&O.length>0)return this.isTransformationOrArray(O[0]);if("object"==typeof O)return O.type===X.Z.OBJECT_TYPE_TRANSFORMATION}return!1},isEmpty:function(O){return 0===Object.keys(O).length},exists:function(O,A){var M=!(null==O||null===O);return(A=A||!1)?M&&""!==O:M},def:function(O,A){return this.exists(O)?O:A},str2Bool:function(O){return!this.exists(O)||("boolean"==typeof O?O:!!this.isString(O)&&"true"===O.toLowerCase())},createEvalFunction:function(O,A,M){var C,_,v,f=[],p={};for(_=0;_<M;_++)for(v in f[_]=F.Z.createFunction(A[_],O,"",!0),f[_].deps)p[v]=f[_].deps;return(C=function(m){return f[m]()}).deps=p,C},createFunction:function(O,A,M,f){var C=null;return this.exists(f)&&!f||!this.isString(O)?this.isFunction(O)?(C=O).deps={}:(this.isNumber(O)||this.isString(O))&&((C=function(){return O}).deps={}):C=A.jc.snippet(O,!0,M,!0),null!==C&&(C.origin=O),C},providePoints:function(O,A,M,f,C){var _,v,p,P,S,m=0,b=[];for(this.isArray(A)||(A=[A]),p=A.length,this.exists(C)&&(m=C.length),0===m&&(P=this.copyAttributes(M,O.options,f)),_=0;_<p;++_)if(m>0&&(v=Math.min(_,m-1),P=this.copyAttributes(M,O.options,f,C[v])),this.isArray(A[_])&&A[_].length>1?(b.push(O.create("point",A[_],P)),b[b.length-1]._is_new=!0):this.isFunction(A[_])?(S=A[_](),this.isArray(S)&&S.length>1&&(b.push(O.create("point",[A[_]],P)),b[b.length-1]._is_new=!0)):b.push(O.select(A[_])),!this.isPoint(b[_]))return!1;return b},providePoints3D:function(O,A,M,f,C){var _,v,p,P,S,m=0,b=[];for(this.isArray(A)||(A=[A]),p=A.length,this.exists(C)&&(m=C.length),0===m&&(P=this.copyAttributes(M,O.board.options,f)),_=0;_<p;++_)if(m>0&&(v=Math.min(_,m-1),P=this.copyAttributes(M,O.board.options,f,C[v])),this.isArray(A[_])&&A[_].length>1?(b.push(O.create("point3d",A[_],P)),b[b.length-1]._is_new=!0):this.isFunction(A[_])?(S=A[_](),this.isArray(S)&&S.length>1&&(b.push(O.create("point3d",[A[_]],P)),b[b.length-1]._is_new=!0)):b.push(O.select(A[_])),!this.isPoint3D(b[_]))return!1;return b},bind:function(O,A){return function(){return O.apply(A,arguments)}},evaluate:function(O){return this.isFunction(O)?O():O},indexOf:function(O,A,M){var f,C=this.exists(M);if(Array.indexOf&&!C)return O.indexOf(A);for(f=0;f<O.length;f++)if(C&&O[f][M]===A||!C&&O[f]===A)return f;return-1},eliminateDuplicates:function(O){var A,M=O.length,f=[],C={};for(A=0;A<M;A++)C[O[A]]=0;for(A in C)C.hasOwnProperty(A)&&f.push(A);return f},swap:function(O,A,M){var f;return f=O[A],O[A]=O[M],O[M]=f,O},uniqueArray:function(O){var A,M,f,C=[];if(0===O.length)return[];for(A=0;A<O.length;A++)if(f=this.isArray(O[A]),this.exists(O[A]))for(M=A+1;M<O.length;M++)f&&F.Z.cmpArrays(O[A],O[M])?O[A]=[]:!f&&O[A]===O[M]&&(O[A]="");else O[A]="";for(M=0,A=0;A<O.length;A++)(f=this.isArray(O[A]))||""===O[A]?f&&0!==O[A].length&&(C[M]=O[A].slice(0),M++):(C[M]=O[A],M++);return O=C,C},isInArray:function(O,A){return F.Z.indexOf(O,A)>-1},coordsArrayToMatrix:function(O,A){var M,f=[],C=[];for(M=0;M<O.length;M++)A?(f.push(O[M].usrCoords[1]),C.push(O[M].usrCoords[2])):C.push([O[M].usrCoords[1],O[M].usrCoords[2]]);return A&&(C=[f,C]),C},cmpArrays:function(O,A){var M;if(O===A)return!0;if(O.length!==A.length)return!1;for(M=0;M<O.length;M++)if(this.isArray(O[M])&&this.isArray(A[M])){if(!this.cmpArrays(O[M],A[M]))return!1}else if(O[M]!==A[M])return!1;return!0},removeElementFromArray:function(O,A){var M;for(M=0;M<O.length;M++)if(O[M]===A)return O.splice(M,1),O;return O},trunc:function(O,A){return A=F.Z.def(A,0),this.toFixed(O,A)},_decimalAdjust:function(O,A,M){return void 0===M||0==+M?Math[O](A):(A=+A,M=+M,isNaN(A)||"number"!=typeof M||M%1!=0?NaN:(A=A.toString().split("e"),+((A=(A=Math[O](+(A[0]+"e"+(A[1]?+A[1]-M:-M)))).toString().split("e"))[0]+"e"+(A[1]?+A[1]+M:M))))},_round10:function(O,A){return this._decimalAdjust("round",O,A)},_floor10:function(O,A){return this._decimalAdjust("floor",O,A)},_ceil10:function(O,A){return this._decimalAdjust("ceil",O,A)},toFixed:function(O,A){return this._round10(O,-A).toFixed(A)},autoDigits:function(O){var A=Math.abs(O);return A>=.1?this.toFixed(O,2):A>=.01?this.toFixed(O,4):A>=1e-4?this.toFixed(O,6):O},keys:function(O,A){var f,M=[];for(f in O)A?O.hasOwnProperty(f)&&M.push(f):M.push(f);return M},clone:function(O){var A={};return A.prototype=O,A},cloneAndCopy:function(O,A){var M,f=function(){};for(M in f.prototype=O,A)f[M]=A[M];return f},merge:function(O,A){var M,f,C;for(M in A)if(A.hasOwnProperty(M))if(this.isArray(C=A[M]))for(O[M]||(O[M]=[]),f=0;f<C.length;f++)O[M][f]="object"==typeof A[M][f]?this.merge(O[M][f],A[M][f]):A[M][f];else"object"==typeof C?(O[M]||(O[M]={}),O[M]=this.merge(O[M],C)):O[M]=C;return O},deepCopy:function(O,A,M){var f,C,_,v;if(M=M||!1,"object"!=typeof O||null===O)return O;if(this.isArray(O))for(f=[],C=0;C<O.length;C++)f[C]="object"==typeof(_=O[C])?this.exists(_.board)?_.id:this.deepCopy(_):_;else{for(C in f={},O)O.hasOwnProperty(C)&&(f[v=M?C.toLowerCase():C]=null!==(_=O[C])&&"object"==typeof _?this.exists(_.board)?_.id:this.deepCopy(_):_);for(C in A)A.hasOwnProperty(C)&&(f[v=M?C.toLowerCase():C]="object"==typeof(_=A[C])?this.isArray(_)||!this.exists(f[v])?this.deepCopy(_):this.deepCopy(f[v],_,M):_)}return f},mergeAttr:function(O,A,M){var f,C,_;for(f in M=M||!0,A)A.hasOwnProperty(f)&&(C=M?f.toLowerCase():f,!this.isObject(_=A[f])||null===_||this.isDocumentOrFragment(_)||this.exists(_.board)||"string"==typeof _.valueOf()?O[C]=_:((null==O[C]||!this.isObject(O[C]))&&(O[C]={}),this.mergeAttr(O[C],_,M)))},copyAttributes:function(O,A,M){var f,C,_,v,p;for(f=(_=arguments.length)<3||{circle:1,curve:1,foreignobject:1,image:1,line:1,point:1,polygon:1,text:1,ticks:1,integral:1}[M]?F.Z.deepCopy(A.elements,null,!0):{},_<4&&this.exists(M)&&this.exists(A.layer[M])&&(f.layer=A.layer[M]),v=A,p=!0,C=2;C<_;C++){if(!this.exists(v[arguments[C]])){p=!1;break}v=v[arguments[C]]}for(p&&(f=F.Z.deepCopy(f,v,!0)),v="object"==typeof O?O:{},p=!0,C=3;C<_;C++){if(!this.exists(v[arguments[C]])){p=!1;break}v=v[arguments[C]]}if(p&&this.mergeAttr(f,v,!0),"board"===arguments[2])return f;for(v=A,p=!0,C=2;C<_;C++){if(!this.exists(v[arguments[C]])){p=!1;break}v=v[arguments[C]]}return p&&this.exists(v.label)&&(f.label=F.Z.deepCopy(v.label,f.label)),f.label=F.Z.deepCopy(A.label,f.label),f},copyPrototypeMethods:function(O,A,M){var f;for(f in O.prototype[M]=A.prototype.constructor,A.prototype)A.prototype.hasOwnProperty(f)&&(O.prototype[f]=A.prototype[f])},toJSON:function(O,A){var M,f,C,v;if(A=F.Z.def(A,!1),JSON.stringify&&!A)try{return JSON.stringify(O)}catch{}switch(typeof O){case"object":if(O){if(M=[],this.isArray(O)){for(C=0;C<O.length;C++)M.push(F.Z.toJSON(O[C],A));return"["+M.join(",")+"]"}for(f in O)if(O.hasOwnProperty(f)){try{v=F.Z.toJSON(O[f],A)}catch{v=""}M.push(A?f+":"+v:'"'+f+'":'+v)}return"{"+M.join(",")+"} "}return"null";case"string":return"'"+O.replace(/(["'])/g,"\\$1")+"'";case"number":case"boolean":return O.toString()}return"0"},clearVisPropOld:function(O){return O.visPropOld={cssclass:"",cssdefaultstyle:"",cssstyle:"",fillcolor:"",fillopacity:"",firstarrow:!1,fontsize:-1,lastarrow:!1,left:-1e5,linecap:"",shadow:!1,strokecolor:"",strokeopacity:"",strokewidth:"",tabindex:-1e5,transitionduration:0,top:-1e5,visible:null},O},isInObject:function(O,A){var M;for(M in O)if(O.hasOwnProperty(M)&&O[M]===A)return!0;return!1},escapeHTML:function(O){return O.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},unescapeHTML:function(O){return O.replace(/<\/?[^>]+>/gi,"").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")},capitalize:function(O){return O.charAt(0).toUpperCase()+O.substring(1).toLowerCase()},trimNumber:function(O){return("."===(O=(O=O.replace(/^0+/,"")).replace(/0+$/,""))[O.length-1]||","===O[O.length-1])&&(O=O.slice(0,-1)),("."===O[0]||","===O[0])&&(O="0"+O),O},filterElements:function(O,A){var M,f,C,_,v,p,m,b=O.length,P=[];if("function"!=typeof A&&"object"!=typeof A)return P;for(M=0;M<b;M++){if(m=!0,C=O[M],"object"==typeof A){for(f in A)if(A.hasOwnProperty(f)&&(_=f.toLowerCase(),v="function"==typeof C[f]?C[f]():C[f],p=C.visProp&&"function"==typeof C.visProp[_]?C.visProp[_]():C.visProp&&C.visProp[_],!(m="function"==typeof A[f]?A[f](v)||A[f](p):v===A[f]||p===A[f])))break}else"function"==typeof A&&(m=A(C));m&&P.push(C)}return P},trim:function(O){return O.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},sanitizeHTML:function(O,A){return"function"==typeof html_sanitize&&A?html_sanitize(O,function(){},function(M){return M}):(O&&"string"==typeof O&&(O=O.replace(/</g,"&lt;").replace(/>/g,"&gt;")),O)},evalSlider:function(O){return O&&O.type===X.Z.OBJECT_TYPE_GLIDER&&"function"==typeof O.Value?O.Value():O}});const K=F.Z}},x=>{x(x.s=459)}]);